(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+HCH":function(e,t,i){"use strict";i.d(t,"a",function(){return h});var a=i("fXoL"),s=i("LRne"),n=i("TOXQ"),o=i("3Pt+"),r=i("aceb"),c=i("ofXK");function d(e,t){if(1&e&&(a.Wb(0,"nb-option",19),a.Fc(1),a.Vb()),2&e){const e=t.$implicit,i=t.index,s=a.hc();a.nc("value",e),a.Eb(1),a.Jc(" ",e.companyName," | ",s.dateStrings[i]," | ",e.trashAmount," kg ")}}const l=function(){return{standalone:!0}};let h=(()=>{class e{constructor(e){this.transactionService=e,this.callProcessTrash=new a.o,this.storageAmmountUnit="KG",this.dateStrings=[],this.leftoverTrashCreated=!1}ngOnInit(){this.transactionService.getTransportersTransactions(this.selectedTrash._id).subscribe(e=>{this.transactions=e,this.transactions$=Object(s.a)(e),this.dateStrings=[],this.transactions.forEach(e=>{this.dateStrings.push(e.date.toString().slice(0,10))})})}onChange(e){const t=e.toLowerCase();this.transactions$=Object(s.a)(this.transactions.filter(e=>e.companyName.includes(t)))}chooseTransaction(e,t){this.selectedTransaction=t,"-"!==e.value&&(e.value=t.companyName+" | "+t.trashAmount+" kg")}callProcessTrashMethod(){"KG"!==this.storageAmmountUnit&&(this.trashAmmount*=1e3),this.callProcessTrash.emit({selectedTransaction:this.selectedTransaction,trashAmmount:this.trashAmmount,trashCreated:this.leftoverTrashCreated})}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(n.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["process-trash-popup"]],inputs:{selectedTrash:"selectedTrash"},outputs:{callProcessTrash:"callProcessTrash"},decls:41,vars:24,consts:[[2,"max-width","50vw"],[3,"ngSubmit"],["obradiForm","ngForm"],[1,"row"],[1,"label","col-12"],[1,"col-12"],["nbInput","","fullWidth","","type","text","name","transaction-input","placeholder","Unesi naziv firme",3,"ngModelOptions","ngModel","nbAutocomplete","ngModelChange","input"],["autoInput",""],["fullWidth","",3,"selectedChange"],["auto",""],["value","-"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-10"],["nbInput","","name","kolicinaOtpada","fullWidth","","type","number","onkeypress","return /[0-9.]/i.test(event.key)","min","1",3,"disabled","max","ngModelOptions","ngModel","ngModelChange"],["kolicina",""],[1,"pl-0","col-2"],["fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value"],[1,"row","my-2"],["nbButton","","fullWidth","","type","submit",3,"disabled","status"]],template:function(e,t){if(1&e){const e=a.Xb();a.Wb(0,"div",0),a.Wb(1,"form",1,2),a.dc("ngSubmit",function(){return t.callProcessTrashMethod()}),a.Wb(3,"div",3),a.Wb(4,"label",4),a.Fc(5,"Odaberi otpad koje firme: "),a.Rb(6,"br"),a.Fc(7,"(Naziv firme | Datum | Koli\u010dina otpada)"),a.Vb(),a.Wb(8,"div",5),a.Wb(9,"input",6,7),a.dc("ngModelChange",function(e){return t.selectedTransaction=e})("input",function(){a.xc(e);const i=a.vc(10);return t.onChange(i.value)}),a.Vb(),a.Wb(11,"nb-autocomplete",8,9),a.dc("selectedChange",function(i){a.xc(e);const s=a.vc(10);return t.chooseTransaction(s,i)}),a.Wb(13,"nb-option",10),a.Fc(14,"-"),a.Vb(),a.Dc(15,d,2,4,"nb-option",11),a.ic(16,"async"),a.Vb(),a.Vb(),a.Vb(),a.Wb(17,"div",3),a.Wb(18,"div",12),a.Wb(19,"nb-toggle",13),a.dc("ngModelChange",function(e){return t.leftoverTrashCreated=e}),a.Fc(20," Da li nastaje neki otpad tokom odlaganje? "),a.Vb(),a.Vb(),a.Vb(),a.Wb(21,"div",3),a.Wb(22,"label",4),a.Fc(23,"Odaberi koli\u010dinu za preradu:"),a.Vb(),a.Wb(24,"div",14),a.Wb(25,"input",15,16),a.dc("ngModelChange",function(e){return t.trashAmmount=e}),a.Vb(),a.Vb(),a.Wb(27,"div",17),a.Wb(28,"nb-select",18),a.dc("ngModelChange",function(e){return t.storageAmmountUnit=e}),a.Wb(29,"nb-option",19),a.Fc(30,"KG"),a.Vb(),a.Wb(31,"nb-option",19),a.Fc(32,"T"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(33,"div",20),a.Wb(34,"div",5),a.Wb(35,"p"),a.Fc(36),a.Vb(),a.Vb(),a.Vb(),a.Wb(37,"div",3),a.Wb(38,"div",5),a.Wb(39,"button",21),a.Fc(40," Obradi "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=a.vc(12),i=a.vc(26);a.Eb(9),a.nc("ngModelOptions",a.qc(20,l))("ngModel",t.selectedTransaction)("nbAutocomplete",e),a.Eb(6),a.nc("ngForOf",a.jc(16,18,t.transactions$)),a.Eb(4),a.nc("ngModel",t.leftoverTrashCreated)("ngModelOptions",a.qc(21,l)),a.Eb(6),a.nc("disabled",void 0===t.selectedTransaction)("max",null==t.selectedTransaction?null:t.selectedTransaction.trashAmount)("ngModelOptions",a.qc(22,l))("ngModel",t.trashAmmount),a.Eb(3),a.nc("ngModelOptions",a.qc(23,l))("selected","KG")("ngModel",t.storageAmmountUnit),a.Eb(1),a.nc("value","KG"),a.Eb(2),a.nc("value","T"),a.Eb(5),a.Hc("Trenutna kolicina otpada na skladistu: ",t.selectedTrash.amount," KG"),a.Eb(3),a.nc("disabled",i.value<1||void 0===i.value)("status","primary")}},directives:[o.v,o.l,o.m,r.T,o.b,r.r,o.k,o.n,r.q,r.ib,c.m,r.Nb,o.p,r.tb,r.t],pipes:[c.b],styles:[""]}),e})()},"7IaX":function(e,t,i){"use strict";i.d(t,"a",function(){return a});const a={hideSubHeader:!0,pager:{perPage:4},actions:{columnTitle:"Odaberi",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus-square"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj",width:"15%"},name:{title:"Naziv",width:"75%"}}}},"7Oz7":function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("AytR"),s=i("fXoL"),n=i("tk/3"),o=i("McNs");let r=(()=>{class e extends class{}{constructor(e,t){super(),this.http=e,this.authService=t,this.apiUrl=a.a.apiUrl}createStorage(e){return this.http.post(this.apiUrl+"/api/storage",e)}deleteStorage(e,t="_id"){return this.http.delete(this.apiUrl+"/api/storage/one/"+`${t}/${e}`)}getStorage(e,t="_id"){return this.http.get(this.apiUrl+"/api/storage/one/"+`${t}/${e}`)}getStorages(e,t){return this.http.get(this.apiUrl+"/api/storage/many/"+`${t}/${e}`)}updateStorage(e,t,i="_id"){return this.http.patch(this.apiUrl+"/api/storage/one/"+`${i}/${t}`,e)}getCompaniesStorage(e,t="all"){return this.http.get(this.apiUrl+"/api/company/storages/"+`${e}/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(s.ac(n.b),s.ac(o.g))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac}),e})()},"J0/g":function(e,t,i){"use strict";i.d(t,"a",function(){return g});var a=i("fXoL"),s=i("LRne"),n=i("ibGe"),o=i("ud2R"),r=i("TOXQ"),c=i("aceb"),d=i("3Pt+"),l=i("ofXK");function h(e,t){if(1&e&&(a.Wb(0,"nb-option",7),a.Fc(1),a.Vb()),2&e){const e=t.$implicit;a.nc("value",e),a.Eb(1),a.Hc(" ",e.name," ")}}function u(e,t){if(1&e&&(a.Wb(0,"nb-option",7),a.Fc(1),a.Vb()),2&e){const e=t.$implicit;a.nc("value",e),a.Eb(1),a.Ic(" ",e.indexNumber," | ",e.name," ")}}const p=function(){return{standalone:!0}};function b(e,t){if(1&e){const e=a.Xb();a.Wb(0,"div",18),a.Wb(1,"div",16),a.Wb(2,"label",3),a.Fc(3,"Indeksni broj:"),a.Vb(),a.Wb(4,"input",19),a.dc("ngModelChange",function(e){return t.$implicit.indexNumber=e}),a.Vb(),a.Vb(),a.Wb(5,"div",16),a.Wb(6,"label",3),a.Fc(7,"Naziv:"),a.Vb(),a.Wb(8,"input",20),a.dc("ngModelChange",function(e){return t.$implicit.name=e}),a.Vb(),a.Vb(),a.Wb(9,"div",21),a.Wb(10,"label",3),a.Fc(11,"Kolicina:"),a.Vb(),a.Wb(12,"input",22),a.dc("ngModelChange",function(e){return t.$implicit.amount=e}),a.Vb(),a.Vb(),a.Wb(13,"div",23),a.Rb(14,"br"),a.Wb(15,"button",24),a.dc("click",function(){a.xc(e);const i=t.$implicit;return a.hc(2).removeTrash(i)}),a.Rb(16,"nb-icon",25),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=t.$implicit;a.Eb(4),a.nc("ngModelOptions",a.qc(6,p))("ngModel",e.indexNumber),a.Eb(4),a.nc("ngModelOptions",a.qc(7,p))("ngModel",e.name),a.Eb(4),a.nc("ngModelOptions",a.qc(8,p))("ngModel",e.amount)}}function m(e,t){if(1&e){const e=a.Xb();a.Wb(0,"nb-accordion-item",8),a.dc("collapsedChange",function(){a.xc(e);const i=t.$implicit;return a.hc().chooseTransaction(i)}),a.Wb(1,"nb-accordion-item-header"),a.Fc(2),a.Vb(),a.Wb(3,"nb-accordion-item-body"),a.Wb(4,"form",null,9),a.Wb(6,"div",1),a.Wb(7,"div",2),a.Wb(8,"label",3),a.Fc(9,"Odaberi otpade koji nastaju:"),a.Vb(),a.Wb(10,"div",2),a.Wb(11,"input",10,11),a.dc("input",function(){a.xc(e);const t=a.vc(12);return a.hc().onChange(t.value)}),a.Vb(),a.Wb(13,"nb-autocomplete",12,13),a.dc("selectedChange",function(t){a.xc(e);const i=a.vc(12);return a.hc().updateLeftoverTrash(t,i)}),a.Dc(15,u,2,3,"nb-option",5),a.ic(16,"async"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Dc(17,b,17,9,"div",14),a.Wb(18,"div",15),a.Wb(19,"div",16),a.Wb(20,"button",17),a.dc("click",function(){return a.xc(e),a.hc().callLeftoverTrashMethod()}),a.Fc(21,"Dodaj nastale otpade "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=t.$implicit,i=a.vc(14),s=a.hc();a.Eb(2),a.Jc("",e.companyName," | ",e.date," | ",e.trashAmount,""),a.Eb(9),a.nc("nbAutocomplete",i),a.Eb(4),a.nc("ngForOf",a.jc(16,7,s.catalog$)),a.Eb(2),a.nc("ngForOf",s.leftoverTrashCreated),a.Eb(3),a.nc("disabled",0===s.leftoverTrashCreated.length||void 0===s.selectedStorage||0===s.leftoverTrashCreated[0].amount)}}let g=(()=>{class e{constructor(e,t,i){this.catalogService=e,this.transactionService=t,this.roleService=i,this.callLeftoverTrash=new a.o}ngOnInit(){if(this.leftoverTrashCreated=[],void 0===this.selectedTransaction)this.unfinshedTransactions$=this.transactionService.getUnfinishedTransactions(this.selectedTrash._id,this.roleService.getCompanyID());else{const e=[];e.push(this.selectedTransaction),this.unfinshedTransactions$=Object(s.a)(e)}this.storageProduction$=Object(s.a)(this.storageProduction),this.catalogService.getCatalogs().subscribe(e=>{this.catalog=e,this.catalog$=Object(s.a)(e)})}callLeftoverTrashMethod(){this.callLeftoverTrash.emit({selectedTransaction:this.selectedTransaction,leftoverTrashCreated:this.leftoverTrashCreated,selectedStorage:this.selectedStorage})}chooseTransaction(e){this.selectedTransaction=e}onChange(e){const t=e.toLowerCase();this.catalog$=Object(s.a)(this.catalog.filter(e=>e.name.includes(t)))}updateLeftoverTrash(e,t){t.value="",delete e._id,e.desc=e.name,e.amount=0,this.leftoverTrashCreated.includes(e)||this.leftoverTrashCreated.push(e)}removeTrash(e){this.leftoverTrashCreated=this.leftoverTrashCreated.filter(t=>t.indexNumber!==e.indexNumber)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(n.a),a.Qb(r.a),a.Qb(o.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["leftover-trash-popup"]],inputs:{selectedTrash:"selectedTrash",selectedTransaction:"selectedTransaction",storageProduction:"storageProduction"},outputs:{callLeftoverTrash:"callLeftoverTrash"},decls:11,vars:7,consts:[[2,"width","50vw"],[1,"row"],[1,"col-12"],[1,"col-12","label"],["fullWidth","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"collapsedChange",4,"ngFor","ngForOf"],[3,"value"],[3,"collapsedChange"],["LeftoverTrashForm",""],["nbInput","","fullWidth","","type","text","placeholder","Unesi naziv otpada",3,"nbAutocomplete","input"],["autoInput",""],[3,"selectedChange"],["auto",""],["class","row my-2",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-4"],["fullWidth","","nbButton","","status","primary",3,"disabled","click"],[1,"row","my-2"],["fullWidth","","nbInput","","disabled","",3,"ngModelOptions","ngModel","ngModelChange"],["fullWidth","","nbInput","",3,"ngModelOptions","ngModel","ngModelChange"],[1,"col-3"],["fullWidth","","type","number","min","1","nbInput","",3,"ngModelOptions","ngModel","ngModelChange"],[1,"col-1"],["fullWidth","","nbButton","",1,"mt-1",3,"click"],["icon","close"]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"div",2),a.Wb(3,"label",3),a.Fc(4,"Odaberite skladiste na kome ce nastati otpad:"),a.Vb(),a.Wb(5,"nb-select",4),a.dc("ngModelChange",function(e){return t.selectedStorage=e}),a.Dc(6,h,2,2,"nb-option",5),a.ic(7,"async"),a.Vb(),a.Vb(),a.Vb(),a.Wb(8,"nb-accordion"),a.Dc(9,m,22,9,"nb-accordion-item",6),a.ic(10,"async"),a.Vb(),a.Vb()),2&e&&(a.Eb(5),a.nc("ngModel",t.selectedStorage),a.Eb(1),a.nc("ngForOf",a.jc(7,3,t.storageProduction$)),a.Eb(3),a.nc("ngForOf",a.jc(10,5,t.unfinshedTransactions$)))},directives:[c.tb,d.k,d.n,l.m,c.g,c.ib,c.i,c.j,c.h,d.v,d.l,d.m,c.T,c.r,c.q,c.t,d.b,d.p,c.Q],pipes:[l.b],styles:[""]}),e})()},Lx1j:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i("AytR"),s=i("fXoL"),n=i("tk/3");let o=(()=>{class e extends class{}{constructor(e){super(),this.http=e,this.apiUrl=a.a.apiUrl}createTrash(e,t){return this.http.post(this.apiUrl+"/api/trash",{trash:e,storageID:t})}deleteTrash(e,t,i="_id"){return this.http.delete(this.apiUrl+"/api/trash/one/"+`${i}/${t}/${e}`)}getTrash(e,t="_id"){return this.http.get(this.apiUrl+"/api/trash/one/"+`${t}/${e}`)}getTrashes(e,t){return this.http.get(this.apiUrl+"/api/trash/many/"+`${t}/${e}`)}updateTrash(e,t,i,a="_id",s,n,o){return this.http.patch(this.apiUrl+"/api/trash/one/"+`${a}/${i}`,{trash:e,storageID:t,documentNo:n,companyName:s,inc:o})}}return e.\u0275fac=function(t){return new(t||e)(s.ac(n.b))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac}),e})()},RPbl:function(e,t,i){"use strict";i.r(t),i.d(t,"StorageModule",function(){return te});var a=i("ibGe"),s=i("TOXQ"),n=i("vTDv"),o=i("bJfm"),r=i("7Oz7"),c=i("aceb"),d=i("RS3s"),l=i("3Pt+"),h=i("tyNb"),u=i("ud2R"),p=i("fXoL"),b=i("ofXK"),m=i("LRne"),g=i("Lx1j");const f={edit:{confirmSave:!0,editButtonContent:'<i class="fa fa-edit"></i>',saveButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},delete:{confirmDelete:!0,deleteButtonContent:'<i class="fa fa-trash"></i>',saveButtonContent:"save",cancelButtonContent:"cancel"},actions:{position:"right",add:!1,edit:!0,delete:!0},columns:{indexNumber:{title:"Indeksni Broj",editable:!1},name:{title:"Naziv"},desc:{title:"Opis"},amount:{title:"Koli\u010dina (kg)",editable:!1}}},v={hideSubHeader:!0,actions:{columnTitle:"Dodaj na skladi\u0161te",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-folder-plus"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj"},name:{title:"Naziv"},desc:{title:"Opis"},amount:{title:"Koli\u010dina (kg)"}}};var j=i("navU"),T=i("xsDJ");const k=["addTrashTemplate"];function S(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Rb(1,"storage-meter",3),p.Wb(2,"nb-card"),p.Wb(3,"nb-card-header"),p.Wb(4,"div",4),p.Wb(5,"div",5),p.Wb(6,"h2",6),p.Fc(7),p.Vb(),p.Vb(),p.Wb(8,"div",7),p.Wb(9,"nb-icon",8),p.dc("click",function(){return p.xc(e),p.hc().edit()}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"nb-card-body"),p.Wb(11,"ng2-smart-table",9),p.dc("custom",function(i){p.xc(e);const a=t.$implicit;return p.hc().chooseAction(i,a)})("editConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().updateTrash(i,a)})("deleteConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().deleteTrash(i,a)}),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&e){const e=t.$implicit,i=p.hc();p.Eb(1),p.nc("storage",e),p.Eb(6),p.Gc(null==e?null:e.name),p.Eb(2),p.nc("icon",i.editIcon),p.Eb(2),p.nc("settings",i.currentSettings)("source",null==e?null:e.trashes)}}function W(e,t){if(1&e){const e=p.Xb();p.Wb(0,"add-trash-popup",10),p.dc("callAddTrash",function(t){return p.xc(e),p.hc().addTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("type","production")("selectedTrash",e.selectedTrash)}}let w=(()=>{class e{constructor(e,t,i,a){this.storageService=e,this.windowService=t,this.trashService=i,this.toastrService=a,this.updateStorageEvent=new p.o,this.settings=v,this.currentSettings=this.settings,this.editSettings=f,this.editIcon="edit"}ngOnInit(){this.storage$=Object(m.a)(this.storage)}updateStorage(){this.updateStorageEvent.emit(),this.storage$=Object(m.a)(this.storage)}edit(){this.currentSettings!==this.editSettings?(this.currentSettings=this.editSettings,this.editIcon="close"):(this.currentSettings=this.settings,this.editIcon="edit")}chooseAction(e,t){this.selectedStorage=t,"add"===e.action&&this.openAddTrashWindow(e.data)}openAddTrashWindow(e){this.selectedTrash=e,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj proizvedenu kolicinu: "+this.selectedTrash.name})}addTrashMethod({trashAmmount:e}){this.selectedTrash.amount+=e,this.trashService.updateTrash(this.selectedTrash,this.selectedStorage._id,this.selectedTrash._id).subscribe(e=>{this.updateStorage()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+e+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),e=NaN}updateTrash({newData:e,confirm:t},i){this.selectedStorage=i;try{this.trashService.updateTrash(e,this.selectedStorage._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:e,confirm:t},i){if(this.selectedStorage=i,window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.name+"?"))try{this.trashService.deleteTrash(this.selectedStorage._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.naziv,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(p.Qb(r.a),p.Qb(c.Ub),p.Qb(g.a),p.Qb(c.Mb))},e.\u0275cmp=p.Kb({type:e,selectors:[["storage-production"]],viewQuery:function(e,t){if(1&e&&p.Lc(k,1,p.P),2&e){let e;p.uc(e=p.ec())&&(t.addTrashTemplate=e.first)}},inputs:{storage:"storage"},outputs:{updateStorageEvent:"updateStorageEvent"},decls:5,vars:3,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["addTrashTemplate",""],[3,"storage"],[1,"row"],[1,"col-11"],[1,"text-left"],[1,"col-1","d-flex","justify-content-center","align-items-center"],[1,"edit-button",3,"icon","click"],[1,"order-table",3,"settings","source","custom","editConfirm","deleteConfirm"],[3,"type","selectedTrash","callAddTrash"]],template:function(e,t){1&e&&(p.Wb(0,"div",0),p.Dc(1,S,12,5,"div",1),p.ic(2,"async"),p.Vb(),p.Dc(3,W,1,2,"ng-template",null,2,p.Ec)),2&e&&(p.Eb(1),p.nc("ngForOf",p.jc(2,1,t.storage$)))},directives:[b.m,j.a,c.A,c.D,c.Q,c.z,d.b,T.a],pipes:[b.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}.edit-button[_ngcontent-%COMP%]{font-size:2rem}.edit-button[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),e})();const V={hideSubHeader:!0,actions:{columnTitle:"Dodaj otpad/Obradi otpad/Zavr\u0161i tretman",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-plus"></i>'},{name:"process",title:'<i class="fa fa-trash-restore"></i>'},{name:"leftover",title:'<i class="fa fa-exclamation-triangle"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj"},name:{title:"Naziv"},desc:{title:"Opis"},amount:{title:"Kolicina"}}};var y=i("+HCH"),C=i("J0/g");const M=["addTrashTemplate"],z=["processTrashTemplate"],E=["leftoverTrashTemplate"];function O(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Rb(1,"storage-meter",5),p.Wb(2,"nb-card"),p.Wb(3,"nb-card-header"),p.Wb(4,"div",6),p.Wb(5,"div",7),p.Wb(6,"h2",8),p.Fc(7),p.Vb(),p.Vb(),p.Wb(8,"div",9),p.Wb(9,"nb-icon",10),p.dc("click",function(){return p.xc(e),p.hc().edit()}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"nb-card-body"),p.Wb(11,"ng2-smart-table",11),p.dc("custom",function(i){p.xc(e);const a=t.$implicit;return p.hc().chooseAction(i,a)})("editConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().updateTrash(i,a)})("deleteConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().deleteTrash(i,a)}),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&e){const e=t.$implicit,i=p.hc();p.Eb(1),p.nc("storage",e),p.Eb(6),p.Gc(null==e?null:e.name),p.Eb(2),p.nc("icon",i.editIcon),p.Eb(2),p.nc("settings",i.currentSettings)("source",null==e?null:e.trashes)}}function D(e,t){if(1&e){const e=p.Xb();p.Wb(0,"add-trash-popup",12),p.dc("callAddTrash",function(t){return p.xc(e),p.hc().addTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("type","treatment")("selectedTrash",e.selectedTrash)}}function x(e,t){if(1&e){const e=p.Xb();p.Wb(0,"process-trash-popup",13),p.dc("callProcessTrash",function(t){return p.xc(e),p.hc().processTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("selectedTrash",e.selectedTrash)}}function P(e,t){if(1&e){const e=p.Xb();p.Wb(0,"leftover-trash-popup",14),p.dc("callLeftoverTrash",function(t){return p.xc(e),p.hc().leftoverTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("selectedTrash",e.selectedTrash)("storageProduction",e.storage)}}let U=(()=>{class e{constructor(e,t,i,a,s,n){this.storageService=e,this.windowService=t,this.trashService=i,this.transactionsService=a,this.toastrService=s,this.roleService=n,this.updateStorageEvent=new p.o,this.settings=V,this.currentSettings=this.settings,this.editSettings=f,this.editIcon="edit",this.leftoverTrashCreated=[],this.unfinishedTransactions=[]}ngOnInit(){this.storageTreatment$=Object(m.a)(this.storageTreatment)}updateStorage(){this.updateStorageEvent.emit()}edit(){this.currentSettings!==this.editSettings?(this.currentSettings=this.editSettings,this.editIcon="close"):(this.currentSettings=this.settings,this.editIcon="edit")}chooseAction(e,t){this.selectedStorageTreatment=t,"add"===e.action?this.openAddTrashWindow(e.data):"process"===e.action?this.openProcessTrashWindow(e.data):"leftover"===e.action&&this.openLeftoverTrashWindow(e.data)}openAddTrashWindow(e){this.selectedTrash=e,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj donetu kolicinu: "+this.selectedTrash.name})}addTrashMethod({trashAmmount:e,documentNo:t,companyName:i}){this.selectedTrash.amount+=e,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageTreatment._id,this.selectedTrash._id,"_id",i,t).subscribe(e=>{this.updateStorage()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+e+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),e=NaN}openProcessTrashWindow(e){this.selectedTrash=e,this.windowRef=this.windowService.open(this.processTrashTemplate,{title:"Obradi odre\u0111enu koli\u010dinu: "+this.selectedTrash.name})}processTrashMethod({selectedTransaction:e,trashAmmount:t,trashCreated:i}){this.selectedTrash.amount+=-1*t,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageTreatment._id,this.selectedTrash._id,"_id",i?e.companyName?e.companyName:e:"",i?e.wmdNo?e.wmdNo:e:"").subscribe(e=>{this.updateStorage()}),"-"!==e&&(e.finished=!0,this.transactionsService.updateTransaction(e,e._id).subscribe(e=>{})),this.showToast("Uspeh","Uspe\u0161no ste obradili "+t+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),t=NaN}openLeftoverTrashWindow(e){this.selectedTrash=e,this.transactionsService.getUnfinishedTransactions(this.selectedTrash._id,this.roleService.getCompanyID()).subscribe(e=>{this.unfinishedTransactions=e}),this.windowRef=this.windowService.open(this.leftoverTrashTemplate,{title:"Zavr\u0161i proizvodnju preostalog otpada"})}leftoverTrashMethod({selectedTransaction:e,leftoverTrashCreated:t,selectedStorage:i}){t.forEach(e=>{this.trashService.updateTrash(e,i._id,e.indexNumber,"indexNumber",void 0,void 0,!0).subscribe(e=>{this.updateStorage()})}),e.companyName=null,e.wmdNo=null,e.finished=!0,this.transactionsService.updateTransaction(e,e._id).subscribe(e=>{}),this.showToast("Uspeh","Uspesno ste dodali otpade!","success"),this.windowRef.close()}updateTrash({newData:e,confirm:t},i){this.selectedStorageTreatment=i;try{this.trashService.updateTrash(e,this.selectedStorageTreatment._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:e,confirm:t},i){if(this.selectedStorageTreatment=i,window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.naziv+"?"))try{this.trashService.deleteTrash(this.selectedStorageTreatment._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.name,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(p.Qb(r.a),p.Qb(c.Ub),p.Qb(g.a),p.Qb(s.a),p.Qb(c.Mb),p.Qb(u.a))},e.\u0275cmp=p.Kb({type:e,selectors:[["storage-treatment"]],viewQuery:function(e,t){if(1&e&&(p.Lc(M,1,p.P),p.Lc(z,1,p.P),p.Lc(E,1,p.P)),2&e){let e;p.uc(e=p.ec())&&(t.addTrashTemplate=e.first),p.uc(e=p.ec())&&(t.processTrashTemplate=e.first),p.uc(e=p.ec())&&(t.leftoverTrashTemplate=e.first)}},inputs:{storageTreatment:"storageTreatment",storage:"storage"},outputs:{updateStorageEvent:"updateStorageEvent"},decls:9,vars:3,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["addTrashTemplate",""],["processTrashTemplate",""],["leftoverTrashTemplate",""],[3,"storage"],[1,"row"],[1,"col-11"],[1,"text-left"],[1,"col-1","d-flex","justify-content-center","align-items-center"],[1,"edit-button",3,"icon","click"],[3,"settings","source","custom","editConfirm","deleteConfirm"],[3,"type","selectedTrash","callAddTrash"],[3,"selectedTrash","callProcessTrash"],[3,"selectedTrash","storageProduction","callLeftoverTrash"]],template:function(e,t){1&e&&(p.Wb(0,"div",0),p.Dc(1,O,12,5,"div",1),p.ic(2,"async"),p.Vb(),p.Dc(3,D,1,2,"ng-template",null,2,p.Ec),p.Dc(5,x,1,1,"ng-template",null,3,p.Ec),p.Dc(7,P,1,2,"ng-template",null,4,p.Ec)),2&e&&(p.Eb(1),p.nc("ngForOf",p.jc(2,1,t.storageTreatment$)))},directives:[b.m,j.a,c.A,c.D,c.Q,c.z,d.b,T.a,y.a,C.a],pipes:[b.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:60px;text-align:center}.edit-button[_ngcontent-%COMP%]{font-size:2rem}.edit-button[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),e})();const $={hideSubHeader:!0,actions:{columnTitle:"Dodaj otpad/Odlo\u017ei otpad/Zavr\u0161i odlaganje",position:"right",edit:!1,add:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-plus"></i>'},{name:"dispose",title:'<i class="fa fa-trash-alt"></i>'},{name:"leftover",title:'<i class="fa fa-exclamation-triangle"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj"},name:{title:"Naziv"},desc:{title:"Opis"},amount:{title:"Koli\u010dina (KG)"}}},_=["addTrashTemplate"],F=["disposeTrashTemplate"],A=["leftoverTrashTemplate"];function I(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Rb(1,"storage-meter",5),p.Wb(2,"nb-card"),p.Wb(3,"nb-card-header"),p.Wb(4,"div",6),p.Wb(5,"div",7),p.Wb(6,"h2",8),p.Fc(7),p.Vb(),p.Vb(),p.Wb(8,"div",9),p.Wb(9,"nb-icon",10),p.dc("click",function(){return p.xc(e),p.hc().edit()}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"nb-card-body"),p.Wb(11,"ng2-smart-table",11),p.dc("custom",function(i){p.xc(e);const a=t.$implicit;return p.hc().chooseAction(i,a)})("editConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().updateTrash(i,a)})("deleteConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().deleteTrash(i,a)}),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&e){const e=t.$implicit,i=p.hc();p.Eb(1),p.nc("storage",e),p.Eb(6),p.Gc(null==e?null:e.name),p.Eb(2),p.nc("icon",i.editIcon),p.Eb(2),p.nc("settings",i.currentSettings)("source",null==e?null:e.trashes)}}function N(e,t){if(1&e){const e=p.Xb();p.Wb(0,"add-trash-popup",12),p.dc("callAddTrash",function(t){return p.xc(e),p.hc().addTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("type","disposal")("selectedTrash",e.selectedTrash)}}function L(e,t){if(1&e){const e=p.Xb();p.Wb(0,"process-trash-popup",13),p.dc("callProcessTrash",function(t){return p.xc(e),p.hc().disposeTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("selectedTrash",e.selectedTrash)}}function R(e,t){if(1&e){const e=p.Xb();p.Wb(0,"leftover-trash-popup",14),p.dc("callLeftoverTrash",function(t){return p.xc(e),p.hc().leftoverTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("selectedTrash",e.selectedTrash)("storageProduction",e.storage)}}let X=(()=>{class e{constructor(e,t,i,a,s,n){this.storageService=e,this.windowService=t,this.trashService=i,this.roleService=a,this.toastrService=s,this.transactionsService=n,this.updateStorageEvent=new p.o,this.settings=$,this.currentSettings=this.settings,this.editSettings=f,this.editIcon="edit",this.leftoverTrashCreated=[],this.unfinishedTransactions=[]}ngOnInit(){this.storageDisposal$=Object(m.a)(this.storageDisposal)}updateStorage(){this.updateStorageEvent.emit()}edit(){this.currentSettings!==this.editSettings?(this.currentSettings=this.editSettings,this.editIcon="close"):(this.currentSettings=this.settings,this.editIcon="edit")}chooseAction(e,t){this.selectedStorageDisposal=t,"add"===e.action?this.openAddTrashWindow(e.data):"dispose"===e.action?this.openDisposeTrashWindow(e.data):"leftover"===e.action&&this.openLeftoverTrashWindow(e.data)}openAddTrashWindow(e){this.selectedTrash=e,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj donetu kolicinu: "+this.selectedTrash.name})}addTrashMethod({trashAmmount:e,documentNo:t,companyName:i}){this.selectedTrash.amount+=e,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageDisposal._id,this.selectedTrash._id,"_id",i,t).subscribe(e=>{this.updateStorage()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+e+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),e=NaN}openDisposeTrashWindow(e){this.selectedTrash=e,this.windowRef=this.windowService.open(this.disposeTrashTemplate,{title:"Obradi odre\u0111enu koli\u010dinu: "+this.selectedTrash.name})}disposeTrashMethod({selectedTransaction:e,trashAmmount:t,trashCreated:i}){this.selectedTrash.amount+=-1*t,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageDisposal._id,this.selectedTrash._id,"_id",i?e.companyName?e.companyName:e:"",i?e.wmdNo?e.wmdNo:e:"").subscribe(e=>{this.updateStorage()}),"-"!==e&&(e.finished=!0,this.transactionsService.updateTransaction(e,e._id).subscribe(e=>{})),this.showToast("Uspeh","Uspe\u0161no ste obradili "+t+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),t=NaN}openLeftoverTrashWindow(e){this.selectedTrash=e,this.transactionsService.getUnfinishedTransactions(this.selectedTrash._id,this.roleService.getCompanyID()).subscribe(e=>{this.unfinishedTransactions=e}),this.windowRef=this.windowService.open(this.leftoverTrashTemplate,{title:"Zavr\u0161i proizvodnju preostalog otpada"})}leftoverTrashMethod({selectedTransaction:e,leftoverTrashCreated:t,selectedStorage:i}){t.forEach(e=>{this.trashService.updateTrash(e,i._id,e.indexNumber,"indexNumber",void 0,void 0,!0).subscribe(e=>{this.updateStorage()})}),e.companyName=null,e.wmdNo=null,e.finished=!0,this.transactionsService.updateTransaction(e,e._id).subscribe(e=>{}),this.showToast("Uspeh","Uspesno ste dodali otpade!","success"),this.windowRef.close()}updateTrash({newData:e,confirm:t},i){this.selectedStorageDisposal=i;try{this.trashService.updateTrash(e,this.selectedStorageDisposal._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:e,confirm:t},i){if(this.selectedStorageDisposal=i,window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.naziv+"?"))try{this.trashService.deleteTrash(this.selectedStorageDisposal._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.name,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(p.Qb(r.a),p.Qb(c.Ub),p.Qb(g.a),p.Qb(u.a),p.Qb(c.Mb),p.Qb(s.a))},e.\u0275cmp=p.Kb({type:e,selectors:[["storage-dump"]],viewQuery:function(e,t){if(1&e&&(p.Lc(_,1,p.P),p.Lc(F,1,p.P),p.Lc(A,1,p.P)),2&e){let e;p.uc(e=p.ec())&&(t.addTrashTemplate=e.first),p.uc(e=p.ec())&&(t.disposeTrashTemplate=e.first),p.uc(e=p.ec())&&(t.leftoverTrashTemplate=e.first)}},inputs:{storageDisposal:"storageDisposal",storage:"storage"},outputs:{updateStorageEvent:"updateStorageEvent"},decls:9,vars:3,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["addTrashTemplate",""],["disposeTrashTemplate",""],["leftoverTrashTemplate",""],[3,"storage"],[1,"row"],[1,"col-11"],[1,"text-left"],[1,"col-1","d-flex","justify-content-center","align-items-center"],[1,"edit-button",3,"icon","click"],[1,"order-table",3,"settings","source","custom","editConfirm","deleteConfirm"],[3,"type","selectedTrash","callAddTrash"],[3,"selectedTrash","callProcessTrash"],[3,"selectedTrash","storageProduction","callLeftoverTrash"]],template:function(e,t){1&e&&(p.Wb(0,"div",0),p.Dc(1,I,12,5,"div",1),p.ic(2,"async"),p.Vb(),p.Dc(3,N,1,2,"ng-template",null,2,p.Ec),p.Dc(5,L,1,1,"ng-template",null,3,p.Ec),p.Dc(7,R,1,2,"ng-template",null,4,p.Ec)),2&e&&(p.Eb(1),p.nc("ngForOf",p.jc(2,1,t.storageDisposal$)))},directives:[b.m,j.a,c.A,c.D,c.Q,c.z,d.b,T.a,y.a,C.a],pipes:[b.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:60px;text-align:center}.edit-button[_ngcontent-%COMP%]{font-size:2rem}.edit-button[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),e})();const K=["addTrashTemplate"];function Q(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Rb(1,"storage-meter",3),p.Wb(2,"nb-card"),p.Wb(3,"nb-card-header"),p.Wb(4,"div",4),p.Wb(5,"div",5),p.Wb(6,"h2",6),p.Fc(7),p.Vb(),p.Vb(),p.Wb(8,"div",7),p.Wb(9,"nb-icon",8),p.dc("click",function(){return p.xc(e),p.hc().edit()}),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"nb-card-body"),p.Wb(11,"ng2-smart-table",9),p.dc("custom",function(i){p.xc(e);const a=t.$implicit;return p.hc().chooseAction(i,a)})("editConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().updateTrash(i,a)})("deleteConfirm",function(i){p.xc(e);const a=t.$implicit;return p.hc().deleteTrash(i,a)}),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&e){const e=t.$implicit,i=p.hc();p.Eb(1),p.nc("storage",e),p.Eb(6),p.Gc(null==e?null:e.name),p.Eb(2),p.nc("icon",i.editIcon),p.Eb(2),p.nc("settings",i.currentSettings)("source",null==e?null:e.trashes)}}function G(e,t){if(1&e){const e=p.Xb();p.Wb(0,"add-trash-popup",10),p.dc("callAddTrash",function(t){return p.xc(e),p.hc().addTrashMethod(t)}),p.Vb()}if(2&e){const e=p.hc();p.nc("type","cache")("selectedTrash",e.selectedTrash)}}let B=(()=>{class e{constructor(e,t,i,a){this.storageService=e,this.windowService=t,this.trashService=i,this.toastrService=a,this.updateStorageEvent=new p.o,this.settings=v,this.currentSettings=this.settings,this.editSettings=f,this.editIcon="edit"}ngOnInit(){this.storageCache$=Object(m.a)(this.storageCache)}updateStorage(){this.updateStorageEvent.emit(),this.storageCache$=Object(m.a)(this.storageCache)}edit(){this.currentSettings!==this.editSettings?(this.currentSettings=this.editSettings,this.editIcon="close"):(this.currentSettings=this.settings,this.editIcon="edit")}chooseAction(e,t){this.selectedStorageCache=t,"add"===e.action&&this.openAddTrashWindow(e.data)}openAddTrashWindow(e){this.selectedTrash=e,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj proizvedenu kolicinu: "+this.selectedTrash.name})}addTrashMethod({trashAmmount:e}){this.selectedTrash.amount+=e,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageCache._id,this.selectedTrash._id).subscribe(e=>{this.updateStorage()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+e+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),e=NaN}updateTrash({newData:e,confirm:t},i){this.selectedStorageCache=i;try{this.trashService.updateTrash(e,this.selectedStorageCache._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:e,confirm:t},i){if(this.selectedStorageCache=i,window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.naziv+"?"))try{this.trashService.deleteTrash(this.selectedStorageCache._id,e._id).subscribe(e=>{this.updateStorage()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.name,"success")}catch(a){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(p.Qb(r.a),p.Qb(c.Ub),p.Qb(g.a),p.Qb(c.Mb))},e.\u0275cmp=p.Kb({type:e,selectors:[["storage-cache"]],viewQuery:function(e,t){if(1&e&&p.Lc(K,1,p.P),2&e){let e;p.uc(e=p.ec())&&(t.addTrashTemplate=e.first)}},inputs:{storageCache:"storageCache"},outputs:{updateStorageEvent:"updateStorageEvent"},decls:5,vars:3,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["addTrashTemplate",""],[3,"storage"],[1,"row"],[1,"col-11"],[1,"text-left"],[1,"col-1","d-flex","justify-content-center","align-items-center"],[1,"edit-button",3,"icon","click"],[1,"order-table",3,"settings","source","custom","editConfirm","deleteConfirm"],[3,"type","selectedTrash","callAddTrash"]],template:function(e,t){1&e&&(p.Wb(0,"div",0),p.Dc(1,Q,12,5,"div",1),p.ic(2,"async"),p.Vb(),p.Dc(3,G,1,2,"ng-template",null,2,p.Ec)),2&e&&(p.Eb(1),p.nc("ngForOf",p.jc(2,1,t.storageCache$)))},directives:[b.m,j.a,c.A,c.D,c.Q,c.z,d.b,T.a],pipes:[b.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:60px;text-align:center}.edit-button[_ngcontent-%COMP%]{font-size:2rem}.edit-button[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),e})();function H(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Wb(1,"storage-production",2),p.dc("updateStorageEvent",function(){return p.xc(e),p.hc().updateStorage()}),p.Vb(),p.Vb()}if(2&e){const e=p.hc();p.Eb(1),p.nc("storage",e.storageProduction)}}function q(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Wb(1,"storage-treatment",3),p.dc("updateStorageEvent",function(){return p.xc(e),p.hc().updateStorage()}),p.Vb(),p.Vb()}if(2&e){const e=p.hc();p.Eb(1),p.nc("storageTreatment",e.storageTreatment)("storage",e.storageProduction)}}function J(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Wb(1,"storage-dump",4),p.dc("updateStorageEvent",function(){return p.xc(e),p.hc().updateStorage()}),p.Vb(),p.Vb()}if(2&e){const e=p.hc();p.Eb(1),p.nc("storageDisposal",e.storageDisposal)("storage",e.storageProduction)}}function Z(e,t){if(1&e){const e=p.Xb();p.Wb(0,"div"),p.Wb(1,"storage-cache",5),p.dc("updateStorageEvent",function(){return p.xc(e),p.hc().updateStorage()}),p.Vb(),p.Vb()}if(2&e){const e=p.hc();p.Eb(1),p.nc("storageCache",e.storageCache)}}const Y=[{path:"",component:(()=>{class e{constructor(e,t){this.roleService=e,this.storageService=t,this.allStorage=[],this.storageProduction=[],this.storageTreatment=[],this.storageDisposal=[],this.storageCache=[],this.loading=!1}ngOnInit(){this.roleService.getOperations().subscribe(e=>{this.operations=e}),this.updateStorage()}updateStorage(){this.loading=!0,this.allStorage=[],this.storageDisposal=[],this.storageProduction=[],this.storageTreatment=[],this.storageCache=[],this.storageService.getCompaniesStorage(this.roleService.getCompanyID()).subscribe(e=>{this.allStorage=e;for(const t of this.allStorage)void 0===t.__t?this.storageProduction.push(t):"StorageTreatment"===t.__t?this.storageTreatment.push(t):"StorageDump"===t.__t?this.storageDisposal.push(t):"StorageCache"===t.__t&&this.storageCache.push(t);this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(p.Qb(u.a),p.Qb(r.a))},e.\u0275cmp=p.Kb({type:e,selectors:[["pages-storage-containers"]],decls:5,vars:4,consts:[[1,"container-fluid"],[4,"ngIf"],[3,"storage","updateStorageEvent"],[3,"storageTreatment","storage","updateStorageEvent"],[3,"storageDisposal","storage","updateStorageEvent"],[3,"storageCache","updateStorageEvent"]],template:function(e,t){1&e&&(p.Wb(0,"div",0),p.Dc(1,H,2,1,"div",1),p.Dc(2,q,2,2,"div",1),p.Dc(3,J,2,2,"div",1),p.Dc(4,Z,2,1,"div",1),p.Vb()),2&e&&(p.Eb(1),p.nc("ngIf",t.operations.production&&!t.loading),p.Eb(1),p.nc("ngIf",t.operations.treatment&&!t.loading),p.Eb(1),p.nc("ngIf",t.operations.disposal&&!t.loading),p.Eb(1),p.nc("ngIf",t.operations.cache&&!t.loading))},directives:[b.n,w,U,X,B],styles:[""]}),e})()}];let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Ob({type:e}),e.\u0275inj=p.Nb({imports:[[h.g.forChild(Y)],h.g]}),e})(),te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Ob({type:e}),e.\u0275inj=p.Nb({providers:[r.a,a.a,s.a],imports:[[n.a,ee,c.E,d.c,l.e,c.U,c.lb,c.cb,c.ub,c.s,c.w,c.nb,c.H,c.S,c.bb,c.Ob,c.k,o.a]]}),e})()},"UI7+":function(e,t,i){"use strict";i.d(t,"b",function(){return a}),i.d(t,"d",function(){return s}),i.d(t,"c",function(){return n}),i.d(t,"f",function(){return o}),i.d(t,"a",function(){return r}),i.d(t,"e",function(){return c});const a=["Deponovanje otpada u zemlji\u0161te ili na zemlji\u0161te","Izlaganje otpada procesima u zemlji\u0161tu","Duboko ubrizgavanje","Povr\u0161insko deponovanje ","Odlaganje otpada u posebno projektovane deponije","Ispu\u0161tanje u vode, osim u mora, odnosno okeane","Ispu\u0161tanje u mora, odnosno okeane, uklju\u010duju\u0107i utiskivanje u morsko dno","Biolo\u0161ki tretmani koji nisu nazna\u010deni na drugom mestu u ovoj listi, a \u010diji su kona\u010dni proizvodi jedinjenja ili sme\u0161e koje se odbacuju u bilo kojoj od operacija od D1 do D12","Fizi\u010dko-hemijsk itretmani koji nisu nazna\u010deni na drugom mestu u ovoj listi, a \u010diji su kona\u010dni proizvodi jedinjenja ili sme\u0161e koje se odbacuju u bilo kojoj od operacija od D1 do D12","Spaljivanje (insineracija) na tlu","Spaljivanje (insineracija) na moru","Trajno skladi\u0161tenje","Me\u0161anje otpada pre podvrgavanja bilo kojoj od operacija od D1 do D12","Prepakovanje otpada pre podvrgavanja bil okojoj od operacija od D1 do D13","Skladi\u0161tenje otpada koje prethodi bilo kojoj od operacija od D1 do D14"],s=["Kori\u0161\u0107enje otpada prvenstveno ka goriva ili drugog sredstva za proizvodnju energine","Regeneracija/prerada rastvara\u010da","Recikliranje/prerada organskih materija koji se ne koriste kao rastvara\u010di (uklju\u010duju\u0107i kompostiranje i ostale procese biolo\u0161ke transformacije)","Recikliranje/prerada metala i jedinjenja metala","Recikliranje/prerada drugih neorganskih materijala","Regeneracija kiselina ili baza","Obnavljanje komponenata koje se koriste za smanjenje zaga\u0111enja","Obnavljanje komponenata katalizatora","Re-rafinacija ili drugi na\u010din ponovnog iskori\u0161\u0107enja otpadnog ulja","Izlaganje otpada procesima u zemlji\u0161tu koji imaju korist za poljoprivredu il iekolo\u0161ki napredak","Kori\u0161\u0107enje otpada dobijenog bilo kojom operacijom od R1 do R10","Promene radi podvrgavanja otpada bilo kojoj od operacija od R1 do R11","Skladi\u0161tenje otpada namenjenih za bilo koju operaciju od R1 do R12 (isklju\u010duju\u0107i privremeno skladi\u0161tenje otpada na lokaciji njegovog nastanka) "],n=["Eksplozivan","Oksidiraju\u0107i","Visoko zapaljiv","Zapaljiv","Nadra\u017euju\u0107i (iritantan)","\u0160tetan (opasan)","Otrovan","Karcinogen","Korozivan","Infektivan","Toksi\u010dan za reprodukciju (teratogen)","Mutagen","Supstance ili otpad koji u kontaktu sa vodom, vazduhom ili u kiselini otpu\u0161taju toksi\u010dne ili veoma toksi\u010dne gasove","Izaziva preosetljivost","Ekotoksi\u010dnost","Otpad koji ima svojstvo da na svak,i na\u010din nakon odlaganja proizvede drugu supstancu npr. izlu\u017eevine koja ima neku od navedenih karakteristika (H1-H14)"],o=[" anatomskih supstanci; bolni\u010dki i drugi otpad sa klinika","jedinjenja koja se koriste u farmaciji, medicini i veterini","sredstava za za\u0161titu drveta","biocida i fito-farmaceutskih supstanci","ostataka supstanci kori\u0161\u0107enih kao rastvara\u010di","halogenovanih organskih supstanci koje nisu kori\u0161\u0107ene kao rastvara\u010di isklju\u010duju\u0107i inertne polimerizovane materijale","me\u0161anih soli koje sadr\u017ee cijanide","mineralnih ulja ili uljnih supstanci (npr. mulj od struganja)","ulje/voda, me\u0161avina ugljovodonici/voda, emulzija","supstanci koje sadr\u017ee PCB i/ili PCT (npr. dielektrici i sl.)","materijala sa katranom, nastalih rafinacijom, destilacijom ili bilo kojim piroliti\u010dkim tretmanom (npr. na dnu destilacione kolone)","mastila, boja, pigmenata, farbi, lakova, firnajsa","smola, lateksa, plastifikatora, lepkova/adheziva","hemijskih supstanci koje poti\u010du od istra\u017eivanja i razvoja ili nastavnim aktivnostima koje nisu identifikovane i/ili su nove i \u010diji efekti na \u010doveka i/ili \u017eivotnu sredinu nisu poznati (npr. ostaci iz laboratorija i sl.)","pirotehni\u010dkih i drugih eksplozivnih materijala","fotografskih hemikalija i materijala za razvijanje","bilo kog materijala kontaminiranog sa bilo kojim kongenerom polihlorovanih dibenzo-furana","bilo kog materijala kontaminiranog sa bilo kojim kongenerom polihlorovanih dibenzo-p-dioksina","\u017eivotinjskih i biljnih sapuna, masti, voskova","nehalogenovanih organskih supstanci koje nisu kori\u0161\u0107ene kao rastvara\u010di","neorganskih supstanci bez metala i metalnih jedinjenja","pepela i/ili \u0161ljaka","zemlje, peska, gline uklju\u010duju\u0107i zemlju, pesak, glinu iskopanu bagerom","izme\u0161anih soli koje nisu cijanidne","metalne pra\u0161ine, praha","potro\u0161enih katalizatora","te\u010dnosti ili muljeva koji sadr\u017ee metale ili metalna jedinjenja","ostataka od operacija kontrole zaga\u0111enja (vre\u0107asti filteri za pra\u0161inu i dr.) osim 29, 30 i 33","muljeva iz skrubera","muljeva iz postrojenja za pre\u010di\u0161\u0107avanje vode","ostataka dekarbonizacije","ostataka jonoizmenjiva\u010dkih kolona","kanalizacionih muljeva, netretiranih ili nepodesnih za upotrebu u poljoprivredi","ostataka \u010di\u0161\u0107enja rezervoara i/ili opreme","kontaminirane opreme","kontaminiranih rezervoara -kontejnera (ambala\u017ea, boce za gas i dr.) \u010diji sadr\u017eaj uklju\u010duje jednu ili vi\u0161e komponenti iz Priloga 4.","baterija i drugih elektri\u010dnih \u0107elija","biljnih ulja","materijala iz selektivnog sakupljanja otpada iz doma\u0107instava i koji poseduju bilo koju od karakteristika iz Priloga 5.","bilo koji drugi otpad koji sadr\u017ei bilo koju komponentu iz Priloga 4. i bilo koju karakteristiku iz Priloga 5."],r=["berilijum, jedinjenja berilijuma","jedinjenja vanadijuma","jedinjenja hroma (VI)","jedinjenja kobalta","jedinjenja nikla","jedinjenja bakra","jedinjenja cinka","arsen; jedinjenja arsena","selen; jedinjenja selen","jedinjenja srebra","kadmijum; jedinjenja kadmijuma","jedinjenja kalaja","antimon; jedinjenja antimona","telur; jedinjenja telura","jedinjenja barijuma; isklju\u010duju\u0107i barijum sulfat","\u017eivu; jedinjenja \u017eive","talijum; jedinjenja talijuma","olovo; jedinjenja olova","neorganske sulfide","neorganska jedinjenja fluora; isklju\u010duju\u0107i kalcijum fluorid","neorganske cijanide","slede\u0107e alkalne metale ili zemnoalkalne metale: litijum, natrijum, kalijum, kalcijum, magnezijum koji nisu u sme\u0161i","rastvori kiselina ili kiseline u \u010dvrstom obliku","rastvori baza ili baze u \u010dvrstom obliku","azbest (pra\u0161inu i vlakna)","fosfor; fosforna jedinjenja, isklju\u010duju\u0107i fosfatne minerale","metalni karbonili","perokside","hlorate","perhlorate","azide","PCB i/ili PCT","jedinjenja koja se koriste u farmaciji ili veterini","biocide i fito-farmaceutske supstance (npr. pesticide i sl.)","infektivne supstance","kreozati","izocijanati; tiocijanati","organske cijanide (npr. nitrile i sl.)","fenole; jedinjenja fenola","halogenovane rastvara\u010de","organske rastvara\u010de, isklju\u010duju\u0107i halogenovane rastvara\u010de","organohalogena jedinjenja, isklju\u010duju\u0107i inertne polimerizovane materije i ostale supstance navedene u ovom prilogu","aromati\u010dna jedinjenja; policikli\u010dna i heterocikli\u010dna organska jedinjenja","alifati\u010dne amine","aromati\u010dne amine","etre","supstance koje imaju osobine eksploziva, isklju\u010duju\u0107i one koje su navedene u ovom prilogu","sumporna organska jedinjenja","bilo koji kongener polihlorovanih dibenzo-furana","bilo koji kongener polihlorovanih dibenzo-p-dioksina","ugljovodonike i kiseonik; azotna i/ili sumporna jedinjenja koja nisu uzeta u obzir u ovom prilogu"],c=["\u010cvrsto","Te\u010dno","Gasovito","Prah"]},bS1W:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i("AytR"),s=i("fXoL"),n=i("tk/3");let o=(()=>{class e extends class{}{constructor(e){super(),this.http=e,this.apiUrl=a.a.apiUrl}createPermit(e,t){return this.http.post(this.apiUrl+"/api/permit",{permit:e,companyID:t})}deletePermit(e,t="_id"){return this.http.delete(this.apiUrl+"/api/permit/one/"+`${t}/${e}`)}getPermit(e,t="_id"){return this.http.get(this.apiUrl+"/api/permit/one/"+`${t}/${e}`)}getPermits(e="all",t){return this.http.get(this.apiUrl+"/api/permit/many/"+`${t}/${e}`)}updatePermit(e,t,i="_id"){return this.http.patch(this.apiUrl+"/api/permit/one/"+`${i}/${t}`,e)}getCompaniesPermits(e,t="all"){return this.http.get(this.apiUrl+"/api/company/permits/"+e+"/"+t)}sendPermitRequest(e,t="",i,a,s,n){return this.http.post(this.apiUrl+"/api/mail/permit-request",{permitID:a,trashType:s,permitType:n,email:e,message:t,requestType:i})}}return e.\u0275fac=function(t){return new(t||e)(s.ac(n.b))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac}),e})()},kBrA:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var a=i("fXoL"),s=i("RS3s"),n=i("ibGe"),o=i("7IaX"),r=i("ofXK"),c=i("aceb");function d(e,t){if(1&e){const e=a.Xb();a.Wb(0,"button",10),a.dc("click",function(){a.xc(e);const i=t.$implicit,s=a.hc(),n=a.vc(8);return s.addTrashToList({data:i},n)}),a.Fc(1),a.Vb()}if(2&e){const e=t.$implicit;a.nc("nbPopover",e.name),a.Eb(1),a.Hc(" ",e.indexNumber," ")}}function l(e,t){if(1&e){const e=a.Xb();a.Wb(0,"div",2),a.Wb(1,"label",11),a.Fc(2,"Pretrazi po indeksnom broju:"),a.Vb(),a.Wb(3,"input",12,13),a.dc("input",function(){a.xc(e);const t=a.vc(4),i=a.hc();return t.value.length>=1&&i.onSearch(t.value)}),a.Vb(),a.Wb(5,"ng2-smart-table",14),a.dc("custom",function(t){a.xc(e);const i=a.hc(),s=a.vc(8);return i.addTrashToList(t,s)}),a.Vb(),a.Vb()}if(2&e){const e=a.hc();a.Eb(5),a.nc("source",e.catalog)("settings",e.settings)}}let h=(()=>{class e{constructor(e){this.catalogService=e,this.callUpdatePermitsTrash=new a.o,this.trashList=[],this.catalog=new s.a,this.settings=o.a}ngOnInit(){this.trashList=this.selectedPermit.trashList,this.catalogService.getCatalogs().subscribe(e=>{this.catalog.load(e)})}callUpdatePermitsTrashMethod(){this.callUpdatePermitsTrash.emit(this.trashList)}addTrashToList({data:e},t){t.disabled&&(this.trashList.some(t=>t._id===e._id)?this.removeTrashFromList(e):this.trashList.push(e))}removeTrashFromList(e){const t=this.trashList.filter(t=>t._id===e._id)[0];if(t){const e=this.trashList.indexOf(t,0);e>-1&&this.trashList.splice(e,1)}}onSearch(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"indexNumber",search:e,filter:function(e,t){return e.replace(/\s+/g,"").includes(t.replace(/\s+/g,""))}},{field:"name",search:e}],!1)}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(n.a))},e.\u0275cmp=a.Kb({type:e,selectors:[["view-permits-trash-popup"]],inputs:{selectedPermit:"selectedPermit"},outputs:{callUpdatePermitsTrash:"callUpdatePermitsTrash"},decls:13,vars:3,consts:[[2,"max-width","50vw"],[1,"row","mb-2"],[1,"col-12"],["nbButton","","status","warning","class","p-2 m-1","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",3,"nbPopover","click",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"row"],[1,"col-6"],["nbButton","","fullWidth","","type","button","status","primary",3,"click"],["trashListButton",""],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["nbButton","","status","warning","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",1,"p-2","m-1",3,"nbPopover","click"],[1,"ml-0"],["nbInput","","fullWidth","","type","text","placeholder","Pretrazi",3,"input"],["search",""],[3,"source","settings","custom"]],template:function(e,t){if(1&e){const e=a.Xb();a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"div",2),a.Dc(3,d,2,2,"button",3),a.Vb(),a.Dc(4,l,6,2,"div",4),a.Vb(),a.Wb(5,"div",5),a.Wb(6,"div",6),a.Wb(7,"button",7,8),a.dc("click",function(){return a.xc(e),a.vc(8).disabled=!0}),a.Fc(9," A\u017dURIRAJ OTPADE "),a.Vb(),a.Vb(),a.Wb(10,"div",6),a.Wb(11,"button",9),a.dc("click",function(){return t.callUpdatePermitsTrashMethod()}),a.Fc(12," SA\u010cUVAJ PROMENE "),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=a.vc(8);a.Eb(3),a.nc("ngForOf",t.trashList),a.Eb(1),a.nc("ngIf",e.disabled),a.Eb(7),a.nc("disabled",!e.disabled||t.trashList.length<1)}},directives:[r.m,r.n,c.t,c.kb,c.T,s.b],styles:[""]}),e})()},navU:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("fXoL"),s=i("aceb");let n=(()=>{class e{constructor(){}ngOnInit(){}calculateStatus(){return this.storage.amount/this.storage.maxAmount*100<33?"success":this.storage.amount/this.storage.maxAmount*100<66?"warning":"danger"}calculateValue(){return this.storage.amount/this.storage.maxAmount*100}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Kb({type:e,selectors:[["storage-meter"]],inputs:{storage:"storage"},decls:6,vars:5,consts:[[1,"row"],[1,"col-12","text-center","progress-bar-text"],[1,"badge","badge-light"],[1,"col-12"],["size","large",3,"value","status"]],template:function(e,t){1&e&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"span",2),a.Fc(3),a.Vb(),a.Vb(),a.Wb(4,"div",3),a.Rb(5,"nb-progress-bar",4),a.Vb(),a.Vb()),2&e&&(a.Eb(3),a.Jc("",t.storage.amount,"/",t.storage.maxAmount," (",t.storage.storageUnit,")"),a.Eb(2),a.nc("value",t.calculateValue())("status",t.calculateStatus()))},directives:[s.mb],styles:[".progress-bar-text[_ngcontent-%COMP%]{font-size:1.3rem;z-index:1;position:relative;transform:translateY(101%)}"]}),e})()},"wH5/":function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i("AytR"),s=i("fXoL"),n=i("tk/3");let o=(()=>{class e extends class{}{constructor(e){super(),this.http=e,this.apiUrl=a.a.apiUrl}createCompany(e){return this.http.post(this.apiUrl+"/api/company",e)}deleteCompany(e,t="_id"){return this.http.delete(this.apiUrl+"/api/company/one/"+`${t}/${e}`)}getCompany(e,t="_id"){return this.http.get(this.apiUrl+"/api/company/one/"+`${t}/${e}`)}getCompanys(e="all",t){return this.http.get(this.apiUrl+"/api/company/many/"+`${t}/${e}`)}updateCompany(e,t,i="_id"){return this.http.patch(this.apiUrl+"/api/company/one/"+`${i}/${t}`,e)}}return e.\u0275fac=function(t){return new(t||e)(s.ac(n.b))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac}),e})()},xsDJ:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var a=i("fXoL"),s=i("UI7+"),n=i("3Pt+"),o=i("ofXK"),r=i("aceb");function c(e,t){if(1&e&&(a.Wb(0,"nb-option-group",27),a.Wb(1,"nb-option",11),a.Fc(2),a.Vb(),a.Vb()),2&e){const e=t.$implicit,i=t.index,s=a.hc(2);a.nc("title","disposal"===s.type?"D"+(i+1):"R"+(i+1)),a.Eb(1),a.nc("value","disposal"===s.type?"D"+(i+1):"R"+(i+1)),a.Eb(1),a.Gc(e)}}function d(e,t){if(1&e){const e=a.Xb();a.Wb(0,"div"),a.Wb(1,"div",4),a.Wb(2,"label",15),a.Fc(3,"Naziv preduze\u0107a od kojeg je preuzet otpad: "),a.Vb(),a.Wb(4,"div",13),a.Wb(5,"input",16,17),a.dc("ngModelChange",function(t){return a.xc(e),a.hc().companyName=t}),a.Vb(),a.Vb(),a.Vb(),a.Wb(7,"div",18),a.Wb(8,"label",19),a.Fc(9,"Broj dokumenta o kretanju otpada: "),a.Vb(),a.Wb(10,"div",13),a.Wb(11,"input",20,21),a.dc("ngModelChange",function(t){return a.xc(e),a.hc().documentNo=t}),a.Vb(),a.Vb(),a.Vb(),a.Wb(13,"div",18),a.Wb(14,"label",22),a.Fc(15),a.Vb(),a.Wb(16,"div",13),a.Wb(17,"nb-select",23),a.dc("ngModelChange",function(t){a.xc(e);const i=a.hc();return"disposal"===i.type?i.selectedTrash.dSign:i.selectedTrash.rSign=t}),a.Dc(18,c,3,3,"nb-option-group",24),a.Vb(),a.Vb(),a.Wb(19,"div",25),a.Wb(20,"nb-checkbox",null,26),a.Fc(22),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&e){const e=a.vc(21),t=a.hc();a.Eb(5),a.nc("ngModel",t.companyName),a.Eb(6),a.nc("ngModel",t.documentNo),a.Eb(4),a.Hc("","disposal"===t.type?"D":"R"," Oznaka: "),a.Eb(2),a.nc("ngModel","disposal"===t.type?t.selectedTrash.dSign:t.selectedTrash.rSign)("disabled",!e.checked),a.Eb(1),a.nc("ngForOf",t.currentTags),a.Eb(4),a.Hc("Promeni ","disposal"===t.type?"D":"R"," oznaku otpada")}}const l=function(){return{standalone:!0}};let h=(()=>{class e{constructor(){this.callAddTrash=new a.o,this.type="",this.storageAmmountUnit="KG",this.D_TAGS=s.b,this.R_TAGS=s.d,this.currentTags=[]}ngOnInit(){this.currentTags="disposal"===this.type?s.b:s.d}callAddTrashMethod(){"KG"!==this.storageAmmountUnit&&(this.trashAmmount*=1e3),this.callAddTrash.emit({trashAmmount:this.trashAmmount,companyName:this.companyName,documentNo:this.documentNo})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Kb({type:e,selectors:[["add-trash-popup"]],inputs:{type:"type",selectedTrash:"selectedTrash"},outputs:{callAddTrash:"callAddTrash"},decls:23,vars:10,consts:[[2,"max-width","50vw"],[3,"ngSubmit"],["addForm","ngForm"],[4,"ngIf"],[1,"row"],["for","input-Kolicina",1,"label","col-12"],[1,"col-10","pr-0"],["fullWidth","","id","input-Kolicina","min","1","name","koli\u010dina","nbInput","","onkeypress","return /[0-9.]/i.test(event.key)","placeholder","0","type","number",1,"form-control",3,"ngModel","ngModelChange"],["kolicina","ngModel"],[1,"pl-0","col-2"],["fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value"],[1,"row","my-2"],[1,"col-12"],["fullWidth","","type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["for","input-nazivFirme",1,"label","col-12"],["required","","fullWidth","","id","input-nazivFirme","name","nazivFirme","nbInput","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["nazivFirme1","ngModel"],[1,"row","mt-1"],["for","input-brDokumenta",1,"label","col-12"],["required","","fullWidth","","id","input-brDokumenta","name","brDokumenta","nbInput","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["brDokumenta1","ngModel"],["for","input-dOznaka",1,"col-12","label"],["fullWidth","","name","dOznaka","id","input-dOznaka",1,"pr-2",3,"ngModel","disabled","ngModelChange"],[3,"title",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["checkBox",""],[3,"title"]],template:function(e,t){if(1&e&&(a.Wb(0,"div",0),a.Wb(1,"form",1,2),a.dc("ngSubmit",function(){return t.callAddTrashMethod()}),a.Dc(3,d,23,7,"div",3),a.Wb(4,"div",4),a.Wb(5,"label",5),a.Fc(6,"Koli\u010dina koju dodajete: "),a.Vb(),a.Wb(7,"div",6),a.Wb(8,"input",7,8),a.dc("ngModelChange",function(e){return t.trashAmmount=e}),a.Vb(),a.Vb(),a.Wb(10,"div",9),a.Wb(11,"nb-select",10),a.dc("ngModelChange",function(e){return t.storageAmmountUnit=e}),a.Wb(12,"nb-option",11),a.Fc(13,"KG"),a.Vb(),a.Wb(14,"nb-option",11),a.Fc(15,"T"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(16,"div",12),a.Wb(17,"div",13),a.Wb(18,"p"),a.Fc(19),a.Vb(),a.Vb(),a.Vb(),a.Wb(20,"div",4),a.Wb(21,"button",14),a.Fc(22," Dodaj "),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&e){const e=a.vc(2),i=a.vc(9);a.Eb(3),a.nc("ngIf","treatment"===t.type||"disposal"===t.type),a.Eb(5),a.nc("ngModel",t.trashAmmount),a.Eb(3),a.nc("ngModelOptions",a.qc(9,l))("selected","KG")("ngModel",t.storageAmmountUnit),a.Eb(1),a.nc("value","KG"),a.Eb(2),a.nc("value","T"),a.Eb(5),a.Hc("Trenutna kolicina otpada na skladistu: ",t.selectedTrash.amount," KG"),a.Eb(2),a.nc("disabled",i.value<1||void 0===i.value&&e.valid)}},directives:[n.v,n.l,n.m,o.n,r.T,n.p,n.b,n.k,n.n,r.tb,r.ib,n.s,o.m,r.G,r.jb],styles:[""]}),e})()}}]);