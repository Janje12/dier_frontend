(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"723k":function(e,n,i){"use strict";i.r(n),i.d(n,"ProfileModule",(function(){return Le}));var t=i("ofXK"),a=i("3Pt+"),o=i("aceb"),l=i("RS3s"),s=i("dgmN"),r=i("bJfm"),b=i("RPbl"),c=i("tyNb"),d=i("ud2R"),u=i("fXoL"),p=i("McNs"),g=i("SxV6"),m=i("fo3O");function f(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Ime je obavezno! "),u.Wb())}function h(e,n){if(1&e&&(u.Xb(0,"p",43),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Kc(" Ime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.firstName.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.firstName.maxLength")," ")}}function v(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Ime mora biti validno! "),u.Wb())}function W(e,n){if(1&e&&(u.Vb(0),u.Fc(1,f,2,0,"p",42),u.Fc(2,h,2,2,"p",42),u.Fc(3,v,2,0,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(10);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength)),u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function X(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Prezime je obavezno! "),u.Wb())}function y(e,n){if(1&e&&(u.Xb(0,"p",43),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Kc(" Prezime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.lastName.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.lastName.maxLength")," ")}}function w(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Prezime mora biti validno! "),u.Wb())}function M(e,n){if(1&e&&(u.Vb(0),u.Fc(1,X,2,0,"p",42),u.Fc(2,y,2,2,"p",42),u.Fc(3,w,2,0,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(18);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength)),u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function I(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Email je obavezan! "),u.Wb())}function x(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Email mora biti validan! "),u.Wb())}function E(e,n){if(1&e&&(u.Vb(0),u.Fc(1,I,2,0,"p",42),u.Fc(2,x,2,0,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(26);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function C(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Korisni\u010dko ime je obavezno! "),u.Wb())}function S(e,n){if(1&e&&(u.Xb(0,"p",43),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Kc(" Korisni\u010dko ime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.username.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.username.maxLength")," ")}}function F(e,n){if(1&e&&(u.Vb(0),u.Fc(1,C,2,0,"p",42),u.Fc(2,S,2,2,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(34);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function V(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Telefon je obavezan! "),u.Wb())}function j(e,n){if(1&e&&(u.Xb(0,"p",43),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Kc(" Telefon mora da bude du\u017ei od ",e.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.phone.maxLength")," ")}}function k(e,n){if(1&e&&(u.Vb(0),u.Fc(1,V,2,0,"p",42),u.Fc(2,j,2,2,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(42);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function P(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," \u0160ifra je obavezna! "),u.Wb())}function H(e,n){if(1&e&&(u.Xb(0,"p",43),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Jc(" \u0160ifra ne sme biti kra\u0107a od ",e.getConfigValue("forms.validation.password.minLength"),"! ")}}function z(e,n){if(1&e&&(u.Vb(0),u.Fc(1,P,2,0,"p",42),u.Fc(2,H,2,1,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(50);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function N(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Nova \u0161ifra je obavezna! "),u.Wb())}function q(e,n){if(1&e&&(u.Xb(0,"p",43),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Jc(" \u0160ifra ne sme biti kra\u0107a od ",e.getConfigValue("forms.validation.password.minLength"),"! ")}}function R(e,n){if(1&e&&(u.Vb(0),u.Fc(1,N,2,0,"p",42),u.Fc(2,q,2,1,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(61);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function T(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," Ponovna \u0161ifra je obavezna! "),u.Wb())}function D(e,n){1&e&&(u.Xb(0,"p",43),u.Hc(1," \u0160ifra se ne poklapa sa ve\u0107 upisanom \u0161ifrom! "),u.Wb())}function L(e,n){if(1&e&&(u.Vb(0),u.Fc(1,T,2,0,"p",42),u.Fc(2,D,2,0,"p",42),u.Ub()),2&e){u.jc();const e=u.xc(69),n=u.xc(61);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",n.value!==e.value)}}let O=(()=>{class e{constructor(e,n={},i,t,a){this.userService=e,this.options=n,this.toastrService=i,this.roleService=t,this.authService=a,this.showPassword="eye",this.oldPassword="",this.newPassword="",this.retypePassword="",this.user={email:"",firstName:"",lastName:"",password:"",phone:"",role:"",username:""},this.inputsDisabled=!0}ngOnInit(){this.userService.getUserProfile(this.roleService.getUsername()).pipe(Object(g.a)()).subscribe(e=>{this.user=e})}getConfigValue(e){return Object(p.n)(this.options,e,null)}enableInputs(){this.inputsDisabled=!1}setNewPassword(e){e.disabled=!0,this.userService.changePassword(this.user._id,this.oldPassword,this.newPassword).subscribe(e=>{e?this.showToast("Uspeh","Uspe\u0161no ste promenili \u0161ifru!","success"):this.showToast("Gre\u0161ka","Proverite \u0161ifru!","danger")},e=>{this.showToast("Gre\u0161ka","Proverite \u0161ifru!","danger")}),e.disabled=!1}updateUser(e){if(e.valid){this.userService.updateUser(this.user,this.user.username,"username").subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0;let e=null;this.authService.getToken().subscribe(n=>{e=n}),this.authService.refreshToken("email",e).subscribe(e=>{})}else this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}showToast(e,n,i){this.toastrService.show(n,e,{status:i})}}return e.\u0275fac=function(n){return new(n||e)(u.Rb(m.a),u.Rb(p.a),u.Rb(o.Kb),u.Rb(d.a),u.Rb(p.g))},e.\u0275cmp=u.Lb({type:e,selectors:[["profile-user"]],decls:85,vars:66,consts:[[3,"ngSubmit"],["formKorisnik","ngForm"],[1,"row"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-firstName",1,"label"],[1,"col-8"],["fullWidth","","id","input-firstName","name","firstName","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["firstName","ngModel"],[4,"ngIf"],["for","input-lastName",1,"label"],["fullWidth","","id","input-lastName","name","lastName","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["lastName","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["email","ngModel"],["for","input-username",1,"label"],["fullWidth","","id","input-username","name","username","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["username","ngModel"],["for","input-phone",1,"label"],["fullWidth","","id","input-phone","name","phone","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["phone","ngModel"],["for","input-oldPassword",1,"label","col-12"],[1,"col-6","pr-0"],["fullWidth","","id","input-oldPassword","name","oldPassword","nbInput","","placeholder","\u0160ifra",3,"ngModel","maxlength","minlength","required","status","type","ngModelChange"],["oldPasswordModel","ngModel"],[1,"col-2","pl-0"],["fullWidth","","tabindex","-1","nbButton","","type","button",3,"click"],[3,"icon"],["for","input-password",1,"label","col-12"],["fullWidth","","id","input-password","name","newPassword","nbInput","","placeholder","\u0160ifra",3,"ngModel","maxlength","minlength","required","status","type","ngModelChange"],["passwordModel","ngModel"],["for","input-rePassword",1,"label","col-12"],["fullWidth","","id","input-rePassword","name","rePass","nbInput","","placeholder","Potvrdi \u0161ifru",3,"ngModel","required","status","type","ngModelChange"],["retypePasswordModel","ngModel"],[1,"row","mt-2"],["nbButton","","type","button","status","success",3,"click"],["ResetPassword",""],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,n){if(1&e){const e=u.Yb();u.Xb(0,"form",0,1),u.fc("ngSubmit",(function(){u.zc(e);const i=u.xc(1);return n.updateUser(i)})),u.Xb(2,"div",2),u.Xb(3,"div",3),u.Xb(4,"div",4),u.Xb(5,"div",5),u.Xb(6,"label",6),u.Hc(7,"Ime:"),u.Wb(),u.Wb(),u.Xb(8,"div",7),u.Xb(9,"input",8,9),u.fc("ngModelChange",(function(e){return n.user.firstName=e})),u.Wb(),u.Fc(11,W,4,3,"ng-container",10),u.Wb(),u.Wb(),u.Xb(12,"div",4),u.Xb(13,"div",5),u.Xb(14,"label",11),u.Hc(15,"Prezime:"),u.Wb(),u.Wb(),u.Xb(16,"div",7),u.Xb(17,"input",12,13),u.fc("ngModelChange",(function(e){return n.user.lastName=e})),u.Wb(),u.Fc(19,M,4,3,"ng-container",10),u.Wb(),u.Wb(),u.Xb(20,"div",4),u.Xb(21,"div",5),u.Xb(22,"label",14),u.Hc(23,"Email:"),u.Wb(),u.Wb(),u.Xb(24,"div",7),u.Xb(25,"input",15,16),u.fc("ngModelChange",(function(e){return n.user.email=e})),u.Wb(),u.Fc(27,E,3,2,"ng-container",10),u.Wb(),u.Wb(),u.Xb(28,"div",4),u.Xb(29,"div",5),u.Xb(30,"label",17),u.Hc(31,"Korisni\u010dko ime:"),u.Wb(),u.Wb(),u.Xb(32,"div",7),u.Xb(33,"input",18,19),u.fc("ngModelChange",(function(e){return n.user.username=e})),u.Wb(),u.Fc(35,F,3,2,"ng-container",10),u.Wb(),u.Wb(),u.Xb(36,"div",4),u.Xb(37,"div",5),u.Xb(38,"label",20),u.Hc(39,"Telefon:"),u.Wb(),u.Wb(),u.Xb(40,"div",7),u.Xb(41,"input",21,22),u.fc("ngModelChange",(function(e){return n.user.phone=e})),u.Wb(),u.Fc(43,k,3,2,"ng-container",10),u.Wb(),u.Wb(),u.Wb(),u.Xb(44,"div",3),u.Xb(45,"div",4),u.Xb(46,"label",23),u.Hc(47,"Trenutna \u0161ifra:"),u.Wb(),u.Xb(48,"div",24),u.Xb(49,"input",25,26),u.fc("ngModelChange",(function(e){return n.oldPassword=e})),u.Wb(),u.Wb(),u.Xb(51,"div",27),u.Xb(52,"button",28),u.fc("click",(function(){return n.showPassword="eye"===n.showPassword?"eye-off":"eye"})),u.Sb(53,"nb-icon",29),u.Wb(),u.Wb(),u.Xb(54,"div",5),u.Fc(55,z,3,2,"ng-container",10),u.Wb(),u.Wb(),u.Xb(56,"div",4),u.Xb(57,"label",30),u.Hc(58,"Nova \u0161ifra:"),u.Wb(),u.Xb(59,"div",7),u.Xb(60,"input",31,32),u.fc("ngModelChange",(function(e){return n.newPassword=e})),u.Wb(),u.Wb(),u.Xb(62,"div",5),u.Fc(63,R,3,2,"ng-container",10),u.Wb(),u.Wb(),u.Xb(64,"div",2),u.Xb(65,"label",33),u.Hc(66,"Ponovi \u0161ifru:"),u.Wb(),u.Xb(67,"div",7),u.Xb(68,"input",34,35),u.fc("ngModelChange",(function(e){return n.retypePassword=e})),u.Wb(),u.Wb(),u.Xb(70,"div",5),u.Fc(71,L,3,2,"ng-container",10),u.Wb(),u.Wb(),u.Xb(72,"div",36),u.Xb(73,"div",7),u.Xb(74,"button",37,38),u.fc("click",(function(){u.zc(e);const i=u.xc(75);return n.setNewPassword(i)})),u.Hc(76,"Promeni \u0161ifru"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(77,"div",2),u.Sb(78,"div",7),u.Xb(79,"div",39),u.Xb(80,"button",40),u.fc("click",(function(){return n.enableInputs()})),u.Hc(81,"IZMENI"),u.Wb(),u.Wb(),u.Xb(82,"div",39),u.Xb(83,"button",41),u.Hc(84,"SA\u010cUVAJ"),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.xc(10),i=u.xc(18),t=u.xc(26),a=u.xc(34),o=u.xc(42),l=u.xc(50),s=u.xc(61),r=u.xc(69);u.Eb(9),u.pc("ngModel",n.user.firstName)("maxlength",n.getConfigValue("forms.validation.firstName.maxLength"))("minlength",n.getConfigValue("forms.validation.firstName.minLength"))("pattern",n.getConfigValue("forms.validation.firstName.pattern"))("required",n.getConfigValue("forms.validation.firstName.required"))("status",e.dirty?e.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),u.Eb(2),u.pc("ngIf",e.invalid&&e.touched),u.Eb(6),u.pc("ngModel",n.user.lastName)("maxlength",n.getConfigValue("forms.validation.lastName.maxLength"))("minlength",n.getConfigValue("forms.validation.lastName.minLength"))("pattern",n.getConfigValue("forms.validation.lastName.pattern"))("required",n.getConfigValue("forms.validation.lastName.required"))("status",i.dirty?i.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),u.Eb(2),u.pc("ngIf",i.invalid&&i.touched),u.Eb(6),u.pc("ngModel",n.user.email)("pattern",n.getConfigValue("forms.validation.email.pattern"))("required",n.getConfigValue("forms.validation.email.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),u.Eb(2),u.pc("ngIf",t.invalid&&t.touched),u.Eb(6),u.pc("ngModel",n.user.username)("maxlength",n.getConfigValue("forms.validation.username.maxLength"))("minlength",n.getConfigValue("forms.validation.username.minLength"))("required",n.getConfigValue("forms.validation.username.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),u.Eb(2),u.pc("ngIf",a.invalid&&a.touched),u.Eb(6),u.pc("ngModel",n.user.phone)("maxlength",n.getConfigValue("forms.validation.phone.maxLength"))("minlength",n.getConfigValue("forms.validation.telefon.minLength"))("required",n.getConfigValue("forms.validation.telefon.required"))("status",o.dirty?o.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),u.Eb(2),u.pc("ngIf",o.invalid&&o.touched),u.Eb(6),u.pc("ngModel",n.oldPassword)("maxlength",n.getConfigValue("forms.validation.password.maxLength"))("minlength",n.getConfigValue("forms.validation.password.minLength"))("required",n.getConfigValue("forms.validation.password.required"))("status",l.dirty?l.invalid?"danger":"success":"basic")("type","eye"===n.showPassword?"password":"text"),u.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),u.Eb(4),u.pc("icon",n.showPassword),u.Eb(2),u.pc("ngIf",l.invalid&&l.touched),u.Eb(5),u.pc("ngModel",n.newPassword)("maxlength",n.getConfigValue("forms.validation.password.maxLength"))("minlength",n.getConfigValue("forms.validation.password.minLength"))("required",n.getConfigValue("forms.validation.password.required"))("status",s.dirty?s.invalid?"danger":"success":"basic")("type","eye"===n.showPassword?"password":"text"),u.Fb("aria-invalid",!(!s.invalid||!s.touched)||null),u.Eb(3),u.pc("ngIf",s.invalid&&s.touched),u.Eb(5),u.pc("ngModel",n.retypePassword)("required",n.getConfigValue("forms.validation.password.required"))("status",r.dirty?r.invalid||s.value!==r.value?"danger":"success":"basic")("type","eye"===n.showPassword?"password":"text"),u.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),u.Eb(3),u.pc("ngIf",r.invalid&&s.touched),u.Eb(9),u.pc("disabled",!n.inputsDisabled),u.Eb(3),u.pc("disabled",n.inputsDisabled)}},directives:[a.w,a.l,a.m,o.Q,a.b,a.k,a.n,a.f,a.g,a.q,a.s,t.m,o.t,o.N],styles:[""]}),e})();var U=i("wH5/");function A(e,n){1&e&&(u.Xb(0,"p",38),u.Hc(1," Email je obavezan! "),u.Wb())}function K(e,n){1&e&&(u.Xb(0,"p",38),u.Hc(1," Email mora biti validan! "),u.Wb())}function B(e,n){if(1&e&&(u.Vb(0),u.Fc(1,A,2,0,"p",37),u.Fc(2,K,2,0,"p",37),u.Ub()),2&e){u.jc();const e=u.xc(31);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function $(e,n){1&e&&(u.Xb(0,"p",38),u.Hc(1," Email je obavezan! "),u.Wb())}function Y(e,n){1&e&&(u.Xb(0,"p",38),u.Hc(1," Email mora biti validan! "),u.Wb())}function Z(e,n){if(1&e&&(u.Vb(0),u.Fc(1,$,2,0,"p",37),u.Fc(2,Y,2,0,"p",37),u.Ub()),2&e){u.jc();const e=u.xc(39);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function J(e,n){1&e&&(u.Xb(0,"p",38),u.Hc(1," Telefon je obavezan! "),u.Wb())}function G(e,n){if(1&e&&(u.Xb(0,"p",38),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Kc(" Telefon mora da bude du\u017ei od ",e.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.phone.maxLength")," ")}}function _(e,n){if(1&e&&(u.Vb(0),u.Fc(1,J,2,0,"p",37),u.Fc(2,G,2,2,"p",37),u.Ub()),2&e){u.jc();const e=u.xc(47);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function Q(e,n){if(1&e&&(u.Xb(0,"p",38),u.Hc(1),u.Wb()),2&e){const e=u.jc(3);u.Eb(1),u.Kc(" Faks mora da bude du\u017ei od ",e.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.phone.maxLength")," ")}}function ee(e,n){if(1&e&&(u.Vb(0),u.Fc(1,Q,2,2,"p",37),u.Ub()),2&e){u.jc();const e=u.xc(6);u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function ne(e,n){if(1&e){const e=u.Yb();u.Xb(0,"div",4),u.Xb(1,"div",5),u.Xb(2,"label",39),u.Hc(3,"Faks:"),u.Wb(),u.Wb(),u.Xb(4,"div",3),u.Xb(5,"input",40,41),u.fc("ngModelChange",(function(n){return u.zc(e),u.jc().company.fax=n})),u.Wb(),u.Fc(7,ee,2,1,"ng-container",18),u.Wb(),u.Wb()}if(2&e){const e=u.xc(6),n=u.jc();u.Eb(5),u.pc("ngModel",n.company.fax)("maxlength",n.getConfigValue("forms.validation.phone.maxLength"))("minlength",n.getConfigValue("forms.validation.phone.minLength"))("status",e.dirty?e.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),u.Eb(2),u.pc("ngIf",e.invalid&&e.touched)}}function ie(e,n){1&e&&(u.Xb(0,"p",38),u.Hc(1," Zakosni zastupnik firme je obavezan! "),u.Wb())}function te(e,n){if(1&e&&(u.Xb(0,"p",38),u.Hc(1),u.Wb()),2&e){const e=u.jc(2);u.Eb(1),u.Kc(" Zakosni zastupnik mora da bude du\u017ei od ",e.getConfigValue("forms.validation.legalRep.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.legalRep.maxLength")," ")}}function ae(e,n){if(1&e&&(u.Vb(0),u.Fc(1,ie,2,0,"p",37),u.Fc(2,te,2,2,"p",37),u.Ub()),2&e){u.jc();const e=u.xc(56);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function oe(e,n){1&e&&u.Sb(0,"input",42),2&e&&u.pc("placeholder",n.$implicit)}let le=(()=>{class e{constructor(e,n={},i,t,a){this.companyService=e,this.options=n,this.toastrService=i,this.roleService=t,this.authService=a,this.company={address:{location:{placeName:"",placeCode:0,zipCode:"",townshipCode:0,townshipName:""},street:""},email:"",emailReception:"",legalRep:{firstName:"",lastName:""},nriz:{username:"",password:""},manager:"",mat:"",name:"",occupation:{name:"",code:""},operations:[],pib:"",telephone:"",fax:""},this.inputsDisabled=!0}ngOnInit(){this.companyService.getCompany(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe(e=>{this.company=e})}getConfigValue(e){return Object(p.n)(this.options,e,null)}enableInputs(){this.inputsDisabled=!1}updateFirma(e){if(e.valid){this.companyService.updateCompany(this.company,this.company._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0;let e=null;this.authService.getToken().subscribe(n=>{e=n}),this.authService.refreshToken("email",e).subscribe(e=>{})}else this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}showToast(e,n,i){this.toastrService.show(n,e,{status:i})}}return e.\u0275fac=function(n){return new(n||e)(u.Rb(U.a),u.Rb(p.a),u.Rb(o.Kb),u.Rb(d.a),u.Rb(p.g))},e.\u0275cmp=u.Lb({type:e,selectors:[["profile-company"]],decls:79,vars:38,consts:[[1,"col-12",3,"ngSubmit"],["formKorisnik","ngForm"],[1,"row"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-companyName",1,"label"],["disabled","","fullWidth","","id","input-companyName","name","companyName","nbInput","","type","text",3,"ngModel","ngModelChange"],["companyName","ngModel"],["for","input-pib",1,"label"],["disabled","","fullWidth","","id","input-pib","name","pib","nbInput","","type","text",3,"ngModel","ngModelChange"],["pib","ngModel"],["for","input-mat",1,"label"],["disabled","","fullWidth","","id","input-mat","name","mat","nbInput","","type","text",3,"ngModel","ngModelChange"],["mat","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["email","ngModel"],[4,"ngIf"],["for","input-emailReception",1,"label"],["fullWidth","","id","input-emailReception","name","emailReception","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["emailReception","ngModel"],["for","input-telephone",1,"label"],["fullWidth","","id","input-telephone","name","telephone","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["telephone","ngModel"],["class","row mb-2",4,"ngIf"],["for","input-legalRep",1,"label"],["fullWidth","","id","input-legalRep","name","legalRep","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["legalRep","ngModel"],["for","input-address",1,"label"],["disabled","","fullWidth","","id","input-address","name","address","nbInput","","type","text",3,"placeholder"],[1,"label"],["disabled","","fullWidth","","nbInput","","type","text",3,"placeholder",4,"ngFor","ngForOf"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-fax",1,"label"],["fullWidth","","id","input-fax","name","fax","nbInput","","type","text",3,"ngModel","maxlength","minlength","status","disabled","ngModelChange"],["fax","ngModel"],["disabled","","fullWidth","","nbInput","","type","text",3,"placeholder"]],template:function(e,n){if(1&e){const e=u.Yb();u.Xb(0,"form",0,1),u.fc("ngSubmit",(function(){u.zc(e);const i=u.xc(1);return n.updateFirma(i)})),u.Xb(2,"div",2),u.Xb(3,"div",3),u.Xb(4,"div",4),u.Xb(5,"div",5),u.Xb(6,"label",6),u.Hc(7,"Naziv Firme:"),u.Wb(),u.Wb(),u.Xb(8,"div",3),u.Xb(9,"input",7,8),u.fc("ngModelChange",(function(e){return n.company.name=e})),u.Wb(),u.Wb(),u.Wb(),u.Xb(11,"div",4),u.Xb(12,"div",5),u.Xb(13,"label",9),u.Hc(14,"PIB:"),u.Wb(),u.Wb(),u.Xb(15,"div",3),u.Xb(16,"input",10,11),u.fc("ngModelChange",(function(e){return n.company.pib=e})),u.Wb(),u.Wb(),u.Wb(),u.Xb(18,"div",4),u.Xb(19,"div",5),u.Xb(20,"label",12),u.Hc(21,"Mati\u010dni broj:"),u.Wb(),u.Wb(),u.Xb(22,"div",3),u.Xb(23,"input",13,14),u.fc("ngModelChange",(function(e){return n.company.mat=e})),u.Wb(),u.Wb(),u.Wb(),u.Xb(25,"div",4),u.Xb(26,"div",5),u.Xb(27,"label",15),u.Hc(28,"Email:"),u.Wb(),u.Wb(),u.Xb(29,"div",3),u.Xb(30,"input",16,17),u.fc("ngModelChange",(function(e){return n.company.email=e})),u.Wb(),u.Fc(32,B,3,2,"ng-container",18),u.Wb(),u.Wb(),u.Xb(33,"div",4),u.Xb(34,"div",5),u.Xb(35,"label",19),u.Hc(36,"Email za prijem dokumenata:"),u.Wb(),u.Wb(),u.Xb(37,"div",3),u.Xb(38,"input",20,21),u.fc("ngModelChange",(function(e){return n.company.emailReception=e})),u.Wb(),u.Fc(40,Z,3,2,"ng-container",18),u.Wb(),u.Wb(),u.Xb(41,"div",4),u.Xb(42,"div",5),u.Xb(43,"label",22),u.Hc(44,"Telefon:"),u.Wb(),u.Wb(),u.Xb(45,"div",3),u.Xb(46,"input",23,24),u.fc("ngModelChange",(function(e){return n.company.telephone=e})),u.Wb(),u.Fc(48,_,3,2,"ng-container",18),u.Wb(),u.Wb(),u.Fc(49,ne,8,7,"div",25),u.Xb(50,"div",4),u.Xb(51,"div",5),u.Xb(52,"label",26),u.Hc(53,"Zakonski Zastupnik Firme:"),u.Wb(),u.Wb(),u.Xb(54,"div",3),u.Xb(55,"input",27,28),u.fc("ngModelChange",(function(e){return n.company.legalRep=e})),u.Wb(),u.Fc(57,ae,3,2,"ng-container",18),u.Wb(),u.Wb(),u.Wb(),u.Xb(58,"div",3),u.Xb(59,"div",4),u.Xb(60,"div",5),u.Xb(61,"label",29),u.Hc(62,"Adresa Firme:"),u.Wb(),u.Wb(),u.Xb(63,"div",5),u.Sb(64,"input",30),u.Wb(),u.Wb(),u.Xb(65,"div",2),u.Xb(66,"div",5),u.Xb(67,"label",31),u.Hc(68,"Rad firme:"),u.Wb(),u.Wb(),u.Xb(69,"div",5),u.Fc(70,oe,1,1,"input",32),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(71,"div",2),u.Sb(72,"div",33),u.Xb(73,"div",34),u.Xb(74,"button",35),u.fc("click",(function(){return n.enableInputs()})),u.Hc(75," IZMENI "),u.Wb(),u.Wb(),u.Xb(76,"div",34),u.Xb(77,"button",36),u.Hc(78,"SA\u010cUVAJ"),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.xc(31),i=u.xc(39),t=u.xc(47),a=u.xc(56);u.Eb(9),u.pc("ngModel",n.company.name),u.Eb(7),u.pc("ngModel",n.company.pib),u.Eb(7),u.pc("ngModel",n.company.mat),u.Eb(7),u.pc("ngModel",n.company.email)("pattern",n.getConfigValue("forms.validation.email.pattern"))("required",n.getConfigValue("forms.validation.email.required"))("status",e.dirty?e.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),u.Eb(2),u.pc("ngIf",e.invalid&&e.touched),u.Eb(6),u.pc("ngModel",n.company.emailReception)("pattern",n.getConfigValue("forms.validation.email.pattern"))("required",n.getConfigValue("forms.validation.email.required"))("status",i.dirty?i.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),u.Eb(2),u.pc("ngIf",i.invalid&&i.touched),u.Eb(6),u.pc("ngModel",n.company.telephone)("maxlength",n.getConfigValue("forms.validation.phone.maxLength"))("minlength",n.getConfigValue("forms.validation.phone.minLength"))("required",n.getConfigValue("forms.validation.phone.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),u.Eb(2),u.pc("ngIf",t.invalid&&t.touched),u.Eb(1),u.pc("ngIf",""===n.company.fax),u.Eb(6),u.pc("ngModel",n.company.legalRep)("maxlength",n.getConfigValue("forms.validation.legalRep.maxLength"))("minlength",n.getConfigValue("forms.validation.legalRep.minLength"))("required",n.getConfigValue("forms.validation.legalRep.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),u.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),u.Eb(2),u.pc("ngIf",a.invalid&&a.touched),u.Eb(7),u.pc("placeholder",n.company.address.location.townshipName+", "+n.company.address.location.placeName+", "+n.company.address.street),u.Eb(6),u.pc("ngForOf",n.company.operations),u.Eb(4),u.pc("disabled",!n.inputsDisabled),u.Eb(3),u.pc("disabled",n.inputsDisabled)}},directives:[a.w,a.l,a.m,o.Q,a.b,a.k,a.n,a.q,a.s,t.m,a.f,a.g,t.l,o.t],styles:[".divider-left[_ngcontent-%COMP%]{border-left:1px solid grey}"]}),e})();var se=i("7Oz7"),re=i("navU");function be(e,n){1&e&&(u.Xb(0,"label",23),u.Hc(1,"Naziv Deponije:"),u.Wb())}function ce(e,n){1&e&&(u.Xb(0,"label",23),u.Hc(1,"Naziv Skladi\u0161ta za tretman:"),u.Wb())}function de(e,n){1&e&&(u.Xb(0,"label",23),u.Hc(1,"Naziv Skladi\u0161ta za skladi\u0161tenje:"),u.Wb())}function ue(e,n){1&e&&(u.Xb(0,"label",23),u.Hc(1,"Naziv Skladi\u0161ta:"),u.Wb())}function pe(e,n){1&e&&(u.Xb(0,"p",25),u.Hc(1," Naziv skladi\u0161ta je obavezan! "),u.Wb())}function ge(e,n){if(1&e&&(u.Vb(0),u.Fc(1,pe,2,0,"p",24),u.Ub()),2&e){u.jc();const e=u.xc(11);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required)}}function me(e,n){1&e&&(u.Xb(0,"p",25),u.Hc(1," Veli\u010dina skladi\u0161ta je obavezna! "),u.Wb())}function fe(e,n){if(1&e&&(u.Vb(0),u.Fc(1,me,2,0,"p",24),u.Ub()),2&e){u.jc();const e=u.xc(19);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required)}}const he=function(){return{standalone:!0}};function ve(e,n){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Xb(1,"div",3),u.Xb(2,"div",8),u.Xb(3,"div",9),u.Xb(4,"div",10),u.Fc(5,be,2,0,"label",11),u.Fc(6,ce,2,0,"label",11),u.Fc(7,de,2,0,"label",11),u.Fc(8,ue,2,0,"label",12),u.Wb(),u.Xb(9,"div",8),u.Xb(10,"input",13,14),u.fc("ngModelChange",(function(i){return u.zc(e),n.$implicit.name=i})),u.Wb(),u.Fc(12,ge,2,1,"ng-container",15),u.Wb(),u.Wb(),u.Xb(13,"div",9),u.Xb(14,"div",16),u.Xb(15,"label",17),u.Hc(16,"Veli\u010dina skladi\u0161ta:"),u.Wb(),u.Wb(),u.Xb(17,"div",8),u.Xb(18,"input",18,19),u.fc("ngModelChange",(function(i){return u.zc(e),n.$implicit.maxAmount=i})),u.Wb(),u.Fc(20,fe,2,1,"ng-container",15),u.Wb(),u.Wb(),u.Wb(),u.Xb(21,"div",8),u.Xb(22,"div",9),u.Xb(23,"div",16),u.Xb(24,"label",20),u.Hc(25,"Adresa Skladi\u0161ta:"),u.Wb(),u.Wb(),u.Xb(26,"div",16),u.Sb(27,"input",21),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Xb(28,"div",9),u.Xb(29,"div",16),u.Sb(30,"storage-meter",22),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=n.$implicit,i=u.xc(11),t=u.xc(19),a=u.jc();u.Eb(4),u.pc("ngSwitch",e.__t),u.Eb(1),u.pc("ngSwitchCase","StorageDump"),u.Eb(1),u.pc("ngSwitchCase","StorageTreatment"),u.Eb(1),u.pc("ngSwitchCase","StorageCache"),u.Eb(3),u.pc("ngModel",e.name)("ngModelOptions",u.sc(23,he))("maxlength",a.getConfigValue("forms.validation.storageName.maxLength"))("minlength",a.getConfigValue("forms.validation.storageName.minLength"))("required",a.getConfigValue("forms.validation.storageName.required"))("status",i.dirty?i.invalid?"danger":"success":"basic")("disabled",a.inputsDisabled),u.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),u.Eb(2),u.pc("ngIf",i.invalid&&i.touched),u.Eb(6),u.pc("ngModel",e.maxAmount)("ngModelOptions",u.sc(24,he))("pattern",a.getConfigValue("forms.validation.storageSize.pattern"))("required",a.getConfigValue("forms.validation.storageSize.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",a.inputsDisabled),u.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),u.Eb(2),u.pc("ngIf",t.invalid&&t.touched),u.Eb(7),u.pc("placeholder",e.address.location.townshipName+", "+e.address.location.placeName+", "+e.address.street),u.Eb(3),u.pc("storage",e)}}let We=(()=>{class e{constructor(e,n,i={},t){this.storageService=e,this.roleService=n,this.options=i,this.toastrService=t,this.storages=[],this.inputsDisabled=!0}ngOnInit(){this.storageService.getCompaniesStorage(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe(e=>{this.storages=e})}getConfigValue(e){return Object(p.n)(this.options,e,null)}enableInputs(){this.inputsDisabled=!1}updateStorage(e){e.valid?(this.storages.forEach(e=>this.storageService.updateStorage(e,e._id).subscribe(e=>{})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}showToast(e,n,i){this.toastrService.show(n,e,{status:i})}}return e.\u0275fac=function(n){return new(n||e)(u.Rb(se.a),u.Rb(d.a),u.Rb(p.a),u.Rb(o.Kb))},e.\u0275cmp=u.Lb({type:e,selectors:[["profile-storages"]],decls:11,vars:3,consts:[[3,"ngSubmit"],["formStorage","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","status","primary","fullWidth","","type","button",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12",3,"ngSwitch"],["class","label","for","input-storageName",4,"ngSwitchCase"],["class","label","for","input-storageName",4,"ngSwitchDefault"],["fullWidth","","id","input-storageName","name","storageName","nbInput","","type","text",3,"ngModel","ngModelOptions","maxlength","minlength","required","status","disabled","ngModelChange"],["storageName","ngModel"],[4,"ngIf"],[1,"col-12"],["for","input-storageSize",1,"label"],["fullWidth","","id","input-storageSize","name","storageSize","nbInput","","type","number",3,"ngModel","ngModelOptions","pattern","required","status","disabled","ngModelChange"],["storageSize","ngModel"],["for","input-address",1,"label"],["disabled","","fullWidth","","id","input-address","name","address","nbInput","","type","text",3,"placeholder"],[3,"storage"],["for","input-storageName",1,"label"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,n){if(1&e){const e=u.Yb();u.Xb(0,"form",0,1),u.fc("ngSubmit",(function(){u.zc(e);const i=u.xc(1);return n.updateStorage(i)})),u.Fc(2,ve,31,25,"div",2),u.Xb(3,"div",3),u.Sb(4,"div",4),u.Xb(5,"div",5),u.Xb(6,"button",6),u.fc("click",(function(){return n.enableInputs()})),u.Hc(7," IZMENI "),u.Wb(),u.Wb(),u.Xb(8,"div",5),u.Xb(9,"button",7),u.Hc(10,"SA\u010cUVAJ"),u.Wb(),u.Wb(),u.Wb(),u.Wb()}2&e&&(u.Eb(2),u.pc("ngForOf",n.storages),u.Eb(4),u.pc("disabled",!n.inputsDisabled),u.Eb(3),u.pc("disabled",n.inputsDisabled))},directives:[a.w,a.l,a.m,t.l,o.t,t.n,t.o,t.p,o.Q,a.b,a.k,a.n,a.f,a.g,a.s,t.m,a.p,a.q,re.a],styles:[""]}),e})();var Xe=i("bS1W"),ye=i("kBrA");const we=["viewTrash"];function Me(e,n){1&e&&(u.Xb(0,"p",30),u.Hc(1," Naziv dozvole je obavezan! "),u.Wb())}function Ie(e,n){if(1&e&&(u.Vb(0),u.Fc(1,Me,2,0,"p",29),u.Ub()),2&e){u.jc();const e=u.xc(9);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required)}}const xe=function(){return{standalone:!0}};function Ee(e,n){if(1&e){const e=u.Yb();u.Xb(0,"div",10),u.Xb(1,"div",11),u.Xb(2,"label",31),u.Hc(3,"Skladi\u0161te:"),u.Wb(),u.Wb(),u.Xb(4,"div",9),u.Xb(5,"input",32),u.fc("ngModelChange",(function(n){return u.zc(e),u.jc().$implicit.storage.name=n})),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.jc().$implicit;u.Eb(5),u.pc("ngModel",e.storage.name)("ngModelOptions",u.sc(2,xe))}}function Ce(e,n){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Xb(1,"div",3),u.Xb(2,"div",9),u.Xb(3,"div",10),u.Xb(4,"div",11),u.Xb(5,"label",12),u.Hc(6,"Naziv dozvole:"),u.Wb(),u.Wb(),u.Xb(7,"div",9),u.Xb(8,"input",13,14),u.fc("ngModelChange",(function(i){return u.zc(e),n.$implicit.name=i})),u.Wb(),u.Fc(10,Ie,2,1,"ng-container",15),u.Wb(),u.Wb(),u.Xb(11,"div",10),u.Xb(12,"div",11),u.Xb(13,"label",16),u.Hc(14,"\u0160ifra dozvole:"),u.Wb(),u.Wb(),u.Xb(15,"div",9),u.Xb(16,"input",17),u.fc("ngModelChange",(function(i){return u.zc(e),n.$implicit.code=i})),u.Wb(),u.Wb(),u.Wb(),u.Xb(17,"div",10),u.Xb(18,"div",11),u.Xb(19,"label",18),u.Hc(20,"Datum trajanja dozvole:"),u.Wb(),u.Wb(),u.Xb(21,"div",19),u.Sb(22,"input",20),u.Wb(),u.Xb(23,"button",21),u.Hc(24,"-"),u.Wb(),u.Xb(25,"div",22),u.Sb(26,"input",23),u.Wb(),u.Wb(),u.Wb(),u.Xb(27,"div",9),u.Xb(28,"div",10),u.Xb(29,"div",11),u.Xb(30,"label",24),u.Hc(31,"Vrsta dozvole:"),u.Wb(),u.Wb(),u.Xb(32,"div",9),u.Xb(33,"input",25),u.fc("ngModelChange",(function(i){return u.zc(e),n.$implicit.type=i})),u.Wb(),u.Wb(),u.Wb(),u.Fc(34,Ee,6,3,"div",26),u.Xb(35,"div",10),u.Xb(36,"div",11),u.Sb(37,"label",27),u.Wb(),u.Xb(38,"div",9),u.Xb(39,"button",28),u.fc("click",(function(){u.zc(e);const i=n.$implicit;return u.jc().openPermitsTrashWindow(i)})),u.Hc(40,"Pogledaj listu otpada "),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=n.$implicit,i=u.xc(9),t=u.jc();u.Eb(8),u.pc("ngModel",e.name)("ngModelOptions",u.sc(16,xe))("maxlength",t.getConfigValue("forms.validation.permitName.maxLength"))("minlength",t.getConfigValue("forms.validation.permitName.minLength"))("required",t.getConfigValue("forms.validation.permitName.required"))("status",i.dirty?i.invalid?"danger":"success":"basic")("disabled",t.inputsDisabled),u.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),u.Eb(2),u.pc("ngIf",i.invalid&&i.touched),u.Eb(6),u.pc("ngModel",e.code)("ngModelOptions",u.sc(17,xe)),u.Eb(6),u.pc("placeholder",t.getDate(e.dateCreation)),u.Eb(4),u.pc("placeholder",t.getDate(e.dateExpiration)),u.Eb(7),u.pc("ngModel",e.type)("ngModelOptions",u.sc(18,xe)),u.Eb(1),u.pc("ngIf",void 0!==e.storage)}}function Se(e,n){if(1&e){const e=u.Yb();u.Xb(0,"view-permits-trash-popup",33),u.fc("callUpdatePermitsTrash",(function(n){return u.zc(e),u.jc().updatePermitsTrashMethod(n)})),u.Wb()}if(2&e){const e=u.jc();u.pc("selectedPermit",e.selectedPermit)}}let Fe=(()=>{class e{constructor(e,n,i={},t,a,o){this.permitService=e,this.roleService=n,this.options=i,this.toastrService=t,this.datePipe=a,this.windowService=o,this.permits=[],this.inputsDisabled=!0}ngOnInit(){this.permitService.getCompaniesPermits(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe(e=>{this.permits=e})}getConfigValue(e){return Object(p.n)(this.options,e,null)}enableInputs(){this.inputsDisabled=!1}updatePermits(e){e.valid?(this.permits.forEach(e=>this.permitService.updatePermit(e,e._id).subscribe(e=>{})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}openPermitsTrashWindow(e){this.selectedPermit=e,this.windowRef=this.windowService.open(this.viewTrash,{title:"Lista otpada"})}updatePermitsTrashMethod(e){this.selectedPermit.trashList=e,this.permitService.updatePermit(this.selectedPermit,this.selectedPermit._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.windowRef.close()}getDate(e){return this.datePipe.transform(e,"dd-MM-yyyy")}showToast(e,n,i){this.toastrService.show(n,e,{status:i})}}return e.\u0275fac=function(n){return new(n||e)(u.Rb(Xe.a),u.Rb(d.a),u.Rb(p.a),u.Rb(o.Kb),u.Rb(t.e),u.Rb(o.Qb))},e.\u0275cmp=u.Lb({type:e,selectors:[["profile-permit"]],viewQuery:function(e,n){var i;1&e&&u.Oc(we,!0,u.N),2&e&&u.wc(i=u.gc())&&(n.viewTrash=i.first)},decls:13,vars:3,consts:[[3,"ngSubmit"],["formPermit","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["viewTrash",""],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-permitName",1,"label"],["fullWidth","","id","input-permitName","name","permitName","nbInput","","type","text",3,"ngModel","ngModelOptions","maxlength","minlength","required","status","disabled","ngModelChange"],["permitName","ngModel"],[4,"ngIf"],["for","input-permitCode",1,"label"],["disabled","","fullWidth","","id","input-permitCode","name","permitCode","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["for","input-dateCreation",1,"label"],[1,"col-5","mr-0","pr-0"],["disabled","","fullWidth","","id","input-dateCreation","name","dateCreation","nbInput","","type","text",3,"placeholder"],["disabled","","nbButton","",1,"mx-0","px-0","col-1"],[1,"col-5","ml-0","pl-0"],["disabled","","fullWidth","","id","input-dateExpiration","name","dateExpiration","nbInput","","type","text",3,"placeholder"],["for","input-permiType",1,"label"],["disabled","","fullWidth","","id","input-permiType","name","permiType","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["class","row mb-2",4,"ngIf"],[1,"label"],["nbButton","","fullWidth","","status","success","type","button",3,"click"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-permitStorage",1,"label"],["disabled","","fullWidth","","id","input-permitStorage","name","permitStorage","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],[3,"selectedPermit","callUpdatePermitsTrash"]],template:function(e,n){if(1&e){const e=u.Yb();u.Xb(0,"form",0,1),u.fc("ngSubmit",(function(){u.zc(e);const i=u.xc(1);return n.updatePermits(i)})),u.Fc(2,Ce,41,19,"div",2),u.Xb(3,"div",3),u.Sb(4,"div",4),u.Xb(5,"div",5),u.Xb(6,"button",6),u.fc("click",(function(){return n.enableInputs()})),u.Hc(7," IZMENI "),u.Wb(),u.Wb(),u.Xb(8,"div",5),u.Xb(9,"button",7),u.Hc(10,"SA\u010cUVAJ"),u.Wb(),u.Wb(),u.Wb(),u.Wb(),u.Fc(11,Se,1,1,"ng-template",null,8,u.Gc)}2&e&&(u.Eb(2),u.pc("ngForOf",n.permits),u.Eb(4),u.pc("disabled",!n.inputsDisabled),u.Eb(3),u.pc("disabled",n.inputsDisabled))},directives:[a.w,a.l,a.m,t.l,o.t,o.Q,a.b,a.k,a.n,a.f,a.g,a.s,t.m,ye.a],styles:[""]}),e})();var Ve=i("H5EB");function je(e,n){1&e&&(u.Xb(0,"p",18),u.Hc(1," Registarski broj tablice je obavezan! "),u.Wb())}function ke(e,n){1&e&&(u.Xb(0,"p",18),u.Hc(1," Registarski broj tablice mora biti validan! "),u.Wb())}function Pe(e,n){if(1&e&&(u.Vb(0),u.Fc(1,je,2,0,"p",17),u.Fc(2,ke,2,0,"p",17),u.Ub()),2&e){u.jc();const e=u.xc(9);u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.pc("ngIf",null==e.errors?null:e.errors.pattern)}}const He=function(){return{standalone:!0}};function ze(e,n){if(1&e){const e=u.Yb();u.Xb(0,"div"),u.Xb(1,"div",3),u.Xb(2,"div",8),u.Xb(3,"div",9),u.Xb(4,"div",10),u.Xb(5,"label",11),u.Hc(6,"Registarski broj tablice:"),u.Wb(),u.Wb(),u.Xb(7,"div",8),u.Xb(8,"input",12,13),u.fc("ngModelChange",(function(i){return u.zc(e),n.$implicit.licensePlate=i})),u.Wb(),u.Fc(10,Pe,3,2,"ng-container",14),u.Wb(),u.Wb(),u.Xb(11,"div",9),u.Xb(12,"div",10),u.Xb(13,"label",15),u.Hc(14,"Vrsta vozila:"),u.Wb(),u.Wb(),u.Xb(15,"div",8),u.Sb(16,"input",16),u.Wb(),u.Wb(),u.Wb(),u.Sb(17,"div",8),u.Wb(),u.Wb()}if(2&e){const e=n.$implicit,i=u.xc(9),t=u.jc();u.Eb(8),u.pc("ngModel",e.licensePlate)("ngModelOptions",u.sc(7,He))("status",i.dirty?i.invalid?"danger":"success":"basic")("disabled",t.inputsDisabled),u.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),u.Eb(2),u.pc("ngIf",i.invalid&&i.touched),u.Eb(6),u.pc("placeholder",e.type)}}let Ne=(()=>{class e{constructor(e,n,i={},t){this.vehicleService=e,this.roleService=n,this.options=i,this.toastrService=t,this.vehicles=[],this.inputsDisabled=!0}ngOnInit(){this.vehicleService.getCompaniesVehicles(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe(e=>{this.vehicles=e})}getConfigValue(e){return Object(p.n)(this.options,e,null)}enableInputs(){this.inputsDisabled=!1}updatePrevoznoSredstvo(e){e.valid?(this.vehicles.forEach(e=>this.vehicleService.updateVehicle(e,e._id).subscribe(e=>{})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}showToast(e,n,i){this.toastrService.show(n,e,{status:i})}}return e.\u0275fac=function(n){return new(n||e)(u.Rb(Ve.a),u.Rb(d.a),u.Rb(p.a),u.Rb(o.Kb))},e.\u0275cmp=u.Lb({type:e,selectors:[["profile-vehicle"]],decls:11,vars:3,consts:[[3,"ngSubmit"],["formVehicle","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-licensePlate",1,"label"],["required","","pattern","([A-\u017d]{2})-(\\d{3,4})-([A-\u017d]{2})","fullWidth","","id","input-licensePlate","name","licensePlate","nbInput","","type","text",3,"ngModel","ngModelOptions","status","disabled","ngModelChange"],["licensePlate","ngModel"],[4,"ngIf"],["for","input-type",1,"label"],["fullWidth","","disabled","","id","input-type","name","type","nbInput","","type","text",3,"placeholder"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,n){if(1&e){const e=u.Yb();u.Xb(0,"form",0,1),u.fc("ngSubmit",(function(){u.zc(e);const i=u.xc(1);return n.updatePrevoznoSredstvo(i)})),u.Fc(2,ze,18,8,"div",2),u.Xb(3,"div",3),u.Sb(4,"div",4),u.Xb(5,"div",5),u.Xb(6,"button",6),u.fc("click",(function(){return n.enableInputs()})),u.Hc(7," IZMENI "),u.Wb(),u.Wb(),u.Xb(8,"div",5),u.Xb(9,"button",7),u.Hc(10,"SA\u010cUVAJ"),u.Wb(),u.Wb(),u.Wb(),u.Wb()}2&e&&(u.Eb(2),u.pc("ngForOf",n.vehicles),u.Eb(4),u.pc("disabled",!n.inputsDisabled),u.Eb(3),u.pc("disabled",n.inputsDisabled))},directives:[a.w,a.l,a.m,t.l,o.t,o.Q,a.b,a.s,a.q,a.k,a.n,t.m],styles:[""]}),e})();function qe(e,n){1&e&&u.Sb(0,"profile-permit")}function Re(e,n){1&e&&u.Sb(0,"profile-vehicle")}const Te=[{path:":activeTab",component:(()=>{class e{constructor(e,n){this.roleService=e,this.activatedRoute=n,this.activatedRoute.params.subscribe(e=>{this.activeTab=e.activeTab})}ngOnInit(){this.roleService.getOperations().subscribe(e=>{this.operations=e})}}return e.\u0275fac=function(n){return new(n||e)(u.Rb(d.a),u.Rb(c.a))},e.\u0275cmp=u.Lb({type:e,selectors:[["profile"]],decls:12,vars:10,consts:[["tabIcon","person","tabTitle","Korisnik",3,"active"],["tabIcon","briefcase","tabTitle","Firma",3,"active"],["tabIcon","cube","tabTitle","Skladi\u0161ta",3,"active","disabled"],["tabIcon","file-text","tabTitle","Dozvole",3,"active","disabled"],[4,"ngIf"],["tabIcon","car","tabTitle","Prevozna Sredstva",3,"active","disabled"]],template:function(e,n){1&e&&(u.Xb(0,"nb-card"),u.Xb(1,"nb-tabset"),u.Xb(2,"nb-tab",0),u.Sb(3,"profile-user"),u.Wb(),u.Xb(4,"nb-tab",1),u.Sb(5,"profile-company"),u.Wb(),u.Xb(6,"nb-tab",2),u.Sb(7,"profile-storages"),u.Wb(),u.Xb(8,"nb-tab",3),u.Fc(9,qe,1,0,"profile-permit",4),u.Wb(),u.Xb(10,"nb-tab",5),u.Fc(11,Re,1,0,"profile-vehicle",4),u.Wb(),u.Wb(),u.Wb()),2&e&&(u.Eb(2),u.pc("active","user"===n.activeTab),u.Eb(2),u.pc("active","company"===n.activeTab),u.Eb(2),u.pc("active","storages"===n.activeTab)("disabled",!(null!=n.operations&&n.operations.production||null!=n.operations&&n.operations.treatment||null!=n.operations&&n.operations.disposal||null!=n.operations&&n.operations.cache)),u.Eb(2),u.pc("active","permits"===n.activeTab)("disabled",!(null!=n.operations&&n.operations.transport||null!=n.operations&&n.operations.treatment||null!=n.operations&&n.operations.disposal||null!=n.operations&&n.operations.cache)),u.Eb(1),u.pc("ngIf",(null==n.operations?null:n.operations.transport)||(null==n.operations?null:n.operations.treatment)||(null==n.operations?null:n.operations.disposal)||(null==n.operations?null:n.operations.cache)),u.Eb(1),u.pc("active","vehicles"===n.activeTab)("disabled",!(null!=n.operations&&n.operations.transport)),u.Eb(1),u.pc("ngIf",null==n.operations?null:n.operations.transport))},directives:[o.x,o.Fb,o.Eb,O,le,We,t.m,Fe,Ne],styles:[""]}),e})()}];let De=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(n){return new(n||e)},imports:[[c.g.forChild(Te)],c.g]}),e})(),Le=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(n){return new(n||e)},imports:[[De,t.c,a.e,o.R,o.kb,o.u,o.Gb,o.B,o.ib,l.c,s.PagesModule,r.a,b.StorageModule,o.P]]}),e})()}}]);