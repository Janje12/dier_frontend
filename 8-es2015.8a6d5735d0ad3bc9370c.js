(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{FYoA:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",(function(){return lt}));var a=n("ofXK"),i=n("3Pt+"),o=n("aceb"),b=n("RS3s"),s=n("tk/3"),r=n("LRne"),c=n("AytR"),d=n("fXoL");let p=(()=>{class t extends class{}{constructor(t){super(),this.http=t,this.apiUrl=c.a.apiUrl,this.dko={datumDozvolePrimalac:new Date,datumDozvoleTransport:new Date,datumIspitivanja:new Date,dodatneInformacije:"",fizickoStanje:"",vrstaProizvodjaca:"",masaOtpada:0,nacinPakovanja:"",nacinPostupanja:"",otpad:void 0,qLista:"",registarskiBroj:"",rutaKretanja:new Array(5),sifraDozvolePrimalac:"",sifraDozvoleTransport:"",sifraIspitivanja:"",vidPrevoza:"",vrstaOtpada:"",vrstaPrimalaca:"",vrstaVozila:""}}sendSyncDKO(t){this.dko=t}sendDKO(t){t.subscribe(t=>{this.dko=t})}getDKO(){return Object(r.a)(this.dko)}generateDKO(t,e,n){let a=new s.e;return a=a.set("Accept","application/pdf"),this.http.post(this.apiUrl+"/api/dko",{dko:t,skladiste:e,trash:n},{headers:a,responseType:"blob"})}}return t.\u0275fac=function(e){return new(e||t)(d.bc(s.b))},t.\u0275prov=d.Nb({token:t,factory:t.\u0275fac}),t})();var l=n("wH5/"),u=n("fo3O");let h=(()=>{class t extends class{}{constructor(t){super(),this.http=t,this.apiUrl=c.a.apiUrl}getMesecniIzvestaj(){return this.http.get(this.apiUrl+"/api/mesecniizvestaj")}getOneMonthlyReport(t){return this.http.get(this.apiUrl+"/api/mesecniizvestaj/"+t)}createMesecniIzvestaj(t,e,n){let a=new s.e;return a=a.set("Accept","application/pdf"),this.http.post(this.apiUrl+"/api/mesecniizvestaj",{trash:t,reportType:n,storageID:e._id},{headers:a,responseType:"blob"})}createGodisnjiIzvestaj(t,e,n){let a=new s.e;return a=a.set("Accept","application/pdf"),this.http.post(this.apiUrl+"/api/godisnjiizvestaj",{trash:t,reportType:e,company:n},{headers:a,responseType:"blob"})}getAllMesecniIzvestajFirme(t){return this.mesecniIzvestaj$||(this.mesecniIzvestaj$=this.http.get(this.apiUrl+"/api/mesecniizvestaj/firma/"+t)),this.mesecniIzvestaj$}}return t.\u0275fac=function(e){return new(e||t)(d.bc(s.b))},t.\u0275prov=d.Nb({token:t,factory:t.\u0275fac}),t})();var m=n("Lx1j"),g=n("ud2R"),v=n("7Oz7"),f=n("vTDv"),W=n("tyNb");const X=[{title:"Po\u010detni panel",icon:{icon:"home",pack:"font-awesome"},link:"/admin/admin-dashboard",home:!0},{title:"ADMIN PANELA",group:!0},{title:"Korisnici",link:"/admin/korisnici",icon:{icon:"user",pack:"font-awesome"}},{title:"Firme",link:"/admin/firme",icon:{icon:"industry",pack:"font-awesome"}},{title:"Skladi\u0161ta",link:"/admin/skladiste",icon:{icon:"box",pack:"font-awesome"}},{title:"Izve\u0161taji",link:"/admin/izvestaji",icon:{icon:"print",pack:"font-awesome"}}];var k=n("mgFL");const y=[{path:"",component:(()=>{class t{constructor(){this.menu=X}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Lb({type:t,selectors:[["ng-component"]],decls:3,vars:1,consts:[[3,"items"]],template:function(t,e){1&t&&(d.Xb(0,"ngx-one-column-layout"),d.Sb(1,"nb-menu",0),d.Sb(2,"router-outlet"),d.Wb()),2&t&&(d.Eb(1),d.pc("items",e.menu))},directives:[k.a,o.Y,W.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),t})(),children:[]}];let j=(()=>{class t{}return t.\u0275mod=d.Pb({type:t}),t.\u0275inj=d.Ob({factory:function(e){return new(e||t)},imports:[[W.g.forChild(y)],W.g]}),t})();var M=n("SxV6");const C={actions:{columnTitle:"Generi\u0161i DEO/DKO",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"trashReport",title:'<i class="fa fa-file-pdf"></i>'},{name:"trashTransport",title:'<i class="fa fa-truck"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj"},naziv:{title:"Naziv"},kolicina:{title:"Koli\u010dina (kg)"}}};function z(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div",1),d.Xb(1,"h5"),d.Hc(2),d.Wb(),d.Xb(3,"p"),d.Hc(4,"Generi\u0161i sve izve\u0161taje "),d.Xb(5,"i",2),d.fc("click",(function(){d.zc(t);const n=e.$implicit;return d.jc().allTrashReport(n)})),d.Wb(),d.Wb(),d.Xb(6,"ng2-smart-table",3),d.fc("custom",(function(n){d.zc(t);const a=e.$implicit;return d.jc().chooseAction(n,a)})),d.Wb(),d.Wb()}if(2&t){const t=e.$implicit,n=d.jc();d.Eb(2),d.Jc(" ",t.naziv,""),d.Eb(4),d.pc("settings",n.storageReportSettings)("source",t.neopasniOtpad)}}let O=(()=>{class t{constructor(t,e,n){this.skladisteService=t,this.mesecniIzvestajService=e,this.router=n,this.storages=[],this.storageReportSettings=C}ngOnInit(){this.storageReportSettings.trashProduction=null,this.storageIDs.forEach(t=>this.skladisteService.getStorage(t).subscribe(t=>{this.storages.push(t)}))}downloadFile(t){const e=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(e);window.open(n)}chooseAction(t,e){"trashReport"===t.action&&("production"===this.type&&this.trashProudctionReport(t,e),"treatment"===this.type&&this.trashTreatmentReport(t,e),"dump"===this.type&&this.trashDumpReport(t,e)),"trashTransport"===t.action&&"production"===this.type&&this.trashTransportReport(t,e)}trashProudctionReport({data:t},e){this.mesecniIzvestajService.createMesecniIzvestaj(t,e,"PRODUCTION").subscribe(t=>this.downloadFile(t))}trashTreatmentReport({data:t},e){this.mesecniIzvestajService.createMesecniIzvestaj(t,e,"TREATMENT").subscribe(t=>this.downloadFile(t))}trashDumpReport({data:t},e){this.mesecniIzvestajService.createMesecniIzvestaj(t,e,"DUMP").subscribe(t=>this.downloadFile(t))}trashTransportReport({data:t},e){this.router.navigate(["admin/izvestaji/dko",{trash:t._id,storage:e._id}])}allTrashReport(t){}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(v.a),d.Rb(h),d.Rb(W.c))},t.\u0275cmp=d.Lb({type:t,selectors:[["ngx-storage-reports"]],inputs:{storageIDs:"storageIDs",type:"type"},decls:1,vars:1,consts:[["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"fa","fa-download",3,"click"],[3,"settings","source","custom"]],template:function(t,e){1&t&&d.Fc(0,z,7,3,"div",0),2&t&&d.pc("ngForOf",e.storages)},directives:[a.l,b.b],styles:["[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]:hover, i[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]   ng2-st-tbody-edit-delete[_ngcontent-%COMP%]{display:flex!important;height:0!important}[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]{display:inline-block;width:25%;text-align:center;margin-left:5px;font-size:1.1em}"]}),t})();function I(t,e){if(1&t&&(d.Xb(0,"nb-tab",15),d.Sb(1,"ngx-storage-reports",16),d.Wb()),2&t){const t=d.jc();d.Eb(1),d.pc("storageIDs",t.company.storages)("type","production")}}function P(t,e){1&t&&(d.Xb(0,"nb-tab",17),d.Hc(1," NOT "),d.Wb())}function E(t,e){if(1&t&&(d.Xb(0,"nb-tab",18),d.Sb(1,"ngx-storage-reports",16),d.Wb()),2&t){const t=d.jc();d.Eb(1),d.pc("storageIDs",t.company.storages)("type","treatment")}}function H(t,e){if(1&t&&(d.Xb(0,"nb-tab",19),d.Sb(1,"ngx-storage-reports",16),d.Wb()),2&t){const t=d.jc();d.Eb(1),d.pc("storageIDs",t.company.storages)("type","dump")}}function S(t,e){1&t&&(d.Xb(0,"nb-tab",20),d.Hc(1," NOS "),d.Wb())}let w=(()=>{class t{constructor(t,e,n,a,i){this.route=t,this.firmaService=e,this.toastrService=n,this.skladisteService=a,this.roleService=i,this.company={address:{location:void 0,street:""},email:"",emailReception:"",legalRep:"",manager:"",mat:"",name:"",occupation:void 0,operations:[],pib:"",telephone:""}}ngOnInit(){const t=this.route.snapshot.paramMap.get("pib");this.firmaService.getCompany(t,"pib").subscribe(t=>{this.company=t,this.skladisteService.getCompaniesStorage("",this.company._id).pipe(Object(M.a)()).subscribe(t=>{this.skladista=t}),this.roleService.getOperations().subscribe(t=>{this.operations=t})})}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(W.a),d.Rb(l.a),d.Rb(o.Gb),d.Rb(v.a),d.Rb(g.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["ngx-company-reports"]],decls:23,vars:7,consts:[[1,"row","text-center"],[1,"col-1"],["routerLink","../..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-11"],[1,"row","mb-2"],[1,"col-6"],[1,"col-12","label"],["nbInput","","disabled","","fullWidth","",3,"ngModel","ngModelChange"],[1,"col-12"],["active","","tabTitle","Proizvodnja Otpada",4,"ngIf"],["tabTitle","Transport Otpada",4,"ngIf"],["tabTitle","Tretman Otpada",4,"ngIf"],["tabTitle","Odlaganje Otpada",4,"ngIf"],["tabTitle","Skladi\u0161tenje Otpada",4,"ngIf"],["active","","tabTitle","Proizvodnja Otpada"],[3,"storageIDs","type"],["tabTitle","Transport Otpada"],["tabTitle","Tretman Otpada"],["tabTitle","Odlaganje Otpada"],["tabTitle","Skladi\u0161tenje Otpada"]],template:function(t,e){1&t&&(d.Xb(0,"nb-card"),d.Xb(1,"nb-card-header"),d.Xb(2,"div",0),d.Xb(3,"div",1),d.Xb(4,"a",2),d.Sb(5,"i",3),d.Wb(),d.Wb(),d.Xb(6,"div",4),d.Xb(7,"h5"),d.Hc(8),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(9,"nb-card-body"),d.Xb(10,"div",5),d.Xb(11,"div",6),d.Xb(12,"label",7),d.Hc(13,"Email za prijem dokumenata:"),d.Wb(),d.Xb(14,"div",6),d.Xb(15,"input",8),d.fc("ngModelChange",(function(t){return e.company.emailReception=t})),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(16,"div",5),d.Xb(17,"nb-tabset",9),d.Fc(18,I,2,2,"nb-tab",10),d.Fc(19,P,2,0,"nb-tab",11),d.Fc(20,E,2,2,"nb-tab",12),d.Fc(21,H,2,2,"nb-tab",13),d.Fc(22,S,2,0,"nb-tab",14),d.Wb(),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(8),d.Ic(e.company.name),d.Eb(7),d.pc("ngModel",e.company.emailReception),d.Eb(3),d.pc("ngIf",null==e.operations?null:e.operations.proizvodnja),d.Eb(1),d.pc("ngIf",null==e.operations?null:e.operations.transport),d.Eb(1),d.pc("ngIf",null==e.operations?null:e.operations.tretman),d.Eb(1),d.pc("ngIf",null==e.operations?null:e.operations.odlaganje),d.Eb(1),d.pc("ngIf",null==e.operations?null:e.operations.skladistenje))},directives:[o.w,o.x,W.f,o.v,o.N,i.b,i.k,i.n,o.Bb,a.m,o.Ab,O],styles:[""]}),t})();const T={pager:{perPage:10},actions:{add:!1,edit:!1,delete:!1},columns:{dan:{title:"Dan"},ukupnoStanje:{title:"Ukupno stanje (kg)"},ukupnoProizvodnja:{title:"Ukupna proizvodnja (kg)"},ukupnoTransport:{title:"Ukupan transport (kg)"},DKO:{valuePrepareFunction:(t,e)=>e.nazivFirme?e.nazivFirme+" "+e.brojDozvole:"/",title:"DKO"}}};let R=(()=>{class t{constructor(t,e){this.route=t,this.reportService=e,this.settings=T,this.report={_id:"",dnevniIzvestaj:[],godina:0,mesec:0,otpad:{name:"",indexNumber:"",packaging:"",qList:"",desc:"",amount:0},skladiste:{name:"",maxAmount:0,amount:0,address:void 0},ukupnoProizvodnja:0,ukupnoStanje:0,ukupnoTransport:0}}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");this.reportService.getOneMonthlyReport(t).subscribe(t=>{this.report=t,this.dailyReports=this.report.dnevniIzvestaj})}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(W.a),d.Rb(h))},t.\u0275cmp=d.Lb({type:t,selectors:[["monthly-report-information"]],decls:53,vars:11,consts:[[1,"row","text-center"],[1,"col-1"],["routerLink","../..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-11"],[1,"row"],[1,"col-12"],[1,"label"],["nbInput","","disabled","","fullWidth","",3,"ngModel","ngModelChange"],[1,"col-4"],[1,"row","mt-2"],[3,"settings","source"]],template:function(t,e){1&t&&(d.Xb(0,"nb-card"),d.Xb(1,"nb-card-header"),d.Xb(2,"div",0),d.Xb(3,"div",1),d.Xb(4,"a",2),d.Sb(5,"i",3),d.Wb(),d.Wb(),d.Xb(6,"div",4),d.Xb(7,"h5"),d.Hc(8),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(9,"nb-card-body"),d.Xb(10,"div",5),d.Xb(11,"div",6),d.Xb(12,"label",7),d.Hc(13,"Godina: "),d.Wb(),d.Xb(14,"input",8),d.fc("ngModelChange",(function(t){return e.report.godina=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(15,"div",5),d.Xb(16,"div",6),d.Xb(17,"label",7),d.Hc(18,"Mesec: "),d.Wb(),d.Xb(19,"input",8),d.fc("ngModelChange",(function(t){return e.report.mesec=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(20,"div",5),d.Xb(21,"div",6),d.Xb(22,"label",7),d.Hc(23,"Skladi\u0161te: "),d.Wb(),d.Xb(24,"input",8),d.fc("ngModelChange",(function(t){return e.report.skladiste.name=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(25,"div",5),d.Xb(26,"div",6),d.Xb(27,"label",7),d.Hc(28,"Indeksni Broj: "),d.Wb(),d.Xb(29,"input",8),d.fc("ngModelChange",(function(t){return e.report.otpad.indexNumber=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(30,"div",5),d.Xb(31,"div",6),d.Xb(32,"label",7),d.Hc(33,"Trenutna Koli\u010dina na stanju: "),d.Wb(),d.Xb(34,"input",8),d.fc("ngModelChange",(function(t){return e.report.otpad.amount=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(35,"div",5),d.Xb(36,"div",9),d.Xb(37,"label",7),d.Hc(38,"Fizi\u010dko stanje: "),d.Wb(),d.Xb(39,"input",8),d.fc("ngModelChange",(function(t){return e.report.otpad.state=t})),d.Wb(),d.Wb(),d.Xb(40,"div",9),d.Xb(41,"label",7),d.Hc(42,"Na\u010din pakovanja: "),d.Wb(),d.Xb(43,"input",8),d.fc("ngModelChange",(function(t){return e.report.otpad.packaging=t})),d.Wb(),d.Wb(),d.Xb(44,"div",9),d.Xb(45,"label",7),d.Hc(46,"Q Lista: "),d.Wb(),d.Xb(47,"input",8),d.fc("ngModelChange",(function(t){return e.report.otpad.qList=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(48,"div",10),d.Xb(49,"div",6),d.Xb(50,"label",7),d.Hc(51,"Izve\u0161taj za svaki dan:"),d.Wb(),d.Sb(52,"ng2-smart-table",11),d.Wb(),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(8),d.Ic(e.report.otpad.name),d.Eb(6),d.pc("ngModel",e.report.godina),d.Eb(5),d.pc("ngModel",e.report.mesec),d.Eb(5),d.pc("ngModel",e.report.skladiste.name),d.Eb(5),d.pc("ngModel",e.report.otpad.indexNumber),d.Eb(5),d.pc("ngModel",e.report.otpad.amount),d.Eb(5),d.pc("ngModel",e.report.otpad.state),d.Eb(4),d.pc("ngModel",e.report.otpad.packaging),d.Eb(4),d.pc("ngModel",e.report.otpad.qList),d.Eb(5),d.pc("settings",e.settings)("source",e.dailyReports))},directives:[o.w,o.x,W.f,o.v,o.N,i.b,i.k,i.n,b.b],styles:[""]}),t})();const L={pager:{perPage:10},actions:{columnTitle:"Jedan izve\u0161taj/Svi izve\u0161taji",add:!1,edit:!1,delete:!1,position:"right",custom:[{name:"one report",title:'<i class="fa fa-file-alt"></i>'},{name:"all reports",title:'<i class="fa fa-book"></i>'}]},columns:{pib:{title:"PIB"},mat:{title:"Mati\u010dni broj"},naziv:{title:"Naziv Firme"},emailPrijem:{title:"Email za prijem"},telefon:{title:"Telefon"},radFirme:{title:"Rad firme"}}};let D=(()=>{class t{constructor(t,e,n){this.firmaService=t,this.toastrService=e,this.router=n,this.companySource=new b.a,this.companySettings=L}ngOnInit(){this.firmaService.getCompanys("","").subscribe(t=>{this.companySource.load(t)})}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}companyReports(t){"one report"===t.action?this.gotoCompanyReport(t):"all reports"===t.action&&this.gotoAllReports(t)}gotoCompanyReport({data:t}){this.router.navigate(["admin/izvestaji/firme/",t.pib])}gotoAllReports({data:t}){this.router.navigate(["admin/izvestaji/godisnji-izvestaji/",t.pib])}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(l.a),d.Rb(o.Gb),d.Rb(W.c))},t.\u0275cmp=d.Lb({type:t,selectors:[["ngx-reports"]],decls:5,vars:2,consts:[[3,"settings","source","custom"]],template:function(t,e){1&t&&(d.Xb(0,"nb-card"),d.Xb(1,"nb-card-header"),d.Hc(2,"Firme"),d.Wb(),d.Xb(3,"nb-card-body"),d.Xb(4,"ng2-smart-table",0),d.fc("custom",(function(t){return e.companyReports(t)})),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(4),d.pc("settings",e.companySettings)("source",e.companySource))},directives:[o.w,o.x,o.v,b.b],styles:["[_nghost-%COMP%]   ng2-st-tbody-edit-delete[_ngcontent-%COMP%]{display:flex!important;height:0!important}[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]{display:inline-block;width:40px;text-align:center;margin-left:5px;font-size:1.1em}[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),t})();function F(t,e){1&t&&(d.Xb(0,"span"),d.Hc(1,"proizvo\u0111a\u010du"),d.Wb())}function x(t,e){1&t&&(d.Xb(0,"span"),d.Hc(1,"transporteru"),d.Wb())}function K(t,e){1&t&&(d.Xb(0,"span"),d.Hc(1,"primalacu"),d.Wb())}function N(t,e){if(1&t&&(d.Xb(0,"nb-option",16),d.Hc(1),d.Wb()),2&t){const t=e.$implicit;d.pc("value",t),d.Eb(1),d.Ic(t.name)}}function B(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div",1),d.Xb(1,"button",13),d.fc("click",(function(){return d.zc(t),d.jc().chooseCompany()})),d.Hc(2,"Odaberi ve\u0107 postoje\u0107u firmu "),d.Wb(),d.Xb(3,"nb-select",14),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().tmpCompany=e})),d.Fc(4,N,2,2,"nb-option",15),d.Wb(),d.Wb()}if(2&t){const t=d.jc();d.Eb(1),d.pc("disabled",t.firstLoad),d.Eb(2),d.pc("disabled",!t.firstLoad)("ngModel",t.tmpCompany),d.Eb(1),d.pc("ngForOf",t.companies)}}function _(t,e){if(1&t&&(d.Xb(0,"nb-option",16),d.Hc(1),d.Wb()),2&t){const t=e.$implicit;d.pc("value",t),d.Eb(1),d.Ic(t)}}function U(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",0),d.Xb(2,"div",4),d.Xb(3,"label",5),d.Hc(4,"Predvi\u0111en na\u010din postupanja sa otpadom:"),d.Wb(),d.Wb(),d.Xb(5,"div",1),d.Xb(6,"nb-radio-group",17,18),d.fc("valueChange",(function(){d.zc(t);const e=d.xc(7);return d.jc().selectList(e.value)})),d.Xb(8,"nb-radio",19),d.Hc(9,"Tretman (R)"),d.Wb(),d.Xb(10,"nb-radio",20),d.Hc(11,"Odlaganje (D)"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(12,"div",0),d.Xb(13,"div",4),d.Xb(14,"label",5),d.Hc(15,"Odaberite R/D Listu"),d.Wb(),d.Wb(),d.Xb(16,"div",1),d.Xb(17,"nb-select",21),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.nacinPostupanja=e})),d.Fc(18,_,2,2,"nb-option",15),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&t){const t=d.jc();d.Eb(17),d.pc("ngModel",t.dko.nacinPostupanja),d.Eb(1),d.pc("ngForOf",t.treatmentList)}}function A(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",0),d.Xb(2,"div",4),d.Xb(3,"label",5),d.Hc(4,"Vrsta prevoznog sredstva:"),d.Wb(),d.Wb(),d.Xb(5,"div",1),d.Xb(6,"nb-select",21),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.vrstaVozila=e})),d.Xb(7,"nb-option",22),d.Hc(8,"Kamion"),d.Wb(),d.Xb(9,"nb-option",23),d.Hc(10,"Kombi"),d.Wb(),d.Xb(11,"nb-option",24),d.Hc(12,"Automobil"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(13,"div",0),d.Xb(14,"div",4),d.Xb(15,"label",5),d.Hc(16,"Registraski broj prevoznog sredstva:"),d.Wb(),d.Wb(),d.Xb(17,"div",1),d.Xb(18,"input",25),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.registarskiBroj=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(19,"div",0),d.Xb(20,"div",4),d.Xb(21,"label",26),d.Hc(22,"Dozvola za prevoznika otpada:"),d.Wb(),d.Wb(),d.Xb(23,"div",10),d.Xb(24,"input",27),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.sifraDozvoleTransport=e})),d.Wb(),d.Wb(),d.Xb(25,"div",10),d.Xb(26,"input",28),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.datumDozvoleTransport=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(27,"div",0),d.Xb(28,"div",4),d.Xb(29,"label",5),d.Hc(30,"Ruta kretanja pocetna/krajnja:"),d.Wb(),d.Wb(),d.Xb(31,"div",1),d.Xb(32,"input",25),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.rutaKretanja[0]=e})),d.Wb(),d.Wb(),d.Xb(33,"div",1),d.Xb(34,"input",25),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.rutaKretanja[1]=e})),d.Wb(),d.Wb(),d.Xb(35,"div",1),d.Xb(36,"input",25),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.rutaKretanja[2]=e})),d.Wb(),d.Wb(),d.Xb(37,"div",1),d.Xb(38,"input",25),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.rutaKretanja[3]=e})),d.Wb(),d.Wb(),d.Xb(39,"div",1),d.Xb(40,"input",25),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.rutaKretanja[4]=e})),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&t){const t=d.jc();d.Eb(6),d.pc("ngModel",t.dko.vrstaVozila),d.Eb(12),d.pc("ngModel",t.dko.registarskiBroj),d.Eb(6),d.pc("ngModel",t.dko.sifraDozvoleTransport),d.Eb(2),d.pc("ngModel",t.dko.datumDozvoleTransport),d.Eb(6),d.pc("ngModel",t.dko.rutaKretanja[0]),d.Eb(2),d.pc("ngModel",t.dko.rutaKretanja[1]),d.Eb(2),d.pc("ngModel",t.dko.rutaKretanja[2]),d.Eb(2),d.pc("ngModel",t.dko.rutaKretanja[3]),d.Eb(2),d.pc("ngModel",t.dko.rutaKretanja[4])}}function $(t,e){if(1&t){const t=d.Yb();d.Xb(0,"nb-radio-group",21),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc(2).dko.vrstaPrimalaca=e})),d.Xb(1,"nb-radio",32),d.Hc(2,"Tretman"),d.Wb(),d.Xb(3,"nb-radio",33),d.Hc(4,"Skladistenje"),d.Wb(),d.Xb(5,"nb-radio",34),d.Hc(6,"Odlaganje"),d.Wb(),d.Wb()}if(2&t){const t=d.jc(2);d.pc("ngModel",t.dko.vrstaPrimalaca)}}function Y(t,e){if(1&t){const t=d.Yb();d.Xb(0,"nb-radio-group",21),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc(2).dko.vrstaPrimalaca=e})),d.Xb(1,"nb-radio",35),d.Hc(2,"Tretman"),d.Wb(),d.Xb(3,"nb-radio",36),d.Hc(4,"Skladistenje "),d.Wb(),d.Xb(5,"nb-radio",37),d.Hc(6,"Odlaganje"),d.Wb(),d.Wb()}if(2&t){const t=d.jc(2);d.pc("ngModel",t.dko.vrstaPrimalaca),d.Eb(1),d.pc("disabled",!t.checkCompanyType("Tretman Neopasnog Otpada")),d.Eb(2),d.pc("disabled",!t.checkCompanyType("Skladi\u0161tenje Neopasnog Otpada")),d.Eb(2),d.pc("disabled",!t.checkCompanyType("Odlaganje Neopasnog Otpada"))}}function G(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",0),d.Xb(2,"div",4),d.Xb(3,"label",26),d.Hc(4,"Vrsta primalaca:"),d.Wb(),d.Wb(),d.Xb(5,"div",1),d.Fc(6,$,7,1,"nb-radio-group",29),d.Fc(7,Y,7,4,"nb-radio-group",29),d.Wb(),d.Wb(),d.Xb(8,"div",0),d.Xb(9,"div",4),d.Xb(10,"label",26),d.Hc(11,"Dozvola za primalaca otpada:"),d.Wb(),d.Wb(),d.Xb(12,"div",10),d.Xb(13,"input",30),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.sifraDozvolePrimalac=e})),d.Wb(),d.Wb(),d.Xb(14,"div",10),d.Xb(15,"input",31),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.datumDozvolePrimalac=e})),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&t){const t=d.jc();d.Eb(6),d.pc("ngIf",!t.firstLoad),d.Eb(1),d.pc("ngIf",t.firstLoad),d.Eb(6),d.pc("ngModel",t.dko.sifraDozvolePrimalac),d.Eb(2),d.pc("ngModel",t.dko.datumDozvolePrimalac)}}let J=(()=>{class t{constructor(t,e){this.dkoService=t,this.firmaService=e,this.tmpCompany={address:{location:void 0,street:""},email:"",mat:"",name:"",operations:[],pib:"",telephone:""},this.companies=[],this.firstLoad=!1,this.dLista=[],this.rLista=[],this.treatmentList=[];for(let n=1;n<=15;n++)this.dLista.push("D"+n);for(let n=1;n<=13;n++)this.rLista.push("R"+n)}ngOnInit(){this.dkoService.getDKO().subscribe(t=>{this.dko=t,this.company&&(this.tmpCompany=this.company,this.dko.firmaProizvodjac=this.tmpCompany)})}selectList(t){this.treatmentList="R"===t?this.rLista:this.dLista}sendCompany(){if("transport"===this.type)this.tmpCompany.operations.push("Transport "+this.trashType+" Otpada"),this.dko.firmaTransport=this.tmpCompany;else if("recipient"===this.type){let t=this.dko.vrstaPrimalaca.startsWith("s")?"Skladi\u0161tenje":this.dko.vrstaPrimalaca;t=t[0].toUpperCase()+t.substr(1).toLowerCase(),this.tmpCompany.operations.push(t+" "+this.trashType+" Otpada"),this.dko.firmaPrimalac=this.tmpCompany}this.dkoService.sendDKO(Object(r.a)(this.dko))}chooseCompany(){("transport"!==this.type||this.firstLoad)&&("recipient"!==this.type||this.firstLoad||(this.firstLoad=!0))}checkCompanyType(t){return!!this.tmpCompany.operations.includes(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(p),d.Rb(l.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["company-part"]],inputs:{company:"company",type:"type",trashType:"trashType"},decls:80,vars:28,consts:[[1,"row","mb-1"],[1,"col-6"],[4,"ngIf"],["class","col-6",4,"ngIf"],[1,"col-12"],[1,"label"],["fullWidth","","nbInput","","type","text",3,"ngModel","disabled","ngModelChange"],["nbInput","","fullWidth","",3,"disabled","ngModel","ngModelChange"],[1,"row","ml-2"],[1,"row","mt-2"],[1,"col-3"],["nbButton","","fullWidth","","status","danger","nbStepperPrevious",""],["nbButton","","fullWidth","","status","primary","type","button","nbStepperNext","",3,"click"],["fullWidth","","nbButton","","status","info","type","button",3,"disabled","click"],["fullWidth","",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"valueChange"],["nacinPostupanja",""],["value","R"],["value","D"],["fullWidth","",3,"ngModel","ngModelChange"],["value","kamion"],["value","kombi"],["value","automobil"],["nbInput","","fullWidth","",3,"ngModel","ngModelChange"],["fullWidth","",1,"label"],["fullWidth","","placeholder","Sifra","nbInput","",3,"ngModel","ngModelChange"],["fullWidth","","placeholder","Datum nastanka","nbInput","","type","date",3,"ngModel","ngModelChange"],["fullWidth","",3,"ngModel","ngModelChange",4,"ngIf"],["fullWidth","","placeholder","sifra","nbInput","",3,"ngModel","ngModelChange"],["fullWidth","","nbInput","","type","date","placeholder","datum nastanka",3,"ngModel","ngModelChange"],["value","treatment"],["value","storage"],["value","dump"],["value","treatment",3,"disabled"],["value","storage",3,"disabled"],["value","dump",3,"disabled"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"div",1),d.Xb(2,"h5"),d.Hc(3,"Podaci o "),d.Fc(4,F,2,0,"span",2),d.Fc(5,x,2,0,"span",2),d.Fc(6,K,2,0,"span",2),d.Hc(7),d.Wb(),d.Wb(),d.Fc(8,B,5,4,"div",3),d.Wb(),d.Xb(9,"div",0),d.Xb(10,"div",4),d.Xb(11,"label",5),d.Hc(12,"PIB firme:"),d.Wb(),d.Wb(),d.Xb(13,"div",1),d.Xb(14,"input",6),d.fc("ngModelChange",(function(t){return e.tmpCompany.mat=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(15,"div",0),d.Xb(16,"div",4),d.Xb(17,"label",5),d.Hc(18,"Mati\u010dni broj firme:"),d.Wb(),d.Wb(),d.Xb(19,"div",1),d.Xb(20,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.pib=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(21,"div",0),d.Xb(22,"div",4),d.Xb(23,"label",5),d.Hc(24,"Naziv firme:"),d.Wb(),d.Wb(),d.Xb(25,"div",1),d.Xb(26,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.name=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(27,"div",0),d.Xb(28,"div",4),d.Xb(29,"label",5),d.Hc(30,"Adresa firme:"),d.Wb(),d.Wb(),d.Xb(31,"div",8),d.Xb(32,"div",4),d.Xb(33,"label",5),d.Hc(34,"Op\u0161tina:"),d.Wb(),d.Wb(),d.Xb(35,"div",1),d.Xb(36,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.address.location.townshipName=t})),d.Wb(),d.Wb(),d.Xb(37,"div",4),d.Xb(38,"label",5),d.Hc(39,"Location:"),d.Wb(),d.Wb(),d.Xb(40,"div",1),d.Xb(41,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.address.location.placeName=t})),d.Wb(),d.Wb(),d.Xb(42,"div",4),d.Xb(43,"label",5),d.Hc(44,"Po\u0161tanski broj:"),d.Wb(),d.Wb(),d.Xb(45,"div",1),d.Xb(46,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.address.location.zipCode=t})),d.Wb(),d.Wb(),d.Xb(47,"div",4),d.Xb(48,"label",5),d.Hc(49,"Ulica i broj:"),d.Wb(),d.Wb(),d.Xb(50,"div",1),d.Xb(51,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.address.street=t})),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(52,"div",0),d.Xb(53,"div",4),d.Xb(54,"label",5),d.Hc(55,"Email firme:"),d.Wb(),d.Wb(),d.Xb(56,"div",1),d.Xb(57,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.email=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(58,"div",0),d.Xb(59,"div",4),d.Xb(60,"label",5),d.Hc(61,"Telefon firme:"),d.Wb(),d.Wb(),d.Xb(62,"div",1),d.Xb(63,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.telephone=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(64,"div",0),d.Xb(65,"div",4),d.Xb(66,"label",5),d.Hc(67,"Telefaks firme:"),d.Wb(),d.Wb(),d.Xb(68,"div",1),d.Xb(69,"input",7),d.fc("ngModelChange",(function(t){return e.tmpCompany.fax=t})),d.Wb(),d.Wb(),d.Wb(),d.Fc(70,U,19,2,"div",2),d.Fc(71,A,41,9,"div",2),d.Fc(72,G,16,4,"div",2),d.Xb(73,"div",9),d.Xb(74,"div",10),d.Xb(75,"button",11),d.Hc(76,"Nazad"),d.Wb(),d.Wb(),d.Xb(77,"div",10),d.Xb(78,"button",12),d.fc("click",(function(){return e.sendCompany()})),d.Hc(79,"Dalje "),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(4),d.pc("ngIf","production"===e.type),d.Eb(1),d.pc("ngIf","transport"===e.type),d.Eb(1),d.pc("ngIf","recipient"===e.type),d.Eb(1),d.Jc(" ","'"+(null==e.tmpCompany?null:e.tmpCompany.name)+"'",""),d.Eb(1),d.pc("ngIf","production"!==e.type),d.Eb(6),d.pc("ngModel",e.tmpCompany.mat)("disabled","production"===e.type),d.Eb(6),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.pib),d.Eb(6),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.name),d.Eb(10),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.address.location.townshipName),d.Eb(5),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.address.location.placeName),d.Eb(5),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.address.location.zipCode),d.Eb(5),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.address.street),d.Eb(6),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.email),d.Eb(6),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.telephone),d.Eb(6),d.pc("disabled","production"===e.type)("ngModel",e.tmpCompany.fax),d.Eb(1),d.pc("ngIf","production"===e.type),d.Eb(1),d.pc("ngIf","transport"===e.type),d.Eb(1),d.pc("ngIf","recipient"===e.type))},directives:[a.m,o.N,i.b,i.k,i.n,o.t,o.yb,o.xb,o.mb,a.l,o.cb,o.jb,o.ib],styles:[""]}),t})();function q(t,e){if(1&t&&(d.Xb(0,"button",16),d.Hc(1),d.Sb(2,"nb-icon",17),d.Wb()),2&t){const t=d.jc(),e=t.$implicit,n=t.index,a=d.jc();d.Eb(1),d.Jc(" ",e," "),d.Eb(1),d.pc("icon",n===a.dko.rutaKretanja.length-1?"checkmark-circle":"arrowhead-right")}}function V(t,e){if(1&t&&(d.Xb(0,"div",14),d.Fc(1,q,3,2,"button",15),d.Wb()),2&t){const t=e.$implicit;d.Eb(1),d.pc("ngIf",""!==t&&void 0!==t)}}let Q=(()=>{class t{constructor(t,e){this.dkoService=t,this.router=e}ngOnInit(){this.dkoService.getDKO().subscribe(t=>{this.dko=t;for(let e=0;e<5;e++)void 0!==this.dko.rutaKretanja[e]&&""!==this.dko.rutaKretanja[e]||this.dko.rutaKretanja.splice(e,1)})}downloadFile(t){const e=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(e);window.open(n)}generateDKO(){this.dkoService.generateDKO(this.dko,this.storage._id,this.trash._id).subscribe(t=>{this.dko.otpad.indexNumber.endsWith("*")||this.downloadFile(t),this.router.navigate(["/admin/izvestaji/firme/"+this.dko.firmaProizvodjac.pib])})}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(p),d.Rb(W.c))},t.\u0275cmp=d.Lb({type:t,selectors:[["confirm-part"]],inputs:{storage:"storage",trash:"trash"},decls:37,vars:5,consts:[[1,"row"],[1,"row","mb-1"],[1,"col-4"],[1,"label"],["nbButton","","outline","","status","success","fullWidth",""],["nbButton","","outline","","status","info","fullWidth",""],["nbButton","","outline","","status","danger","fullWidth",""],[1,"col-6"],["nbButton","","outline","","status","warning","fullWidth",""],[1,"label","col-12"],["class","col",4,"ngFor","ngForOf"],[1,"row","mt-5"],["nbButton","","fullWidth","","nbStepperPrevious","","status","danger"],["nbButton","","fullWidth","","status","success",3,"click"],[1,"col"],["nbButton","","fullWidth","",4,"ngIf"],["nbButton","","fullWidth",""],[3,"icon"]],template:function(t,e){1&t&&(d.Xb(0,"div",0),d.Xb(1,"h5"),d.Hc(2,"Potvrda i generisanje dokumenta"),d.Wb(),d.Wb(),d.Xb(3,"div",1),d.Xb(4,"div",2),d.Xb(5,"label",3),d.Hc(6,"Proizvo\u0111a\u010d:"),d.Wb(),d.Xb(7,"button",4),d.Hc(8),d.Wb(),d.Wb(),d.Xb(9,"div",2),d.Xb(10,"label",3),d.Hc(11,"Transporter:"),d.Wb(),d.Xb(12,"button",5),d.Hc(13),d.Wb(),d.Wb(),d.Xb(14,"div",2),d.Xb(15,"label",3),d.Hc(16,"Primalac:"),d.Wb(),d.Xb(17,"button",6),d.Hc(18),d.Wb(),d.Wb(),d.Wb(),d.Xb(19,"div",1),d.Xb(20,"div",7),d.Xb(21,"label",3),d.Hc(22,"Otpad "),d.Wb(),d.Xb(23,"button",8),d.Hc(24),d.Wb(),d.Wb(),d.Wb(),d.Xb(25,"div",1),d.Xb(26,"label",9),d.Hc(27,"Ruta kretanja otpada"),d.Wb(),d.Fc(28,V,2,1,"div",10),d.Wb(),d.Xb(29,"div",11),d.Xb(30,"div",2),d.Xb(31,"button",12),d.Hc(32,"Nazad"),d.Wb(),d.Wb(),d.Sb(33,"div",2),d.Xb(34,"div",2),d.Xb(35,"button",13),d.fc("click",(function(){return e.generateDKO()})),d.Hc(36,"Generisi dokument"),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(8),d.Ic(null==e.dko||null==e.dko.firmaProizvodjac?null:e.dko.firmaProizvodjac.naziv),d.Eb(5),d.Ic(null==e.dko||null==e.dko.firmaTransport?null:e.dko.firmaTransport.naziv),d.Eb(5),d.Ic(null==e.dko||null==e.dko.firmaPrimalac?null:e.dko.firmaPrimalac.naziv),d.Eb(6),d.Ic(null==e.dko||null==e.dko.otpad?null:e.dko.otpad.naziv),d.Eb(4),d.pc("ngForOf",e.dko.rutaKretanja))},directives:[o.t,a.l,o.yb,a.m,o.K],styles:[""]}),t})();function Z(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",0),d.Xb(2,"div",1),d.Xb(3,"label",2),d.Hc(4,"H Lista:"),d.Wb(),d.Wb(),d.Xb(5,"div",3),d.Xb(6,"input",33),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().trash.hList=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(7,"div",0),d.Xb(8,"div",1),d.Xb(9,"label",2),d.Hc(10,"Y Lista:"),d.Wb(),d.Wb(),d.Xb(11,"div",3),d.Xb(12,"input",34),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().trash.yList=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(13,"div",0),d.Xb(14,"div",1),d.Xb(15,"label",2),d.Hc(16,"C Lista:"),d.Wb(),d.Wb(),d.Xb(17,"div",3),d.Xb(18,"input",34),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().trash.cList=e})),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&t){const t=d.jc();d.Eb(6),d.pc("ngModel",t.trash.hList),d.Eb(6),d.pc("ngModel",t.trash.yList),d.Eb(6),d.pc("ngModel",t.trash.cList)}}function tt(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div",3),d.Xb(1,"input",35),d.fc("ngModelChange",(function(e){return d.zc(t),d.jc().dko.nacinPakovanja=e})),d.Wb(),d.Wb()}if(2&t){const t=d.jc();d.Eb(1),d.pc("ngModel",t.dko.nacinPakovanja)}}function et(t,e){if(1&t&&(d.Xb(0,"nb-option",36),d.Hc(1),d.Wb()),2&t){const t=e.$implicit;d.pc("value",t),d.Eb(1),d.Ic(t)}}let nt=(()=>{class t{constructor(t){this.dkoService=t,this.fizickaStanja=["\u010cvrsto","Te\u010dno","Gasovito","Prah"]}ngOnInit(){this.dkoService.getDKO().subscribe(t=>{this.dko=t,this.dko.otpad=this.trash,this.dko.masaOtpada=this.trash.amount,this.dko.datumIspitivanja=this.trash.examinationDate,this.dko.sifraIspitivanja=this.trash.examinationCode,this.dko.fizickoStanje=this.trash.state,this.dko.qLista=this.trash.qList,this.dko.nacinPakovanja=this.trash.packaging,Object(d.Y)()&&(this.dko.vrstaOtpada="indutstrijski",this.dko.masaOtpada=10,this.dko.datumIspitivanja=new Date(2020,3,4),this.dko.sifraIspitivanja="1234DA",this.dko.qLista="Q1",this.dko.nacinPakovanja="Bure")}),this.dkoService.sendDKO(Object(r.a)(this.dko))}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(p))},t.\u0275cmp=d.Lb({type:t,selectors:[["trash-part"]],inputs:{trash:"trash",trashType:"trashType"},decls:102,vars:15,consts:[[1,"row","mb-1"],[1,"col-12"],[1,"label"],[1,"col-6"],["fullWidth","",3,"ngModel","ngModelChange"],["value","Industrijski"],["value","Komercijalni"],["value","Otpad iz doma\u0107instva"],["disabled","","fullWidth","","nbInput","","type","text",3,"ngModel","ngModelChange"],[4,"ngIf"],["nbInput","","fullWidth","",3,"ngModel","ngModelChange"],["nbInput","","fullWidth","","type","number",3,"ngModel","ngModelChange"],["value","Bure"],["value","Kanister"],["value","Sanduk"],["value","Kese"],["value","Posude pod pritiskom"],["value","Kompozitno pakovanje"],["value","U rasutom stanju"],["value","ostalo"],["ostalo",""],["class","col-6",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fullWidth","",1,"label"],[1,"col-3"],["fullWidth","","nbInput","",3,"ngModel","ngModelChange"],["fullWidth","","nbInput","","type","date",3,"ngModel","ngModelChange"],["nbInput","","fullWidth","","type","text",3,"ngModel","ngModelChange"],["value","drumski"],["value","\u017eelezni\u010dki"],["value","re\u010dni"],[1,"row","mt-2"],["nbButton","","fullWidth","","status","primary","nbStepperNext",""],["nbInput","","disabled","","fullWidth","",3,"ngModel","ngModelChange"],["nbInput","","fullWidth","","disabled","",3,"ngModel","ngModelChange"],["fullWidth","","nbInput","","placeholder","ostalo",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,e){if(1&t&&(d.Xb(0,"div",0),d.Xb(1,"h5"),d.Hc(2),d.Wb(),d.Wb(),d.Xb(3,"div",0),d.Xb(4,"div",1),d.Xb(5,"label",2),d.Hc(6,"Vrsta Otpada:"),d.Wb(),d.Wb(),d.Xb(7,"div",3),d.Xb(8,"nb-select",4),d.fc("ngModelChange",(function(t){return e.dko.vrstaOtpada=t})),d.Xb(9,"nb-option",5),d.Hc(10,"Industrijski"),d.Wb(),d.Xb(11,"nb-option",6),d.Hc(12,"Komercijalni"),d.Wb(),d.Xb(13,"nb-option",7),d.Hc(14,"Otpad iz doma\u0107instva"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(15,"div",0),d.Xb(16,"div",1),d.Xb(17,"label",2),d.Hc(18,"Indeksni broj:"),d.Wb(),d.Wb(),d.Xb(19,"div",3),d.Xb(20,"input",8),d.fc("ngModelChange",(function(t){return e.trash.indexNumber=t})),d.Wb(),d.Wb(),d.Wb(),d.Fc(21,Z,19,3,"div",9),d.Xb(22,"div",0),d.Xb(23,"div",1),d.Xb(24,"label",2),d.Hc(25,"Q Lista:"),d.Wb(),d.Wb(),d.Xb(26,"div",3),d.Xb(27,"input",10),d.fc("ngModelChange",(function(t){return e.dko.qLista=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(28,"div",0),d.Xb(29,"div",1),d.Xb(30,"label",2),d.Hc(31,"Masa otpada:"),d.Wb(),d.Wb(),d.Xb(32,"div",3),d.Xb(33,"input",11),d.fc("ngModelChange",(function(t){return e.dko.masaOtpada=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(34,"div",0),d.Xb(35,"div",1),d.Xb(36,"label",2),d.Hc(37,"Na\u010din pakovanja otpada:"),d.Wb(),d.Wb(),d.Xb(38,"div",3),d.Xb(39,"nb-select",4),d.fc("ngModelChange",(function(t){return e.dko.nacinPakovanja=t})),d.Xb(40,"nb-option",12),d.Hc(41,"Bure"),d.Wb(),d.Xb(42,"nb-option",13),d.Hc(43,"Kanister"),d.Wb(),d.Xb(44,"nb-option",14),d.Hc(45,"Sanduk"),d.Wb(),d.Xb(46,"nb-option",15),d.Hc(47,"Kese"),d.Wb(),d.Xb(48,"nb-option",16),d.Hc(49,"Posude pod pritiskom"),d.Wb(),d.Xb(50,"nb-option",17),d.Hc(51,"Kompozitno pakovanje"),d.Wb(),d.Xb(52,"nb-option",18),d.Hc(53,"U rasutom stanju"),d.Wb(),d.Xb(54,"nb-option",19,20),d.Hc(56,"Ostalo"),d.Wb(),d.Wb(),d.Wb(),d.Fc(57,tt,2,1,"div",21),d.Wb(),d.Xb(58,"div",0),d.Xb(59,"div",1),d.Xb(60,"label",2),d.Hc(61,"Fizi\u010dko stanje otpada:"),d.Wb(),d.Wb(),d.Xb(62,"div",3),d.Xb(63,"nb-select",4),d.fc("ngModelChange",(function(t){return e.dko.fizickoStanje=t})),d.Fc(64,et,2,2,"nb-option",22),d.Wb(),d.Wb(),d.Wb(),d.Xb(65,"div",0),d.Xb(66,"div",1),d.Xb(67,"label",23),d.Hc(68,"Izve\u0161taj o ispitivanju otpada:"),d.Wb(),d.Wb(),d.Xb(69,"div",24),d.Xb(70,"input",25),d.fc("ngModelChange",(function(t){return e.dko.sifraIspitivanja=t})),d.Wb(),d.Wb(),d.Xb(71,"div",24),d.Xb(72,"input",26),d.fc("ngModelChange",(function(t){return e.dko.datumIspitivanja=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(73,"div",0),d.Xb(74,"div",1),d.Xb(75,"label",2),d.Hc(76,"Odredi\u0161te:"),d.Wb(),d.Wb(),d.Xb(77,"div",3),d.Xb(78,"input",27),d.fc("ngModelChange",(function(t){return e.dko.rutaKretanja[0]=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(79,"div",0),d.Xb(80,"div",1),d.Xb(81,"label",2),d.Hc(82,"Vrsta prevoza:"),d.Wb(),d.Wb(),d.Xb(83,"div",3),d.Xb(84,"nb-select",4),d.fc("ngModelChange",(function(t){return e.dko.vidPrevoza=t})),d.Xb(85,"nb-option",28),d.Hc(86,"Drumski"),d.Wb(),d.Xb(87,"nb-option",29),d.Hc(88,"\u017delezni\u010dki"),d.Wb(),d.Xb(89,"nb-option",30),d.Hc(90,"Re\u010dni"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(91,"div",0),d.Xb(92,"div",1),d.Xb(93,"label",2),d.Hc(94,"Posebne napomene za rukovanje i dodatne informacije:"),d.Wb(),d.Wb(),d.Xb(95,"div",3),d.Xb(96,"input",27),d.fc("ngModelChange",(function(t){return e.dko.dodatneInformacije=t})),d.Wb(),d.Wb(),d.Wb(),d.Xb(97,"div",31),d.Sb(98,"div",24),d.Xb(99,"div",24),d.Xb(100,"button",32),d.Hc(101,"Dalje"),d.Wb(),d.Wb(),d.Wb()),2&t){const t=d.xc(55);d.Eb(2),d.Jc("Podaci o otpadu '",null==e.trash?null:e.trash.name,"'"),d.Eb(6),d.pc("ngModel",e.dko.vrstaOtpada),d.Eb(12),d.pc("ngModel",e.trash.indexNumber),d.Eb(1),d.pc("ngIf","Opasnog"===e.trashType),d.Eb(6),d.pc("ngModel",e.dko.qLista),d.Eb(6),d.pc("ngModel",e.dko.masaOtpada),d.Eb(6),d.pc("ngModel",e.dko.nacinPakovanja),d.Eb(18),d.pc("ngIf",t.selected),d.Eb(6),d.pc("ngModel",e.dko.fizickoStanje),d.Eb(1),d.pc("ngForOf",e.fizickaStanja),d.Eb(6),d.pc("ngModel",e.dko.sifraIspitivanja),d.Eb(2),d.pc("ngModel",e.dko.datumIspitivanja),d.Eb(6),d.pc("ngModel",e.dko.rutaKretanja[0]),d.Eb(6),d.pc("ngModel",e.dko.vidPrevoza),d.Eb(12),d.pc("ngModel",e.dko.dodatneInformacije)}},directives:[o.mb,i.k,i.n,o.cb,o.N,i.b,a.m,i.p,a.l,o.t,o.xb],styles:[""]}),t})();function at(t,e){if(1&t&&(d.Xb(0,"nb-step",11),d.Xb(1,"div",12),d.Sb(2,"trash-part",13),d.kc(3,"async"),d.Wb(),d.Wb()),2&t){const t=d.jc();d.Eb(2),d.pc("trashType",t.trashType)("trash",d.lc(3,2,t.trash$))}}function it(t,e){if(1&t&&(d.Xb(0,"nb-step",14),d.Sb(1,"company-part",15),d.kc(2,"async"),d.Wb()),2&t){const t=d.jc();d.Eb(1),d.pc("trashType",t.trashType)("company",d.lc(2,3,t.company$))("type","production")}}let ot=(()=>{class t{constructor(t,e,n,a,i){this.route=t,this.notpadService=e,this.skladisteService=n,this.firmaService=a,this.dkoService=i}ngOnInit(){const t=this.route.snapshot.params.storage;this.notpadService.getTrash(this.route.snapshot.params.trash).subscribe(t=>{this.trash=t,this.trash$=Object(r.a)(t),this.trashType=this.trash.indexNumber.endsWith("*")?"Opasnog":"Neopasnog"}),this.skladisteService.getStorage(t).subscribe(t=>{this.storage=t,this.dkoService.getDKO().subscribe(t=>{this.dko=t,this.dko.rutaKretanja=[this.storage.address.location.townshipName,...this.dko.rutaKretanja],this.dko.vrstaProizvodjaca=this.storage.__t?"SkladisteTretman"===this.storage.__t?"treatment":"storage":"production"}),this.dkoService.sendDKO(Object(r.a)(this.dko))}),this.firmaService.getCompany(t,"skladista").pipe(Object(M.a)()).subscribe(t=>{this.company=t,this.company$=Object(r.a)(t)})}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(W.a),d.Rb(m.a),d.Rb(v.a),d.Rb(l.a),d.Rb(p))},t.\u0275cmp=d.Lb({type:t,selectors:[["trash-transport-report"]],decls:15,vars:10,consts:[[1,"col-1"],[3,"routerLink"],[1,"fa","fa-2x","fa-arrow-left"],["orientation","vertical",3,"linear"],["label","Podaci o otpadu",4,"ngIf"],["label","Podaci o proizvo\u0111a\u010du",4,"ngIf"],["label","Podaci o transporteru"],[3,"trashType","type"],["label","Podaci o primalacu"],["label","Potvrda"],[3,"storage","trash"],["label","Podaci o otpadu"],[1,"test"],[3,"trashType","trash"],["label","Podaci o proizvo\u0111a\u010du"],[3,"trashType","company","type"]],template:function(t,e){1&t&&(d.Xb(0,"nb-card"),d.Xb(1,"nb-card-header"),d.Xb(2,"div",0),d.Xb(3,"a",1),d.Sb(4,"i",2),d.Wb(),d.Wb(),d.Wb(),d.Xb(5,"nb-card-body"),d.Xb(6,"nb-stepper",3),d.Fc(7,at,4,4,"nb-step",4),d.Fc(8,it,3,5,"nb-step",5),d.Xb(9,"nb-step",6),d.Sb(10,"company-part",7),d.Wb(),d.Xb(11,"nb-step",8),d.Sb(12,"company-part",7),d.Wb(),d.Xb(13,"nb-step",9),d.Sb(14,"confirm-part",10),d.Wb(),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(3),d.pc("routerLink","/admin/izvestaji/firme/"+(null==e.company?null:e.company.pib)),d.Eb(3),d.pc("linear",!1),d.Eb(1),d.pc("ngIf",e.trash$),d.Eb(1),d.pc("ngIf",e.company$),d.Eb(2),d.pc("trashType",e.trashType)("type","transport"),d.Eb(2),d.pc("trashType",e.trashType)("type","recipient"),d.Eb(2),d.pc("storage",e.storage)("trash",e.trash))},directives:[o.w,o.x,W.f,o.v,o.vb,a.m,o.ub,J,Q,nt],pipes:[a.b],styles:[".test[_ngcontent-%COMP%]{width:147%}"]}),t})();const bt={actions:{columnTitle:"Generi\u0161i GIO/Detaljnije",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"yearlyReport",title:'<i class="fa fa-file-pdf"></i>'},{name:"moreInfo",title:'<i class="fa fa-info-circle"></i>'}]},columns:{otpad:{valuePrepareFunction:(t,e)=>e.otpad.naziv+" ("+e.otpad.indeksniBroj+")",title:"Otpad"},ukupnoProizvodnja:{title:"Ukupno proizvedeno"},ukupnoTransport:{title:"Ukupno transportovano"},ukupnoStanje:{title:"Ukupno stanje"}}};let st=(()=>{class t{constructor(t,e,n){this.reportService=t,this.router=e,this.companyService=n,this.reports=[],this.settings=bt}ngOnInit(){this.reportService.getAllMesecniIzvestajFirme(this.companyPIB).subscribe(t=>{this.reports=t.filter(t=>t.mesec===this.month)}),this.companyService.getCompany(this.companyPIB,"pib").subscribe(t=>{this.company=t})}chooseAction(t){"moreInfo"===t.action&&this.reportInfo(t),"yearlyReport"===t.action&&this.generateYearlyReport(t.data)}generateYearlyReport({otpad:t}){this.reportService.createGodisnjiIzvestaj(t,"PRODUCTION",this.company).subscribe(t=>this.downloadFile(t))}reportInfo({data:t}){this.router.navigate(["admin/izvestaji/mesecni-izvestaj",t._id])}downloadFile(t){const e=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(e);window.open(n)}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(h),d.Rb(W.c),d.Rb(l.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["monthly-reports"]],inputs:{month:"month",companyPIB:"companyPIB"},decls:2,vars:2,consts:[[3,"settings","source","custom"]],template:function(t,e){1&t&&(d.Xb(0,"div"),d.Xb(1,"ng2-smart-table",0),d.fc("custom",(function(t){return e.chooseAction(t)})),d.Wb(),d.Wb()),2&t&&(d.Eb(1),d.pc("settings",e.settings)("source",e.reports))},directives:[b.b],styles:[""]}),t})();function rt(t,e){if(1&t&&(d.Xb(0,"nb-tab",2),d.Sb(1,"monthly-reports",3),d.Wb()),2&t){const t=e.$implicit,n=e.index,a=d.jc();d.pc("active",a.currMonth===n)("tabTitle",t),d.Eb(1),d.pc("companyPIB",a.companyPIB)("month",n)}}const ct=[{path:"",component:D},{path:"firme/:pib",component:w},{path:"dko",component:ot},{path:"godisnji-izvestaji/:pib",component:(()=>{class t{constructor(t){this.route=t,this.months=["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],this.currMonth=0,this.companyPIB=""}ngOnInit(){this.companyPIB=this.route.snapshot.paramMap.get("pib"),this.months$=Object(r.a)(this.months),this.currMonth=(new Date).getMonth()}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(W.a))},t.\u0275cmp=d.Lb({type:t,selectors:[["yearly-reports"]],decls:9,vars:3,consts:[["tabTitle","2020"],[3,"active","tabTitle",4,"ngFor","ngForOf"],[3,"active","tabTitle"],[3,"companyPIB","month"]],template:function(t,e){1&t&&(d.Xb(0,"nb-card"),d.Xb(1,"nb-card-header"),d.Hc(2,"Ime kompanije"),d.Wb(),d.Xb(3,"nb-card-body"),d.Xb(4,"nb-tabset"),d.Xb(5,"nb-tab",0),d.Xb(6,"nb-tabset"),d.Fc(7,rt,2,4,"nb-tab",1),d.kc(8,"async"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb()),2&t&&(d.Eb(7),d.pc("ngForOf",d.lc(8,1,e.months$)))},directives:[o.w,o.x,o.v,o.Bb,o.Ab,a.l,st],pipes:[a.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover, i[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]     ng2-st-tbody-edit-delete{display:flex!important;height:0!important}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:25%;text-align:center;margin-left:5px;font-size:1.1em}"]}),t})()},{path:"mesecni-izvestaj/:id",component:R}];let dt=(()=>{class t{}return t.\u0275mod=d.Pb({type:t}),t.\u0275inj=d.Ob({factory:function(e){return new(e||t)},imports:[[W.g.forChild(ct)],W.g]}),t})(),pt=(()=>{class t{}return t.\u0275mod=d.Pb({type:t}),t.\u0275inj=d.Ob({factory:function(e){return new(e||t)},imports:[[a.c,dt,o.u,o.M,o.wb,o.y,o.Cb,b.c,o.O,i.e]]}),t})(),lt=(()=>{class t{}return t.\u0275mod=d.Pb({type:t}),t.\u0275inj=d.Ob({factory:function(e){return new(e||t)},providers:[u.a,l.a,m.a,h,v.a,g.a,p],imports:[[a.c,j,f.a,o.Z,o.y,b.c,o.O,i.e,o.u,o.M,o.hb,o.k,o.Cb,o.wb,o.ob,o.H,o.kb,pt]]}),t})()}}]);