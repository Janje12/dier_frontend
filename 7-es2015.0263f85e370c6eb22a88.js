(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BKSH:function(e,t,n){"use strict";n.r(t),n.d(t,"ReportsModule",(function(){return ae}));var i=n("ofXK"),a=n("3Pt+"),o=n("aceb"),r=n("RS3s"),s=n("tyNb"),c=n("fJ6F"),b=n("ud2R"),l=n("fXoL"),d=n("jPBY"),u=n("7Oz7");const p={actions:{columnTitle:"Generi\u0161i DEO/DKO",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"trashReport",title:'<i class="fa fa-file-pdf"></i>'},{name:"trashTransport",title:'<i class="fa fa-truck"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj"},name:{title:"Naziv"},amount:{title:"Koli\u010dina (kg)"}}};function m(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",1),l.Xb(1,"h5"),l.Hc(2),l.Wb(),l.Xb(3,"p"),l.Hc(4,"Generi\u0161i sve izve\u0161taje "),l.Xb(5,"i",2),l.fc("click",(function(){l.zc(e);const n=t.$implicit;return l.jc().allTrashReport(n)})),l.Wb(),l.Wb(),l.Xb(6,"ng2-smart-table",3),l.fc("custom",(function(n){l.zc(e);const i=t.$implicit;return l.jc().chooseAction(n,i)})),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit,n=l.jc();l.Eb(2),l.Ic(e.name),l.Eb(4),l.pc("settings",n.storageReportSettings)("source",e.trashes)}}let g=(()=>{class e{constructor(e,t,n,i){this.storageService=e,this.monthlyReportService=t,this.router=n,this.adminService=i,this.storages=[],this.storageReportSettings=p}ngOnInit(){this.adminService.getCompany(this.companyPIB,"pib").subscribe(e=>{this.storageService.getCompaniesStorage(e._id,this.type).subscribe(e=>{this.storages=e})})}downloadFile(e){const t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t);window.open(n)}chooseAction(e,t){"trashReport"===e.action?this.trashReport(e,t):"trashTransport"===e.action&&"production"===this.type&&this.trashTransportReport(e,t)}trashReport({data:e},t){this.monthlyReportService.createMesecniIzvestaj(e,t,this.type.toUpperCase()).subscribe(e=>this.downloadFile(e))}trashTransportReport({data:e},t){this.router.navigate(["admin/reports/wmd",{trash:e._id,storage:t._id}])}allTrashReport(e){}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(u.a),l.Rb(d.a),l.Rb(s.c),l.Rb(c.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["storage-reports"]],inputs:{companyPIB:"companyPIB",type:"type"},decls:1,vars:1,consts:[["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"fa","fa-download",3,"click"],[3,"settings","source","custom"]],template:function(e,t){1&e&&l.Fc(0,m,7,3,"div",0),2&e&&l.pc("ngForOf",t.storages)},directives:[i.l,r.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-edit-delete{display:flex!important;height:0!important}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:40px;text-align:center;margin-left:5px;font-size:1.1em}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),e})();function f(e,t){if(1&e&&(l.Xb(0,"nb-tab",15),l.Sb(1,"storage-reports",16),l.Wb()),2&e){const e=l.jc();l.Eb(1),l.pc("companyPIB",e.pib)("type","production")}}function h(e,t){1&e&&(l.Xb(0,"nb-tab",17),l.Hc(1," NOT "),l.Wb())}function v(e,t){if(1&e&&(l.Xb(0,"nb-tab",18),l.Sb(1,"storage-reports",16),l.Wb()),2&e){const e=l.jc();l.Eb(1),l.pc("companyPIB",e.pib)("type","treatment")}}function W(e,t){if(1&e&&(l.Xb(0,"nb-tab",19),l.Sb(1,"storage-reports",16),l.Wb()),2&e){const e=l.jc();l.Eb(1),l.pc("companyPIB",e.pib)("type","dump")}}function X(e,t){1&e&&(l.Xb(0,"nb-tab",20),l.Hc(1," NOS "),l.Wb())}let k=(()=>{class e{constructor(e,t,n,i){this.route=e,this.adminService=t,this.toastrService=n,this.roleService=i,this.company={address:{location:void 0,street:""},email:"",emailReception:"",legalRep:"",manager:"",mat:"",name:"",occupation:void 0,operations:[],pib:"",telephone:""}}ngOnInit(){this.pib=this.route.snapshot.paramMap.get("pib"),this.adminService.getCompany(this.pib,"pib").subscribe(e=>{this.company=e,this.roleService.getOperations(this.company.operations).subscribe(e=>{this.operations=e})})}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(s.a),l.Rb(c.a),l.Rb(o.Kb),l.Rb(b.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["company-reports"]],decls:23,vars:7,consts:[[1,"row","text-center"],[1,"col-1"],["routerLink","../..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-11"],[1,"row","mb-2"],[1,"col-6"],[1,"col-12","label"],["nbInput","","disabled","","fullWidth","",3,"ngModel","ngModelChange"],[1,"col-12"],["active","","tabTitle","Proizvodnja Otpada",4,"ngIf"],["tabTitle","Transport Otpada",4,"ngIf"],["tabTitle","Tretman Otpada",4,"ngIf"],["tabTitle","Odlaganje Otpada",4,"ngIf"],["tabTitle","Skladi\u0161tenje Otpada",4,"ngIf"],["active","","tabTitle","Proizvodnja Otpada"],[3,"companyPIB","type"],["tabTitle","Transport Otpada"],["tabTitle","Tretman Otpada"],["tabTitle","Odlaganje Otpada"],["tabTitle","Skladi\u0161tenje Otpada"]],template:function(e,t){1&e&&(l.Xb(0,"nb-card"),l.Xb(1,"nb-card-header"),l.Xb(2,"div",0),l.Xb(3,"div",1),l.Xb(4,"a",2),l.Sb(5,"i",3),l.Wb(),l.Wb(),l.Xb(6,"div",4),l.Xb(7,"h5"),l.Hc(8),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(9,"nb-card-body"),l.Xb(10,"div",5),l.Xb(11,"div",6),l.Xb(12,"label",7),l.Hc(13,"Email za prijem dokumenata:"),l.Wb(),l.Xb(14,"div",6),l.Xb(15,"input",8),l.fc("ngModelChange",(function(e){return t.company.emailReception=e})),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(16,"div",5),l.Xb(17,"nb-tabset",9),l.Fc(18,f,2,2,"nb-tab",10),l.Fc(19,h,2,0,"nb-tab",11),l.Fc(20,v,2,2,"nb-tab",12),l.Fc(21,W,2,2,"nb-tab",13),l.Fc(22,X,2,0,"nb-tab",14),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(8),l.Ic(t.company.name),l.Eb(7),l.pc("ngModel",t.company.emailReception),l.Eb(3),l.pc("ngIf",null==t.operations?null:t.operations.production),l.Eb(1),l.pc("ngIf",null==t.operations?null:t.operations.transport),l.Eb(1),l.pc("ngIf",null==t.operations?null:t.operations.treatment),l.Eb(1),l.pc("ngIf",null==t.operations?null:t.operations.disposal),l.Eb(1),l.pc("ngIf",null==t.operations?null:t.operations.cache))},directives:[o.x,o.A,s.f,o.w,o.Q,a.b,a.k,a.n,o.Fb,i.m,o.Eb,g],styles:[""]}),e})();const y={pager:{perPage:10},actions:{add:!1,edit:!1,delete:!1},columns:{dan:{title:"Dan"},ukupnoStanje:{title:"Ukupno stanje (kg)"},ukupnoProizvodnja:{title:"Ukupna proizvodnja (kg)"},ukupnoTransport:{title:"Ukupan transport (kg)"},DKO:{valuePrepareFunction:(e,t)=>t.nazivFirme?t.nazivFirme+" "+t.brojDozvole:"/",title:"DKO"}}};let C=(()=>{class e{constructor(e,t){this.route=e,this.reportService=t,this.settings=y,this.report={_id:"",dailyReport:[],month:0,storage:void 0,total:0,totalProduction:0,totalTransport:0,trash:void 0,year:0}}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");this.reportService.getOneMonthlyReport(e).subscribe(e=>{this.report=e,this.dailyReports=this.report.dailyReport})}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(s.a),l.Rb(d.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["monthly-report-information"]],decls:53,vars:11,consts:[[1,"row","text-center"],[1,"col-1"],["routerLink","../..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-11"],[1,"row"],[1,"col-12"],[1,"label"],["nbInput","","disabled","","fullWidth","",3,"ngModel","ngModelChange"],[1,"col-4"],[1,"row","mt-2"],[3,"settings","source"]],template:function(e,t){1&e&&(l.Xb(0,"nb-card"),l.Xb(1,"nb-card-header"),l.Xb(2,"div",0),l.Xb(3,"div",1),l.Xb(4,"a",2),l.Sb(5,"i",3),l.Wb(),l.Wb(),l.Xb(6,"div",4),l.Xb(7,"h5"),l.Hc(8),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(9,"nb-card-body"),l.Xb(10,"div",5),l.Xb(11,"div",6),l.Xb(12,"label",7),l.Hc(13,"Godina: "),l.Wb(),l.Xb(14,"input",8),l.fc("ngModelChange",(function(e){return t.report.year=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(15,"div",5),l.Xb(16,"div",6),l.Xb(17,"label",7),l.Hc(18,"Mesec: "),l.Wb(),l.Xb(19,"input",8),l.fc("ngModelChange",(function(e){return t.report.month=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(20,"div",5),l.Xb(21,"div",6),l.Xb(22,"label",7),l.Hc(23,"Skladi\u0161te: "),l.Wb(),l.Xb(24,"input",8),l.fc("ngModelChange",(function(e){return t.report.storage.name=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(25,"div",5),l.Xb(26,"div",6),l.Xb(27,"label",7),l.Hc(28,"Indeksni Broj: "),l.Wb(),l.Xb(29,"input",8),l.fc("ngModelChange",(function(e){return t.report.trash.indexNumber=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(30,"div",5),l.Xb(31,"div",6),l.Xb(32,"label",7),l.Hc(33,"Trenutna Koli\u010dina na stanju: "),l.Wb(),l.Xb(34,"input",8),l.fc("ngModelChange",(function(e){return t.report.trash.amount=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(35,"div",5),l.Xb(36,"div",9),l.Xb(37,"label",7),l.Hc(38,"Fizi\u010dko stanje: "),l.Wb(),l.Xb(39,"input",8),l.fc("ngModelChange",(function(e){return t.report.trash.state=e})),l.Wb(),l.Wb(),l.Xb(40,"div",9),l.Xb(41,"label",7),l.Hc(42,"Na\u010din pakovanja: "),l.Wb(),l.Xb(43,"input",8),l.fc("ngModelChange",(function(e){return t.report.trash.packaging=e})),l.Wb(),l.Wb(),l.Xb(44,"div",9),l.Xb(45,"label",7),l.Hc(46,"Q Lista: "),l.Wb(),l.Xb(47,"input",8),l.fc("ngModelChange",(function(e){return t.report.trash.qList=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(48,"div",10),l.Xb(49,"div",6),l.Xb(50,"label",7),l.Hc(51,"Izve\u0161taj za svaki dan:"),l.Wb(),l.Sb(52,"ng2-smart-table",11),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(8),l.Ic(t.report.trash.name),l.Eb(6),l.pc("ngModel",t.report.year),l.Eb(5),l.pc("ngModel",t.report.month),l.Eb(5),l.pc("ngModel",t.report.storage.name),l.Eb(5),l.pc("ngModel",t.report.trash.indexNumber),l.Eb(5),l.pc("ngModel",t.report.trash.amount),l.Eb(5),l.pc("ngModel",t.report.trash.state),l.Eb(4),l.pc("ngModel",t.report.trash.packaging),l.Eb(4),l.pc("ngModel",t.report.trash.qList),l.Eb(5),l.pc("settings",t.settings)("source",t.dailyReports))},directives:[o.x,o.A,s.f,o.w,o.Q,a.b,a.k,a.n,r.b],styles:[""]}),e})();const j={pager:{perPage:10},actions:{columnTitle:"Generi\u0161i izve\u0161taj/Pregeldaj izve\u0161taje",add:!1,edit:!1,delete:!1,position:"right",custom:[{name:"one report",title:'<i class="fa fa-file-alt"></i>'},{name:"all reports",title:'<i class="fa fa-book"></i>'}]},columns:{pib:{title:"PIB"},mat:{title:"Mati\u010dni broj"},name:{title:"Naziv Firme"},emailReception:{title:"Email za prijem"},telephone:{title:"Telefon"},operations:{title:"Rad firme"}}};let M=(()=>{class e{constructor(e,t,n){this.adminService=e,this.toastrService=t,this.router=n,this.companySource=new r.a,this.companySettings=j}ngOnInit(){this.adminService.getCompanies().subscribe(e=>{this.companySource.load(e)})}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}companyReports(e){"one report"===e.action?this.gotoCompanyReport(e):"all reports"===e.action&&this.gotoAllReports(e)}gotoCompanyReport({data:e}){this.router.navigate(["admin/reports/company/",e.pib])}gotoAllReports({data:e}){this.router.navigate(["admin/reports//",e.pib])}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(c.a),l.Rb(o.Kb),l.Rb(s.c))},e.\u0275cmp=l.Lb({type:e,selectors:[["ngx-reports"]],decls:5,vars:2,consts:[[3,"settings","source","custom"]],template:function(e,t){1&e&&(l.Xb(0,"nb-card"),l.Xb(1,"nb-card-header"),l.Hc(2,"Firme"),l.Wb(),l.Xb(3,"nb-card-body"),l.Xb(4,"ng2-smart-table",0),l.fc("custom",(function(e){return t.companyReports(e)})),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(4),l.pc("settings",t.companySettings)("source",t.companySource))},directives:[o.x,o.A,o.w,r.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-edit-delete{display:flex!important;height:0!important}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:40px;text-align:center;margin-left:5px;font-size:1.1em}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),e})();var I=n("LRne"),S=n("SxV6"),E=n("X+yL"),w=n("wH5/"),x=n("Lx1j");function z(e,t){1&e&&(l.Xb(0,"span"),l.Hc(1,"proizvo\u0111a\u010du"),l.Wb())}function H(e,t){1&e&&(l.Xb(0,"span"),l.Hc(1,"transporteru"),l.Wb())}function F(e,t){1&e&&(l.Xb(0,"span"),l.Hc(1,"primalacu"),l.Wb())}function P(e,t){if(1&e&&(l.Xb(0,"nb-option",16),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.pc("value",e),l.Eb(1),l.Ic(e.name)}}function T(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",1),l.Xb(1,"button",13),l.fc("click",(function(){return l.zc(e),l.jc().chooseCompany()})),l.Hc(2,"Odaberi ve\u0107 postoje\u0107u firmu "),l.Wb(),l.Xb(3,"nb-select",14),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().tmpCompany=t})),l.Fc(4,P,2,2,"nb-option",15),l.Wb(),l.Wb()}if(2&e){const e=l.jc();l.Eb(1),l.pc("disabled",e.firstLoad),l.Eb(2),l.pc("disabled",!e.firstLoad)("ngModel",e.tmpCompany),l.Eb(1),l.pc("ngForOf",e.companies)}}function O(e,t){if(1&e&&(l.Xb(0,"nb-option",16),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.pc("value",e),l.Eb(1),l.Ic(e)}}function R(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div"),l.Xb(1,"div",0),l.Xb(2,"div",4),l.Xb(3,"label",5),l.Hc(4,"Predvi\u0111en na\u010din postupanja sa otpadom:"),l.Wb(),l.Wb(),l.Xb(5,"div",1),l.Xb(6,"nb-radio-group",17,18),l.fc("valueChange",(function(){l.zc(e);const t=l.xc(7);return l.jc().selectList(t.value)})),l.Xb(8,"nb-radio",19),l.Hc(9,"Tretman (R)"),l.Wb(),l.Xb(10,"nb-radio",20),l.Hc(11,"Odlaganje (D)"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(12,"div",0),l.Xb(13,"div",4),l.Xb(14,"label",5),l.Hc(15,"Odaberite R/D Listu"),l.Wb(),l.Wb(),l.Xb(16,"div",1),l.Xb(17,"nb-select",21),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.nacinPostupanja=t})),l.Fc(18,O,2,2,"nb-option",15),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.jc();l.Eb(17),l.pc("ngModel",e.dko.nacinPostupanja),l.Eb(1),l.pc("ngForOf",e.treatmentList)}}function L(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div"),l.Xb(1,"div",0),l.Xb(2,"div",4),l.Xb(3,"label",5),l.Hc(4,"Vrsta prevoznog sredstva:"),l.Wb(),l.Wb(),l.Xb(5,"div",1),l.Xb(6,"nb-select",21),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.vrstaVozila=t})),l.Xb(7,"nb-option",22),l.Hc(8,"Kamion"),l.Wb(),l.Xb(9,"nb-option",23),l.Hc(10,"Kombi"),l.Wb(),l.Xb(11,"nb-option",24),l.Hc(12,"Automobil"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(13,"div",0),l.Xb(14,"div",4),l.Xb(15,"label",5),l.Hc(16,"Registraski broj prevoznog sredstva:"),l.Wb(),l.Wb(),l.Xb(17,"div",1),l.Xb(18,"input",25),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.registarskiBroj=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(19,"div",0),l.Xb(20,"div",4),l.Xb(21,"label",26),l.Hc(22,"Dozvola za prevoznika otpada:"),l.Wb(),l.Wb(),l.Xb(23,"div",10),l.Xb(24,"input",27),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.sifraDozvoleTransport=t})),l.Wb(),l.Wb(),l.Xb(25,"div",10),l.Xb(26,"input",28),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.datumDozvoleTransport=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(27,"div",0),l.Xb(28,"div",4),l.Xb(29,"label",5),l.Hc(30,"Ruta kretanja pocetna/krajnja:"),l.Wb(),l.Wb(),l.Xb(31,"div",1),l.Xb(32,"input",25),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.rutaKretanja[0]=t})),l.Wb(),l.Wb(),l.Xb(33,"div",1),l.Xb(34,"input",25),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.rutaKretanja[1]=t})),l.Wb(),l.Wb(),l.Xb(35,"div",1),l.Xb(36,"input",25),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.rutaKretanja[2]=t})),l.Wb(),l.Wb(),l.Xb(37,"div",1),l.Xb(38,"input",25),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.rutaKretanja[3]=t})),l.Wb(),l.Wb(),l.Xb(39,"div",1),l.Xb(40,"input",25),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.rutaKretanja[4]=t})),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.jc();l.Eb(6),l.pc("ngModel",e.dko.vrstaVozila),l.Eb(12),l.pc("ngModel",e.dko.registarskiBroj),l.Eb(6),l.pc("ngModel",e.dko.sifraDozvoleTransport),l.Eb(2),l.pc("ngModel",e.dko.datumDozvoleTransport),l.Eb(6),l.pc("ngModel",e.dko.rutaKretanja[0]),l.Eb(2),l.pc("ngModel",e.dko.rutaKretanja[1]),l.Eb(2),l.pc("ngModel",e.dko.rutaKretanja[2]),l.Eb(2),l.pc("ngModel",e.dko.rutaKretanja[3]),l.Eb(2),l.pc("ngModel",e.dko.rutaKretanja[4])}}function U(e,t){if(1&e){const e=l.Yb();l.Xb(0,"nb-radio-group",21),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc(2).dko.vrstaPrimalaca=t})),l.Xb(1,"nb-radio",32),l.Hc(2,"Tretman"),l.Wb(),l.Xb(3,"nb-radio",33),l.Hc(4,"Skladistenje"),l.Wb(),l.Xb(5,"nb-radio",34),l.Hc(6,"Odlaganje"),l.Wb(),l.Wb()}if(2&e){const e=l.jc(2);l.pc("ngModel",e.dko.vrstaPrimalaca)}}function V(e,t){if(1&e){const e=l.Yb();l.Xb(0,"nb-radio-group",21),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc(2).dko.vrstaPrimalaca=t})),l.Xb(1,"nb-radio",35),l.Hc(2,"Tretman"),l.Wb(),l.Xb(3,"nb-radio",36),l.Hc(4,"Skladistenje "),l.Wb(),l.Xb(5,"nb-radio",37),l.Hc(6,"Odlaganje"),l.Wb(),l.Wb()}if(2&e){const e=l.jc(2);l.pc("ngModel",e.dko.vrstaPrimalaca),l.Eb(1),l.pc("disabled",!e.checkCompanyType("Tretman Neopasnog Otpada")),l.Eb(2),l.pc("disabled",!e.checkCompanyType("Skladi\u0161tenje Neopasnog Otpada")),l.Eb(2),l.pc("disabled",!e.checkCompanyType("Odlaganje Neopasnog Otpada"))}}function D(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div"),l.Xb(1,"div",0),l.Xb(2,"div",4),l.Xb(3,"label",26),l.Hc(4,"Vrsta primalaca:"),l.Wb(),l.Wb(),l.Xb(5,"div",1),l.Fc(6,U,7,1,"nb-radio-group",29),l.Fc(7,V,7,4,"nb-radio-group",29),l.Wb(),l.Wb(),l.Xb(8,"div",0),l.Xb(9,"div",4),l.Xb(10,"label",26),l.Hc(11,"Dozvola za primalaca otpada:"),l.Wb(),l.Wb(),l.Xb(12,"div",10),l.Xb(13,"input",30),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.sifraDozvolePrimalac=t})),l.Wb(),l.Wb(),l.Xb(14,"div",10),l.Xb(15,"input",31),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.datumDozvolePrimalac=t})),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.jc();l.Eb(6),l.pc("ngIf",!e.firstLoad),l.Eb(1),l.pc("ngIf",e.firstLoad),l.Eb(6),l.pc("ngModel",e.dko.sifraDozvolePrimalac),l.Eb(2),l.pc("ngModel",e.dko.datumDozvolePrimalac)}}let B=(()=>{class e{constructor(e,t){this.dkoService=e,this.firmaService=t,this.tmpCompany={address:{location:void 0,street:""},email:"",mat:"",name:"",operations:[],pib:"",telephone:""},this.companies=[],this.firstLoad=!1,this.dLista=[],this.rLista=[],this.treatmentList=[];for(let n=1;n<=15;n++)this.dLista.push("D"+n);for(let n=1;n<=13;n++)this.rLista.push("R"+n)}ngOnInit(){this.dkoService.getDKO().subscribe(e=>{this.dko=e,this.company&&(this.tmpCompany=this.company,this.dko.firmaProizvodjac=this.tmpCompany)})}selectList(e){this.treatmentList="R"===e?this.rLista:this.dLista}sendCompany(){if("transport"===this.type)this.tmpCompany.operations.push("Transport "+this.trashType+" Otpada"),this.dko.firmaTransport=this.tmpCompany;else if("recipient"===this.type){let e=this.dko.vrstaPrimalaca.startsWith("s")?"Skladi\u0161tenje":this.dko.vrstaPrimalaca;e=e[0].toUpperCase()+e.substr(1).toLowerCase(),this.tmpCompany.operations.push(e+" "+this.trashType+" Otpada"),this.dko.firmaPrimalac=this.tmpCompany}this.dkoService.sendDKO(Object(I.a)(this.dko))}chooseCompany(){("transport"!==this.type||this.firstLoad)&&("recipient"!==this.type||this.firstLoad||(this.firstLoad=!0))}checkCompanyType(e){return!!this.tmpCompany.operations.includes(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(E.a),l.Rb(w.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["company-part"]],inputs:{company:"company",type:"type",trashType:"trashType"},decls:80,vars:28,consts:[[1,"row","mb-1"],[1,"col-6"],[4,"ngIf"],["class","col-6",4,"ngIf"],[1,"col-12"],[1,"label"],["fullWidth","","nbInput","","type","text",3,"ngModel","disabled","ngModelChange"],["nbInput","","fullWidth","",3,"disabled","ngModel","ngModelChange"],[1,"row","ml-2"],[1,"row","mt-2"],[1,"col-3"],["nbButton","","fullWidth","","status","danger","nbStepperPrevious",""],["nbButton","","fullWidth","","status","primary","type","button","nbStepperNext","",3,"click"],["fullWidth","","nbButton","","status","info","type","button",3,"disabled","click"],["fullWidth","",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"valueChange"],["nacinPostupanja",""],["value","R"],["value","D"],["fullWidth","",3,"ngModel","ngModelChange"],["value","kamion"],["value","kombi"],["value","automobil"],["nbInput","","fullWidth","",3,"ngModel","ngModelChange"],["fullWidth","",1,"label"],["fullWidth","","placeholder","Sifra","nbInput","",3,"ngModel","ngModelChange"],["fullWidth","","placeholder","Datum nastanka","nbInput","","type","date",3,"ngModel","ngModelChange"],["fullWidth","",3,"ngModel","ngModelChange",4,"ngIf"],["fullWidth","","placeholder","sifra","nbInput","",3,"ngModel","ngModelChange"],["fullWidth","","nbInput","","type","date","placeholder","datum nastanka",3,"ngModel","ngModelChange"],["value","treatment"],["value","storage"],["value","dump"],["value","treatment",3,"disabled"],["value","storage",3,"disabled"],["value","dump",3,"disabled"]],template:function(e,t){1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"h5"),l.Hc(3,"Podaci o "),l.Fc(4,z,2,0,"span",2),l.Fc(5,H,2,0,"span",2),l.Fc(6,F,2,0,"span",2),l.Hc(7),l.Wb(),l.Wb(),l.Fc(8,T,5,4,"div",3),l.Wb(),l.Xb(9,"div",0),l.Xb(10,"div",4),l.Xb(11,"label",5),l.Hc(12,"PIB firme:"),l.Wb(),l.Wb(),l.Xb(13,"div",1),l.Xb(14,"input",6),l.fc("ngModelChange",(function(e){return t.tmpCompany.mat=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(15,"div",0),l.Xb(16,"div",4),l.Xb(17,"label",5),l.Hc(18,"Mati\u010dni broj firme:"),l.Wb(),l.Wb(),l.Xb(19,"div",1),l.Xb(20,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.pib=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(21,"div",0),l.Xb(22,"div",4),l.Xb(23,"label",5),l.Hc(24,"Naziv firme:"),l.Wb(),l.Wb(),l.Xb(25,"div",1),l.Xb(26,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.name=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(27,"div",0),l.Xb(28,"div",4),l.Xb(29,"label",5),l.Hc(30,"Adresa firme:"),l.Wb(),l.Wb(),l.Xb(31,"div",8),l.Xb(32,"div",4),l.Xb(33,"label",5),l.Hc(34,"Op\u0161tina:"),l.Wb(),l.Wb(),l.Xb(35,"div",1),l.Xb(36,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.address.location.townshipName=e})),l.Wb(),l.Wb(),l.Xb(37,"div",4),l.Xb(38,"label",5),l.Hc(39,"Location:"),l.Wb(),l.Wb(),l.Xb(40,"div",1),l.Xb(41,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.address.location.placeName=e})),l.Wb(),l.Wb(),l.Xb(42,"div",4),l.Xb(43,"label",5),l.Hc(44,"Po\u0161tanski broj:"),l.Wb(),l.Wb(),l.Xb(45,"div",1),l.Xb(46,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.address.location.zipCode=e})),l.Wb(),l.Wb(),l.Xb(47,"div",4),l.Xb(48,"label",5),l.Hc(49,"Ulica i broj:"),l.Wb(),l.Wb(),l.Xb(50,"div",1),l.Xb(51,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.address.street=e})),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(52,"div",0),l.Xb(53,"div",4),l.Xb(54,"label",5),l.Hc(55,"Email firme:"),l.Wb(),l.Wb(),l.Xb(56,"div",1),l.Xb(57,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.email=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(58,"div",0),l.Xb(59,"div",4),l.Xb(60,"label",5),l.Hc(61,"Telefon firme:"),l.Wb(),l.Wb(),l.Xb(62,"div",1),l.Xb(63,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.telephone=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(64,"div",0),l.Xb(65,"div",4),l.Xb(66,"label",5),l.Hc(67,"Telefaks firme:"),l.Wb(),l.Wb(),l.Xb(68,"div",1),l.Xb(69,"input",7),l.fc("ngModelChange",(function(e){return t.tmpCompany.fax=e})),l.Wb(),l.Wb(),l.Wb(),l.Fc(70,R,19,2,"div",2),l.Fc(71,L,41,9,"div",2),l.Fc(72,D,16,4,"div",2),l.Xb(73,"div",9),l.Xb(74,"div",10),l.Xb(75,"button",11),l.Hc(76,"Nazad"),l.Wb(),l.Wb(),l.Xb(77,"div",10),l.Xb(78,"button",12),l.fc("click",(function(){return t.sendCompany()})),l.Hc(79,"Dalje "),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(4),l.pc("ngIf","production"===t.type),l.Eb(1),l.pc("ngIf","transport"===t.type),l.Eb(1),l.pc("ngIf","recipient"===t.type),l.Eb(1),l.Jc(" ","'"+(null==t.tmpCompany?null:t.tmpCompany.name)+"'",""),l.Eb(1),l.pc("ngIf","production"!==t.type),l.Eb(6),l.pc("ngModel",t.tmpCompany.mat)("disabled","production"===t.type),l.Eb(6),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.pib),l.Eb(6),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.name),l.Eb(10),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.address.location.townshipName),l.Eb(5),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.address.location.placeName),l.Eb(5),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.address.location.zipCode),l.Eb(5),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.address.street),l.Eb(6),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.email),l.Eb(6),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.telephone),l.Eb(6),l.pc("disabled","production"===t.type)("ngModel",t.tmpCompany.fax),l.Eb(1),l.pc("ngIf","production"===t.type),l.Eb(1),l.pc("ngIf","transport"===t.type),l.Eb(1),l.pc("ngIf","recipient"===t.type))},directives:[i.m,o.Q,a.b,a.k,a.n,o.t,o.Cb,o.Bb,o.qb,i.l,o.fb,o.mb,o.lb],styles:[""]}),e})();function N(e,t){if(1&e&&(l.Xb(0,"button",16),l.Hc(1),l.Sb(2,"nb-icon",17),l.Wb()),2&e){const e=l.jc(),t=e.$implicit,n=e.index,i=l.jc();l.Eb(1),l.Jc(" ",t," "),l.Eb(1),l.pc("icon",n===i.dko.rutaKretanja.length-1?"checkmark-circle":"arrowhead-right")}}function q(e,t){if(1&e&&(l.Xb(0,"div",14),l.Fc(1,N,3,2,"button",15),l.Wb()),2&e){const e=t.$implicit;l.Eb(1),l.pc("ngIf",""!==e&&void 0!==e)}}let K=(()=>{class e{constructor(e,t){this.dkoService=e,this.router=t}ngOnInit(){this.dkoService.getDKO().subscribe(e=>{this.dko=e;for(let t=0;t<5;t++)void 0!==this.dko.rutaKretanja[t]&&""!==this.dko.rutaKretanja[t]||this.dko.rutaKretanja.splice(t,1)})}downloadFile(e){const t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t);window.open(n)}generateDKO(){this.dkoService.generateDKO(this.dko,this.storage._id,this.trash._id).subscribe(e=>{this.dko.otpad.indexNumber.endsWith("*")||this.downloadFile(e),this.router.navigate(["/admin/izvestaji/firme/"+this.dko.firmaProizvodjac.pib])})}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(E.a),l.Rb(s.c))},e.\u0275cmp=l.Lb({type:e,selectors:[["confirm-part"]],inputs:{storage:"storage",trash:"trash"},decls:37,vars:5,consts:[[1,"row"],[1,"row","mb-1"],[1,"col-4"],[1,"label"],["nbButton","","outline","","status","success","fullWidth",""],["nbButton","","outline","","status","info","fullWidth",""],["nbButton","","outline","","status","danger","fullWidth",""],[1,"col-6"],["nbButton","","outline","","status","warning","fullWidth",""],[1,"label","col-12"],["class","col",4,"ngFor","ngForOf"],[1,"row","mt-5"],["nbButton","","fullWidth","","nbStepperPrevious","","status","danger"],["nbButton","","fullWidth","","status","success",3,"click"],[1,"col"],["nbButton","","fullWidth","",4,"ngIf"],["nbButton","","fullWidth",""],[3,"icon"]],template:function(e,t){1&e&&(l.Xb(0,"div",0),l.Xb(1,"h5"),l.Hc(2,"Potvrda i generisanje dokumenta"),l.Wb(),l.Wb(),l.Xb(3,"div",1),l.Xb(4,"div",2),l.Xb(5,"label",3),l.Hc(6,"Proizvo\u0111a\u010d:"),l.Wb(),l.Xb(7,"button",4),l.Hc(8),l.Wb(),l.Wb(),l.Xb(9,"div",2),l.Xb(10,"label",3),l.Hc(11,"Transporter:"),l.Wb(),l.Xb(12,"button",5),l.Hc(13),l.Wb(),l.Wb(),l.Xb(14,"div",2),l.Xb(15,"label",3),l.Hc(16,"Primalac:"),l.Wb(),l.Xb(17,"button",6),l.Hc(18),l.Wb(),l.Wb(),l.Wb(),l.Xb(19,"div",1),l.Xb(20,"div",7),l.Xb(21,"label",3),l.Hc(22,"Otpad "),l.Wb(),l.Xb(23,"button",8),l.Hc(24),l.Wb(),l.Wb(),l.Wb(),l.Xb(25,"div",1),l.Xb(26,"label",9),l.Hc(27,"Ruta kretanja otpada"),l.Wb(),l.Fc(28,q,2,1,"div",10),l.Wb(),l.Xb(29,"div",11),l.Xb(30,"div",2),l.Xb(31,"button",12),l.Hc(32,"Nazad"),l.Wb(),l.Wb(),l.Sb(33,"div",2),l.Xb(34,"div",2),l.Xb(35,"button",13),l.fc("click",(function(){return t.generateDKO()})),l.Hc(36,"Generisi dokument"),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(8),l.Ic(null==t.dko||null==t.dko.firmaProizvodjac?null:t.dko.firmaProizvodjac.naziv),l.Eb(5),l.Ic(null==t.dko||null==t.dko.firmaTransport?null:t.dko.firmaTransport.naziv),l.Eb(5),l.Ic(null==t.dko||null==t.dko.firmaPrimalac?null:t.dko.firmaPrimalac.naziv),l.Eb(6),l.Ic(null==t.dko||null==t.dko.otpad?null:t.dko.otpad.naziv),l.Eb(4),l.pc("ngForOf",t.dko.rutaKretanja))},directives:[o.t,i.l,o.Cb,i.m,o.N],styles:[""]}),e})();function _(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div"),l.Xb(1,"div",0),l.Xb(2,"div",1),l.Xb(3,"label",2),l.Hc(4,"H Lista:"),l.Wb(),l.Wb(),l.Xb(5,"div",3),l.Xb(6,"input",33),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().trash.hList=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(7,"div",0),l.Xb(8,"div",1),l.Xb(9,"label",2),l.Hc(10,"Y Lista:"),l.Wb(),l.Wb(),l.Xb(11,"div",3),l.Xb(12,"input",34),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().trash.yList=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(13,"div",0),l.Xb(14,"div",1),l.Xb(15,"label",2),l.Hc(16,"C Lista:"),l.Wb(),l.Wb(),l.Xb(17,"div",3),l.Xb(18,"input",34),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().trash.cList=t})),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.jc();l.Eb(6),l.pc("ngModel",e.trash.hList),l.Eb(6),l.pc("ngModel",e.trash.yList),l.Eb(6),l.pc("ngModel",e.trash.cList)}}function A(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",3),l.Xb(1,"input",35),l.fc("ngModelChange",(function(t){return l.zc(e),l.jc().dko.nacinPakovanja=t})),l.Wb(),l.Wb()}if(2&e){const e=l.jc();l.Eb(1),l.pc("ngModel",e.dko.nacinPakovanja)}}function $(e,t){if(1&e&&(l.Xb(0,"nb-option",36),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.pc("value",e),l.Eb(1),l.Ic(e)}}let G=(()=>{class e{constructor(e){this.dkoService=e,this.fizickaStanja=["\u010cvrsto","Te\u010dno","Gasovito","Prah"]}ngOnInit(){this.dkoService.getDKO().subscribe(e=>{this.dko=e,this.dko.otpad=this.trash,this.dko.masaOtpada=this.trash.amount,this.dko.datumIspitivanja=this.trash.examinationDate,this.dko.sifraIspitivanja=this.trash.examinationCode,this.dko.fizickoStanje=this.trash.state,this.dko.qLista=this.trash.qList,this.dko.nacinPakovanja=this.trash.packaging,Object(l.Y)()&&(this.dko.vrstaOtpada="indutstrijski",this.dko.masaOtpada=10,this.dko.datumIspitivanja=new Date(2020,3,4),this.dko.sifraIspitivanja="1234DA",this.dko.qLista="Q1",this.dko.nacinPakovanja="Bure")}),this.dkoService.sendDKO(Object(I.a)(this.dko))}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(E.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["trash-part"]],inputs:{trash:"trash",trashType:"trashType"},decls:102,vars:15,consts:[[1,"row","mb-1"],[1,"col-12"],[1,"label"],[1,"col-6"],["fullWidth","",3,"ngModel","ngModelChange"],["value","Industrijski"],["value","Komercijalni"],["value","Otpad iz doma\u0107instva"],["disabled","","fullWidth","","nbInput","","type","text",3,"ngModel","ngModelChange"],[4,"ngIf"],["nbInput","","fullWidth","",3,"ngModel","ngModelChange"],["nbInput","","fullWidth","","type","number",3,"ngModel","ngModelChange"],["value","Bure"],["value","Kanister"],["value","Sanduk"],["value","Kese"],["value","Posude pod pritiskom"],["value","Kompozitno pakovanje"],["value","U rasutom stanju"],["value","ostalo"],["ostalo",""],["class","col-6",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["fullWidth","",1,"label"],[1,"col-3"],["fullWidth","","nbInput","",3,"ngModel","ngModelChange"],["fullWidth","","nbInput","","type","date",3,"ngModel","ngModelChange"],["nbInput","","fullWidth","","type","text",3,"ngModel","ngModelChange"],["value","drumski"],["value","\u017eelezni\u010dki"],["value","re\u010dni"],[1,"row","mt-2"],["nbButton","","fullWidth","","status","primary","nbStepperNext",""],["nbInput","","disabled","","fullWidth","",3,"ngModel","ngModelChange"],["nbInput","","fullWidth","","disabled","",3,"ngModel","ngModelChange"],["fullWidth","","nbInput","","placeholder","ostalo",3,"ngModel","ngModelChange"],[3,"value"]],template:function(e,t){if(1&e&&(l.Xb(0,"div",0),l.Xb(1,"h5"),l.Hc(2),l.Wb(),l.Wb(),l.Xb(3,"div",0),l.Xb(4,"div",1),l.Xb(5,"label",2),l.Hc(6,"Vrsta Otpada:"),l.Wb(),l.Wb(),l.Xb(7,"div",3),l.Xb(8,"nb-select",4),l.fc("ngModelChange",(function(e){return t.dko.vrstaOtpada=e})),l.Xb(9,"nb-option",5),l.Hc(10,"Industrijski"),l.Wb(),l.Xb(11,"nb-option",6),l.Hc(12,"Komercijalni"),l.Wb(),l.Xb(13,"nb-option",7),l.Hc(14,"Otpad iz doma\u0107instva"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(15,"div",0),l.Xb(16,"div",1),l.Xb(17,"label",2),l.Hc(18,"Indeksni broj:"),l.Wb(),l.Wb(),l.Xb(19,"div",3),l.Xb(20,"input",8),l.fc("ngModelChange",(function(e){return t.trash.indexNumber=e})),l.Wb(),l.Wb(),l.Wb(),l.Fc(21,_,19,3,"div",9),l.Xb(22,"div",0),l.Xb(23,"div",1),l.Xb(24,"label",2),l.Hc(25,"Q Lista:"),l.Wb(),l.Wb(),l.Xb(26,"div",3),l.Xb(27,"input",10),l.fc("ngModelChange",(function(e){return t.dko.qLista=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(28,"div",0),l.Xb(29,"div",1),l.Xb(30,"label",2),l.Hc(31,"Masa otpada:"),l.Wb(),l.Wb(),l.Xb(32,"div",3),l.Xb(33,"input",11),l.fc("ngModelChange",(function(e){return t.dko.masaOtpada=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(34,"div",0),l.Xb(35,"div",1),l.Xb(36,"label",2),l.Hc(37,"Na\u010din pakovanja otpada:"),l.Wb(),l.Wb(),l.Xb(38,"div",3),l.Xb(39,"nb-select",4),l.fc("ngModelChange",(function(e){return t.dko.nacinPakovanja=e})),l.Xb(40,"nb-option",12),l.Hc(41,"Bure"),l.Wb(),l.Xb(42,"nb-option",13),l.Hc(43,"Kanister"),l.Wb(),l.Xb(44,"nb-option",14),l.Hc(45,"Sanduk"),l.Wb(),l.Xb(46,"nb-option",15),l.Hc(47,"Kese"),l.Wb(),l.Xb(48,"nb-option",16),l.Hc(49,"Posude pod pritiskom"),l.Wb(),l.Xb(50,"nb-option",17),l.Hc(51,"Kompozitno pakovanje"),l.Wb(),l.Xb(52,"nb-option",18),l.Hc(53,"U rasutom stanju"),l.Wb(),l.Xb(54,"nb-option",19,20),l.Hc(56,"Ostalo"),l.Wb(),l.Wb(),l.Wb(),l.Fc(57,A,2,1,"div",21),l.Wb(),l.Xb(58,"div",0),l.Xb(59,"div",1),l.Xb(60,"label",2),l.Hc(61,"Fizi\u010dko stanje otpada:"),l.Wb(),l.Wb(),l.Xb(62,"div",3),l.Xb(63,"nb-select",4),l.fc("ngModelChange",(function(e){return t.dko.fizickoStanje=e})),l.Fc(64,$,2,2,"nb-option",22),l.Wb(),l.Wb(),l.Wb(),l.Xb(65,"div",0),l.Xb(66,"div",1),l.Xb(67,"label",23),l.Hc(68,"Izve\u0161taj o ispitivanju otpada:"),l.Wb(),l.Wb(),l.Xb(69,"div",24),l.Xb(70,"input",25),l.fc("ngModelChange",(function(e){return t.dko.sifraIspitivanja=e})),l.Wb(),l.Wb(),l.Xb(71,"div",24),l.Xb(72,"input",26),l.fc("ngModelChange",(function(e){return t.dko.datumIspitivanja=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(73,"div",0),l.Xb(74,"div",1),l.Xb(75,"label",2),l.Hc(76,"Odredi\u0161te:"),l.Wb(),l.Wb(),l.Xb(77,"div",3),l.Xb(78,"input",27),l.fc("ngModelChange",(function(e){return t.dko.rutaKretanja[0]=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(79,"div",0),l.Xb(80,"div",1),l.Xb(81,"label",2),l.Hc(82,"Vrsta prevoza:"),l.Wb(),l.Wb(),l.Xb(83,"div",3),l.Xb(84,"nb-select",4),l.fc("ngModelChange",(function(e){return t.dko.vidPrevoza=e})),l.Xb(85,"nb-option",28),l.Hc(86,"Drumski"),l.Wb(),l.Xb(87,"nb-option",29),l.Hc(88,"\u017delezni\u010dki"),l.Wb(),l.Xb(89,"nb-option",30),l.Hc(90,"Re\u010dni"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(91,"div",0),l.Xb(92,"div",1),l.Xb(93,"label",2),l.Hc(94,"Posebne napomene za rukovanje i dodatne informacije:"),l.Wb(),l.Wb(),l.Xb(95,"div",3),l.Xb(96,"input",27),l.fc("ngModelChange",(function(e){return t.dko.dodatneInformacije=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(97,"div",31),l.Sb(98,"div",24),l.Xb(99,"div",24),l.Xb(100,"button",32),l.Hc(101,"Dalje"),l.Wb(),l.Wb(),l.Wb()),2&e){const e=l.xc(55);l.Eb(2),l.Jc("Podaci o otpadu '",null==t.trash?null:t.trash.name,"'"),l.Eb(6),l.pc("ngModel",t.dko.vrstaOtpada),l.Eb(12),l.pc("ngModel",t.trash.indexNumber),l.Eb(1),l.pc("ngIf","Opasnog"===t.trashType),l.Eb(6),l.pc("ngModel",t.dko.qLista),l.Eb(6),l.pc("ngModel",t.dko.masaOtpada),l.Eb(6),l.pc("ngModel",t.dko.nacinPakovanja),l.Eb(18),l.pc("ngIf",e.selected),l.Eb(6),l.pc("ngModel",t.dko.fizickoStanje),l.Eb(1),l.pc("ngForOf",t.fizickaStanja),l.Eb(6),l.pc("ngModel",t.dko.sifraIspitivanja),l.Eb(2),l.pc("ngModel",t.dko.datumIspitivanja),l.Eb(6),l.pc("ngModel",t.dko.rutaKretanja[0]),l.Eb(6),l.pc("ngModel",t.dko.vidPrevoza),l.Eb(12),l.pc("ngModel",t.dko.dodatneInformacije)}},directives:[o.qb,a.k,a.n,o.fb,o.Q,a.b,i.m,a.p,i.l,o.t,o.Bb],styles:[""]}),e})();function Y(e,t){if(1&e&&(l.Xb(0,"nb-step",11),l.Xb(1,"div",12),l.Sb(2,"trash-part",13),l.kc(3,"async"),l.Wb(),l.Wb()),2&e){const e=l.jc();l.Eb(2),l.pc("trashType",e.trashType)("trash",l.lc(3,2,e.trash$))}}function J(e,t){if(1&e&&(l.Xb(0,"nb-step",14),l.Sb(1,"company-part",15),l.kc(2,"async"),l.Wb()),2&e){const e=l.jc();l.Eb(1),l.pc("trashType",e.trashType)("company",l.lc(2,3,e.company$))("type","production")}}let Z=(()=>{class e{constructor(e,t,n,i,a){this.route=e,this.notpadService=t,this.skladisteService=n,this.firmaService=i,this.dkoService=a}ngOnInit(){const e=this.route.snapshot.params.storage;this.notpadService.getTrash(this.route.snapshot.params.trash).subscribe(e=>{this.trash=e,this.trash$=Object(I.a)(e),this.trashType=this.trash.indexNumber.endsWith("*")?"Opasnog":"Neopasnog"}),this.skladisteService.getStorage(e).subscribe(e=>{this.storage=e,this.dkoService.getDKO().subscribe(e=>{this.dko=e,this.dko.rutaKretanja=[this.storage.address.location.townshipName,...this.dko.rutaKretanja],this.dko.vrstaProizvodjaca=this.storage.__t?"SkladisteTretman"===this.storage.__t?"treatment":"storage":"production"}),this.dkoService.sendDKO(Object(I.a)(this.dko))}),this.firmaService.getCompany(e,"skladista").pipe(Object(S.a)()).subscribe(e=>{this.company=e,this.company$=Object(I.a)(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(s.a),l.Rb(x.a),l.Rb(u.a),l.Rb(w.a),l.Rb(E.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["trash-transport-report"]],decls:15,vars:10,consts:[[1,"col-1"],[3,"routerLink"],[1,"fa","fa-2x","fa-arrow-left"],["orientation","vertical",3,"linear"],["label","Podaci o otpadu",4,"ngIf"],["label","Podaci o proizvo\u0111a\u010du",4,"ngIf"],["label","Podaci o transporteru"],[3,"trashType","type"],["label","Podaci o primalacu"],["label","Potvrda"],[3,"storage","trash"],["label","Podaci o otpadu"],[1,"test"],[3,"trashType","trash"],["label","Podaci o proizvo\u0111a\u010du"],[3,"trashType","company","type"]],template:function(e,t){1&e&&(l.Xb(0,"nb-card"),l.Xb(1,"nb-card-header"),l.Xb(2,"div",0),l.Xb(3,"a",1),l.Sb(4,"i",2),l.Wb(),l.Wb(),l.Wb(),l.Xb(5,"nb-card-body"),l.Xb(6,"nb-stepper",3),l.Fc(7,Y,4,4,"nb-step",4),l.Fc(8,J,3,5,"nb-step",5),l.Xb(9,"nb-step",6),l.Sb(10,"company-part",7),l.Wb(),l.Xb(11,"nb-step",8),l.Sb(12,"company-part",7),l.Wb(),l.Xb(13,"nb-step",9),l.Sb(14,"confirm-part",10),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(3),l.pc("routerLink","/admin/izvestaji/firme/"+(null==t.company?null:t.company.pib)),l.Eb(3),l.pc("linear",!1),l.Eb(1),l.pc("ngIf",t.trash$),l.Eb(1),l.pc("ngIf",t.company$),l.Eb(2),l.pc("trashType",t.trashType)("type","transport"),l.Eb(2),l.pc("trashType",t.trashType)("type","recipient"),l.Eb(2),l.pc("storage",t.storage)("trash",t.trash))},directives:[o.x,o.A,s.f,o.w,o.zb,i.m,o.yb,B,K,G],pipes:[i.b],styles:[".test[_ngcontent-%COMP%]{width:147%}"]}),e})();const Q={actions:{columnTitle:"Generi\u0161i GIO/Detaljnije",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"yearlyReport",title:'<i class="fa fa-file-pdf"></i>'},{name:"moreInfo",title:'<i class="fa fa-info-circle"></i>'}]},columns:{otpad:{valuePrepareFunction:(e,t)=>t.otpad.naziv+" ("+t.otpad.indeksniBroj+")",title:"Otpad"},ukupnoProizvodnja:{title:"Ukupno proizvedeno"},ukupnoTransport:{title:"Ukupno transportovano"},ukupnoStanje:{title:"Ukupno stanje"}}};let ee=(()=>{class e{constructor(e,t,n){this.reportService=e,this.router=t,this.companyService=n,this.reports=[],this.settings=Q}ngOnInit(){this.reportService.getAllMesecniIzvestajFirme(this.companyPIB).subscribe(e=>{this.reports=e.filter(e=>e.month===this.month)}),this.companyService.getCompany(this.companyPIB,"pib").subscribe(e=>{this.company=e})}chooseAction(e){"moreInfo"===e.action&&this.reportInfo(e),"yearlyReport"===e.action&&this.generateYearlyReport(e.data)}generateYearlyReport({otpad:e}){this.reportService.createGodisnjiIzvestaj(e,"PRODUCTION",this.company).subscribe(e=>this.downloadFile(e))}reportInfo({data:e}){this.router.navigate(["admin/izvestaji/mesecni-izvestaj",e._id])}downloadFile(e){const t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t);window.open(n)}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(d.a),l.Rb(s.c),l.Rb(w.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["monthly-reports"]],inputs:{month:"month",companyPIB:"companyPIB"},decls:2,vars:2,consts:[[3,"settings","source","custom"]],template:function(e,t){1&e&&(l.Xb(0,"div"),l.Xb(1,"ng2-smart-table",0),l.fc("custom",(function(e){return t.chooseAction(e)})),l.Wb(),l.Wb()),2&e&&(l.Eb(1),l.pc("settings",t.settings)("source",t.reports))},directives:[r.b],styles:[""]}),e})();function te(e,t){if(1&e&&(l.Xb(0,"nb-tab",2),l.Sb(1,"monthly-reports",3),l.Wb()),2&e){const e=t.$implicit,n=t.index,i=l.jc();l.pc("active",i.currMonth===n)("tabTitle",e),l.Eb(1),l.pc("companyPIB",i.companyPIB)("month",n)}}const ne=[{path:"",component:M},{path:"company/:pib",component:k},{path:"wmd",component:Z},{path:"monthly-report/:id",component:C},{path:"yearly-report/:pib",component:(()=>{class e{constructor(e){this.route=e,this.months=["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],this.currMonth=0,this.companyPIB=""}ngOnInit(){this.companyPIB=this.route.snapshot.paramMap.get("pib"),this.months$=Object(I.a)(this.months),this.currMonth=(new Date).getMonth()}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(s.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["yearly-reports"]],decls:9,vars:3,consts:[["tabTitle","2020"],[3,"active","tabTitle",4,"ngFor","ngForOf"],[3,"active","tabTitle"],[3,"companyPIB","month"]],template:function(e,t){1&e&&(l.Xb(0,"nb-card"),l.Xb(1,"nb-card-header"),l.Hc(2,"Ime kompanije"),l.Wb(),l.Xb(3,"nb-card-body"),l.Xb(4,"nb-tabset"),l.Xb(5,"nb-tab",0),l.Xb(6,"nb-tabset"),l.Fc(7,te,2,4,"nb-tab",1),l.kc(8,"async"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(7),l.pc("ngForOf",l.lc(8,1,t.months$)))},directives:[o.x,o.A,o.w,o.Fb,o.Eb,i.l,ee],pipes:[i.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover, i[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]     ng2-st-tbody-edit-delete{display:flex!important;height:0!important}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:25%;text-align:center;margin-left:5px;font-size:1.1em}"]}),e})()}];let ie=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[s.g.forChild(ne)],s.g]}),e})(),ae=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[i.c,ie,o.u,o.P,o.Ab,o.B,o.Gb,r.c,o.R,a.e]]}),e})()},FYoA:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return tt}));var i=n("ofXK"),a=n("3Pt+"),o=n("aceb"),r=n("RS3s"),s=n("fJ6F"),c=n("X+yL"),b=n("wH5/"),l=n("bS1W"),d=n("fo3O"),u=n("jPBY"),p=n("Lx1j"),m=n("ud2R"),g=n("7Oz7"),f=n("vTDv"),h=n("bJfm"),v=n("RPbl"),W=n("tyNb");const X=[{title:"Po\u010detni panel",icon:{icon:"home",pack:"font-awesome"},link:"/admin/admin-dashboard",home:!0},{title:"ADMIN PANELA",group:!0},{title:"Korisnici",link:"/admin/users",icon:{icon:"user",pack:"font-awesome"}},{title:"Firme",link:"/admin/companies",icon:{icon:"industry",pack:"font-awesome"}},{title:"Skladi\u0161ta",link:"/admin/storages",icon:{icon:"box",pack:"font-awesome"}},{title:"Dozvole",link:"/admin/permits",icon:{icon:"paste",pack:"font-awesome"}},{title:"Izve\u0161taji",link:"/admin/reports",icon:{icon:"print",pack:"font-awesome"}}];var k=n("fXoL"),y=n("mgFL");let C=(()=>{class e{constructor(){this.menu=X}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Lb({type:e,selectors:[["ng-component"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(k.Xb(0,"ngx-one-column-layout"),k.Sb(1,"nb-menu",0),k.Sb(2,"router-outlet"),k.Wb()),2&e&&(k.Eb(1),k.pc("items",t.menu))},directives:[y.a,o.bb,W.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}"]}),e})();const j={pager:{perPage:10},add:{confirmCreate:!0,addButtonContent:'<i  class="fa fa-plus"></i>',createButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},edit:{confirmSave:!0,editButtonContent:'<i class="fa fa-edit"></i>',saveButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},delete:{confirmDelete:!0,deleteButtonContent:'<i class="fa fa-trash"></i>',createButtonContent:'<i class="fa fa-check"></i>'},actions:{columnTitle:"Operacije",position:"right",custom:[{name:"info",title:'<div class="px-5"><i class="fa fa-info-circle"></i></a>'}]},columns:{pib:{title:"PIB"},mat:{title:"Mati\u010dni broj"},name:{title:"Naziv"},email:{title:"Email"},emailReception:{title:"Email za prijem"},telephone:{title:"Telefon"},operations:{title:"Rad firme"}}};let M=(()=>{class e{constructor(e,t,n,i){this.companyService=e,this.toastrService=t,this.router=n,this.adminService=i,this.companies=new r.a,this.companySettings=j}ngOnInit(){this.adminService.getCompanies().subscribe(e=>{this.companies.load(e)})}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}createCompany({newData:e,confirm:t}){try{this.companyService.createCompany(e).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste kreirali "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke do kreiranja "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}updateCompany({newData:e,confirm:t}){try{this.companyService.updateCompany(e,e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteCompany({data:e,confirm:t}){try{if(!window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.name+"?"))return;this.companyService.deleteCompany(e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}companyInfo({data:e}){this.router.navigate(["admin/companies",e.pib])}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(b.a),k.Rb(o.Kb),k.Rb(W.c),k.Rb(s.a))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-companies"]],decls:5,vars:2,consts:[[3,"settings","source","createConfirm","editConfirm","deleteConfirm","custom"]],template:function(e,t){1&e&&(k.Xb(0,"nb-card"),k.Xb(1,"nb-card-header"),k.Hc(2,"Firme"),k.Wb(),k.Xb(3,"nb-card-body"),k.Xb(4,"ng2-smart-table",0),k.fc("createConfirm",(function(e){return t.createCompany(e)}))("editConfirm",(function(e){return t.updateCompany(e)}))("deleteConfirm",(function(e){return t.deleteCompany(e)}))("custom",(function(e){return t.companyInfo(e)})),k.Wb(),k.Wb(),k.Wb()),2&e&&(k.Eb(4),k.pc("settings",t.companySettings)("source",t.companies))},directives:[o.x,o.A,o.w,r.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),e})();var I=n("McNs");function S(e,t){1&e&&(k.Xb(0,"p",48),k.Hc(1," Email je obavezan! "),k.Wb())}function E(e,t){1&e&&(k.Xb(0,"p",48),k.Hc(1," Email mora biti validan! "),k.Wb())}function w(e,t){if(1&e&&(k.Vb(0),k.Fc(1,S,2,0,"p",47),k.Fc(2,E,2,0,"p",47),k.Ub()),2&e){k.jc();const e=k.xc(41);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function x(e,t){1&e&&(k.Xb(0,"p",48),k.Hc(1," Email je obavezan! "),k.Wb())}function z(e,t){1&e&&(k.Xb(0,"p",48),k.Hc(1," Email mora biti validan! "),k.Wb())}function H(e,t){if(1&e&&(k.Vb(0),k.Fc(1,x,2,0,"p",47),k.Fc(2,z,2,0,"p",47),k.Ub()),2&e){k.jc();const e=k.xc(49);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function F(e,t){1&e&&(k.Xb(0,"p",48),k.Hc(1," Telefon je obavezan! "),k.Wb())}function P(e,t){if(1&e&&(k.Xb(0,"p",48),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Telefon mora da bude du\u017ei od ",e.getConfigValue("forms.validation.telefon.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.telefon.maxLength")," ")}}function T(e,t){if(1&e&&(k.Vb(0),k.Fc(1,F,2,0,"p",47),k.Fc(2,P,2,2,"p",47),k.Ub()),2&e){k.jc();const e=k.xc(57);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function O(e,t){if(1&e&&(k.Xb(0,"p",48),k.Hc(1),k.Wb()),2&e){const e=k.jc(3);k.Eb(1),k.Kc(" Faks mora da bude du\u017ei od ",e.getConfigValue("forms.validation.telefon.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.telefon.maxLength")," ")}}function R(e,t){if(1&e&&(k.Vb(0),k.Fc(1,O,2,2,"p",47),k.Ub()),2&e){k.jc();const e=k.xc(6);k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function L(e,t){if(1&e){const e=k.Yb();k.Xb(0,"div",10),k.Xb(1,"div",0),k.Xb(2,"label",49),k.Hc(3,"Faks:"),k.Wb(),k.Wb(),k.Xb(4,"div",9),k.Xb(5,"input",50,51),k.fc("ngModelChange",(function(t){return k.zc(e),k.jc().company.fax=t})),k.Wb(),k.Fc(7,R,2,1,"ng-container",23),k.Wb(),k.Wb()}if(2&e){const e=k.xc(6),t=k.jc();k.Eb(5),k.pc("ngModel",t.company.fax)("maxlength",t.getConfigValue("forms.validation.telefon.maxLength"))("minlength",t.getConfigValue("forms.validation.telefon.minLength"))("status",e.dirty?e.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),k.Eb(2),k.pc("ngIf",e.invalid&&e.touched)}}function U(e,t){1&e&&(k.Xb(0,"p",48),k.Hc(1," Zakosni zastupnik firme je obavezan! "),k.Wb())}function V(e,t){if(1&e&&(k.Xb(0,"p",48),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Zakosni zastupnik mora da bude du\u017ei od ",e.getConfigValue("forms.validation.zastupink.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.zastupink.maxLength")," ")}}function D(e,t){if(1&e&&(k.Vb(0),k.Fc(1,U,2,0,"p",47),k.Fc(2,V,2,2,"p",47),k.Ub()),2&e){k.jc();const e=k.xc(66);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function B(e,t){1&e&&k.Sb(0,"input",52),2&e&&k.pc("placeholder",t.$implicit)}let N=(()=>{class e{constructor(e,t,n={},i,a,o){this.route=e,this.companyService=t,this.options=n,this.adminService=i,this.toastrService=a,this.router=o,this.company={address:{location:void 0,street:""},email:"",emailReception:"",legalRep:"",manager:"",mat:"",name:"",occupation:void 0,operations:[],pib:"",telephone:""}}ngOnInit(){const e=this.route.snapshot.paramMap.get("pib");this.adminService.getCompany(e,"pib").subscribe(e=>{this.company=e})}getConfigValue(e){return Object(I.n)(this.options,e,null)}updateCompany(e){e.valid?(this.companyService.updateCompany(this.company,this.company._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success")):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}gotoUser(){this.router.navigate(["admin/users",this.company.manager])}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(W.a),k.Rb(b.a),k.Rb(I.a),k.Rb(s.a),k.Rb(o.Kb),k.Rb(W.c))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-company"]],decls:96,vars:34,consts:[[1,"col-12"],[3,"ngSubmit"],["formCompany","ngForm"],[1,"row"],[1,"col-1"],["routerLink","..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-9"],[1,"text-center"],[1,"col-6"],[1,"row","mb-2"],["for","input-naziv",1,"label"],["fullWidth","","id","input-naziv","name","ime","nbInput","","type","text",3,"ngModel","ngModelChange"],["naziv","ngModel"],["for","input-pib",1,"label"],["fullWidth","","id","input-pib","name","pib","nbInput","","type","text",3,"ngModel","ngModelChange"],["pib","ngModel"],["for","input-mat",1,"label"],["fullWidth","","id","input-mat","name","mat","nbInput","","type","text",3,"ngModel","ngModelChange"],["mat","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","ngModelChange"],["email","ngModel"],[4,"ngIf"],["for","input-emailPrijem",1,"label"],["fullWidth","","id","input-emailPrijem","name","emailPrijem","nbInput","","type","text",3,"ngModel","pattern","required","status","ngModelChange"],["emailPrijem","ngModel"],["for","input-telefon",1,"label"],["fullWidth","","id","input-telefon","name","telefon","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["telefon","ngModel"],["class","row mb-2",4,"ngIf"],["for","input-zastupink",1,"label"],["fullWidth","","id","input-zastupink","name","zastupink","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["zastupink","ngModel"],["for","input-adresa",1,"label"],["fullWidth","","disabled","","id","input-adresa","name","faks","nbInput","","type","text",3,"placeholder"],[1,"label"],["disabled","","fullWidth","","nbInput","","class","mb-1","type","text",3,"placeholder",4,"ngFor","ngForOf"],["for","input-menadzer",1,"label"],[1,"col-5","pr-0","ml-0"],["fullWidth","","disabled","","id","input-menadzer","name","menadzer","nbInput","","type","text",3,"placeholder"],[1,"col-1","pl-0","ml-0"],["status","primary","nbButton","","type","button",3,"click"],[1,"fa","fa-link"],[1,"col-8"],[1,"col-4"],["fullWidth","","nbButton","","status","success","type","submit"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-faks",1,"label"],["fullWidth","","id","input-faks","name","faks","nbInput","","type","text",3,"ngModel","maxlength","minlength","status","ngModelChange"],["faks","ngModel"],["disabled","","fullWidth","","nbInput","","type","text",1,"mb-1",3,"placeholder"]],template:function(e,t){if(1&e){const e=k.Yb();k.Xb(0,"nb-card",0),k.Xb(1,"form",1,2),k.fc("ngSubmit",(function(){k.zc(e);const n=k.xc(2);return t.updateCompany(n)})),k.Xb(3,"nb-card-header"),k.Xb(4,"div",3),k.Xb(5,"div",4),k.Xb(6,"a",5),k.Sb(7,"i",6),k.Wb(),k.Wb(),k.Xb(8,"div",7),k.Xb(9,"h5",8),k.Hc(10),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(11,"nb-card-body"),k.Xb(12,"div",3),k.Xb(13,"div",9),k.Xb(14,"div",10),k.Xb(15,"div",0),k.Xb(16,"label",11),k.Hc(17,"Naziv Firme:"),k.Wb(),k.Wb(),k.Xb(18,"div",9),k.Xb(19,"input",12,13),k.fc("ngModelChange",(function(e){return t.company.name=e})),k.Wb(),k.Wb(),k.Wb(),k.Xb(21,"div",10),k.Xb(22,"div",0),k.Xb(23,"label",14),k.Hc(24,"PIB:"),k.Wb(),k.Wb(),k.Xb(25,"div",9),k.Xb(26,"input",15,16),k.fc("ngModelChange",(function(e){return t.company.pib=e})),k.Wb(),k.Wb(),k.Wb(),k.Xb(28,"div",10),k.Xb(29,"div",0),k.Xb(30,"label",17),k.Hc(31,"Mati\u010dni broj:"),k.Wb(),k.Wb(),k.Xb(32,"div",9),k.Xb(33,"input",18,19),k.fc("ngModelChange",(function(e){return t.company.mat=e})),k.Wb(),k.Wb(),k.Wb(),k.Xb(35,"div",10),k.Xb(36,"div",0),k.Xb(37,"label",20),k.Hc(38,"Email:"),k.Wb(),k.Wb(),k.Xb(39,"div",9),k.Xb(40,"input",21,22),k.fc("ngModelChange",(function(e){return t.company.email=e})),k.Wb(),k.Fc(42,w,3,2,"ng-container",23),k.Wb(),k.Wb(),k.Xb(43,"div",10),k.Xb(44,"div",0),k.Xb(45,"label",24),k.Hc(46,"Email za prijem dokumenata:"),k.Wb(),k.Wb(),k.Xb(47,"div",9),k.Xb(48,"input",25,26),k.fc("ngModelChange",(function(e){return t.company.emailReception=e})),k.Wb(),k.Fc(50,H,3,2,"ng-container",23),k.Wb(),k.Wb(),k.Xb(51,"div",10),k.Xb(52,"div",0),k.Xb(53,"label",27),k.Hc(54,"Telefon:"),k.Wb(),k.Wb(),k.Xb(55,"div",9),k.Xb(56,"input",28,29),k.fc("ngModelChange",(function(e){return t.company.telephone=e})),k.Wb(),k.Fc(58,T,3,2,"ng-container",23),k.Wb(),k.Wb(),k.Fc(59,L,8,6,"div",30),k.Xb(60,"div",10),k.Xb(61,"div",0),k.Xb(62,"label",31),k.Hc(63,"Zakonski Zastupnik Firme:"),k.Wb(),k.Wb(),k.Xb(64,"div",9),k.Xb(65,"input",32,33),k.fc("ngModelChange",(function(e){return t.company.legalRep=e})),k.Wb(),k.Fc(67,D,3,2,"ng-container",23),k.Wb(),k.Wb(),k.Wb(),k.Xb(68,"div",9),k.Xb(69,"div",10),k.Xb(70,"div",0),k.Xb(71,"label",34),k.Hc(72,"Adresa Firme:"),k.Wb(),k.Wb(),k.Xb(73,"div",9),k.Sb(74,"input",35),k.Wb(),k.Wb(),k.Xb(75,"div",3),k.Xb(76,"div",0),k.Xb(77,"label",36),k.Hc(78,"Rad firme:"),k.Wb(),k.Wb(),k.Xb(79,"div",9),k.Fc(80,B,1,1,"input",37),k.Wb(),k.Wb(),k.Xb(81,"div",10),k.Xb(82,"div",0),k.Xb(83,"label",38),k.Hc(84,"Menad\u017eer Firme:"),k.Wb(),k.Wb(),k.Xb(85,"div",39),k.Sb(86,"input",40),k.Wb(),k.Xb(87,"div",41),k.Xb(88,"button",42),k.fc("click",(function(){return t.gotoUser()})),k.Sb(89,"i",43),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(90,"nb-card-footer"),k.Xb(91,"div",3),k.Sb(92,"div",44),k.Xb(93,"div",45),k.Xb(94,"button",46),k.Hc(95,"SA\u010cUVAJ"),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb()}if(2&e){const e=k.xc(41),n=k.xc(49),i=k.xc(57),a=k.xc(66);k.Eb(10),k.Jc(" ",t.company.name,""),k.Eb(9),k.pc("ngModel",t.company.name),k.Eb(7),k.pc("ngModel",t.company.pib),k.Eb(7),k.pc("ngModel",t.company.mat),k.Eb(7),k.pc("ngModel",t.company.email)("pattern",t.getConfigValue("forms.validation.email.pattern"))("required",t.getConfigValue("forms.validation.email.required"))("status",e.dirty?e.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),k.Eb(2),k.pc("ngIf",e.invalid&&e.touched),k.Eb(6),k.pc("ngModel",t.company.emailReception)("pattern",t.getConfigValue("forms.validation.email.pattern"))("required",t.getConfigValue("forms.validation.email.required"))("status",n.dirty?n.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),k.Eb(2),k.pc("ngIf",n.invalid&&n.touched),k.Eb(6),k.pc("ngModel",t.company.telephone)("maxlength",t.getConfigValue("forms.validation.telefon.maxLength"))("minlength",t.getConfigValue("forms.validation.telefon.minLength"))("required",t.getConfigValue("forms.validation.telefon.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),k.Eb(2),k.pc("ngIf",i.invalid&&i.touched),k.Eb(1),k.pc("ngIf",""===t.company.fax),k.Eb(6),k.pc("ngModel",t.company.legalRep)("maxlength",t.getConfigValue("forms.validation.imeZakonskogZastupinka.maxLength"))("minlength",t.getConfigValue("forms.validation.imeZakonskogZastupinka.minLength"))("required",t.getConfigValue("forms.validation.imeZakonskogZastupinka.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),k.Eb(2),k.pc("ngIf",a.invalid&&a.touched),k.Eb(7),k.pc("placeholder",t.company.address.location.townshipName+", "+t.company.address.location.placeName+", "+t.company.address.street),k.Eb(6),k.pc("ngForOf",t.company.operations),k.Eb(6),k.pc("placeholder",t.company.manager)}},directives:[o.x,a.w,a.l,a.m,o.A,W.f,o.w,o.Q,a.b,a.k,a.n,a.q,a.s,i.m,a.f,a.g,i.l,o.t,o.y],styles:[""]}),e})();var q=n("kBrA");const K=["viewTrash"];function _(e,t){1&e&&(k.Xb(0,"p",49),k.Hc(1," Naziv dozvole je obavezan! "),k.Wb())}function A(e,t){if(1&e&&(k.Vb(0),k.Fc(1,_,2,0,"p",48),k.Ub()),2&e){k.jc();const e=k.xc(22);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required)}}function $(e,t){if(1&e){const e=k.Yb();k.Xb(0,"div",10),k.Xb(1,"div",11),k.Xb(2,"label",50),k.Hc(3,"Skladi\u0161te:"),k.Wb(),k.Wb(),k.Xb(4,"div",37),k.Xb(5,"input",51),k.fc("ngModelChange",(function(t){return k.zc(e),k.jc().permit.storage.name=t})),k.Wb(),k.Wb(),k.Xb(6,"div",39),k.Xb(7,"button",40),k.fc("click",(function(){return k.zc(e),k.jc().gotoStorage()})),k.Sb(8,"i",41),k.Wb(),k.Wb(),k.Wb()}if(2&e){const e=k.jc();k.Eb(5),k.pc("ngModel",e.permit.storage.name)}}function G(e,t){if(1&e){const e=k.Yb();k.Xb(0,"view-permits-trash-popup",52),k.fc("callUpdatePermitsTrash",(function(t){return k.zc(e),k.jc().updatePermitsTrashMethod(t)})),k.Wb()}if(2&e){const e=k.jc();k.pc("selectedPermit",e.permit)}}let Y=(()=>{class e{constructor(e,t,n={},i,a,o,r){this.route=e,this.permitService=t,this.options=n,this.toastrService=i,this.router=a,this.adminService=o,this.windowService=r,this.permit={code:"",dateCreation:void 0,dateExpiration:void 0,name:"",trashList:[],type:""},this.company={address:{location:void 0,street:""},email:"",emailReception:"",legalRep:"",manager:"",mat:"",name:"",occupation:void 0,operations:[],pib:"",telephone:""}}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");this.adminService.getPermit(e).subscribe(e=>{this.permit=e,this.permit.dateCreation=new Date(e.dateCreation),this.permit.dateExpiration=new Date(e.dateExpiration),this.adminService.getCompany(this.permit._id,"permits").subscribe(e=>{this.company=e})})}getConfigValue(e){return Object(I.n)(this.options,e,null)}updatePermit(e){e.valid?(this.permitService.updatePermit(this.permit,this.permit._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success")):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}openPermitsTrashWindow(){this.windowRef=this.windowService.open(this.viewTrash,{title:"Lista otpada"})}updatePermitsTrashMethod(e){this.permit.trashList=e,this.permitService.updatePermit(this.permit,this.permit._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.windowRef.close()}gotoCompany(){this.router.navigate(["admin/companies",this.company.pib])}gotoStorage(){this.router.navigate(["admin/storages",this.permit.storage._id])}dateValid(e){return e.dateCreation<=e.dateExpiration}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(W.a),k.Rb(l.a),k.Rb(I.a),k.Rb(o.Kb),k.Rb(W.c),k.Rb(s.a),k.Rb(o.Qb))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-permit"]],viewQuery:function(e,t){var n;1&e&&k.Oc(K,!0,k.N),2&e&&k.wc(n=k.gc())&&(t.viewTrash=n.first)},decls:90,vars:30,consts:[[1,"row"],[1,"col-1"],["routerLink","..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-9"],[1,"text-center"],[1,"text-center","text-muted"],[3,"ngSubmit"],["formPermit","ngForm"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-permitName",1,"label"],["fullWidth","","id","input-permitName","name","permitName","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["permitName","ngModel"],[4,"ngIf"],["for","input-permitCode",1,"label"],["fullWidth","","id","input-permitCode","name","permitCode","nbInput","","type","text",3,"ngModel","ngModelChange"],["for","input-address",1,"label"],["disabled","","fullWidth","","id","input-address","name","address","nbInput","","type","text",3,"placeholder"],["for","input-dateCreation",1,"label"],["for","input-dateExpiration",1,"label"],[1,"col-5","mr-0","pr-0"],["fullWidth","","id","input-dateCreation","name","dateCreation","nbInput","",3,"ngModel","nbDatepicker","required","status","ngModelChange"],["dateCreation","ngModel"],[3,"date","dateChange"],["dateCreationPicker",""],["disabled","","nbButton","",1,"mx-0","px-0","col-1"],[1,"col-5","ml-0","pl-0"],["fullWidth","","id","input-dateExpiration","name","dateExpiration","nbInput","",3,"ngModel","nbDatepicker","required","status","ngModelChange"],["dateExpiration","ngModel"],["dateExpirationPicker",""],["for","input-permitType",1,"label"],["fullWidth","","name","permitType","id","input-permitType",3,"selected","ngModel","ngModelChange"],[3,"value"],["class","row mb-2",4,"ngIf"],["for","input-permitCompany",1,"label"],[1,"col-5","pr-0"],["disabled","","fullWidth","","id","input-permitCompany","name","permitCompany","nbInput","","type","text",3,"ngModel","ngModelChange"],[1,"col-1","pl-0"],["status","primary","nbButton","","fullWidth","",3,"click"],[1,"fa","fa-link"],[1,"label"],["nbButton","","fullWidth","","status","success","type","button",3,"click"],[1,"row","d-flex","justify-content-end"],[1,"col-3"],["fullWidth","","nbButton","","status","primary","type","submit"],["viewTrash",""],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-permitStorage",1,"label"],["disabled","","fullWidth","","id","input-permitStorage","name","permitStorage","nbInput","","type","text",3,"ngModel","ngModelChange"],[3,"selectedPermit","callUpdatePermitsTrash"]],template:function(e,t){if(1&e){const e=k.Yb();k.Xb(0,"nb-card"),k.Xb(1,"nb-card-header"),k.Xb(2,"div",0),k.Xb(3,"div",1),k.Xb(4,"a",2),k.Sb(5,"i",3),k.Wb(),k.Wb(),k.Xb(6,"div",4),k.Xb(7,"h5",5),k.Hc(8),k.Wb(),k.Xb(9,"p",6),k.Hc(10),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(11,"nb-card-body"),k.Xb(12,"form",7,8),k.fc("ngSubmit",(function(){k.zc(e);const n=k.xc(13);return t.updatePermit(n)})),k.Xb(14,"div",0),k.Xb(15,"div",9),k.Xb(16,"div",10),k.Xb(17,"div",11),k.Xb(18,"label",12),k.Hc(19,"Naziv dozvole:"),k.Wb(),k.Wb(),k.Xb(20,"div",9),k.Xb(21,"input",13,14),k.fc("ngModelChange",(function(e){return t.permit.name=e})),k.Wb(),k.Fc(23,A,2,1,"ng-container",15),k.Wb(),k.Wb(),k.Xb(24,"div",10),k.Xb(25,"div",11),k.Xb(26,"label",16),k.Hc(27,"\u0160ifra dozvole:"),k.Wb(),k.Wb(),k.Xb(28,"div",9),k.Xb(29,"input",17),k.fc("ngModelChange",(function(e){return t.permit.code=e})),k.Wb(),k.Wb(),k.Wb(),k.Xb(30,"div",10),k.Xb(31,"div",11),k.Xb(32,"label",18),k.Hc(33,"Adresa Dozvole:"),k.Wb(),k.Wb(),k.Xb(34,"div",9),k.Sb(35,"input",19),k.Wb(),k.Wb(),k.Xb(36,"div",10),k.Xb(37,"div",9),k.Xb(38,"label",20),k.Hc(39,"Datum trajanja dozvole:"),k.Wb(),k.Wb(),k.Xb(40,"div",9),k.Xb(41,"label",21),k.Hc(42,"Datum isteka dozvole:"),k.Wb(),k.Wb(),k.Xb(43,"div",22),k.Xb(44,"input",23,24),k.fc("ngModelChange",(function(e){return t.permit.dateCreation=e})),k.Wb(),k.Xb(46,"nb-datepicker",25,26),k.fc("dateChange",(function(e){return t.permit.dateCreation=e})),k.Wb(),k.Wb(),k.Xb(48,"button",27),k.Hc(49,"-"),k.Wb(),k.Xb(50,"div",28),k.Xb(51,"input",29,30),k.fc("ngModelChange",(function(e){return t.permit.dateExpiration=e})),k.Wb(),k.Xb(53,"nb-datepicker",25,31),k.fc("dateChange",(function(e){return t.permit.dateExpiration=e})),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(55,"div",9),k.Xb(56,"div",10),k.Xb(57,"div",11),k.Xb(58,"label",32),k.Hc(59,"Vrsta dozvole:"),k.Wb(),k.Wb(),k.Xb(60,"div",9),k.Xb(61,"nb-select",33),k.fc("ngModelChange",(function(e){return t.permit.type=e})),k.Xb(62,"nb-option",34),k.Hc(63,"Tretman"),k.Wb(),k.Xb(64,"nb-option",34),k.Hc(65,"Skladi\u0161tenje"),k.Wb(),k.Xb(66,"nb-option",34),k.Hc(67,"Odlaganje"),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Fc(68,$,9,1,"div",35),k.Xb(69,"div",10),k.Xb(70,"div",11),k.Xb(71,"label",36),k.Hc(72,"Firma:"),k.Wb(),k.Wb(),k.Xb(73,"div",37),k.Xb(74,"input",38),k.fc("ngModelChange",(function(e){return t.company.name=e})),k.Wb(),k.Wb(),k.Xb(75,"div",39),k.Xb(76,"button",40),k.fc("click",(function(){return t.gotoCompany()})),k.Sb(77,"i",41),k.Wb(),k.Wb(),k.Wb(),k.Xb(78,"div",10),k.Xb(79,"div",11),k.Sb(80,"label",42),k.Wb(),k.Xb(81,"div",9),k.Xb(82,"button",43),k.fc("click",(function(){return t.openPermitsTrashWindow()})),k.Hc(83,"Pogledaj listu otpada "),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(84,"div",44),k.Xb(85,"div",45),k.Xb(86,"button",46),k.Hc(87,"SA\u010cUVAJ"),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Fc(88,G,1,1,"ng-template",null,47,k.Gc)}if(2&e){const e=k.xc(22),n=k.xc(45),i=k.xc(47),a=k.xc(52),o=k.xc(54);k.Eb(8),k.Ic(t.permit.name),k.Eb(2),k.Ic(t.permit.__t),k.Eb(11),k.pc("ngModel",t.permit.name)("maxlength",t.getConfigValue("forms.validation.permitName.maxLength"))("minlength",t.getConfigValue("forms.validation.permitName.minLength"))("required",t.getConfigValue("forms.validation.permitName.required"))("status",e.dirty?e.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),k.Eb(2),k.pc("ngIf",e.invalid&&e.touched),k.Eb(6),k.pc("ngModel",t.permit.code),k.Eb(6),k.pc("placeholder",(null==t.permit.address||null==t.permit.address.location?null:t.permit.address.location.townshipName)+", "+(null==t.permit.address||null==t.permit.address.location?null:t.permit.address.location.placeName)+", "+(null==t.permit||null==t.permit.address?null:t.permit.address.street)),k.Eb(9),k.pc("ngModel",t.permit.dateCreation)("nbDatepicker",i)("required",t.getConfigValue("forms.validation.date.required"))("status",t.dateValid(t.permit)?"success":"danger"),k.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),k.Eb(2),k.pc("date",t.permit.dateCreation),k.Eb(5),k.pc("ngModel",t.permit.dateExpiration)("nbDatepicker",o)("required",t.getConfigValue("forms.validation.date.required"))("status",t.dateValid(t.permit)?"success":"danger"),k.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),k.Eb(2),k.pc("date",t.permit.dateExpiration),k.Eb(8),k.pc("selected",t.permit.type)("ngModel",t.permit.type),k.Eb(1),k.pc("value","treatment"),k.Eb(2),k.pc("value","cache"),k.Eb(2),k.pc("value","dump"),k.Eb(2),k.pc("ngIf",void 0!==t.permit.storage),k.Eb(6),k.pc("ngModel",t.company.name)}},directives:[o.x,o.A,W.f,o.w,a.w,a.l,a.m,o.Q,a.b,a.k,a.n,a.f,a.g,a.s,i.m,o.J,o.I,o.t,o.qb,o.fb,q.a],styles:[""]}),e})();var J=n("SxV6");const Z={pager:{perPage:10},add:{confirmCreate:!0,addButtonContent:'<i  class="fa fa-plus"></i>',createButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},edit:{confirmSave:!0,editButtonContent:'<i class="fa fa-edit"></i>',saveButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},delete:{confirmDelete:!0,deleteButtonContent:'<i class="fa fa-trash"></i>',createButtonContent:'<i class="fa fa-check"></i>'},actions:{columnTitle:"Operacije",position:"right",width:"20%",custom:[{name:"info",title:'<div class="px-5"><i class="fa fa-info-circle"></i></div>'}]},columns:{name:{title:"Naziv"},code:{title:"\u0160ifra"},dateCreation:{valuePrepareFunction:(e,t)=>t.dateCreation.substring(0,10),title:"Datum nastanka"},dateExpiration:{sortDirection:"asc",valuePrepareFunction:(e,t)=>t.dateExpiration.substring(0,10),title:"Datum Isteka"}}};function Q(e,t){if(1&e&&(k.Xb(0,"nb-option",3),k.Hc(1),k.Wb()),2&e){const e=t.$implicit;k.pc("value",e),k.Eb(1),k.Ic(e.name)}}let ee=(()=>{class e{constructor(e,t,n,i){this.permitService=e,this.toastrService=t,this.router=n,this.adminService=i,this.selectedPermits=new r.a,this.permitSettings=Z,this.companyNames=[]}ngOnInit(){this.adminService.getPermits().pipe(Object(J.a)()).subscribe(e=>{this.permits=e,this.selectedPermits.load(e)}),this.adminService.getCompanyNames("permits").subscribe(e=>{this.companyNames=e})}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}selectPermits(e){if("-"===e)this.selectedPermits.load(this.permits);else{let t=this.permits;t=t.filter(t=>e.permits.includes(t._id)),this.selectedPermits.load(t)}}updatePermit({newData:e,confirm:t}){try{this.permitService.updatePermit(e,e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deletePermit({data:e,confirm:t}){try{if(!window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.name+"?"))return;this.permitService.deletePermit(e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}permitInfo({data:e}){this.router.navigate(["admin/permits",e._id])}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(l.a),k.Rb(o.Kb),k.Rb(W.c),k.Rb(s.a))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-permits"]],decls:13,vars:4,consts:[[1,"row"],[1,"label","text-left","col-12"],["fullWidth","","selected","-",1,"col-12",3,"selectedChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-12",3,"settings","source","editConfirm","deleteConfirm","custom"]],template:function(e,t){1&e&&(k.Xb(0,"nb-card"),k.Xb(1,"nb-card-header"),k.Hc(2,"Dozvole"),k.Wb(),k.Xb(3,"nb-card-body"),k.Xb(4,"div",0),k.Xb(5,"label",1),k.Hc(6,"Odaberite firmu: "),k.Wb(),k.Xb(7,"nb-select",2),k.fc("selectedChange",(function(e){return t.selectPermits(e)})),k.Xb(8,"nb-option",3),k.Hc(9,"-"),k.Wb(),k.Fc(10,Q,2,2,"nb-option",4),k.Wb(),k.Wb(),k.Xb(11,"div",5),k.Xb(12,"ng2-smart-table",6),k.fc("editConfirm",(function(e){return t.updatePermit(e)}))("deleteConfirm",(function(e){return t.deletePermit(e)}))("custom",(function(e){return t.permitInfo(e)})),k.Wb(),k.Wb(),k.Wb(),k.Wb()),2&e&&(k.Eb(8),k.pc("value","-"),k.Eb(2),k.pc("ngForOf",t.companyNames),k.Eb(2),k.pc("settings",t.permitSettings)("source",t.selectedPermits))},directives:[o.x,o.A,o.w,o.qb,o.fb,i.l,r.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),e})();function te(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Ime je obavezno! "),k.Wb())}function ne(e,t){if(1&e&&(k.Xb(0,"p",27),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Ime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.ime.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.ime.maxLength")," ")}}function ie(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Ime mora biti validno! "),k.Wb())}function ae(e,t){if(1&e&&(k.Vb(0),k.Fc(1,te,2,0,"p",26),k.Fc(2,ne,2,2,"p",26),k.Fc(3,ie,2,0,"p",26),k.Ub()),2&e){k.jc();const e=k.xc(8);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength)),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function oe(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Prezime je obavezno! "),k.Wb())}function re(e,t){if(1&e&&(k.Xb(0,"p",27),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Prezime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.prezime.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.prezime.maxLength")," ")}}function se(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Prezime mora biti validno! "),k.Wb())}function ce(e,t){if(1&e&&(k.Vb(0),k.Fc(1,oe,2,0,"p",26),k.Fc(2,re,2,2,"p",26),k.Fc(3,se,2,0,"p",26),k.Ub()),2&e){k.jc();const e=k.xc(16),t=k.xc(8);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==t.errors?null:t.errors.maxlength)),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function be(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Email je obavezan! "),k.Wb())}function le(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Email mora biti validan! "),k.Wb())}function de(e,t){if(1&e&&(k.Vb(0),k.Fc(1,be,2,0,"p",26),k.Fc(2,le,2,0,"p",26),k.Ub()),2&e){k.jc();const e=k.xc(24);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function ue(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Korisni\u010dko ime je obavezno! "),k.Wb())}function pe(e,t){if(1&e&&(k.Xb(0,"p",27),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Korisni\u010dko ime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.korisnickoIme.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.korisnickoIme.maxLength")," ")}}function me(e,t){if(1&e&&(k.Vb(0),k.Fc(1,ue,2,0,"p",26),k.Fc(2,pe,2,2,"p",26),k.Ub()),2&e){k.jc();const e=k.xc(32);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function ge(e,t){1&e&&(k.Xb(0,"p",27),k.Hc(1," Telefon je obavezan! "),k.Wb())}function fe(e,t){if(1&e&&(k.Xb(0,"p",27),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Telefon mora da bude du\u017ei od ",e.getConfigValue("forms.validation.telefon.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.telefon.maxLength")," ")}}function he(e,t){if(1&e&&(k.Vb(0),k.Fc(1,ge,2,0,"p",26),k.Fc(2,fe,2,2,"p",26),k.Ub()),2&e){k.jc();const e=k.xc(40);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}let ve=(()=>{class e{constructor(e,t={},n,i,a){this.korisnikService=e,this.options=t,this.toastrService=n,this.roleService=i,this.authService=a,this.korisnik={email:"",firstName:"",lastName:"",password:"",phone:"",role:"",username:""},this.inputsDisabled=!0}ngOnInit(){this.korisnikService.getUserProfile(this.roleService.getUsername()).pipe(Object(J.a)()).subscribe(e=>{this.korisnik=e})}getConfigValue(e){return Object(I.n)(this.options,e,null)}enableInputs(){this.inputsDisabled=!1}updateKorisnik(e){if(e.valid){this.korisnikService.updateUser(this.korisnik,this.korisnik._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0;let e=null;this.authService.getToken().subscribe(t=>{e=t}),this.authService.refreshToken("email",e).subscribe(e=>{})}else this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(d.a),k.Rb(I.a),k.Rb(o.Kb),k.Rb(m.a),k.Rb(I.g))},e.\u0275cmp=k.Lb({type:e,selectors:[["ngx-profile-korisnik"]],decls:50,vars:43,consts:[[3,"ngSubmit"],["formKorisnik","ngForm"],[1,"row","mb-2"],[1,"col-12"],["for","input-ime",1,"label"],[1,"col-3"],["fullWidth","","id","input-ime","name","ime","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["ime","ngModel"],[4,"ngIf"],["for","input-prezime",1,"label"],["fullWidth","","id","input-prezime","name","prezime","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["prezime","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["email","ngModel"],["for","input-korisnickoIme",1,"label"],["fullWidth","","id","input-korisnickoIme","name","korisnickoIme","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["korisnickoIme","ngModel"],["for","input-telefon",1,"label"],["fullWidth","","id","input-telefon","name","telefon","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["telefon","ngModel"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e){const e=k.Yb();k.Xb(0,"form",0,1),k.fc("ngSubmit",(function(){k.zc(e);const n=k.xc(1);return t.updateKorisnik(n)})),k.Xb(2,"div",2),k.Xb(3,"div",3),k.Xb(4,"label",4),k.Hc(5,"Ime:"),k.Wb(),k.Wb(),k.Xb(6,"div",5),k.Xb(7,"input",6,7),k.fc("ngModelChange",(function(e){return t.korisnik.firstName=e})),k.Wb(),k.Fc(9,ae,4,3,"ng-container",8),k.Wb(),k.Wb(),k.Xb(10,"div",2),k.Xb(11,"div",3),k.Xb(12,"label",9),k.Hc(13,"Prezime:"),k.Wb(),k.Wb(),k.Xb(14,"div",5),k.Xb(15,"input",10,11),k.fc("ngModelChange",(function(e){return t.korisnik.lastName=e})),k.Wb(),k.Fc(17,ce,4,3,"ng-container",8),k.Wb(),k.Wb(),k.Xb(18,"div",2),k.Xb(19,"div",3),k.Xb(20,"label",12),k.Hc(21,"Email:"),k.Wb(),k.Wb(),k.Xb(22,"div",5),k.Xb(23,"input",13,14),k.fc("ngModelChange",(function(e){return t.korisnik.email=e})),k.Wb(),k.Fc(25,de,3,2,"ng-container",8),k.Wb(),k.Wb(),k.Xb(26,"div",2),k.Xb(27,"div",3),k.Xb(28,"label",15),k.Hc(29,"Korisni\u010dko ime:"),k.Wb(),k.Wb(),k.Xb(30,"div",5),k.Xb(31,"input",16,17),k.fc("ngModelChange",(function(e){return t.korisnik.username=e})),k.Wb(),k.Fc(33,me,3,2,"ng-container",8),k.Wb(),k.Wb(),k.Xb(34,"div",2),k.Xb(35,"div",3),k.Xb(36,"label",18),k.Hc(37,"Telefon:"),k.Wb(),k.Wb(),k.Xb(38,"div",5),k.Xb(39,"input",19,20),k.fc("ngModelChange",(function(e){return t.korisnik.phone=e})),k.Wb(),k.Fc(41,he,3,2,"ng-container",8),k.Wb(),k.Wb(),k.Xb(42,"div",21),k.Sb(43,"div",22),k.Xb(44,"div",23),k.Xb(45,"button",24),k.fc("click",(function(){return t.enableInputs()})),k.Hc(46,"IZMENI"),k.Wb(),k.Wb(),k.Xb(47,"div",23),k.Xb(48,"button",25),k.Hc(49,"SA\u010cUVAJ"),k.Wb(),k.Wb(),k.Wb(),k.Wb()}if(2&e){const e=k.xc(8),n=k.xc(16),i=k.xc(24),a=k.xc(32),o=k.xc(40);k.Eb(7),k.pc("ngModel",t.korisnik.firstName)("maxlength",t.getConfigValue("forms.validation.ime.maxLength"))("minlength",t.getConfigValue("forms.validation.ime.minLength"))("pattern",t.getConfigValue("forms.validation.ime.pattern"))("required",t.getConfigValue("forms.validation.ime.required"))("status",e.dirty?e.invalid?"danger":"success":"basic")("disabled",t.inputsDisabled),k.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),k.Eb(2),k.pc("ngIf",e.invalid&&e.touched),k.Eb(6),k.pc("ngModel",t.korisnik.lastName)("maxlength",t.getConfigValue("forms.validation.prezime.maxLength"))("minlength",t.getConfigValue("forms.validation.prezime.minLength"))("pattern",t.getConfigValue("forms.validation.prezime.pattern"))("required",t.getConfigValue("forms.validation.prezime.required"))("status",n.dirty?n.invalid?"danger":"success":"basic")("disabled",t.inputsDisabled),k.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),k.Eb(2),k.pc("ngIf",n.invalid&&n.touched),k.Eb(6),k.pc("ngModel",t.korisnik.email)("pattern",t.getConfigValue("forms.validation.email.pattern"))("required",t.getConfigValue("forms.validation.email.required"))("status",i.dirty?i.invalid?"danger":"success":"basic")("disabled",t.inputsDisabled),k.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),k.Eb(2),k.pc("ngIf",i.invalid&&i.touched),k.Eb(6),k.pc("ngModel",t.korisnik.username)("maxlength",t.getConfigValue("forms.validation.korisnickoIme.maxLength"))("minlength",t.getConfigValue("forms.validation.korisnickoIme.minLength"))("required",t.getConfigValue("forms.validation.korisnickoIme.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",t.inputsDisabled),k.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),k.Eb(2),k.pc("ngIf",a.invalid&&a.touched),k.Eb(6),k.pc("ngModel",t.korisnik.phone)("maxlength",t.getConfigValue("forms.validation.telefon.maxLength"))("minlength",t.getConfigValue("forms.validation.telefon.minLength"))("required",t.getConfigValue("forms.validation.telefon.required"))("status",o.dirty?o.invalid?"danger":"success":"basic")("disabled",t.inputsDisabled),k.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),k.Eb(2),k.pc("ngIf",o.invalid&&o.touched),k.Eb(4),k.pc("disabled",!t.inputsDisabled),k.Eb(3),k.pc("disabled",t.inputsDisabled)}},directives:[a.w,a.l,a.m,o.Q,a.b,a.k,a.n,a.f,a.g,a.q,a.s,i.m,o.t],styles:[""]}),e})(),We=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Lb({type:e,selectors:[["ngx-profile"]],decls:3,vars:0,template:function(e,t){1&e&&(k.Xb(0,"nb-card"),k.Xb(1,"nb-card-body"),k.Sb(2,"ngx-profile-korisnik"),k.Wb(),k.Wb())},directives:[o.x,o.w,ve],styles:[""]}),e})();const Xe={hideSubHeader:!0,pager:{perPage:4},edit:{confirmSave:!0,editButtonContent:'<i class="fa fa-edit"></i>',saveButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},delete:{confirmDelete:!0,deleteButtonContent:'<i class="fa fa-trash"></i>'},actions:{position:"right",add:!1,edit:!0,delete:!0},columns:{indexNumber:{title:"Indeksni Broj",editable:!1},name:{title:"Naziv"},desc:{title:"Opis"},amount:{title:"Koli\u010dina (KG)"}}};var ke=n("navU");function ye(e,t){1&e&&(k.Xb(0,"p",35),k.Hc(1," Naziv skladi\u0161ta je obavezan! "),k.Wb())}function Ce(e,t){if(1&e&&(k.Vb(0),k.Fc(1,ye,2,0,"p",34),k.Ub()),2&e){k.jc();const e=k.xc(22);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required)}}function je(e,t){1&e&&(k.Xb(0,"p",35),k.Hc(1," Veli\u010dina skladi\u0161ta je obavezna! "),k.Wb())}function Me(e,t){if(1&e&&(k.Vb(0),k.Fc(1,je,2,0,"p",34),k.Ub()),2&e){k.jc();const e=k.xc(36);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required)}}function Ie(e,t){if(1&e&&(k.Xb(0,"div",11),k.Xb(1,"div",0),k.Xb(2,"label",36),k.Hc(3,"Geolokacija Skladi\u0161ta:"),k.Wb(),k.Wb(),k.Xb(4,"div",10),k.Sb(5,"input",37),k.Wb(),k.Wb()),2&e){const e=k.jc();k.Eb(5),k.pc("placeholder",e.storage.geolocationNorth+"N"+e.storage.geolocationEast+"E")}}function Se(e,t){if(1&e&&(k.Xb(0,"div",11),k.Xb(1,"div",0),k.Xb(2,"label",38),k.Hc(3,"Vrsta Deponije:"),k.Wb(),k.Wb(),k.Xb(4,"div",10),k.Sb(5,"input",39),k.Wb(),k.Wb()),2&e){const e=k.jc();k.Eb(5),k.pc("placeholder",e.storage.dumpType)}}const Ee=function(){return{standalone:!0}};let we=(()=>{class e{constructor(e,t,n={},i,a,o,r){this.route=e,this.storageService=t,this.options=n,this.toastrService=i,this.router=a,this.trashService=o,this.adminService=r,this.storage={address:{location:void 0,street:""},amount:0,maxAmount:0,name:"",dumpType:""},this.settings=Xe}ngOnInit(){this.updateStorageView()}updateStorageView(){const e=this.route.snapshot.paramMap.get("id");this.adminService.getStorage(e).subscribe(e=>{this.storage=e,this.adminService.getCompany(this.storage._id,"storages").subscribe(e=>{this.company=e})})}getConfigValue(e){return Object(I.n)(this.options,e,null)}updateStorage(e){e.valid?(this.storageService.updateStorage(this.storage,this.storage._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success")):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}updateTrash({newData:e,confirm:t},n){try{this.trashService.updateTrash(e,n._id,e._id).subscribe(e=>{this.updateStorageView()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(i){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:e,confirm:t},n){try{this.trashService.deleteTrash(n._id,e._id).subscribe(e=>{this.updateStorageView()}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.naziv,"success")}catch(i){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}gotoCompany(){this.router.navigate(["admin/companies",this.company.pib])}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(W.a),k.Rb(g.a),k.Rb(I.a),k.Rb(o.Kb),k.Rb(W.c),k.Rb(p.a),k.Rb(s.a))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-storage"]],decls:66,vars:27,consts:[[1,"col-12"],[3,"ngSubmit"],["formStorage","ngForm"],[1,"row"],[1,"col-1"],["routerLink","..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-9"],[1,"text-center"],[1,"text-center","text-muted"],[1,"col-6"],[1,"row","mb-2"],["for","input-storageName",1,"label"],["fullWidth","","id","input-storageName","name","storageName","nbInput","","type","text",3,"ngModel","ngModelOptions","maxlength","minlength","required","status","ngModelChange"],["storageName","ngModel"],[4,"ngIf"],["for","input-adresa",1,"label"],["disabled","","fullWidth","","id","input-adresa","name","adresa","nbInput","","type","text",3,"placeholder"],["for","input-storageSize",1,"label"],[1,"col-5","pr-0"],["fullWidth","","id","input-storageSize","name","storageSize","nbInput","","type","number",3,"ngModel","ngModelOptions","pattern","required","status","ngModelChange"],["storageSize","ngModel"],[1,"col-1","pl-0"],["nbButton","","fullWidth","","disabled",""],["class","row mb-2",4,"ngIf"],["for","input-companyName",1,"label"],["disabled","","fullWidth","","id","input-companyName","name","companyName","nbInput","","type","text",3,"placeholder"],["status","primary","nbButton","","fullWidth","",3,"click"],[1,"fa","fa-link"],[3,"storage"],[1,"col-8"],[1,"col-4"],["fullWidth","","nbButton","","status","primary","type","submit"],[1,"mt-2",3,"settings","source","editConfirm","deleteConfirm"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-geolocation",1,"label"],["disabled","","fullWidth","","id","input-geolocation","name","geolocation","nbInput","","type","text",3,"placeholder"],["for","input-dumpType",1,"label"],["disabled","","fullWidth","","id","input-dumpType","name","dumpType","nbInput","","type","text",3,"placeholder"]],template:function(e,t){if(1&e){const e=k.Yb();k.Xb(0,"nb-card",0),k.Xb(1,"form",1,2),k.fc("ngSubmit",(function(){k.zc(e);const n=k.xc(2);return t.updateStorage(n)})),k.Xb(3,"nb-card-header"),k.Xb(4,"div",3),k.Xb(5,"div",4),k.Xb(6,"a",5),k.Sb(7,"i",6),k.Wb(),k.Wb(),k.Xb(8,"div",7),k.Xb(9,"h5",8),k.Hc(10),k.Wb(),k.Xb(11,"p",9),k.Hc(12),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(13,"nb-card-body"),k.Xb(14,"div",3),k.Xb(15,"div",10),k.Xb(16,"div",11),k.Xb(17,"div",0),k.Xb(18,"label",12),k.Hc(19,"Naziv skladi\u0161ta:"),k.Wb(),k.Wb(),k.Xb(20,"div",10),k.Xb(21,"input",13,14),k.fc("ngModelChange",(function(e){return t.storage.name=e})),k.Wb(),k.Fc(23,Ce,2,1,"ng-container",15),k.Wb(),k.Wb(),k.Xb(24,"div",11),k.Xb(25,"div",0),k.Xb(26,"label",16),k.Hc(27,"Adresa Skladi\u0161ta:"),k.Wb(),k.Wb(),k.Xb(28,"div",10),k.Sb(29,"input",17),k.Wb(),k.Wb(),k.Xb(30,"div",11),k.Xb(31,"div",0),k.Xb(32,"label",18),k.Hc(33,"Veli\u010dina skladi\u0161ta:"),k.Wb(),k.Wb(),k.Xb(34,"div",19),k.Xb(35,"input",20,21),k.fc("ngModelChange",(function(e){return t.storage.maxAmount=e})),k.Wb(),k.Fc(37,Me,2,1,"ng-container",15),k.Wb(),k.Xb(38,"div",22),k.Xb(39,"button",23),k.Hc(40),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(41,"div",10),k.Fc(42,Ie,6,1,"div",24),k.Fc(43,Se,6,1,"div",24),k.Xb(44,"div",11),k.Xb(45,"div",0),k.Xb(46,"label",25),k.Hc(47,"Firma skladi\u0161ta:"),k.Wb(),k.Wb(),k.Xb(48,"div",19),k.Sb(49,"input",26),k.Wb(),k.Xb(50,"div",22),k.Xb(51,"button",27),k.fc("click",(function(){return t.gotoCompany()})),k.Sb(52,"i",28),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(53,"div",11),k.Xb(54,"div",0),k.Sb(55,"storage-meter",29),k.Wb(),k.Wb(),k.Wb(),k.Xb(56,"nb-card-footer"),k.Xb(57,"div",3),k.Sb(58,"div",30),k.Xb(59,"div",31),k.Xb(60,"button",32),k.Hc(61,"SA\u010cUVAJ"),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(62,"nb-card-header"),k.Hc(63,"Otpadi: "),k.Wb(),k.Xb(64,"nb-card-body"),k.Xb(65,"ng2-smart-table",33),k.fc("editConfirm",(function(e){return t.updateTrash(e,t.storage)}))("deleteConfirm",(function(e){return t.deleteTrash(e,t.storage)})),k.Wb(),k.Wb(),k.Wb(),k.Wb()}if(2&e){const e=k.xc(22),n=k.xc(36);k.Eb(10),k.Ic(t.storage.name),k.Eb(2),k.Ic(t.storage.__t),k.Eb(9),k.pc("ngModel",t.storage.name)("ngModelOptions",k.sc(25,Ee))("maxlength",t.getConfigValue("forms.validation.storageName.maxLength"))("minlength",t.getConfigValue("forms.validation.storageName.minLength"))("required",t.getConfigValue("forms.validation.storageName.required"))("status",e.dirty?e.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),k.Eb(2),k.pc("ngIf",e.invalid&&e.touched),k.Eb(6),k.pc("placeholder",(null==t.storage.address||null==t.storage.address.location?null:t.storage.address.location.townshipName)+", "+(null==t.storage.address||null==t.storage.address.location?null:t.storage.address.location.placeName)+", "+(null==t.storage||null==t.storage.address?null:t.storage.address.street)),k.Eb(6),k.pc("ngModel",t.storage.maxAmount)("ngModelOptions",k.sc(26,Ee))("pattern",t.getConfigValue("forms.validation.storageSize.pattern"))("required",t.getConfigValue("forms.validation.storageSize.required"))("status",n.dirty?n.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),k.Eb(2),k.pc("ngIf",n.invalid&&n.touched),k.Eb(3),k.Ic(t.storage.storageUnit),k.Eb(2),k.pc("ngIf",void 0!==t.storage.geolocationNorth),k.Eb(1),k.pc("ngIf",void 0!==t.storage.dumpType),k.Eb(6),k.pc("placeholder",null==t.company?null:t.company.name),k.Eb(6),k.pc("storage",t.storage),k.Eb(10),k.pc("settings",t.settings)("source",null==t.storage?null:t.storage.trashes)}},directives:[o.x,a.w,a.l,a.m,o.A,W.f,o.w,o.Q,a.b,a.k,a.n,a.f,a.g,a.s,i.m,a.p,a.q,o.t,ke.a,o.y,r.b],styles:[""]}),e})();const xe={pager:{perPage:10},add:{confirmCreate:!0,addButtonContent:'<i  class="fa fa-plus"></i>',createButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},edit:{confirmSave:!0,editButtonContent:'<i class="fa fa-edit"></i>',saveButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},delete:{confirmDelete:!0,deleteButtonContent:'<i class="fa fa-trash"></i>',createButtonContent:'<i class="fa fa-check"></i>'},actions:{columnTitle:"Operacije",position:"right",width:"20%",custom:[{name:"info",title:'<div class="px-5"><i class="fa fa-info-circle"></i></div>'}]},columns:{name:{title:"Naziv"},maxAmount:{title:"Veli\u010dina"},amount:{title:"Trenutno stanje"},capacity:{editable:!1,sort:!0,sortDirection:"desc",title:"Popunjenost (%)"}}};function ze(e,t){if(1&e&&(k.Xb(0,"nb-option",3),k.Hc(1),k.Wb()),2&e){const e=t.$implicit;k.pc("value",e),k.Eb(1),k.Ic(e.name)}}let He=(()=>{class e{constructor(e,t,n,i){this.storageService=e,this.toastrService=t,this.router=n,this.adminService=i,this.selectedStorages=new r.a,this.storageSettings=xe,this.companyNames=[]}ngOnInit(){this.adminService.getStorages().pipe(Object(J.a)()).subscribe(e=>{e.forEach(e=>e.capacity=(e.amount/e.maxAmount*100).toFixed(0)),this.storages=e,this.selectedStorages.load(e)}),this.adminService.getCompanyNames("storages").subscribe(e=>{this.companyNames=e})}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}selectStorages(e){if("-"===e)this.selectedStorages.load(this.storages);else{let t=this.storages;t=t.filter(t=>e.storages.includes(t._id)),this.selectedStorages.load(t)}}createStorage({newData:e,confirm:t}){try{this.storageService.createStorage(e).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste kreirali "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke do kreiranja "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}updateStorage({newData:e,confirm:t}){try{this.storageService.updateStorage(e,e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteStorage({data:e,confirm:t}){try{if(!window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.name+"?"))return;this.storageService.deleteStorage(e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.name,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.name+". Molimo vas poku\u0161ajte kasnije.","danger")}}storageInfo({data:e}){this.router.navigate(["admin/storages",e._id])}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(g.a),k.Rb(o.Kb),k.Rb(W.c),k.Rb(s.a))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-storages"]],decls:13,vars:4,consts:[[1,"row"],[1,"label","text-left","col-12"],["fullWidth","","selected","-",1,"col-12",3,"selectedChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-12",3,"settings","source","createConfirm","editConfirm","deleteConfirm","custom"]],template:function(e,t){1&e&&(k.Xb(0,"nb-card"),k.Xb(1,"nb-card-header"),k.Hc(2,"Skladi\u0161ta"),k.Wb(),k.Xb(3,"nb-card-body"),k.Xb(4,"div",0),k.Xb(5,"label",1),k.Hc(6,"Odaberite firmu: "),k.Wb(),k.Xb(7,"nb-select",2),k.fc("selectedChange",(function(e){return t.selectStorages(e)})),k.Xb(8,"nb-option",3),k.Hc(9,"-"),k.Wb(),k.Fc(10,ze,2,2,"nb-option",4),k.Wb(),k.Wb(),k.Xb(11,"div",5),k.Xb(12,"ng2-smart-table",6),k.fc("createConfirm",(function(e){return t.createStorage(e)}))("editConfirm",(function(e){return t.updateStorage(e)}))("deleteConfirm",(function(e){return t.deleteStorage(e)}))("custom",(function(e){return t.storageInfo(e)})),k.Wb(),k.Wb(),k.Wb(),k.Wb()),2&e&&(k.Eb(8),k.pc("value","-"),k.Eb(2),k.pc("ngForOf",t.companyNames),k.Eb(2),k.pc("settings",t.storageSettings)("source",t.selectedStorages))},directives:[o.x,o.A,o.w,o.qb,o.fb,i.l,r.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),e})();function Fe(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Ime je obavezno! "),k.Wb())}function Pe(e,t){if(1&e&&(k.Xb(0,"p",40),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Ime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.ime.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.ime.maxLength")," ")}}function Te(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Ime mora biti validno! "),k.Wb())}function Oe(e,t){if(1&e&&(k.Vb(0),k.Fc(1,Fe,2,0,"p",39),k.Fc(2,Pe,2,2,"p",39),k.Fc(3,Te,2,0,"p",39),k.Ub()),2&e){k.jc();const e=k.xc(19);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength)),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function Re(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Prezime je obavezno! "),k.Wb())}function Le(e,t){if(1&e&&(k.Xb(0,"p",40),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Prezime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.prezime.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.prezime.maxLength")," ")}}function Ue(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Prezime mora biti validno! "),k.Wb())}function Ve(e,t){if(1&e&&(k.Vb(0),k.Fc(1,Re,2,0,"p",39),k.Fc(2,Le,2,2,"p",39),k.Fc(3,Ue,2,0,"p",39),k.Ub()),2&e){k.jc();const e=k.xc(27),t=k.xc(19);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==t.errors?null:t.errors.maxlength)),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function De(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Email je obavezan! "),k.Wb())}function Be(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Email mora biti validan! "),k.Wb())}function Ne(e,t){if(1&e&&(k.Vb(0),k.Fc(1,De,2,0,"p",39),k.Fc(2,Be,2,0,"p",39),k.Ub()),2&e){k.jc();const e=k.xc(35);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.pattern)}}function qe(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Korisni\u010dko ime je obavezno! "),k.Wb())}function Ke(e,t){if(1&e&&(k.Xb(0,"p",40),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Korisni\u010dko ime mora da bude du\u017ee od ",e.getConfigValue("forms.validation.korisnickoIme.minLength")," a kra\u0107e od ",e.getConfigValue("forms.validation.korisnickoIme.maxLength")," ")}}function _e(e,t){if(1&e&&(k.Vb(0),k.Fc(1,qe,2,0,"p",39),k.Fc(2,Ke,2,2,"p",39),k.Ub()),2&e){k.jc();const e=k.xc(43);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}function Ae(e,t){1&e&&(k.Xb(0,"p",40),k.Hc(1," Telefon je obavezan! "),k.Wb())}function $e(e,t){if(1&e&&(k.Xb(0,"p",40),k.Hc(1),k.Wb()),2&e){const e=k.jc(2);k.Eb(1),k.Kc(" Telefon mora da bude du\u017ei od ",e.getConfigValue("forms.validation.telefon.minLength")," a kra\u0107i od ",e.getConfigValue("forms.validation.telefon.maxLength")," ")}}function Ge(e,t){if(1&e&&(k.Vb(0),k.Fc(1,Ae,2,0,"p",39),k.Fc(2,$e,2,2,"p",39),k.Ub()),2&e){k.jc();const e=k.xc(51);k.Eb(1),k.pc("ngIf",null==e.errors?null:e.errors.required),k.Eb(1),k.pc("ngIf",(null==e.errors?null:e.errors.minlength)||(null==e.errors?null:e.errors.maxlength))}}let Ye=(()=>{class e{constructor(e,t,n={},i,a,o){this.route=e,this.adminService=t,this.options=n,this.userService=i,this.toastrService=a,this.router=o,this.user={email:"",firstName:"",lastName:"",password:"",phone:"",role:"",username:"",company:{pib:"",mat:"",address:void 0,name:"",fax:"",email:"",emailReception:"",manager:"",legalRep:"",telephone:"",occupation:void 0,operations:[]}}}ngOnInit(){const e=this.route.snapshot.paramMap.get("username");this.adminService.getUser(e,"username").subscribe(e=>{this.user=e})}getConfigValue(e){return Object(I.n)(this.options,e,null)}updateUser(e){e.valid?(this.userService.updateUser(this.user,this.user._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success")):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}gotoCompany(){this.router.navigate(["admin/companies",this.user.company.pib])}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(W.a),k.Rb(s.a),k.Rb(I.a),k.Rb(d.a),k.Rb(o.Kb),k.Rb(W.c))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-user"]],decls:79,vars:43,consts:[[1,"col-12"],[3,"ngSubmit"],["formUser","ngForm"],[1,"row"],[1,"col-1"],["routerLink","..",1,""],[1,"fa","fa-2x","fa-arrow-left"],[1,"col-9"],[1,"text-center"],[1,"col-6"],[1,"row","mb-2"],["for","input-ime",1,"label"],["fullWidth","","id","input-ime","name","ime","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","ngModelChange"],["ime","ngModel"],[4,"ngIf"],["for","input-prezime",1,"label"],["fullWidth","","id","input-prezime","name","prezime","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","ngModelChange"],["prezime","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","ngModelChange"],["email","ngModel"],["for","input-korisnickoIme",1,"label"],["fullWidth","","id","input-korisnickoIme","name","korisnickoIme","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["korisnickoIme","ngModel"],["for","input-telefon",1,"label"],["fullWidth","","id","input-telefon","name","telefon","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["telefon","ngModel"],["for","input-role",1,"label"],["fullWidth","","id","input-role",3,"ngModel","selected","ngModelChange"],[3,"value"],["for","input-firma",1,"label"],[1,"col-5","mr-0","pr-0"],["nbInput","","fullWidth","","id","input-firma","type","text",3,"placeholder"],[1,"col-1","pl-0","ml-0"],["status","primary","nbButton","","type","button",3,"click"],[1,"fa","fa-link"],[1,"col-8"],[1,"col-4"],["fullWidth","","nbButton","","status","success","type","submit"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e){const e=k.Yb();k.Xb(0,"nb-card",0),k.Xb(1,"form",1,2),k.fc("ngSubmit",(function(){k.zc(e);const n=k.xc(2);return t.updateUser(n)})),k.Xb(3,"nb-card-header"),k.Xb(4,"div",3),k.Xb(5,"div",4),k.Xb(6,"a",5),k.Sb(7,"i",6),k.Wb(),k.Wb(),k.Xb(8,"div",7),k.Xb(9,"h5",8),k.Hc(10),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(11,"div",3),k.Xb(12,"nb-card-body",9),k.Xb(13,"div",10),k.Xb(14,"div",0),k.Xb(15,"label",11),k.Hc(16,"Ime:"),k.Wb(),k.Wb(),k.Xb(17,"div",9),k.Xb(18,"input",12,13),k.fc("ngModelChange",(function(e){return t.user.firstName=e})),k.Wb(),k.Fc(20,Oe,4,3,"ng-container",14),k.Wb(),k.Wb(),k.Xb(21,"div",10),k.Xb(22,"div",0),k.Xb(23,"label",15),k.Hc(24,"Prezime:"),k.Wb(),k.Wb(),k.Xb(25,"div",9),k.Xb(26,"input",16,17),k.fc("ngModelChange",(function(e){return t.user.lastName=e})),k.Wb(),k.Fc(28,Ve,4,3,"ng-container",14),k.Wb(),k.Wb(),k.Xb(29,"div",10),k.Xb(30,"div",0),k.Xb(31,"label",18),k.Hc(32,"Email:"),k.Wb(),k.Wb(),k.Xb(33,"div",9),k.Xb(34,"input",19,20),k.fc("ngModelChange",(function(e){return t.user.email=e})),k.Wb(),k.Fc(36,Ne,3,2,"ng-container",14),k.Wb(),k.Wb(),k.Xb(37,"div",10),k.Xb(38,"div",0),k.Xb(39,"label",21),k.Hc(40,"Korisni\u010dko ime:"),k.Wb(),k.Wb(),k.Xb(41,"div",9),k.Xb(42,"input",22,23),k.fc("ngModelChange",(function(e){return t.user.username=e})),k.Wb(),k.Fc(44,_e,3,2,"ng-container",14),k.Wb(),k.Wb(),k.Xb(45,"div",10),k.Xb(46,"div",0),k.Xb(47,"label",24),k.Hc(48,"Telefon:"),k.Wb(),k.Wb(),k.Xb(49,"div",9),k.Xb(50,"input",25,26),k.fc("ngModelChange",(function(e){return t.user.phone=e})),k.Wb(),k.Fc(52,Ge,3,2,"ng-container",14),k.Wb(),k.Wb(),k.Wb(),k.Xb(53,"nb-card-body",9),k.Xb(54,"div",10),k.Xb(55,"div",0),k.Xb(56,"label",27),k.Hc(57,"Uloga:"),k.Wb(),k.Wb(),k.Xb(58,"div",9),k.Xb(59,"nb-select",28),k.fc("ngModelChange",(function(e){return t.user.role=e})),k.Xb(60,"nb-option",29),k.Hc(61,"Menad\u017eer"),k.Wb(),k.Xb(62,"nb-option",29),k.Hc(63,"Admin"),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(64,"div",10),k.Xb(65,"div",0),k.Xb(66,"label",30),k.Hc(67,"Firma:"),k.Wb(),k.Wb(),k.Xb(68,"div",31),k.Sb(69,"input",32),k.Wb(),k.Xb(70,"div",33),k.Xb(71,"button",34),k.fc("click",(function(){return t.gotoCompany()})),k.Sb(72,"i",35),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Xb(73,"nb-card-footer"),k.Xb(74,"div",3),k.Sb(75,"div",36),k.Xb(76,"div",37),k.Xb(77,"button",38),k.Hc(78,"SA\u010cUVAJ"),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb(),k.Wb()}if(2&e){const e=k.xc(19),n=k.xc(27),i=k.xc(35),a=k.xc(43),o=k.xc(51);k.Eb(10),k.Kc(" ",t.user.firstName," ",t.user.lastName,""),k.Eb(8),k.pc("ngModel",t.user.firstName)("maxlength",t.getConfigValue("forms.validation.ime.maxLength"))("minlength",t.getConfigValue("forms.validation.ime.minLength"))("pattern",t.getConfigValue("forms.validation.ime.pattern"))("required",t.getConfigValue("forms.validation.ime.required"))("status",e.dirty?e.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),k.Eb(2),k.pc("ngIf",e.invalid&&e.touched),k.Eb(6),k.pc("ngModel",t.user.lastName)("maxlength",t.getConfigValue("forms.validation.prezime.maxLength"))("minlength",t.getConfigValue("forms.validation.prezime.minLength"))("pattern",t.getConfigValue("forms.validation.prezime.pattern"))("required",t.getConfigValue("forms.validation.prezime.required"))("status",n.dirty?n.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),k.Eb(2),k.pc("ngIf",n.invalid&&n.touched),k.Eb(6),k.pc("ngModel",t.user.email)("pattern",t.getConfigValue("forms.validation.email.pattern"))("required",t.getConfigValue("forms.validation.email.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),k.Eb(2),k.pc("ngIf",i.invalid&&i.touched),k.Eb(6),k.pc("ngModel",t.user.username)("maxlength",t.getConfigValue("forms.validation.korisnickoIme.maxLength"))("minlength",t.getConfigValue("forms.validation.korisnickoIme.minLength"))("required",t.getConfigValue("forms.validation.korisnickoIme.required"))("status",a.dirty?a.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),k.Eb(2),k.pc("ngIf",a.invalid&&a.touched),k.Eb(6),k.pc("ngModel",t.user.phone)("maxlength",t.getConfigValue("forms.validation.telefon.maxLength"))("minlength",t.getConfigValue("forms.validation.telefon.minLength"))("required",t.getConfigValue("forms.validation.telefon.required"))("status",o.dirty?o.invalid?"danger":"success":"basic"),k.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),k.Eb(2),k.pc("ngIf",o.invalid&&o.touched),k.Eb(7),k.pc("ngModel",t.user.role)("selected",t.user.role),k.Eb(1),k.pc("value","manager"),k.Eb(2),k.pc("value","admin"),k.Eb(7),k.pc("placeholder",t.user.company.name)}},directives:[o.x,a.w,a.l,a.m,o.A,W.f,o.w,o.Q,a.b,a.k,a.n,a.f,a.g,a.q,a.s,i.m,o.qb,o.fb,o.t,o.y],styles:[""]}),e})();const Je={pager:{perPage:10},add:{confirmCreate:!0,addButtonContent:'<i  class="fa fa-plus"></i>',createButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},edit:{confirmSave:!0,editButtonContent:'<i class="fa fa-edit"></i>',saveButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},delete:{confirmDelete:!0,deleteButtonContent:'<i class="fa fa-trash"></i>',createButtonContent:'<i class="fa fa-check"></i>'},actions:{columnTitle:"Operacije",position:"right",custom:[{name:"info",title:'<div class="px-5"><i class="fa fa-info-circle"></i></div>'}]},columns:{firstName:{title:"Ime"},lastName:{title:"Prezime"},username:{title:"Korisni\u010dko ime"},email:{title:"Email"},phone:{title:"Telefon"},company:{editable:!1,valuePrepareFunction:(e,t)=>t.company.name,title:"Firma"}}},Ze=[{path:"",component:C,children:[{path:"admin-dashboard",loadChildren:()=>n.e(9).then(n.bind(null,"LaSW")).then(e=>e.AdminDashboardModule)},{path:"profile",component:We},{path:"users",component:(()=>{class e{constructor(e,t,n,i){this.adminService=e,this.toastrService=t,this.router=n,this.userService=i,this.usersSource=new r.a,this.userSettings=Je}ngOnInit(){this.adminService.getUsers().subscribe(e=>{this.usersSource.load(e)})}showToast(e,t,n){this.toastrService.show(t,e,{status:n})}createUser({newData:e,confirm:t}){try{this.userService.createUser(e).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste kreirali "+e.username,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke do kreiranja "+e.username+". Molimo vas poku\u0161ajte kasnije.","danger")}}updateUser({newData:e,confirm:t}){try{this.userService.updateUser(e,e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+e.username,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+e.username+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteUser({data:e,confirm:t}){try{if(!window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+e.username+"?"))return;this.userService.deleteUser(e._id).subscribe(e=>{}),t.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+e.username,"success")}catch(n){t.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+e.username+". Molimo vas poku\u0161ajte kasnije.","danger")}}userInfo({data:e}){this.router.navigate(["admin/users",e.username])}}return e.\u0275fac=function(t){return new(t||e)(k.Rb(s.a),k.Rb(o.Kb),k.Rb(W.c),k.Rb(d.a))},e.\u0275cmp=k.Lb({type:e,selectors:[["admin-users"]],decls:5,vars:2,consts:[[3,"settings","source","createConfirm","editConfirm","deleteConfirm","custom"]],template:function(e,t){1&e&&(k.Xb(0,"nb-card"),k.Xb(1,"nb-card-header"),k.Hc(2,"Korisnici"),k.Wb(),k.Xb(3,"nb-card-body"),k.Xb(4,"ng2-smart-table",0),k.fc("createConfirm",(function(e){return t.createUser(e)}))("editConfirm",(function(e){return t.updateUser(e)}))("deleteConfirm",(function(e){return t.deleteUser(e)}))("custom",(function(e){return t.userInfo(e)})),k.Wb(),k.Wb(),k.Wb()),2&e&&(k.Eb(4),k.pc("settings",t.userSettings)("source",t.usersSource))},directives:[o.x,o.A,o.w,r.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),e})()},{path:"users/:username",component:Ye},{path:"companies",component:M},{path:"companies/:pib",component:N},{path:"storages",component:He},{path:"storages/:id",component:we},{path:"permits",component:ee},{path:"permits/:id",component:Y},{path:"reports",loadChildren:()=>Promise.resolve().then(n.bind(null,"BKSH")).then(e=>e.ReportsModule)}]}];let Qe=(()=>{class e{}return e.\u0275mod=k.Pb({type:e}),e.\u0275inj=k.Ob({factory:function(t){return new(t||e)},imports:[[W.g.forChild(Ze)],W.g]}),e})();var et=n("BKSH");let tt=(()=>{class e{}return e.\u0275mod=k.Pb({type:e}),e.\u0275inj=k.Ob({factory:function(t){return new(t||e)},providers:[s.a,d.a,l.a,b.a,p.a,g.a,m.a,u.a,c.a],imports:[[i.c,Qe,f.a,o.cb,o.B,r.c,o.R,a.e,o.u,o.P,o.kb,o.k,o.Gb,o.Ab,o.sb,o.K,o.nb,et.ReportsModule,v.StorageModule,h.a]]}),e})()},"X+yL":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("tk/3"),a=n("LRne"),o=n("AytR"),r=n("fXoL");let s=(()=>{class e extends class{}{constructor(e){super(),this.http=e,this.apiUrl=o.a.apiUrl,this.dko={datumDozvolePrimalac:new Date,datumDozvoleTransport:new Date,datumIspitivanja:new Date,dodatneInformacije:"",fizickoStanje:"",vrstaProizvodjaca:"",masaOtpada:0,nacinPakovanja:"",nacinPostupanja:"",otpad:void 0,qLista:"",registarskiBroj:"",rutaKretanja:new Array(5),sifraDozvolePrimalac:"",sifraDozvoleTransport:"",sifraIspitivanja:"",vidPrevoza:"",vrstaOtpada:"",vrstaPrimalaca:"",vrstaVozila:""}}sendSyncDKO(e){this.dko=e}sendDKO(e){e.subscribe(e=>{this.dko=e})}getDKO(){return Object(a.a)(this.dko)}generateDKO(e,t,n){let a=new i.e;return a=a.set("Accept","application/pdf"),this.http.post(this.apiUrl+"/api/dko",{dko:e,skladiste:t,trash:n},{headers:a,responseType:"blob"})}}return e.\u0275fac=function(t){return new(t||e)(r.bc(i.b))},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac}),e})()},fJ6F:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("AytR"),a=n("fXoL"),o=n("tk/3");let r=(()=>{class e{constructor(e){this.http=e,this.apiUrl=i.a.apiUrl}getUser(e,t="_id"){return this.http.get(this.apiUrl+"/api/admin/users/one/"+`${t}/${e}`)}getUsers(e="all",t="_id"){return this.http.get(this.apiUrl+"/api/admin/users/many/"+`${t}/${e}`)}getCompany(e,t="_id"){return this.http.get(this.apiUrl+"/api/admin/companies/one/"+`${t}/${e}`)}getCompanies(e="all",t="_id"){return this.http.get(this.apiUrl+"/api/admin/companies/many/"+`${t}/${e}`)}getStorage(e,t="_id"){return this.http.get(this.apiUrl+"/api/admin/storages/one/"+`${t}/${e}`)}getStorages(e="all",t="_id"){return this.http.get(this.apiUrl+"/api/admin/storages/many/"+`${t}/${e}`)}getPermit(e,t="_id"){return this.http.get(this.apiUrl+"/api/admin/permits/one/"+`${t}/${e}`)}getPermits(e="all",t="_id"){return this.http.get(this.apiUrl+"/api/admin/permits/many/"+`${t}/${e}`)}getCompanyNames(e="all"){return this.http.get(this.apiUrl+"/api/admin/companies/storages/"+e)}}return e.\u0275fac=function(t){return new(t||e)(a.bc(o.b))},e.\u0275prov=a.Nb({token:e,factory:e.\u0275fac}),e})()},jPBY:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("tk/3"),a=n("AytR"),o=n("fXoL");let r=(()=>{class e extends class{}{constructor(e){super(),this.http=e,this.apiUrl=a.a.apiUrl}getMonthlyReport(){return this.http.get(this.apiUrl+"/api/mesecniizvestaj")}getOneMonthlyReport(e){return this.http.get(this.apiUrl+"/api/mesecniizvestaj/"+e)}createMesecniIzvestaj(e,t,n){let a=new i.e;return a=a.set("Accept","application/pdf"),this.http.post(this.apiUrl+"/api/mesecniizvestaj",{trash:e,reportType:n,storageID:t._id},{headers:a,responseType:"blob"})}createGodisnjiIzvestaj(e,t,n){let a=new i.e;return a=a.set("Accept","application/pdf"),this.http.post(this.apiUrl+"/api/godisnjiizvestaj",{trash:e,reportType:t,company:n},{headers:a,responseType:"blob"})}getAllMesecniIzvestajFirme(e){return this.mesecniIzvestaj$||(this.mesecniIzvestaj$=this.http.get(this.apiUrl+"/api/mesecniizvestaj/firma/"+e)),this.mesecniIzvestaj$}}return e.\u0275fac=function(t){return new(t||e)(o.bc(i.b))},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac}),e})()}}]);