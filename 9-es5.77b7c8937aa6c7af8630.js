!function(){function e(t,i){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,i)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,s=n(e);if(t){var o=n(this).constructor;a=Reflect.construct(s,arguments,o)}else a=s.apply(this,arguments);return i(this,a)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5IJp":function(e,t,i){"use strict";i.r(t),i.d(t,"TrashModule",function(){return ee});var n=i("bS1W"),s=i("BMkl"),c=i("vTDv"),r=i("tyNb"),l=i("RS3s"),d=i("ibGe"),u=i("ud2R"),b={pager:{perPage:5},hideSubHeader:!0,actions:{columnTitle:"Odaberi",position:"right",add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus-square"></i>'}]},columns:{name:{title:"Naziv"},desc:{title:"Opis"},unitOfMeasure:{title:"Jedinica mere"}}},p=i("fXoL"),h=i("aceb"),v=i("ofXK"),f=i("3Pt+");function g(e,t){if(1&e&&(p.Wb(0,"nb-option",24),p.Fc(1),p.Vb()),2&e){var i=t.$implicit;p.nc("value",i),p.Eb(1),p.Gc(i)}}function m(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div",22),p.Wb(1,"div",12),p.Wb(2,"nb-toggle",25),p.dc("checkedChange",function(){p.xc(i);var e=t.$implicit;return p.hc().addOperation(e)}),p.Fc(3),p.Vb(),p.Vb(),p.Vb()}if(2&e){var n=t.$implicit,a=p.hc();p.Eb(2),p.nc("disabled",a.checkOperation(n)),p.Eb(1),p.Gc(n)}}var W,V=((W=function(){function e(t,i,n,s,o,c){var r=this;a(this,e),this.activatedRoute=t,this.catalogService=i,this.specialWasteService=n,this.router=s,this.toastrService=o,this.roleService=c,this.settings=b,this.catalog=new l.a,this.otherOperations=[],this.specialWaste={amount:0,desc:"",mass:0,name:"",unitOfMeasure:"kg",operationTypes:[]},this.activatedRoute.params.subscribe(function(e){r.operation=e.operation,r.specialWasteType=e.trashType,r.ngOnInit()})}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.catalogService.getSpecialWaste().subscribe(function(t){e.catalog.load(t),e.specialWasteClasses=new Set,t.forEach(function(t){return e.specialWasteClasses.add(t.className)})}),this.roleService.getOperations(void 0,void 0,!0).subscribe(function(t){e.operations=t.specialWasteOperations}),this.otherOperations=[],this.specialWaste.operationTypes=[],this.operations.production&&this.otherOperations.push("Proizvodnja"),this.operations.import&&this.otherOperations.push("Uvoz"),this.operations.export&&this.otherOperations.push("Izvoz"),this.specialWaste.operationTypes=this.otherOperations}},{key:"checkOperation",value:function(e){return"Proizvodnja"===e&&"production"===this.operation||"Uvoz"===e&&"import"===this.operation||"Izvoz"===e&&"export"===this.operation}},{key:"onSearch",value:function(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"name",search:e},{field:"className",search:e}],!1)}},{key:"chooseSpecialWaste",value:function(e){var t=e.data;this.specialWaste.name=t.name,this.specialWaste.desc=t.desc,this.specialWaste.unitOfMeasure=t.unitOfMeasure}},{key:"addOperation",value:function(e){this.specialWaste.operationTypes.includes(e)?this.specialWaste.operationTypes=this.specialWaste.operationTypes.filter(function(t){return t!==e}):this.specialWaste.operationTypes.push(e)}},{key:"addSpecialWaste",value:function(){delete this.specialWaste._id,this.specialWasteService.createSpecialWaste(this.specialWaste,this.roleService.getCompanyID()).subscribe(),this.showToast("Uspeh","Uspe\u0161no ste dodali posebeni tok otpada!","success"),this.router.navigate(["pages","dashboard"])}},{key:"showToast",value:function(e,t,i){this.toastrService.show(t,e,{status:i})}}]),e}()).\u0275fac=function(e){return new(e||W)(p.Qb(r.a),p.Qb(d.a),p.Qb(s.a),p.Qb(r.c),p.Qb(h.Kb),p.Qb(u.a))},W.\u0275cmp=p.Kb({type:W,selectors:[["add-special-waste"]],decls:49,vars:10,consts:[[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"col-8","pl-0"],["placeholder","Odaberite razred","fullWidth","",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],["for","input-specialWasteName",1,"col-12","label"],[1,"col-4"],["placeholder","Naziv","fullWidth","","name","specialWasteName","id","input-specialWasteName","nbInput","",3,"ngModel","ngModelChange"],["for","input-specialWasteDesc",1,"col-12","label"],["placeholder","Opis","fullWidth","","name","specialWasteDesc","id","input-specialWasteDesc","nbInput","",3,"ngModel","ngModelChange"],["for","input-specialWasteunitOfMeasure",1,"col-12","label"],["disabled","","placeholder","Jedinica mere","fullWidth","","name","specialWasteunitOfMeasure","id","input-specialWasteunitOfMeasure","nbInput","",3,"ngModel","ngModelChange"],["for","input-specialWasteMass",1,"col-12","label"],["decimals","1","fullWidth","","min","0","name","specialWasteMass","nbInput","","placeholder","0.0","id","input-specialWasteMass","step","0.1","type","number",3,"ngModel","ngModelChange"],[1,"col-12","label"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["nbButton","","fullWidth","","status","primary","type","submit",3,"disabled"],[3,"value"],["checked","",3,"disabled","checkedChange"]],template:function(e,t){if(1&e){var i=p.Xb();p.Wb(0,"nb-card",0),p.Wb(1,"nb-card-header"),p.Wb(2,"h5"),p.Fc(3,"Dodajte novi inventar posebnih tokova otpada"),p.Vb(),p.Vb(),p.Wb(4,"nb-card-body"),p.Wb(5,"div",1),p.Wb(6,"div",2),p.Wb(7,"label",3),p.Fc(8,"Pretra\u017ei po razredu:"),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"nb-select",4),p.dc("selectedChange",function(e){return t.onSearch(e)}),p.Dc(11,g,2,2,"nb-option",5),p.Vb(),p.Vb(),p.Wb(12,"div",2),p.Wb(13,"label",3),p.Fc(14,"Pretra\u017ei po nazivu:"),p.Vb(),p.Vb(),p.Wb(15,"div",2),p.Wb(16,"input",6,7),p.dc("input",function(){p.xc(i);var e=p.vc(17);return e.value.length>=1&&t.onSearch(e.value)}),p.Vb(),p.Wb(18,"ng2-smart-table",8),p.dc("custom",function(e){return t.chooseSpecialWaste(e)}),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"form",9,10),p.dc("ngSubmit",function(){return t.addSpecialWaste()}),p.Wb(21,"div",1),p.Wb(22,"label",11),p.Fc(23,"Naziv: "),p.Vb(),p.Wb(24,"div",12),p.Wb(25,"input",13),p.dc("ngModelChange",function(e){return t.specialWaste.name=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(26,"div",1),p.Wb(27,"label",14),p.Fc(28,"Opis: "),p.Vb(),p.Wb(29,"div",12),p.Wb(30,"input",15),p.dc("ngModelChange",function(e){return t.specialWaste.desc=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(31,"div",1),p.Wb(32,"label",16),p.Fc(33,"Jedinica mere: "),p.Vb(),p.Wb(34,"div",12),p.Wb(35,"input",17),p.dc("ngModelChange",function(e){return t.specialWaste.unitOfMeasure=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(36,"div",1),p.Wb(37,"label",18),p.Fc(38),p.Vb(),p.Wb(39,"div",12),p.Wb(40,"input",19),p.dc("ngModelChange",function(e){return t.specialWaste.mass=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(41,"div",1),p.Wb(42,"label",20),p.Fc(43,"Izaberite dodatne operacije proizvoda: "),p.Vb(),p.Vb(),p.Dc(44,m,4,2,"div",21),p.Wb(45,"div",22),p.Wb(46,"div",12),p.Wb(47,"button",23),p.Fc(48,"Dodaj "),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&e){var n=p.vc(20);p.Eb(11),p.nc("ngForOf",t.specialWasteClasses),p.Eb(7),p.nc("source",t.catalog)("settings",t.settings),p.Eb(7),p.nc("ngModel",t.specialWaste.name),p.Eb(5),p.nc("ngModel",t.specialWaste.desc),p.Eb(5),p.nc("ngModel",t.specialWaste.unitOfMeasure),p.Eb(3),p.Hc("Masa jedinice mere (",t.specialWaste.unitOfMeasure,"): "),p.Eb(2),p.nc("ngModel",t.specialWaste.mass),p.Eb(4),p.nc("ngForOf",t.otherOperations),p.Eb(3),p.nc("disabled",!n.valid)}},directives:[h.x,h.A,h.w,h.qb,v.m,h.Q,l.b,f.w,f.l,f.m,f.b,f.k,f.n,f.p,h.t,h.fb,h.Lb],styles:[""]}),W),y=i("Lx1j"),w=i("7Oz7"),S={pager:{perPage:5},hideSubHeader:!0,actions:{columnTitle:"Odaberi",position:"right",add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus-square"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj"},name:{title:"Naziv"}}},M=i("UI7+"),k=i("McNs");function x(e,t){if(1&e&&(p.Wb(0,"nb-option",2),p.Fc(1),p.Vb()),2&e){var i=t.$implicit;p.nc("value",i),p.Eb(1),p.Gc(i)}}var T,F=function(){return{standalone:!0}},C=((T=function(){function e(){a(this,e),this.storageAmountUnit="KG",this.storageUnits=["KG","T"]}return o(e,[{key:"ngOnInit",value:function(){}},{key:"updateStorageUnits",value:function(e){this.storageUnits="Te\u010dno"===e?["L"]:"Gasovito"===e?["M3"]:["KG","T"],this.storageAmountUnit=this.storageUnits[0]}}]),e}()).\u0275fac=function(e){return new(e||T)},T.\u0275cmp=p.Kb({type:T,selectors:[["input-trash-amount"]],inputs:{storageAmountUnit:"storageAmountUnit"},decls:2,vars:5,consts:[["fullWidth","","fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(p.Wb(0,"nb-select",0),p.dc("ngModelChange",function(e){return t.storageAmountUnit=e}),p.Dc(1,x,2,2,"nb-option",1),p.Vb()),2&e&&(p.nc("ngModelOptions",p.qc(4,F))("selected","KG")("ngModel",t.storageAmountUnit),p.Eb(1),p.nc("ngForOf",t.storageUnits))},directives:[h.qb,f.k,f.n,v.m,h.fb],styles:[""]}),T);function P(e,t){if(1&e){var i=p.Xb();p.Wb(0,"nb-option",37),p.dc("selectionChange",function(){p.xc(i);var e=t.$implicit;return p.hc(2).updateCatalog(e)}),p.Fc(1),p.Vb()}if(2&e){var n=t.$implicit;p.nc("value",null==n?null:n.storage),p.Eb(1),p.Gc(null==n?null:n.storage.name)}}function O(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div",34),p.Wb(1,"nb-select",35),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().selectedStorage=e}),p.Dc(2,P,2,2,"nb-option",36),p.Vb(),p.Vb()}if(2&e){var n=p.hc();p.Eb(1),p.nc("ngModel",n.selectedStorage),p.Eb(1),p.nc("ngForOf",n.permits)}}function E(e,t){if(1&e&&(p.Wb(0,"nb-option",38),p.Fc(1),p.Vb()),2&e){var i=t.$implicit;p.nc("value",i),p.Eb(1),p.Gc(i)}}function z(e,t){if(1&e&&(p.Wb(0,"nb-option",38),p.Fc(1),p.Vb()),2&e){var i=t.$implicit;p.nc("value",i),p.Eb(1),p.Gc(i.name)}}function D(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div",1),p.Wb(1,"label",39),p.Fc(2,"Odaberite skladi\u0161te za otpad: "),p.Vb(),p.Wb(3,"div",11),p.Wb(4,"nb-select",40),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().selectedStorage=e}),p.Dc(5,z,2,2,"nb-option",27),p.Vb(),p.Vb(),p.Vb()}if(2&e){var n=p.hc();p.Eb(4),p.nc("ngModel",n.selectedStorage),p.Eb(1),p.nc("ngForOf",n.storages)}}function I(e,t){if(1&e&&(p.Wb(0,"nb-option",38),p.Fc(1),p.Vb()),2&e){var i=t.$implicit,n=t.index;p.nc("value","D"+(n+1)),p.Eb(1),p.Gc("D"+(n+1)+" | "+i)}}function L(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div",1),p.Wb(1,"label",39),p.Fc(2,"Odaberite D oznaku (mo\u017eete promentiti u svakom trenutku): "),p.Vb(),p.Wb(3,"div",41),p.Wb(4,"nb-select",42),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().trash.dSign=e}),p.Dc(5,I,2,2,"nb-option",27),p.Vb(),p.Vb(),p.Vb()}if(2&e){var n=p.hc();p.Eb(4),p.nc("ngModel",n.trash.dSign),p.Eb(1),p.nc("ngForOf",n.dSigns)}}function _(e,t){if(1&e&&(p.Wb(0,"nb-option",38),p.Fc(1),p.Vb()),2&e){var i=t.$implicit,n=t.index;p.nc("value","R"+(n+1)),p.Eb(1),p.Gc("R"+(n+1)+" | "+i)}}function A(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div",1),p.Wb(1,"label",39),p.Fc(2,"Odaberite R oznaku (mo\u017eete promentiti u svakom trenutku): "),p.Vb(),p.Wb(3,"div",41),p.Wb(4,"nb-select",43),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().trash.rSign=e}),p.Dc(5,_,2,2,"nb-option",27),p.Vb(),p.Vb(),p.Vb()}if(2&e){var n=p.hc();p.Eb(4),p.nc("ngModel",n.trash.rSign),p.Eb(1),p.nc("ngForOf",n.rSigns)}}function j(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div",1),p.Wb(1,"label",44),p.Fc(2,"\u0160ifra ispitivanja otpada: "),p.Vb(),p.Wb(3,"div",11),p.Wb(4,"input",45),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().trash.examinationCode=e}),p.Vb(),p.Vb(),p.Vb()}if(2&e){var n=p.hc();p.Eb(4),p.nc("ngModel",n.trash.examinationCode)}}function N(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div",1),p.Wb(1,"label",46),p.Fc(2,"Datum ispitivanja otpada: "),p.Vb(),p.Wb(3,"div",11),p.Wb(4,"input",47),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().trash.examinationDate=e}),p.Vb(),p.Rb(5,"nb-datepicker",48,49),p.Vb(),p.Vb()}if(2&e){var n=p.vc(6),a=p.hc();p.Eb(4),p.nc("ngModel",a.trash.examinationDate)("nbDatepicker",n),p.Eb(1),p.nc("max",a.today())}}function R(e,t){if(1&e&&(p.Wb(0,"nb-option",38),p.Fc(1),p.Vb()),2&e){var i=t.$implicit,n=t.index;p.nc("value","H"+(n+1)),p.Eb(1),p.Gc("H"+(n+1)+" | "+i)}}function Q(e,t){if(1&e&&(p.Wb(0,"nb-option",38),p.Fc(1),p.Vb()),2&e){var i=t.$implicit,n=t.index;p.nc("value","Y"+(n+1)),p.Eb(1),p.Gc("Y"+(n+1)+" | "+i)}}function U(e,t){if(1&e&&(p.Wb(0,"nb-option",38),p.Fc(1),p.Vb()),2&e){var i=t.$implicit,n=t.index;p.nc("value","C"+(n+1)),p.Eb(1),p.Gc("C"+(n+1)+" | "+i)}}function G(e,t){if(1&e&&(p.Wb(0,"div",11),p.Fc(1),p.Wb(2,"div",1),p.Wb(3,"label",39),p.Fc(4,"CAS: "),p.Vb(),p.Wb(5,"div",56),p.Wb(6,"input",57),p.dc("ngModelChange",function(e){return t.$implicit.CAS=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(7,"div",1),p.Wb(8,"label",39),p.Fc(9,"Hemijski naziv: "),p.Vb(),p.Wb(10,"div",56),p.Wb(11,"input",58),p.dc("ngModelChange",function(e){return t.$implicit.chemicalName=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(12,"div",1),p.Wb(13,"label",39),p.Fc(14,"Kilograma opasne materije po kilogram otpada: "),p.Vb(),p.Wb(15,"div",59),p.Wb(16,"input",60),p.dc("ngModelChange",function(e){return t.$implicit.kgOfMatter=e}),p.Vb(),p.Vb(),p.Wb(17,"div",61),p.Wb(18,"button",62),p.Fc(19,"kg"),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&e){var i=t.$implicit,n=t.index;p.Eb(1),p.Hc(" Komponenta #",n+1," "),p.Eb(5),p.nc("ngModel",i.CAS),p.Eb(5),p.nc("ngModel",i.chemicalName),p.Eb(5),p.nc("ngModel",i.kgOfMatter)}}function K(e,t){if(1&e&&(p.Wb(0,"div",1),p.Dc(1,G,20,4,"div",55),p.Vb()),2&e){var i=p.hc(2);p.Eb(1),p.nc("ngForOf",i.trash.unsafeComponent)}}function q(e,t){if(1&e){var i=p.Xb();p.Wb(0,"div"),p.Wb(1,"div",1),p.Wb(2,"label",50),p.Fc(3,"H-Lista: "),p.Vb(),p.Wb(4,"label",50),p.Fc(5,"Y-Lista: "),p.Vb(),p.Wb(6,"label",50),p.Fc(7,"C-Lista: "),p.Vb(),p.Wb(8,"div",51),p.Wb(9,"nb-select",43),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().trash.hList=e}),p.Dc(10,R,2,2,"nb-option",27),p.Vb(),p.Vb(),p.Wb(11,"div",51),p.Wb(12,"nb-select",43),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().trash.yList=e}),p.Dc(13,Q,2,2,"nb-option",27),p.Vb(),p.Vb(),p.Wb(14,"div",34),p.Wb(15,"nb-select",43),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().trash.cList=e}),p.Dc(16,U,2,2,"nb-option",27),p.Vb(),p.Vb(),p.Vb(),p.Wb(17,"div",1),p.Wb(18,"label",39),p.Fc(19,"Broj opasnih komponenta u otpadu: "),p.Vb(),p.Wb(20,"div",11),p.Wb(21,"input",52),p.dc("ngModelChange",function(e){return p.xc(i),p.hc().componentsNo=e}),p.Vb(),p.Vb(),p.Wb(22,"div",53),p.Wb(23,"button",54),p.dc("click",function(){return p.xc(i),p.hc().updateCAS()}),p.Fc(24,"Odaberi"),p.Vb(),p.Vb(),p.Vb(),p.Dc(25,K,2,1,"div",28),p.Vb()}if(2&e){var n=p.hc();p.Eb(9),p.nc("ngModel",n.trash.hList),p.Eb(1),p.nc("ngForOf",n.hList),p.Eb(2),p.nc("ngModel",n.trash.yList),p.Eb(1),p.nc("ngForOf",n.yList),p.Eb(2),p.nc("ngModel",n.trash.cList),p.Eb(1),p.nc("ngForOf",n.cList),p.Eb(5),p.nc("ngModel",n.componentsNo),p.Eb(4),p.nc("ngIf",n.componentsNo>0)}}var X,$,B,H,J=((X=function(){function e(t,i,n,s,o,c,r,d,u){var b=this;a(this,e),this.catalogService=t,this.trashService=i,this.router=n,this.authService=s,this.activatedRoute=o,this.storageService=c,this.toastrService=r,this.roleService=d,this.permitService=u,this.settings=S,this.catalog=new l.a,this.storageAmmountUnit="KG",this.storages=[],this.selectedStorage={address:{location:void 0,street:""},amount:0,maxAmount:0,name:""},this.permits=[],this.states=M.e,this.dSigns=M.b,this.rSigns=M.d,this.hList=M.c,this.yList=M.f,this.cList=M.a,this.trash={amount:0,desc:"",indexNumber:"",name:"",dSign:"",rSign:""},this.componentsNo=0,this.activatedRoute.params.subscribe(function(e){b.operation=e.operation,b.trashType=e.trashType,b.ngOnInit()})}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.storageService.getCompaniesStorage(this.roleService.getCompanyID(),this.operation).subscribe(function(t){e.storages=t}),"production"!==this.operation?this.updatePermits():"safe"===this.trashType?this.catalogService.getSafeTrash().subscribe(function(t){e.catalog.load(t)}):this.catalogService.getUnsafeTrash().subscribe(function(t){e.catalog.load(t)}),"unsafe"===this.trashType&&(this.trash=this.trash)}},{key:"updatePermits",value:function(){var e=this;this.permitService.getCompaniesPermits(this.roleService.getCompanyID(),this.operation).subscribe(function(t){e.permits=t;for(var i=0;i<e.permits.length;i++)e.permits[i].trashList=e.permits[i].trashList.filter("safe"===e.trashType?function(e){return!e.indexNumber.includes("*")}:function(e){return e.indexNumber.includes("*")});e.updateCatalog(e.permits[0])})}},{key:"updateCatalog",value:function(e){void 0===e&&this.updatePermits(),this.selectedStorage=this.storages.find(function(t){return t._id===e.storage._id});var t=Array.from(this.selectedStorage.trashes,function(e){return e.indexNumber}),i=e.trashList;i=i.filter(function(e){return!t.includes(e.indexNumber)}),this.catalog.load(i)}},{key:"onSearch",value:function(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"indexNumber",search:e,filter:function(e,t){return e.replace(/\s+/g,"").includes(t.replace(/\s+/g,""))}},{field:"name",search:e}],!1)}},{key:"updateCAS",value:function(){this.trash.unsafeComponent=new Array(this.componentsNo);for(var e=0;e<this.componentsNo;e++)this.trash.unsafeComponent[e]={kgOfMatter:0,CAS:"",chemicalName:""}}},{key:"chooseTrash",value:function(e){var t=e.data;this.trash.indexNumber=t.indexNumber,this.trash.name=t.name,this.trash.desc=t.desc}},{key:"today",value:function(){return new Date}},{key:"addTrash",value:function(){"T"===this.storageAmmountUnit&&(this.trash.amount*=1e3),delete this.trash._id,this.trashService.createTrash(this.trash,this.selectedStorage._id).subscribe(),this.showToast("Uspeh","Uspe\u0161no ste dodali otpad na skladi\u0161te "+this.selectedStorage.name,"success"),this.router.navigate(["pages","storage"])}},{key:"showToast",value:function(e,t,i){this.toastrService.show(t,e,{status:i})}}]),e}()).\u0275fac=function(e){return new(e||X)(p.Qb(d.a),p.Qb(y.a),p.Qb(r.c),p.Qb(k.g),p.Qb(r.a),p.Qb(w.a),p.Qb(h.Kb),p.Qb(u.a),p.Qb(n.a))},X.\u0275cmp=p.Kb({type:X,selectors:[["pages-add-trash"]],decls:65,vars:19,consts:[[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"col-8","pl-0"],["class","col-4",4,"ngIf"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],[1,"row"],[1,"col-6"],["for","input-indeksniBroj",1,"col-12","label"],["nbInput","","fullWidth","","disabled","","id","input-indeksniBroj",3,"placeholder"],["for","input-trashName",1,"col-12","label"],["placeholder","Naziv","fullWidth","","name","trashName","id","input-trashName","nbInput","",3,"ngModel","ngModelChange"],["for","input-trashDesc",1,"col-12","label"],["placeholder","Opis","fullWidth","","name","trashDesc","id","input-trashDesc","nbInput","",3,"ngModel","ngModelChange"],["for","input-trashAmount",1,"col-12","label"],[1,"row","ml-1"],[1,"col-5","pr-0"],["decimals","1","fullWidth","","min","0","name","trashAmount","nbInput","","placeholder","0.0","id","input-trashAmount","step","0.1","type","number",3,"ngModel","ngModelChange"],[1,"col-1","pl-0"],[3,"storageAmountUnit"],["trashAmount",""],["for","input-trashState",1,"col-12","label"],["placeholder","Fizi\u010dko stanje","fullWidth","","name","trashState","id","input-trashState","selected","Cvrsto",3,"ngModel","selectedChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","row mb-2",4,"ngIf"],["status","basic",3,"checked","disabled"],["examinationCodeToggle",""],[4,"ngIf"],[1,"row","my-2"],["nbButton","","fullWidth","","status","primary","type","submit",3,"disabled"],[1,"col-4"],["fullWidth","",3,"ngModel","ngModelChange"],[3,"value","selectionChange",4,"ngFor","ngForOf"],[3,"value","selectionChange"],[3,"value"],[1,"col-12","label"],["fullWidth","","required","","name","storage",3,"ngModel","ngModelChange"],[1,"col-10"],["fullWidth","","required","","name","dSign",3,"ngModel","ngModelChange"],["fullWidth","","required","","name","rSign",3,"ngModel","ngModelChange"],["for","input-examinationCode",1,"col-12","label"],["fullWidth","","id","input-examinationCode","name","examinationCode","nbInput","","placeholder","\u0160ifra","required","","type","text",3,"ngModel","ngModelChange"],["for","input-examinationDate",1,"col-12","label"],["fullWidth","","placeholder","Datum","id","input-examinationDate","name","examinationDate","nbInput","","required","",3,"ngModel","nbDatepicker","ngModelChange"],[3,"max"],["examinationDatePicker",""],[1,"col-4","label"],[1,"col-4","mb-2"],["fullWidth","","min","1","name","brojKomponeti","nbInput","","type","number",3,"ngModel","ngModelChange"],[1,"col-3"],["fullWidth","","nbButton","","type","button",3,"click"],["class","col-6",4,"ngFor","ngForOf"],[1,"col-8"],["nbInput","","type","text","required","","name","CAS",3,"ngModel","ngModelChange"],["nbInput","","type","text","required","","name","Hemijski naziv",3,"ngModel","ngModelChange"],[1,"col-6","pr-0"],["fullWidth","","decimals","1","step","0.1","min","0","type","number","nbInput","","placeholder","0.0","name","Kg opasne materije",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["nbButton","","disabled",""]],template:function(e,t){if(1&e){var i=p.Xb();p.Wb(0,"nb-card",0),p.Wb(1,"nb-card-header"),p.Wb(2,"h5"),p.Fc(3,"Dodajte novi inventar otpada"),p.Vb(),p.Vb(),p.Wb(4,"nb-card-body"),p.Wb(5,"div",1),p.Wb(6,"div",2),p.Wb(7,"label",3),p.Fc(8,"Pretra\u017ei po indeksnom broju ili nazivu:"),p.Vb(),p.Vb(),p.Dc(9,O,3,2,"div",4),p.Wb(10,"div",2),p.Wb(11,"input",5,6),p.dc("input",function(){p.xc(i);var e=p.vc(12);return e.value.length>=1&&t.onSearch(e.value)}),p.Vb(),p.Wb(13,"ng2-smart-table",7),p.dc("custom",function(e){return t.chooseTrash(e)}),p.Vb(),p.Vb(),p.Vb(),p.Wb(14,"form",8,9),p.dc("ngSubmit",function(){return t.addTrash()}),p.Wb(16,"div",10),p.Wb(17,"div",11),p.Wb(18,"div",1),p.Wb(19,"label",12),p.Fc(20,"Indeksni broj:"),p.Vb(),p.Wb(21,"div",11),p.Rb(22,"input",13),p.Vb(),p.Vb(),p.Wb(23,"div",1),p.Wb(24,"label",14),p.Fc(25,"Naziv: "),p.Vb(),p.Wb(26,"div",11),p.Wb(27,"input",15),p.dc("ngModelChange",function(e){return t.trash.name=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(28,"div",1),p.Wb(29,"label",16),p.Fc(30,"Opis: "),p.Vb(),p.Wb(31,"div",11),p.Wb(32,"input",17),p.dc("ngModelChange",function(e){return t.trash.desc=e}),p.Vb(),p.Vb(),p.Vb(),p.Wb(33,"div",1),p.Wb(34,"label",18),p.Fc(35,"Trenutna koli\u010dina na skladistu: "),p.Vb(),p.Wb(36,"div",19),p.Wb(37,"div",20),p.Wb(38,"input",21),p.dc("ngModelChange",function(e){return t.trash.amount=e}),p.Vb(),p.Vb(),p.Wb(39,"div",22),p.Rb(40,"input-trash-amount",23,24),p.Vb(),p.Vb(),p.Fc(42," Napisi neko [i] da je KG = L = M3 "),p.Vb(),p.Wb(43,"div",1),p.Wb(44,"label",25),p.Fc(45,"Fizicko stanje otpada: "),p.Vb(),p.Wb(46,"div",11),p.Wb(47,"nb-select",26),p.dc("selectedChange",function(){return p.xc(i),p.vc(41).updateStorageUnits(t.trash.state)})("ngModelChange",function(e){return t.trash.state=e}),p.Dc(48,E,2,2,"nb-option",27),p.Vb(),p.Vb(),p.Vb(),p.Dc(49,D,6,2,"div",28),p.Dc(50,L,6,2,"div",28),p.Dc(51,A,6,2,"div",28),p.Vb(),p.Wb(52,"div",11),p.Wb(53,"div",1),p.Wb(54,"div",2),p.Wb(55,"nb-toggle",29,30),p.Fc(57,"Imam dokumenat o ispitivanju otpada "),p.Vb(),p.Vb(),p.Vb(),p.Dc(58,j,5,1,"div",28),p.Dc(59,N,7,3,"div",28),p.Dc(60,q,26,8,"div",31),p.Vb(),p.Wb(61,"div",32),p.Wb(62,"div",2),p.Wb(63,"button",33),p.Fc(64,"Dodaj "),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&e){var n=p.vc(15),a=p.vc(56);p.Eb(9),p.nc("ngIf","production"!==t.operation),p.Eb(4),p.nc("source",t.catalog)("settings",t.settings),p.Eb(9),p.nc("placeholder",t.trash.indexNumber||"00 00 00"),p.Eb(5),p.nc("ngModel",t.trash.name),p.Eb(5),p.nc("ngModel",t.trash.desc),p.Eb(6),p.nc("ngModel",t.trash.amount),p.Eb(2),p.nc("storageAmountUnit",t.storageAmmountUnit),p.Eb(7),p.nc("ngModel",t.trash.state),p.Eb(1),p.nc("ngForOf",t.states),p.Eb(1),p.nc("ngIf","production"===t.operation),p.Eb(1),p.nc("ngIf","dump"===t.operation),p.Eb(1),p.nc("ngIf","treatment"===t.operation),p.Eb(4),p.nc("checked","unsafe"===t.trashType)("disabled","unsafe"===t.trashType),p.Eb(3),p.nc("ngIf",a.checked||"unsafe"===t.trashType),p.Eb(1),p.nc("ngIf",a.checked||"unsafe"===t.trashType),p.Eb(1),p.nc("ngIf","unsafe"===t.trashType),p.Eb(3),p.nc("disabled",!n.valid)}},directives:[h.x,h.A,h.w,v.n,h.Q,l.b,f.w,f.l,f.m,f.b,f.k,f.n,f.p,C,h.qb,v.m,h.Lb,h.t,h.fb,f.s,h.J,h.I],styles:["[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]:hover{color:#1e90ff}"]}),X),Y=[{path:"",component:($=function e(){a(this,e)},$.\u0275fac=function(e){return new(e||$)},$.\u0275cmp=p.Kb({type:$,selectors:[["pages-trash"]],decls:1,vars:0,template:function(e,t){1&e&&p.Rb(0,"router-outlet")},directives:[r.h],encapsulation:2}),$),children:[{path:"specialwaste/:operation",component:V},{path:":trashType/:operation",component:J}]}],Z=((H=function e(){a(this,e)}).\u0275fac=function(e){return new(e||H)},H.\u0275mod=p.Ob({type:H}),H.\u0275inj=p.Nb({imports:[[r.g.forChild(Y)],r.g]}),H),ee=((B=function e(){a(this,e)}).\u0275fac=function(e){return new(e||B)},B.\u0275mod=p.Ob({type:B}),B.\u0275inj=p.Nb({providers:[d.a,y.a,n.a,s.a],imports:[[c.a,Z,h.B,h.R,h.sb,h.E,l.c,h.u,f.e,h.K,h.Mb]]}),B)},BMkl:function(i,n,s){"use strict";s.d(n,"a",function(){return u});var c,r=s("AytR"),l=s("fXoL"),d=s("tk/3"),u=((c=function(i){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&e(t,i)}(s,i);var n=t(s);function s(e){var t;return a(this,s),(t=n.call(this)).http=e,t.apiUrl=r.a.apiUrl,t}return o(s,[{key:"createSpecialWaste",value:function(e,t){return this.http.post(this.apiUrl+"/api/specialwaste",{specialWaste:e,companyID:t})}},{key:"deleteSpecialWaste",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id";return this.http.delete(this.apiUrl+"/api/specialwaste/one/"+"".concat(t,"/").concat(e))}},{key:"getSpecialWaste",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id";return this.http.get(this.apiUrl+"/api/specialwaste/one/"+"".concat(t,"/").concat(e))}},{key:"getSpecialWastes",value:function(e,t){return this.http.get(this.apiUrl+"/api/specialwaste/many/"+"".concat(t,"/").concat(e))}},{key:"updateSpecialWaste",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"_id";return this.http.patch(this.apiUrl+"/api/specialwaste/one/"+"".concat(a,"/").concat(n),{specialWaste:e,specialWasteType:t,amount:i})}},{key:"getCompaniesSpecialWastes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return this.http.get(this.apiUrl+"/api/company/specialwastes/"+"".concat(e,"/").concat(t))}}]),s}(function(){return function e(){a(this,e)}}())).\u0275fac=function(e){return new(e||c)(l.ac(d.b))},c.\u0275prov=l.Mb({token:c,factory:c.\u0275fac}),c)},dgmN:function(e,t,i){"use strict";i.r(t),i.d(t,"PagesModule",function(){return Tt});var n,s=i("3Pt+"),c=i("aceb"),r=i("RS3s"),l=i("bS1W"),d=i("wH5/"),u=i("fo3O"),b=i("H5EB"),p=i("vTDv"),h=i("zQsl"),v=i("bJfm"),f=i("fXoL"),g=((n=function e(){a(this,e)}).\u0275fac=function(e){return new(e||n)},n.\u0275mod=f.Ob({type:n}),n.\u0275inj=f.Nb({providers:[],imports:[[s.e,p.a,c.B,c.Ob,c.u,c.n,c.P,c.u,v.a,c.sb,c.xb,c.k,r.c,c.Gb,h.c,h.a]]}),n),m=i("5IJp"),W=i("tyNb"),V=i("ud2R"),y=i("BHmg"),w=i("KeQW"),S=i("ofXK");function M(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div"),f.Wb(1,"button",6),f.dc("click",function(){return f.xc(i),f.hc().updatePositionMethod(-1)}),f.Rb(2,"i",7),f.Vb(),f.Wb(3,"button",6),f.dc("click",function(){return f.xc(i),f.hc().updatePositionMethod(1)}),f.Rb(4,"i",8),f.Vb(),f.Vb()}}var k,x=((k=function(){function e(){a(this,e),this.updatePosition=new f.o,this.showSettings=!1}return o(e,[{key:"ngOnInit",value:function(){}},{key:"updatePositionMethod",value:function(e){this.updatePosition.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||k)},k.\u0275cmp=f.Kb({type:k,selectors:[["widget-group-header"]],inputs:{title:"title",status:"status"},outputs:{updatePosition:"updatePosition"},decls:9,vars:4,consts:[[3,"status"],[1,"row"],[1,"col-6","d-flex","justify-content-start"],[1,"col-6","d-flex","flex-fill","justify-content-end"],["nbButton","","size","small",3,"status","click"],[4,"ngIf"],["nbButton","",3,"click"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"]],template:function(e,t){1&e&&(f.Wb(0,"nb-card",0),f.Wb(1,"nb-card-header"),f.Wb(2,"div",1),f.Wb(3,"div",2),f.Fc(4),f.Vb(),f.Wb(5,"div",3),f.Wb(6,"button",4),f.dc("click",function(){return t.showSettings=!t.showSettings}),f.Fc(7,"Izmeni redosled"),f.Vb(),f.Dc(8,M,5,0,"div",5),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e&&(f.nc("status",t.status),f.Eb(4),f.Gc(t.title),f.Eb(2),f.nc("status",t.status),f.Eb(2),f.nc("ngIf",t.showSettings))},directives:[c.x,c.A,c.t,S.n],styles:[""]}),k),T=i("TOXQ"),F={view:[],legend:!0,legendTitle:"",showLabels:!0,animations:!0,xAxis:!0,yAxis:!0,showYAxisLabel:!0,showXAxisLabel:!0,xAxisLabel:"Dani",yAxisLabel:"KG",timeline:!0,schemaType:"linear"};function C(e,t){if(1&e&&(f.Wb(0,"nb-option",11),f.Fc(1),f.Vb()),2&e){var i=t.$implicit;f.nc("value",i),f.Eb(1),f.Hc(" ",i.specialWaste.name," ")}}var P,O=((P=function(){function e(t){var i=this;a(this,e),this.transactionService=t,this.options=F,this.specialWasteList=[],this.specialWaste=[],this.daysInMonth=30,this.colorScheme={domain:["#FF0000","#0000FF","#00FF00"]};var n=new Date;this.daysInMonth=new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),this.transactionService.getMostUsedSpecialWaste().subscribe(function(e){i.specialWasteList=e,0!==e.length&&(i.selectedSpecialWaste=i.specialWasteList[0],i.updateGraph(i.selectedSpecialWaste),i.updateSize(i.size))})}return o(e,[{key:"chooseTransaction",value:function(e){this.updateGraph(e)}},{key:"updateGraph",value:function(e){var t=this;this.transactionService.getTransactions(e.specialWaste._id,"specialWaste").subscribe(function(e){t.specialWaste=e,t.options.legendTitle=t.specialWaste[0].specialWaste.desc;var i={name:"Proizveden",value:0},n={name:"Uvezeno",value:0},a={name:"Izvezeno",value:0};t.data=[];for(var s=0;s<t.daysInMonth;s++)t.data[s]={name:s+1+"",series:[]};for(var o=0;o<t.specialWaste.length;o++){var c;c="0"!==t.specialWaste[o].date.toString().substring(8,10).charAt(0)?t.specialWaste[o].date.toString().substring(8,10):t.specialWaste[o].date.toString().substring(9,10),"production"===t.specialWaste[o].specialWasteType?(i.value+=t.specialWaste[o].trashAmount,t.data[c].series.push({name:"Proziveden",value:t.specialWaste[o].trashAmount})):"import"===t.specialWaste[o].specialWasteType?(n.value+=t.specialWaste[o].trashAmount,t.data[c].series.push({name:"Uvezeno",value:t.specialWaste[o].trashAmount})):"export"===t.specialWaste[o].specialWasteType&&(a.value+=t.specialWaste[o].trashAmount,t.data[c].series.push({name:"Izvezeno",value:t.specialWaste[o].trashAmount}))}})}},{key:"updateSize",value:function(e){console.log(this.size),"tiny"===e&&(this.options.view=[]),"small"===e&&(this.options.view=[]),"medium"===e&&(this.options.view=[500,300]),"large"===e&&(this.options.view=[700,300]),"giant"===e&&(this.options.view=[1100,500])}}]),e}()).\u0275fac=function(e){return new(e||P)(f.Qb(T.a))},P.\u0275cmp=f.Kb({type:P,selectors:[["widget-special-waste-stats"]],inputs:{size:"size"},decls:15,vars:15,consts:[[1,"row","flex-fill"],[3,"view","legend","showXAxisLabel","scheme","showYAxisLabel","xAxis","yAxis","xAxisLabel","yAxisLabel","results"],[1,"row","mt-2"],[1,"col-4"],["fullWidth","",3,"size","selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2"],["disabled","","fullWidth","","selected","Dani",3,"size"],["value","Dani"],["value","Meseci"],["value","Godine"],[3,"value"]],template:function(e,t){1&e&&(f.Fc(0),f.Wb(1,"div",0),f.Rb(2,"ngx-charts-bar-vertical-stacked",1),f.Vb(),f.Wb(3,"div",2),f.Wb(4,"div",3),f.Wb(5,"nb-select",4),f.dc("selectedChange",function(e){return t.chooseTransaction(e)}),f.Dc(6,C,2,2,"nb-option",5),f.Vb(),f.Vb(),f.Wb(7,"div",6),f.Wb(8,"nb-select",7),f.Wb(9,"nb-option",8),f.Fc(10,"Dani"),f.Vb(),f.Wb(11,"nb-option",9),f.Fc(12,"Meseci"),f.Vb(),f.Wb(13,"nb-option",10),f.Fc(14,"Godine"),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e&&(f.Hc("",t.options.legendTitle,"\n"),f.Eb(2),f.nc("view",t.options.view)("legend",t.options.legend)("showXAxisLabel",t.options.showXAxisLabel)("scheme",t.colorScheme)("showYAxisLabel",t.options.showYAxisLabel)("xAxis",t.options.xAxis)("yAxis",t.options.yAxis)("xAxisLabel",t.options.xAxisLabel)("yAxisLabel",t.options.yAxisLabel)("results",t.data),f.Eb(3),f.nc("size",t.size)("selected",t.specialWasteList[0]),f.Eb(1),f.nc("ngForOf",t.specialWasteList),f.Eb(2),f.nc("size",t.size))},directives:[h.b,c.qb,S.m,c.fb],styles:[".add-button[_ngcontent-%COMP%]:hover{color:#2d8ac7;cursor:pointer}.add-button[_ngcontent-%COMP%]{font-size:1.5rem}"]}),P),E={view:[],legend:!0,legendTitle:"",showLabels:!0,animations:!0,xAxis:!0,yAxis:!0,showYAxisLabel:!0,showXAxisLabel:!0,xAxisLabel:"Dani",yAxisLabel:"KG",timeline:!0,schemaType:"linear"};function z(e,t){if(1&e&&(f.Wb(0,"div",10),f.Rb(1,"ngx-charts-bar-vertical-stacked",11),f.Vb()),2&e){var i=f.hc();f.Eb(1),f.nc("view",i.options.view)("legend",i.options.legend)("showXAxisLabel",i.options.showXAxisLabel)("scheme",i.colorScheme)("showYAxisLabel",i.options.showYAxisLabel)("xAxis",i.options.xAxis)("yAxis",i.options.yAxis)("xAxisLabel",i.options.xAxisLabel)("yAxisLabel",i.options.yAxisLabel)("results",i.data)}}function D(e,t){if(1&e&&(f.Wb(0,"nb-option",12),f.Fc(1),f.Vb()),2&e){var i=t.$implicit;f.nc("value",i),f.Eb(1),f.Hc(" ",i.trash.name," ")}}var I,L=((I=function(){function e(t){a(this,e),this.transactionService=t,this.options=E,this.trashList=[],this.daysInMonth=30,this.data=[],this.colorScheme={domain:["#FF0000","#0000FF"]};var i=new Date;this.daysInMonth=new Date(i.getFullYear(),i.getMonth()+1,0).getDate()}return o(e,[{key:"ngOnChanges",value:function(e){var t=this;e.type&&this.transactionService.getMostUsedTrash(this.type).subscribe(function(e){t.trashList=e,console.log(e),0!==e.length&&(t.selectedTrash=t.trashList[0],t.updateGraph(t.selectedTrash),t.updateSize(t.size))})}},{key:"ngOnInit",value:function(){}},{key:"chooseTransaction",value:function(e){this.selectedTrash=e,this.updateGraph(e)}},{key:"updateGraph",value:function(e){var t=this;this.transactionService.getTransactions(e.trash._id,"trash").subscribe(function(e){t.trash=e,t.options.legendTitle=t.trash[0].trash.name;var i="Obradjen";"production"===t.type&&(i="Transportovan");var n={name:"Proizveden",value:0},a={name:i,value:0};t.data=[];for(var s=0;s<t.daysInMonth;s++)t.data[s]={name:s+1+"",series:[]};for(var o=0;o<t.trash.length;o++){var c;c="0"!==t.trash[o].date.toString().substring(8,10).charAt(0)?t.trash[o].date.toString().substring(8,10):t.trash[o].date.toString().substring(9,10),t.trash[o].trashAmount>0?(n.value+=t.trash[o].trashAmount,t.data[c].series.push({name:"Proizveden",value:t.trash[o].trashAmount})):(a.value+=Math.abs(t.trash[o].trashAmount),t.data[c].series.push({name:"Transportovan",value:t.trash[o].trashAmount}))}})}},{key:"updateSize",value:function(e){"tiny"===e&&(this.options.view=[]),"small"===e&&(this.options.view=[]),"medium"===e&&(this.options.view=[500,300]),"large"===e&&(this.options.view=[700,300]),"giant"===e&&(this.options.view=[1100,500])}}]),e}()).\u0275fac=function(e){return new(e||I)(f.Qb(T.a))},I.\u0275cmp=f.Kb({type:I,selectors:[["widget-trash-stats"]],inputs:{type:"type",size:"size"},features:[f.Cb],decls:14,vars:6,consts:[["class","row flex-fill",4,"ngIf"],[1,"row","mt-2"],[1,"col-4"],["fullWidth","",3,"size","selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2"],["disabled","","fullWidth","","selected","Dani",3,"size"],["value","Dani"],["value","Meseci"],["value","Godine"],[1,"row","flex-fill"],[3,"view","legend","showXAxisLabel","scheme","showYAxisLabel","xAxis","yAxis","xAxisLabel","yAxisLabel","results"],[3,"value"]],template:function(e,t){1&e&&(f.Fc(0),f.Dc(1,z,2,10,"div",0),f.Wb(2,"div",1),f.Wb(3,"div",2),f.Wb(4,"nb-select",3),f.dc("selectedChange",function(e){return t.chooseTransaction(e)}),f.Dc(5,D,2,2,"nb-option",4),f.Vb(),f.Vb(),f.Wb(6,"div",5),f.Wb(7,"nb-select",6),f.Wb(8,"nb-option",7),f.Fc(9,"Dani"),f.Vb(),f.Wb(10,"nb-option",8),f.Fc(11,"Meseci"),f.Vb(),f.Wb(12,"nb-option",9),f.Fc(13,"Godine"),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e&&(f.Hc("",t.options.legendTitle,"\n"),f.Eb(1),f.nc("ngIf",t.type),f.Eb(3),f.nc("size",t.size)("selected",t.trashList[0]),f.Eb(1),f.nc("ngForOf",t.trashList),f.Eb(2),f.nc("size",t.size))},directives:[S.n,c.qb,S.m,c.fb,h.b],styles:[""]}),I),_=i("Lx1j"),A=i("xsDJ"),j=i("+HCH"),N=["addTrashTemplate"],R=["processTrashTemplate"];function Q(e,t){1&e&&(f.Wb(0,"div",1),f.Fc(1,"Dodaj otpad"),f.Vb())}function U(e,t){1&e&&(f.Wb(0,"div",1),f.Fc(1,"Obradi otpad"),f.Vb())}function G(e,t){1&e&&(f.Wb(0,"div",1),f.Fc(1,"Odolo\u017ei otpad"),f.Vb())}function K(e,t){1&e&&(f.Wb(0,"div",1),f.Fc(1,"Skladi\u0161ti otpad"),f.Vb())}function q(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",11),f.Wb(1,"i",12),f.dc("click",function(){f.xc(i);var e=f.hc().$implicit;return f.hc().openAddTrashWindow(e.trash,e.storage)}),f.Vb(),f.Vb()}}function X(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",11),f.Wb(1,"i",13),f.dc("click",function(){f.xc(i);var e=f.hc().$implicit;return f.hc().openProcessTrashWindow(e.trash,e.storage)}),f.Vb(),f.Vb()}}function $(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",11),f.Wb(1,"i",14),f.dc("click",function(){f.xc(i);var e=f.hc().$implicit;return f.hc().openProcessTrashWindow(e.trash,e.storage)}),f.Vb(),f.Vb()}}function B(e,t){if(1&e&&(f.Wb(0,"div",7),f.Wb(1,"div",8),f.Fc(2),f.Vb(),f.Wb(3,"div",9),f.Fc(4),f.Vb(),f.Wb(5,"div",1),f.Fc(6),f.Vb(),f.Dc(7,q,2,0,"div",10),f.Dc(8,X,2,0,"div",10),f.Dc(9,$,2,0,"div",10),f.Vb()),2&e){var i=t.$implicit,n=f.hc();f.Eb(2),f.Gc(i.trash.indexNumber),f.Eb(2),f.Gc(i.trash.name),f.Eb(2),f.Gc(i.trash.amount),f.Eb(1),f.nc("ngIf","production"===n.type||"cache"===n.type),f.Eb(1),f.nc("ngIf","treatment"===n.type),f.Eb(1),f.nc("ngIf","disposal"===n.type)}}function H(e,t){if(1&e){var i=f.Xb();f.Wb(0,"add-trash-popup",15),f.dc("callAddTrash",function(e){return f.xc(i),f.hc().addTrashMethod(e)}),f.Vb()}if(2&e){var n=f.hc();f.nc("type","production")("selectedTrash",n.selectedTrash)}}function J(e,t){if(1&e){var i=f.Xb();f.Wb(0,"process-trash-popup",16),f.dc("callProcessTrash",function(e){return f.xc(i),f.hc().processTrashMethod(e)}),f.Vb()}if(2&e){var n=f.hc();f.nc("selectedTrash",n.selectedTrash)}}var Y,Z=((Y=function(){function e(t,i,n,s){a(this,e),this.transactionService=t,this.windowService=i,this.trashService=n,this.toastrService=s,this.transactions=[]}return o(e,[{key:"ngOnInit",value:function(){this.updateTransactions()}},{key:"updateTransactions",value:function(){var e=this;this.transactionService.getMostUsedTrash(this.type).subscribe(function(t){e.transactions=t})}},{key:"openAddTrashWindow",value:function(e,t){this.selectedTrash=e,this.selectedStorageID=t,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj proizvedenu kolicinu: "+this.selectedTrash.name})}},{key:"addTrashMethod",value:function(e){var t=this,i=e.trashAmmount;this.selectedTrash.amount+=i,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageID,this.selectedTrash._id).subscribe(function(e){t.updateTransactions()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+i+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),i=NaN}},{key:"openProcessTrashWindow",value:function(e,t){this.selectedTrash=e,this.selectedStorageID=t,this.windowRef=this.windowService.open(this.processTrashTemplate,{title:"Obradi odre\u0111enu koli\u010dinu: "+this.selectedTrash.name})}},{key:"processTrashMethod",value:function(e){var t=this,i=e.selectedTransaction,n=e.trashAmmount,a=e.trashCreated;this.selectedTrash.amount-=n,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageID,this.selectedTrash._id,"_id",a?i.companyName?i.companyName:i:"",a?i.wmdNo?i.wmdNo:i:"").subscribe(function(e){t.updateTransactions()}),"-"!==i&&(i.finished=!0,this.transactionService.updateTransaction(i,i._id).subscribe(function(e){})),this.showToast("Uspeh","Uspe\u0161no ste obradili "+n+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),n=NaN}},{key:"showToast",value:function(e,t,i){this.toastrService.show(t,e,{status:i})}}]),e}()).\u0275fac=function(e){return new(e||Y)(f.Qb(T.a),f.Qb(c.Qb),f.Qb(_.a),f.Qb(c.Kb))},Y.\u0275cmp=f.Kb({type:Y,selectors:[["widget-most-used-trash"]],viewQuery:function(e,t){var i;1&e&&(f.Lc(N,1,f.P),f.Lc(R,1,f.P)),2&e&&(f.uc(i=f.ec())&&(t.addTrashTemplate=i.first),f.uc(i=f.ec())&&(t.processTrashTemplate=i.first))},inputs:{type:"type"},decls:17,vars:5,consts:[[1,"row"],[1,"col-3"],["class","col-3",4,"ngIf"],[2,"height","2px","border-width","0","color","gray","background-color","gray"],["class","row mb-1",4,"ngFor","ngForOf"],["addTrashTemplate",""],["processTrashTemplate",""],[1,"row","mb-1"],[1,"col-2"],[1,"col-4","text-limit"],["class","col-3 text-center",4,"ngIf"],[1,"col-3","text-center"],[1,"fa","fa-plus","add-button",3,"click"],[1,"fa","fa-trash-restore","add-button",3,"click"],[1,"fa","fa-trash","add-button",3,"click"],[3,"type","selectedTrash","callAddTrash"],[3,"selectedTrash","callProcessTrash"]],template:function(e,t){1&e&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Fc(2,"Indeksni broj"),f.Vb(),f.Wb(3,"div",1),f.Fc(4,"Naziv"),f.Vb(),f.Wb(5,"div",1),f.Fc(6,"Koli\u010dina (KG)"),f.Vb(),f.Dc(7,Q,2,0,"div",2),f.Dc(8,U,2,0,"div",2),f.Dc(9,G,2,0,"div",2),f.Dc(10,K,2,0,"div",2),f.Vb(),f.Rb(11,"hr",3),f.Dc(12,B,10,6,"div",4),f.Dc(13,H,1,2,"ng-template",null,5,f.Ec),f.Dc(15,J,1,1,"ng-template",null,6,f.Ec)),2&e&&(f.Eb(7),f.nc("ngIf","production"===t.type),f.Eb(1),f.nc("ngIf","treatment"===t.type),f.Eb(1),f.nc("ngIf","disposal"===t.type),f.Eb(1),f.nc("ngIf","cache"===t.type),f.Eb(2),f.nc("ngForOf",t.transactions))},directives:[S.n,S.m,A.a,j.a],styles:[".add-button[_ngcontent-%COMP%]:hover{color:#2d8ac7;cursor:pointer}.add-button[_ngcontent-%COMP%]{font-size:1.5rem}.text-limit[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}"]}),Y),ee={hideSubHeader:!0,actions:{columnTitle:"Lista otpada",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-search"></i>'}]},columns:{name:{title:"Naziv",editable:!1},code:{title:"\u0160ifra dozvole"},dateExpiration:{title:"Dozvola va\u017ei do",valuePrepareFunction:function(e,t){return t.dateExpiration.substring(0,10)}}}},te=i("kBrA"),ie=i("McNs"),ne=i("ibGe"),ae=i("7IaX");function se(e,t){1&e&&(f.Wb(0,"p",37),f.Fc(1," Naziv dozvole je obavezna! "),f.Vb())}function oe(e,t){if(1&e&&(f.Wb(0,"p",37),f.Fc(1),f.Vb()),2&e){var i=f.hc(2);f.Eb(1),f.Hc(" Naziv dozvole mora biti du\u017ei od ",i.getConfigValue("forms.validation.permitName.minLength")," slova! ")}}function ce(e,t){if(1&e&&(f.Ub(0),f.Dc(1,se,2,0,"p",36),f.Dc(2,oe,2,1,"p",36),f.Tb()),2&e){f.hc();var i=f.vc(12);f.Eb(1),f.nc("ngIf",null==i.errors?null:i.errors.required),f.Eb(1),f.nc("ngIf",(null==i.errors?null:i.errors.maxLength)||(null==i.errors?null:i.errors.minLength))}}function re(e,t){1&e&&(f.Wb(0,"p",37),f.Fc(1," \u0160ifra dozvole je obavezna! "),f.Vb())}function le(e,t){if(1&e&&(f.Ub(0),f.Dc(1,re,2,0,"p",36),f.Tb()),2&e){f.hc();var i=f.vc(19);f.Eb(1),f.nc("ngIf",null==i.errors?null:i.errors.required)}}function de(e,t){1&e&&(f.Wb(0,"p",37),f.Fc(1," Datum nastanka dozvole je obavezan! "),f.Vb())}function ue(e,t){1&e&&(f.Wb(0,"p",37),f.Fc(1," Datum nastanka dozvole ne mo\u017ee biti posle datum izdavanja! "),f.Vb())}function be(e,t){if(1&e&&(f.Ub(0),f.Dc(1,de,2,0,"p",36),f.Dc(2,ue,2,0,"p",36),f.Tb()),2&e){var i=f.hc(),n=f.vc(26);f.Eb(1),f.nc("ngIf",null==n.errors?null:n.errors.required),f.Eb(1),f.nc("ngIf",!i.dateValid(i.permit))}}function pe(e,t){1&e&&(f.Wb(0,"p",37),f.Fc(1," Datum isteka dozvole je obavezan! "),f.Vb())}function he(e,t){if(1&e&&(f.Ub(0),f.Dc(1,pe,2,0,"p",36),f.Tb()),2&e){f.hc();var i=f.vc(34);f.Eb(1),f.nc("ngIf",null==i.errors?null:i.errors.required)}}function ve(e,t){if(1&e){var i=f.Xb();f.Wb(0,"button",38),f.dc("click",function(){f.xc(i);var e=t.$implicit;return f.hc().addTrashToList({data:e})}),f.Fc(1),f.Vb()}if(2&e){var n=t.$implicit;f.nc("nbPopover",n.name),f.Eb(1),f.Hc(" ",n.indexNumber," ")}}var fe,ge=function(){return{standalone:!0}},me=((fe=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;a(this,e),this.permitService=t,this.options=i,this.roleService=n,this.catalogService=s,this.updatePermits=new f.o,this.openTrashList=new f.o,this.permit={code:"",dateCreation:new Date,dateExpiration:new Date,name:"",trashList:[],type:""},this.catalog=new r.a,this.settings=ae.a}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.catalogService.getCatalogs().subscribe(function(t){e.catalog.load(t)})}},{key:"getConfigValue",value:function(e){return Object(ie.n)(this.options,e,null)}},{key:"addPermit",value:function(){this.permit.type=this.type,this.permitService.createPermit(this.permit,this.roleService.getCompanyID()).subscribe(function(e){}),this.updatePermits.emit("update")}},{key:"dateValid",value:function(e){return e.dateCreation<=e.dateExpiration}},{key:"chooseTrash",value:function(){this.openTrashList.emit(this.permit)}},{key:"addTrashToList",value:function(e){var t=e.data;this.permit.trashList.some(function(e){return e._id===t._id})?this.removeTrashFromList(t):this.permit.trashList.push(t)}},{key:"removeTrashFromList",value:function(e){var t=this.permit.trashList.filter(function(t){return t._id===e._id})[0];if(t){var i=this.permit.trashList.indexOf(t,0);i>-1&&this.permit.trashList.splice(i,1)}}},{key:"onSearch",value:function(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"indexNumber",search:e,filter:function(e,t){return e.replace(/\s+/g,"").includes(t.replace(/\s+/g,""))}},{field:"name",search:e}],!1)}}]),e}()).\u0275fac=function(e){return new(e||fe)(f.Qb(l.a),f.Qb(ie.a),f.Qb(V.a),f.Qb(ne.a))},fe.\u0275cmp=f.Kb({type:fe,selectors:[["add-permit-popup"]],inputs:{type:"type"},outputs:{updatePermits:"updatePermits",openTrashList:"openTrashList"},decls:60,vars:35,consts:[["showToggleButton","",1,"container-fluid"],["revealCard",""],[1,"no-border"],["permitForm","ngForm"],[1,"row"],[1,"col-12","mb-2"],["for","input-permitName",1,"label"],["placeholder","Dozvola","autofocus","","fullWidth","","id","input-permitName","name","permitName","nbInput","","placeholder","Naziv",3,"ngModel","ngModelOptions","required","maxlength","minLength","status","ngModelChange"],["permitName","ngModel"],[4,"ngIf"],[1,"row","mb-2"],[1,"col-12"],["for","input-permitCode",1,"label"],["fullWidth","","id","input-permitCode","name","permitCode","nbInput","","placeholder","\u0160ifra",3,"ngModel","ngModelOptions","required","status","ngModelChange"],["permitCode","ngModel"],[1,"col-6"],["for","input-dateCreation",1,"label"],["fullWidth","","id","input-dateCreation","name","dateCreation","nbInput","",3,"ngModel","nbDatepicker","ngModelOptions","required","status","ngModelChange"],["dateCreation","ngModel"],["dateCreationPicker",""],["for","input-dateExpiration",1,"label"],["fullWidth","","id","input-dateExpiration","name","dateExpiration","nbInput","",3,"ngModel","nbDatepicker","ngModelOptions","required","status","ngModelChange"],["dateExpiration","ngModel"],["dateExpirationPicker",""],[1,"row","mt-2"],["nbButton","","status","basic","type","button",3,"click"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning","class","p-2 m-1","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",3,"nbPopover","click",4,"ngFor","ngForOf"],[1,"col-11"],[1,"ml-0"],[1,"col-1"],[1,"fa","fa-arrow-alt-circle-down","fa-2x","arrow-down",3,"click"],[1,"col-12","mt-1"],["nbInput","","fullWidth","","type","text","placeholder","Pretrazi",3,"input"],["search",""],[3,"source","settings","custom"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["nbButton","","status","warning","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",1,"p-2","m-1",3,"nbPopover","click"]],template:function(e,t){if(1&e){var i=f.Xb();f.Wb(0,"nb-reveal-card",0,1),f.Wb(2,"nb-card-front"),f.Wb(3,"nb-card",2),f.Wb(4,"nb-card-body"),f.Wb(5,"form",null,3),f.Wb(7,"div",4),f.Wb(8,"div",5),f.Wb(9,"label",6),f.Fc(10,"Naziv Dozvole:"),f.Vb(),f.Wb(11,"input",7,8),f.dc("ngModelChange",function(e){return t.permit.name=e}),f.Vb(),f.Dc(13,ce,3,2,"ng-container",9),f.Vb(),f.Vb(),f.Wb(14,"div",10),f.Wb(15,"div",11),f.Wb(16,"label",12),f.Fc(17,"\u0160ifra Dozvole:"),f.Vb(),f.Wb(18,"input",13,14),f.dc("ngModelChange",function(e){return t.permit.code=e}),f.Vb(),f.Dc(20,le,2,1,"ng-container",9),f.Vb(),f.Vb(),f.Wb(21,"div",10),f.Wb(22,"div",15),f.Wb(23,"label",16),f.Fc(24,"Datum izdavanja dozvole:"),f.Vb(),f.Wb(25,"input",17,18),f.dc("ngModelChange",function(e){return t.permit.dateCreation=e}),f.Vb(),f.Rb(27,"nb-datepicker",null,19),f.Dc(29,be,3,2,"ng-container",9),f.Vb(),f.Wb(30,"div",15),f.Wb(31,"label",20),f.Fc(32,"Datum isteka dozvole:"),f.Vb(),f.Wb(33,"input",21,22),f.dc("ngModelChange",function(e){return t.permit.dateExpiration=e}),f.Vb(),f.Rb(35,"nb-datepicker",null,23),f.Dc(37,he,2,1,"ng-container",9),f.Vb(),f.Vb(),f.Wb(38,"div",24),f.Wb(39,"div",15),f.Wb(40,"button",25),f.dc("click",function(){return f.xc(i),f.vc(1).revealed=!0}),f.Fc(41,"Odaberi otpade "),f.Vb(),f.Vb(),f.Wb(42,"div",15),f.Wb(43,"button",26),f.dc("click",function(){return t.addPermit()}),f.Fc(44,"Dodaj dozvolu"),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(45,"nb-card-back"),f.Wb(46,"nb-card",2),f.Wb(47,"nb-card-body"),f.Wb(48,"div",10),f.Wb(49,"div",11),f.Dc(50,ve,2,2,"button",27),f.Vb(),f.Wb(51,"div",28),f.Wb(52,"label",29),f.Fc(53,"Pretrazi po indeksnom broju:"),f.Vb(),f.Vb(),f.Wb(54,"div",30),f.Wb(55,"i",31),f.dc("click",function(){return f.xc(i),f.vc(1).revealed=!1}),f.Vb(),f.Vb(),f.Wb(56,"div",32),f.Wb(57,"input",33,34),f.dc("input",function(){f.xc(i);var e=f.vc(58);return e.value.length>=1&&t.onSearch(e.value)}),f.Vb(),f.Wb(59,"ng2-smart-table",35),f.dc("custom",function(e){return t.addTrashToList(e)}),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb()}if(2&e){var n=f.vc(12),a=f.vc(19),s=f.vc(26),o=f.vc(28),c=f.vc(34),r=f.vc(36);f.Eb(11),f.nc("ngModel",t.permit.name)("ngModelOptions",f.qc(31,ge))("required",t.getConfigValue("forms.validation.permitName.required"))("maxlength",t.getConfigValue("forms.validation.permitName.maxLength"))("minLength",t.getConfigValue("forms.validation.permitName.minLength"))("status",n.dirty?n.invalid?"danger":"success":"basic"),f.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),f.Eb(2),f.nc("ngIf",n.invalid&&n.touched),f.Eb(5),f.nc("ngModel",t.permit.code)("ngModelOptions",f.qc(32,ge))("required",t.getConfigValue("forms.validation.permitCode.required"))("status",a.dirty?a.invalid?"danger":"success":"basic"),f.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),f.Eb(2),f.nc("ngIf",a.invalid&&a.touched),f.Eb(5),f.nc("ngModel",t.permit.dateCreation)("nbDatepicker",o)("ngModelOptions",f.qc(33,ge))("required",t.getConfigValue("forms.validation.date.required"))("status",t.dateValid(t.permit)?"success":"danger"),f.Fb("aria-invalid",!(!s.invalid||!s.touched)||null),f.Eb(4),f.nc("ngIf",!t.dateValid(t.permit)),f.Eb(4),f.nc("ngModel",t.permit.dateExpiration)("nbDatepicker",r)("ngModelOptions",f.qc(34,ge))("required",t.getConfigValue("forms.validation.date.required"))("status",t.dateValid(t.permit)?"success":"danger"),f.Fb("aria-invalid",!(!c.invalid||!c.touched)||null),f.Eb(4),f.nc("ngIf",c.invalid&&c.touched),f.Eb(13),f.nc("ngForOf",t.permit.trashList),f.Eb(9),f.nc("source",t.catalog)("settings",t.settings)}},directives:[c.ob,c.z,c.x,c.w,s.w,s.l,s.m,c.Q,s.b,s.k,s.n,s.s,s.f,S.n,c.J,c.I,c.t,c.v,S.m,r.b,c.hb],styles:["nb-card.no-border[_ngcontent-%COMP%]{border:none}.fa-arrow-alt-circle-down[_ngcontent-%COMP%]{size:1.5rem}.fa-arrow-alt-circle-down[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),fe),We=["viewTrash"],Ve=["addPermit"];function ye(e,t){if(1&e){var i=f.Xb();f.Wb(0,"view-permits-trash-popup",8),f.dc("callUpdatePermitsTrash",function(e){return f.xc(i),f.hc().updatePermitsTrashMethod(e)}),f.Vb()}if(2&e){var n=f.hc();f.nc("selectedPermit",n.selectedPermit)}}function we(e,t){if(1&e){var i=f.Xb();f.Wb(0,"add-permit-popup",9),f.dc("updatePermits",function(){return f.xc(i),f.hc().updatePermits()}),f.Vb()}2&e&&f.nc("type","transport")}var Se,Me=((Se=function(){function e(t,i,n,s){a(this,e),this.permitService=t,this.windowService=i,this.toastrService=n,this.roleService=s,this.settings=ee,this.transportPermits=[]}return o(e,[{key:"ngOnInit",value:function(){this.updatePermits()}},{key:"updatePermits",value:function(){var e=this;this.permitService.getCompaniesPermits(this.roleService.getCompanyID(),this.type).subscribe(function(t){e.transportPermits=t}),void 0!==this.windowRef&&this.windowRef.close()}},{key:"openPermitsTrashWindow",value:function(e){var t=e.data;this.selectedPermit=t,this.windowRef=this.windowService.open(this.viewTrash,{title:"Lista otpada"})}},{key:"updatePermitsTrashMethod",value:function(e){this.selectedPermit.trashList=e,this.permitService.updatePermit(this.selectedPermit,this.selectedPermit._id).subscribe(function(e){}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.windowRef.close()}},{key:"openAddPermitWindow",value:function(){this.windowRef=this.windowService.open(this.addPermit,{title:"Dodaj dozvolu za transport"})}},{key:"showToast",value:function(e,t,i){this.toastrService.show(t,e,{status:i})}}]),e}()).\u0275fac=function(e){return new(e||Se)(f.Qb(l.a),f.Qb(c.Qb),f.Qb(c.Kb),f.Qb(V.a))},Se.\u0275cmp=f.Kb({type:Se,selectors:[["widget-transport-permits"]],viewQuery:function(e,t){var i;1&e&&(f.Lc(We,1,f.P),f.Lc(Ve,1,f.P)),2&e&&(f.uc(i=f.ec())&&(t.viewTrash=i.first),f.uc(i=f.ec())&&(t.addPermit=i.first))},inputs:{type:"type"},decls:11,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"settings","source","custom"],[1,"row","mt-3","d-flex","justify-content-end","mr-5","pr-1","align-items-end"],[1,"col-3"],["nbButton","","type","button",3,"click"],["viewTrash",""],["addPermit",""],[3,"selectedPermit","callUpdatePermitsTrash"],[3,"type","updatePermits"]],template:function(e,t){1&e&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Wb(2,"ng2-smart-table",2),f.dc("custom",function(e){return t.openPermitsTrashWindow(e)}),f.Vb(),f.Vb(),f.Vb(),f.Wb(3,"div",3),f.Wb(4,"div",4),f.Wb(5,"button",5),f.dc("click",function(){return t.openAddPermitWindow()}),f.Fc(6,"Dodaj dozvolu"),f.Vb(),f.Vb(),f.Vb(),f.Dc(7,ye,1,1,"ng-template",null,6,f.Ec),f.Dc(9,we,1,1,"ng-template",null,7,f.Ec)),2&e&&(f.Eb(2),f.nc("settings",t.settings)("source",t.transportPermits))},directives:[r.b,c.t,te.a,me],styles:[""]}),Se),ke={hideSubHeader:!0,actions:{position:"right",add:!1,edit:!1,delete:!1},columns:{type:{title:"Vrsta vozila",type:"html",valuePrepareFunction:function(e,t){var i=t.type,n=i;return"kamion"===i&&(n='<i class="fa fa-2x fa-truck"></i>'),"kombi"===i&&(n='<i class="fa fa-2x fa-shuttle-van"></i>'),"automobil"===i&&(n='<i class="fa fa-2x fa-car-side"></i>'),n}},licensePlate:{title:"Registarski broj"},licensePlateExpiration:{title:"Registracija va\u017ei do"}}};function xe(e,t){1&e&&(f.Wb(0,"p",17),f.Fc(1," Registarski broj tablica je obavezan! "),f.Vb())}function Te(e,t){1&e&&(f.Wb(0,"p",17),f.Fc(1," Registarski broj tablica mora biti validan (npr. BG-234-AA)! "),f.Vb())}function Fe(e,t){if(1&e&&(f.Ub(0),f.Dc(1,xe,2,0,"p",16),f.Dc(2,Te,2,0,"p",16),f.Tb()),2&e){f.hc();var i=f.vc(7);f.Eb(1),f.nc("ngIf",null==i.errors?null:i.errors.required),f.Eb(1),f.nc("ngIf",(null==i.errors?null:i.errors.pattern)||(null==i.errors?null:i.errors.minLength))}}function Ce(e,t){1&e&&(f.Wb(0,"p",17),f.Fc(1," Vrsta vozila je obavezna! "),f.Vb())}function Pe(e,t){if(1&e&&(f.Ub(0),f.Dc(1,Ce,2,0,"p",16),f.Tb()),2&e){f.hc();var i=f.vc(13);f.Eb(1),f.nc("ngIf",!i.value)}}var Oe,Ee=function(){return{standalone:!0}},ze=((Oe=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;a(this,e),this.vehicleService=t,this.options=i,this.roleService=n,this.updateVehicles=new f.o,this.vehicle={licensePlate:"",type:""}}return o(e,[{key:"ngOnInit",value:function(){}},{key:"getConfigValue",value:function(e){return Object(ie.n)(this.options,e,null)}},{key:"addVehicle",value:function(){this.vehicleService.createVehicle(this.vehicle,this.roleService.getCompanyID()).subscribe(function(e){}),this.updateVehicles.emit("update")}}]),e}()).\u0275fac=function(e){return new(e||Oe)(f.Qb(b.a),f.Qb(ie.a),f.Qb(V.a))},Oe.\u0275cmp=f.Kb({type:Oe,selectors:[["add-vehicle-popup"]],outputs:{updateVehicles:"updateVehicles"},decls:25,vars:17,consts:[[1,"row","pt-4"],["transportForm","ngForm"],[1,"col-12","mb-2"],["for","input-licensePlate",1,"label"],["fullWidth","","id","input-licensePlate","name","licensePlate","nbInput","","oninput","this.value = this.value.toUpperCase()","placeholder","NS-234-DS",3,"ngModel","maxlength","minLength","ngModelOptions","pattern","required","status","ngModelChange"],["licensePlate","ngModel"],[4,"ngIf"],["for","input-vehicleType",1,"label"],["fullWidth","","id","input-vehicleType","name","vehicleType","placeholder","Odaberi",3,"ngModel","ngModelOptions","required","status","ngModelChange"],["vehicleType","ngModel"],["value","kamion"],["value","kombi"],["value","automobil"],[1,"row","d-flex","justify-content-end","mr-5"],[1,"col-4"],["status","success","nbButton","",3,"click"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e&&(f.Wb(0,"div",0),f.Wb(1,"form",null,1),f.Wb(3,"div",2),f.Wb(4,"label",3),f.Fc(5,"Registarski broj tablice:"),f.Vb(),f.Wb(6,"input",4,5),f.dc("ngModelChange",function(e){return t.vehicle.licensePlate=e}),f.Vb(),f.Dc(8,Fe,3,2,"ng-container",6),f.Vb(),f.Wb(9,"div",2),f.Wb(10,"label",7),f.Fc(11,"Vrsta vozila:"),f.Vb(),f.Wb(12,"nb-select",8,9),f.dc("ngModelChange",function(e){return t.vehicle.type=e}),f.Wb(14,"nb-option",10),f.Fc(15,"Kamion"),f.Vb(),f.Wb(16,"nb-option",11),f.Fc(17,"Kombi"),f.Vb(),f.Wb(18,"nb-option",12),f.Fc(19,"Automobil"),f.Vb(),f.Vb(),f.Dc(20,Pe,2,1,"ng-container",6),f.Vb(),f.Vb(),f.Vb(),f.Wb(21,"div",13),f.Wb(22,"div",14),f.Wb(23,"button",15),f.dc("click",function(){return t.addVehicle()}),f.Fc(24,"Dodaj vozilo"),f.Vb(),f.Vb(),f.Vb()),2&e){var i=f.vc(7),n=f.vc(13);f.Eb(6),f.nc("ngModel",t.vehicle.licensePlate)("maxlength",t.getConfigValue("forms.validation.licensePlate.maxLength"))("minLength",t.getConfigValue("forms.validation.licensePlate.minLength"))("ngModelOptions",f.qc(15,Ee))("pattern",t.getConfigValue("forms.validation.licensePlate.pattern"))("required",t.getConfigValue("forms.validation.licensePlate.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),f.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),f.Eb(2),f.nc("ngIf",i.invalid&&i.touched),f.Eb(4),f.nc("ngModel",t.vehicle.type)("ngModelOptions",f.qc(16,Ee))("required",t.getConfigValue("forms.validation.vehicleType.required"))("status",n.dirty?n.invalid?"danger":"success":"basic"),f.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),f.Eb(8),f.nc("ngIf",n.invalid&&n.touched)}},directives:[s.w,s.l,s.m,c.Q,s.b,s.k,s.n,s.f,s.q,s.s,S.n,c.qb,c.fb,c.t],styles:[""]}),Oe),De=["addVehicleTemplate"];function Ie(e,t){if(1&e){var i=f.Xb();f.Wb(0,"add-vehicle-popup",7),f.dc("updateVehicles",function(){return f.xc(i),f.hc().updateVehicles()}),f.Vb()}}var Le,_e=((Le=function(){function e(t,i,n){a(this,e),this.vehicleService=t,this.roleService=i,this.windowService=n,this.settings=ke,this.vehicles=new r.a}return o(e,[{key:"ngOnInit",value:function(){this.updateVehicles()}},{key:"updateVehicles",value:function(){var e=this;this.vehicleService.getCompaniesVehicles(this.roleService.getCompanyID()).subscribe(function(t){e.vehicles.load(t)}),void 0!==this.windowRef&&this.windowRef.close()}},{key:"openAddVehicleWindow",value:function(){this.windowRef=this.windowService.open(this.addVehicleTemplate,{title:"Dodajte vozilo"})}}]),e}()).\u0275fac=function(e){return new(e||Le)(f.Qb(b.a),f.Qb(V.a),f.Qb(c.Qb))},Le.\u0275cmp=f.Kb({type:Le,selectors:[["widget-vehicles"]],viewQuery:function(e,t){var i;1&e&&f.Lc(De,1,f.P),2&e&&f.uc(i=f.ec())&&(t.addVehicleTemplate=i.first)},decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"settings","source"],[1,"row","my-3","d-flex","justify-content-end","mr-4","pr-1","align-items-end"],[1,"col-3"],["nbButton","","type","button",3,"click"],["addVehicleTemplate",""],[3,"updateVehicles"]],template:function(e,t){1&e&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Rb(2,"ng2-smart-table",2),f.Vb(),f.Vb(),f.Wb(3,"div",3),f.Wb(4,"div",4),f.Wb(5,"button",5),f.dc("click",function(){return t.openAddVehicleWindow()}),f.Fc(6,"Dodaj vozilo"),f.Vb(),f.Vb(),f.Vb(),f.Dc(7,Ie,1,0,"ng-template",null,6,f.Ec)),2&e&&(f.Eb(2),f.nc("settings",t.settings)("source",t.vehicles))},directives:[r.b,c.t,ze],styles:[".vehicleIcon[_ngcontent-%COMP%]{font-size:2rem}"]}),Le),Ae=i("7Oz7"),je={hideSubHeader:!0,pager:{perPage:5},actions:{columnTitle:"Zavr\u0161i tretman",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"leftover",title:'<i class="fa fa-exclamation-triangle"></i>'}]},columns:{user:{title:"Podnosioc operacije",valuePrepareFunction:function(e,t){return t.user.firstName+" "+t.user.lastName}},date:{title:"Datum tretmana",valuePrepareFunction:function(e,t){return t.date.substring(0,10)}},indexNumber:{title:"Indeksni broj",valuePrepareFunction:function(e,t){return t.trash.indexNumber}},name:{title:"Naziv otpada",valuePrepareFunction:function(e,t){var i=t.trash.name;return t.trash.name.length>10&&(i=t.trash.name.substring(0,10)+"..."),i}},amount:{title:"Kolicina (KG)",valuePrepareFunction:function(e,t){return t.trash.amount}}}},Ne=i("J0/g"),Re=["leftoverTrashTemplate"];function Qe(e,t){if(1&e){var i=f.Xb();f.Wb(0,"leftover-trash-popup",2),f.dc("callLeftoverTrash",function(e){return f.xc(i),f.hc().leftoverTrashMethod(e)}),f.Vb()}if(2&e){var n=f.hc();f.nc("selectedTransaction",n.selectedTransaction)("storageProduction",n.storage)}}var Ue,Ge,Ke=((Ue=function(){function e(t,i,n,s,o,c){a(this,e),this.windowService=t,this.storageService=i,this.trashService=n,this.transactionsService=s,this.toastrService=o,this.roleService=c,this.settings=je,this.transactions=[]}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.updateTransactions(),this.storageService.getCompaniesStorage(this.roleService.getCompanyID(),"production").subscribe(function(t){e.storage=t})}},{key:"updateTransactions",value:function(){var e=this;this.transactionsService.getUnfinishedTransactions(this.type,this.roleService.getCompanyID()).subscribe(function(t){e.transactions=t})}},{key:"openLeftoverTrashWindow",value:function(e){var t=e.data;this.selectedTransaction=t,this.selectedTrash=t.otpad,this.windowRef=this.windowService.open(this.leftoverTrashTemplate,{title:"Zavr\u0161i proizvodnju preostalog otpada"})}},{key:"leftoverTrashMethod",value:function(e){var t=this,i=e.selectedTransaction,n=e.leftoverTrashCreated,a=e.selectedStorage;n.forEach(function(e){t.trashService.updateTrash(e,a._id,e.indexNumber,"indexNumber",void 0,void 0,!0).subscribe(function(e){t.updateTransactions()})}),i.companyName=null,i.wmdNo=null,i.finished=!0,this.transactionsService.updateTransaction(i,i._id).subscribe(function(e){}),this.showToast("Uspeh","Uspesno ste dodali otpade!","success"),this.windowRef.close()}},{key:"showToast",value:function(e,t,i){this.toastrService.show(t,e,{status:i})}}]),e}()).\u0275fac=function(e){return new(e||Ue)(f.Qb(c.Qb),f.Qb(Ae.a),f.Qb(_.a),f.Qb(T.a),f.Qb(c.Kb),f.Qb(V.a))},Ue.\u0275cmp=f.Kb({type:Ue,selectors:[["widget-unfinished-operations"]],viewQuery:function(e,t){var i;1&e&&f.Lc(Re,1,f.P),2&e&&f.uc(i=f.ec())&&(t.leftoverTrashTemplate=i.first)},inputs:{type:"type"},decls:3,vars:2,consts:[[3,"settings","source","custom"],["leftoverTrashTemplate",""],[3,"selectedTransaction","storageProduction","callLeftoverTrash"]],template:function(e,t){1&e&&(f.Wb(0,"ng2-smart-table",0),f.dc("custom",function(e){return t.openLeftoverTrashWindow(e)}),f.Vb(),f.Dc(1,Qe,1,2,"ng-template",null,1,f.Ec)),2&e&&f.nc("settings",t.settings)("source",t.transactions)},directives:[r.b,Ne.a],styles:[""]}),Ue),qe=i("BMkl"),Xe=((Ge=function(){function e(t){a(this,e),this.specialWasteService=t,this.exitEmitter=new f.o,this.specialWasteAmount=0}return o(e,[{key:"ngOnInit",value:function(){}},{key:"addSpecialWaste",value:function(){var e=this;"export"===this.type&&(this.specialWasteAmount*=-1),this.specialWasteService.updateSpecialWaste(this.selectedSpecialWaste,this.type,this.specialWasteAmount,this.selectedSpecialWaste._id).subscribe(function(t){e.exitEmitter.emit("")})}}]),e}()).\u0275fac=function(e){return new(e||Ge)(f.Qb(qe.a))},Ge.\u0275cmp=f.Kb({type:Ge,selectors:[["add-special-waste-popup"]],inputs:{type:"type",selectedSpecialWaste:"selectedSpecialWaste"},outputs:{exitEmitter:"exitEmitter"},decls:16,vars:3,consts:[[2,"max-width","50vw"],[3,"ngSubmit"],["addForm","ngForm"],[1,"row"],["for","input-Kolicina",1,"label","col-12"],[1,"col-10","pr-0"],["fullWidth","","id","input-Kolicina","min","1","name","koli\u010dina","nbInput","","onkeypress","return /[0-9.]/i.test(event.key)","placeholder","0","type","number",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],[1,"pl-0","col-2"],["nbButton","","disabled",""],[1,"row","mt-2"],[1,"col-12"],["fullWidth","","type","submit",1,"btn","btn-primary","w-100",3,"disabled"]],template:function(e,t){if(1&e&&(f.Wb(0,"div",0),f.Wb(1,"form",1,2),f.dc("ngSubmit",function(){return t.addSpecialWaste()}),f.Wb(3,"div",3),f.Wb(4,"label",4),f.Fc(5,"Koli\u010dina koju dodajete: "),f.Vb(),f.Wb(6,"div",5),f.Wb(7,"input",6,7),f.dc("ngModelChange",function(e){return t.specialWasteAmount=e}),f.Vb(),f.Vb(),f.Wb(9,"div",8),f.Wb(10,"button",9),f.Fc(11),f.Vb(),f.Vb(),f.Vb(),f.Wb(12,"div",10),f.Wb(13,"div",11),f.Wb(14,"button",12),f.Fc(15," Dodaj "),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e){var i=f.vc(2),n=f.vc(8);f.Eb(7),f.nc("ngModel",t.specialWasteAmount),f.Eb(4),f.Gc(t.selectedSpecialWaste.unitOfMeasure),f.Eb(3),f.nc("disabled",n.value<1||void 0===n.value&&i.valid)}},directives:[s.w,s.l,s.m,c.Q,s.p,s.b,s.k,s.n,c.t],styles:[""]}),Ge),$e=["addSpecialWaste"];function Be(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",1),f.Wb(1,"div",2),f.Fc(2),f.Vb(),f.Wb(3,"div",2),f.Fc(4),f.Vb(),f.Wb(5,"div",8),f.Wb(6,"i",9),f.dc("click",function(){f.xc(i);var e=t.$implicit;return f.hc().openAddSpecialWasteWindow(e,"production")}),f.Vb(),f.Vb(),f.Vb()}if(2&e){var n=t.$implicit;f.Eb(2),f.Gc(n.name),f.Eb(2),f.Gc(n.desc)}}function He(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",1),f.Wb(1,"div",2),f.Fc(2),f.Vb(),f.Wb(3,"div",2),f.Fc(4),f.Vb(),f.Wb(5,"div",8),f.Wb(6,"i",9),f.dc("click",function(){f.xc(i);var e=t.$implicit;return f.hc().openAddSpecialWasteWindow(e,"import")}),f.Vb(),f.Vb(),f.Vb()}if(2&e){var n=t.$implicit;f.Eb(2),f.Gc(n.name),f.Eb(2),f.Gc(n.desc)}}function Je(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",1),f.Wb(1,"div",2),f.Fc(2),f.Vb(),f.Wb(3,"div",2),f.Fc(4),f.Vb(),f.Wb(5,"div",8),f.Wb(6,"i",9),f.dc("click",function(){f.xc(i);var e=t.$implicit;return f.hc().openAddSpecialWasteWindow(e,"export")}),f.Vb(),f.Vb(),f.Vb()}if(2&e){var n=t.$implicit;f.Eb(2),f.Gc(n.name),f.Eb(2),f.Gc(n.desc)}}function Ye(e,t){if(1&e){var i=f.Xb();f.Wb(0,"add-special-waste-popup",10),f.dc("exitEmitter",function(){return f.xc(i),f.hc().closeSpecialWasteWindow()}),f.Vb()}if(2&e){var n=f.hc();f.nc("selectedSpecialWaste",n.selectedSpecialWaste)("type",n.selectedType)}}var Ze,et=((Ze=function(){function e(t,i,n,s){a(this,e),this.toastrService=t,this.speicalWasteService=i,this.roleService=n,this.windowService=s,this.specialWastes=[]}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.roleService.getOperations(void 0,!1,!0).subscribe(function(t){e.operations=t.specialWasteOperations}),this.updateSpecialWastes()}},{key:"updateSpecialWastes",value:function(){var e=this;this.specialWastes=[],this.speicalWasteService.getCompaniesSpecialWastes(this.roleService.getCompanyID()).subscribe(function(t){e.specialWastes=t,e.productionWastes=e.specialWastes.filter(function(e){return e.operationTypes.includes("Proizvodnja")}),e.importWastes=e.specialWastes.filter(function(e){return e.operationTypes.includes("Uvoz")}),e.exportWastes=e.specialWastes.filter(function(e){return e.operationTypes.includes("Izvoz")})})}},{key:"openAddSpecialWasteWindow",value:function(e,t){this.selectedSpecialWaste=e,this.selectedType=t,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj kolicinu: "+this.selectedSpecialWaste.name})}},{key:"closeSpecialWasteWindow",value:function(){this.windowRef.close(),this.showToast("Uspeh","Uspe\u0161no ste dodali "+this.selectedSpecialWaste.name,"success")}},{key:"showToast",value:function(e,t,i){this.toastrService.show(t,e,{status:i})}}]),e}()).\u0275fac=function(e){return new(e||Ze)(f.Qb(c.Kb),f.Qb(qe.a),f.Qb(V.a),f.Qb(c.Qb))},Ze.\u0275cmp=f.Kb({type:Ze,selectors:[["widget-most-used-special-waste"]],viewQuery:function(e,t){var i;1&e&&f.Lc($e,1,f.P),2&e&&f.uc(i=f.ec())&&(t.addTrashTemplate=i.first)},decls:33,vars:6,consts:[["tabTitle","Proizvodnja",3,"disabled"],[1,"row"],[1,"col-4"],[2,"height","2px","border-width","0","color","gray","background-color","gray"],["class","row",4,"ngFor","ngForOf"],["tabTitle","Uvoz",3,"disabled"],["tabTitle","Izvoz",3,"disabled"],["addSpecialWaste",""],[1,"col-4","text-center"],[1,"fa","fa-plus","add-button",3,"click"],[3,"selectedSpecialWaste","type","exitEmitter"]],template:function(e,t){1&e&&(f.Wb(0,"nb-tabset"),f.Wb(1,"nb-tab",0),f.Wb(2,"div",1),f.Wb(3,"div",2),f.Fc(4,"Naziv"),f.Vb(),f.Wb(5,"div",2),f.Fc(6,"Opis"),f.Vb(),f.Wb(7,"div",2),f.Fc(8,"Dodaj proizvod"),f.Vb(),f.Vb(),f.Rb(9,"hr",3),f.Dc(10,Be,7,2,"div",4),f.Vb(),f.Wb(11,"nb-tab",5),f.Wb(12,"div",1),f.Wb(13,"div",2),f.Fc(14,"Naziv"),f.Vb(),f.Wb(15,"div",2),f.Fc(16,"Opis"),f.Vb(),f.Wb(17,"div",2),f.Fc(18,"Uvezi proizvod"),f.Vb(),f.Vb(),f.Rb(19,"hr",3),f.Dc(20,He,7,2,"div",4),f.Vb(),f.Wb(21,"nb-tab",6),f.Wb(22,"div",1),f.Wb(23,"div",2),f.Fc(24,"Naziv"),f.Vb(),f.Wb(25,"div",2),f.Fc(26,"Opis"),f.Vb(),f.Wb(27,"div",2),f.Fc(28,"Izvezi proizvod"),f.Vb(),f.Vb(),f.Rb(29,"hr",3),f.Dc(30,Je,7,2,"div",4),f.Vb(),f.Vb(),f.Dc(31,Ye,1,2,"ng-template",null,7,f.Ec)),2&e&&(f.Eb(1),f.nc("disabled",!t.operations.production),f.Eb(9),f.nc("ngForOf",t.productionWastes),f.Eb(1),f.nc("disabled",!t.operations.import),f.Eb(9),f.nc("ngForOf",t.importWastes),f.Eb(1),f.nc("disabled",!t.operations.export),f.Eb(9),f.nc("ngForOf",t.exportWastes))},directives:[c.Fb,c.Eb,S.m,Xe],styles:[".add-button[_ngcontent-%COMP%]:hover{color:#2d8ac7;cursor:pointer}.add-button[_ngcontent-%COMP%]{font-size:1.5rem}"]}),Ze),tt=["waste_stats"],it=["trash_stats"];function nt(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div",8),f.Fc(1," Redosled: "),f.Wb(2,"button",5),f.dc("click",function(){return f.xc(i),f.hc().updatePositionMethod(-1)}),f.Rb(3,"i",9),f.Vb(),f.Wb(4,"button",5),f.dc("click",function(){return f.xc(i),f.hc().updatePositionMethod(1)}),f.Rb(5,"i",10),f.Vb(),f.Fc(6," Veli\u010dina: "),f.Wb(7,"nb-select",11),f.dc("selectedChange",function(){return f.xc(i),f.hc().updateSizeMethod()})("ngModelChange",function(e){return f.xc(i),f.hc().size=e}),f.Wb(8,"nb-option",12),f.Fc(9,"XS"),f.Vb(),f.Wb(10,"nb-option",13),f.Fc(11,"S"),f.Vb(),f.Wb(12,"nb-option",14),f.Fc(13,"M"),f.Vb(),f.Wb(14,"nb-option",15),f.Fc(15,"L"),f.Vb(),f.Wb(16,"nb-option",16),f.Fc(17,"XL"),f.Vb(),f.Vb(),f.Vb()}if(2&e){var n=f.hc();f.Eb(7),f.nc("ngModel",n.size)("selected",n.size)}}function at(e,t){if(1&e&&(f.Wb(0,"div"),f.Rb(1,"widget-most-used-trash",17),f.Vb()),2&e){var i=f.hc();f.Eb(1),f.nc("type",i.type)}}function st(e,t){if(1&e&&(f.Wb(0,"div",18),f.Rb(1,"widget-trash-stats",19,20),f.Vb()),2&e){var i=f.hc();f.Eb(1),f.nc("size",i.size)("type",i.type)}}function ot(e,t){1&e&&(f.Wb(0,"div"),f.Rb(1,"widget-transport-permits",17),f.Vb()),2&e&&(f.Eb(1),f.nc("type","transport"))}function ct(e,t){1&e&&(f.Wb(0,"div"),f.Rb(1,"widget-transport-permits",17),f.Vb()),2&e&&(f.Eb(1),f.nc("type","collector"))}function rt(e,t){1&e&&(f.Wb(0,"div"),f.Rb(1,"widget-vehicles"),f.Vb())}function lt(e,t){if(1&e&&(f.Wb(0,"div"),f.Rb(1,"widget-unfinished-operations",17),f.Vb()),2&e){var i=f.hc();f.Eb(1),f.nc("type",i.type)}}function dt(e,t){1&e&&(f.Wb(0,"div"),f.Rb(1,"widget-most-used-special-waste"),f.Vb())}function ut(e,t){if(1&e&&(f.Wb(0,"div",18),f.Rb(1,"widget-special-waste-stats",0,21),f.Vb()),2&e){var i=f.hc();f.Eb(1),f.nc("size",i.size)}}var bt,pt=((bt=function(){function e(t){a(this,e),this.roleService=t,this.updateSize=new f.o,this.updatePosition=new f.o,this.showSettings=!1}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.roleService.getOperations().subscribe(function(t){e.operations=t});var t="";"production"===this.type?t="proizveden":"treatment"===this.type?t="obra\u0111en":"disposal"===this.type?t="odlo\u017een":"cache"===this.type&&(t="skladi\u0161\u0107en"),this.widgetList={most_used_trash:{title:"Naj\u010de\u0161\u0107i ".concat(t," otpad")},trash_stats:{title:"Statistika otpada"},transport_vehicles:{title:"Prevozna sredstva"},transport_permits:{title:"Dozvole za transport"},collector_permits:{title:"Dozvole za sakupljanje"},unfinished_operations:{title:"Nedovr\u0161ene operacije"},most_used_special_waste:{title:"Naj\u010de\u0161\u0107e kori\u0161\u0107eni posebni tokovi otpada"},special_waste_stats:{title:"Statistika posebnih tokova otpada"}}}},{key:"getWidgetTitle",value:function(){return this.widgetList[this.name].title}},{key:"updateSizeMethod",value:function(){this.waste_stats&&this.waste_stats.updateSize(this.size),this.trash_stats&&this.trash_stats.updateSize(this.size),this.updateSize.emit(this.size)}},{key:"updatePositionMethod",value:function(e){this.updatePosition.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||bt)(f.Qb(V.a))},bt.\u0275cmp=f.Kb({type:bt,selectors:[["widget"]],viewQuery:function(e,t){var i;1&e&&(f.Lc(tt,1),f.Lc(it,1)),2&e&&(f.uc(i=f.ec())&&(t.waste_stats=i.first),f.uc(i=f.ec())&&(t.trash_stats=i.first))},inputs:{type:"type",name:"name",size:"size"},outputs:{updateSize:"updateSize",updatePosition:"updatePosition"},decls:18,vars:13,consts:[[3,"size"],[1,"row"],[1,"d-flex","justify-content-start"],[1,"d-flex","flex-fill","justify-content-end"],["class","mr-2",4,"ngIf"],["size","small","nbButton","",3,"click"],[4,"ngIf"],["class","h-100",4,"ngIf"],[1,"mr-2"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"],["size","small",3,"ngModel","selected","selectedChange","ngModelChange"],["value","tiny"],["value","small"],["value","medium"],["value","large"],["value","giant"],[3,"type"],[1,"h-100"],[3,"size","type"],["trash_stats",""],["waste_stats",""]],template:function(e,t){1&e&&(f.Wb(0,"nb-card",0),f.Wb(1,"nb-card-header"),f.Wb(2,"div",1),f.Wb(3,"div",2),f.Fc(4),f.Vb(),f.Wb(5,"div",3),f.Dc(6,nt,18,2,"div",4),f.Wb(7,"button",5),f.dc("click",function(){return t.showSettings=!t.showSettings}),f.Rb(8,"i"),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Wb(9,"nb-card-body"),f.Dc(10,at,2,1,"div",6),f.Dc(11,st,3,2,"div",7),f.Dc(12,ot,2,1,"div",6),f.Dc(13,ct,2,1,"div",6),f.Dc(14,rt,2,0,"div",6),f.Dc(15,lt,2,1,"div",6),f.Dc(16,dt,2,0,"div",6),f.Dc(17,ut,3,1,"div",7),f.Vb(),f.Vb()),2&e&&(f.nc("size",t.size),f.Eb(4),f.Gc(t.getWidgetTitle()),f.Eb(2),f.nc("ngIf",t.showSettings),f.Eb(2),f.Gb(t.showSettings?"fa fa-times":"fa fa-cog"),f.Eb(2),f.nc("ngIf","most_used_trash"===t.name),f.Eb(1),f.nc("ngIf","trash_stats"===t.name),f.Eb(1),f.nc("ngIf","transport_permits"===t.name),f.Eb(1),f.nc("ngIf","collector_permits"===t.name),f.Eb(1),f.nc("ngIf","transport_vehicles"===t.name),f.Eb(1),f.nc("ngIf","unfinished_operations"===t.name),f.Eb(1),f.nc("ngIf","most_used_special_waste"===t.name),f.Eb(1),f.nc("ngIf","special_waste_stats"===t.name))},directives:[c.x,c.A,S.n,c.t,c.w,c.qb,s.k,s.n,c.fb,Z,L,Me,_e,Ke,et,O],styles:[".right[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:right}"]}),bt);function ht(e,t){if(1&e){var i=f.Xb();f.Wb(0,"div"),f.Wb(1,"widget",7),f.dc("updateSize",function(e){f.xc(i);var n=t.$implicit;return f.hc(2).updateSizeMethod(e,n)})("updatePosition",function(e){f.xc(i);var n=t.$implicit,a=f.hc().$implicit;return f.hc().updateWidgetPositionMethod(e,n,a.widgetList)}),f.Vb(),f.Vb()}if(2&e){var n=t.$implicit,a=f.hc().$implicit,s=f.hc();f.Gb(s.WIDGET_SIZES[n.widgetSize]),f.Eb(1),f.nc("size",n.widgetSize)("name",n.widgetTitle)("type",a.groupType)}}function vt(e,t){if(1&e){var i=f.Xb();f.Wb(0,"nb-accordion-item",2),f.Wb(1,"nb-accordion-item-header"),f.Wb(2,"div",3),f.Wb(3,"widget-group-header",4),f.dc("updatePosition",function(e){f.xc(i);var n=t.$implicit;return f.hc().updateGroupPositionMethod(e,n)}),f.Vb(),f.Vb(),f.Vb(),f.Wb(4,"nb-accordion-item-body"),f.Wb(5,"div",5),f.Dc(6,ht,2,5,"div",6),f.Vb(),f.Vb(),f.Vb()}if(2&e){var n=t.$implicit;f.Eb(3),f.nc("title",n.groupTitle)("status",n.groupColor),f.Eb(3),f.nc("ngForOf",n.widgetList)}}var ft,gt,mt,Wt,Vt,yt=((gt=function(){function e(t,i){a(this,e),this.roleService=t,this.widgetService=i,this.widgetSettings={group:[],username:""},this.WIDGET_SIZES=w.h}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.roleService.getOperations().subscribe(function(t){e.operations=t}),this.widgetService.getWidgetSettings(this.roleService.getUsername(),this.operations).subscribe(function(t){e.widgetSettings=t,null===e.widgetSettings&&e.widgetService.initDefaultWidgetSettings(e.operations,e.roleService.getUsername()).subscribe(function(t){e.widgetSettings=t})})}},{key:"updateSizeMethod",value:function(e,t){t.widgetSize=e}},{key:"updateGroupPositionMethod",value:function(e,t){var i,n=t.groupPosition,a=n+e;a<0||a>this.widgetSettings.group.length-1||(t.groupPosition=a,this.widgetSettings.group[a].groupPosition=n,i=[this.widgetSettings.group[a],this.widgetSettings.group[n]],this.widgetSettings.group[n]=i[0],this.widgetSettings.group[a]=i[1])}},{key:"updateWidgetPositionMethod",value:function(e,t,i){var n,a=t.widgetPosition,s=a+e;s<0||s>i.length-1||(t.widgetPosition=s,i[s].widgetPosition=a,n=[i[s],i[a]],i[a]=n[0],i[s]=n[1])}},{key:"ngOnDestroy",value:function(){this.widgetService.updateWidgetSettings(this.widgetSettings,this.widgetSettings.username,"username").subscribe(function(e){})}}]),e}()).\u0275fac=function(e){return new(e||gt)(f.Qb(V.a),f.Qb(y.a))},gt.\u0275cmp=f.Kb({type:gt,selectors:[["ngx-dashboard"]],decls:2,vars:1,consts:[["multi",""],["collapsed","false",4,"ngFor","ngForOf"],["collapsed","false"],[1,"flex-fill",2,"height","4.4rem"],[3,"title","status","updatePosition"],[1,"row"],[3,"class",4,"ngFor","ngForOf"],[3,"size","name","type","updateSize","updatePosition"]],template:function(e,t){1&e&&(f.Wb(0,"nb-accordion",0),f.Dc(1,vt,7,3,"nb-accordion-item",1),f.Vb()),2&e&&(f.Eb(1),f.nc("ngForOf",t.widgetSettings.group))},directives:[c.g,S.m,c.i,c.j,x,c.h,pt],styles:[".nb-theme-default   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-dark   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-cosmic   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-corporate   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]{box-shadow:none;background-color:transparent}[_nghost-%COMP%]   nb-accordion-item[_ngcontent-%COMP%]{margin:0;padding:0;background-color:transparent}[_nghost-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{color:transparent;padding-bottom:0;margin-bottom:0}[_nghost-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]{padding-top:0;background-color:transparent}"]}),gt),wt=((ft=function(){function e(t){a(this,e),this.menuService=t}return o(e,[{key:"goToHome",value:function(){this.menuService.navigateHome()}}]),e}()).\u0275fac=function(e){return new(e||ft)(f.Qb(c.db))},ft.\u0275cmp=f.Kb({type:ft,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["nbButton","","fullWidth","","type","button",1,"home-button",3,"click"]],template:function(e,t){1&e&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Wb(2,"nb-card"),f.Wb(3,"nb-card-body"),f.Wb(4,"div",2),f.Wb(5,"h2",3),f.Fc(6,"404 Ne postoji"),f.Vb(),f.Wb(7,"small",4),f.Fc(8,"Stranica koju ste tra\u017eili ne postoji"),f.Vb(),f.Wb(9,"button",5),f.dc("click",function(){return t.goToHome()}),f.Fc(10," Vrati me na po\u010detnu "),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb(),f.Vb())},directives:[c.x,c.w,c.t],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),ft),St=i("mgFL"),Mt=[{path:"",component:(mt=function(){function e(t,i){var n=this;a(this,e),this.roleService=t,this.authService=i,this.menu=[],this.authService.getToken().subscribe(function(e){var t=e.getPayload().data.company.operations;n.subsrciber=n.roleService.getOperationsMenu(t).subscribe(function(e){n.menu=e})})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.menu=[],this.subsrciber.unsubscribe()}}]),e}(),mt.\u0275fac=function(e){return new(e||mt)(f.Qb(V.a),f.Qb(ie.g))},mt.\u0275cmp=f.Kb({type:mt,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(f.Wb(0,"ngx-one-column-layout"),f.Rb(1,"nb-menu",0),f.Rb(2,"router-outlet"),f.Vb()),2&e&&(f.Eb(1),f.nc("items",t.menu))},directives:[St.a,c.bb,W.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),mt),children:[{path:"dashboard",component:yt},{path:"profile",loadChildren:function(){return i.e(11).then(i.bind(null,"723k")).then(function(e){return e.ProfileModule})}},{path:"storage",loadChildren:function(){return Promise.resolve().then(i.bind(null,"RPbl")).then(function(e){return e.StorageModule})}},{path:"trash",loadChildren:function(){return Promise.resolve().then(i.bind(null,"5IJp")).then(function(e){return e.TrashModule})}},{path:"",redirectTo:"/auth/redirect",pathMatch:"full"},{path:"**",component:wt}]}],kt=((Wt=function e(){a(this,e)}).\u0275fac=function(e){return new(e||Wt)},Wt.\u0275mod=f.Ob({type:Wt}),Wt.\u0275inj=f.Nb({imports:[[W.g.forChild(Mt)],W.g]}),Wt),xt=i("RPbl"),Tt=((Vt=function e(){a(this,e)}).\u0275fac=function(e){return new(e||Vt)},Vt.\u0275mod=f.Ob({type:Vt}),Vt.\u0275inj=f.Nb({providers:[u.a,c.Kb,d.a,l.a,b.a],imports:[[kt,p.a,c.cb,c.u,g,m.TrashModule,xt.StorageModule,c.B,c.Gb,c.P,s.e,c.M,c.R,c.kb,c.ib,r.c]]}),Vt)}}])}();