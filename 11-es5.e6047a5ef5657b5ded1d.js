!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function i(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"723k":function(n,t,a){"use strict";a.r(t),a.d(t,"ProfileModule",function(){return mn});var r=a("ofXK"),o=a("3Pt+"),l=a("aceb"),s=a("RS3s"),b=a("dgmN"),d=a("bJfm"),c=a("RPbl"),u=a("tyNb"),g=a("LRne"),p=a("SxV6"),m=a("bS1W"),f=a("ud2R"),v=a("7wOV"),h=a("fo3O"),V=a("fXoL");function W(e,n){if(1&e&&(V.Wb(0,"nb-option",8),V.Fc(1),V.Vb()),2&e){var i=n.$implicit;V.nc("value",i),V.Eb(1),V.Gc(i.code+"|"+i.name)}}function y(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div"),V.Wb(1,"div",2),V.Wb(2,"div",3),V.Wb(3,"div",4),V.Wb(4,"div",5),V.Wb(5,"label",13),V.Fc(6,"Odaberite dozvolu koju \u017eelite da obnovite: "),V.Vb(),V.Vb(),V.Wb(7,"div",5),V.Wb(8,"nb-select",14),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().selectedPermit=e}),V.Dc(9,W,2,2,"nb-option",15),V.ic(10,"async"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=V.hc();V.Eb(8),V.nc("ngModel",t.selectedPermit),V.Eb(1),V.nc("ngForOf",V.jc(10,2,t.permits$))}}function M(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div"),V.Wb(1,"div",2),V.Wb(2,"div",3),V.Wb(3,"div",4),V.Wb(4,"div",5),V.Wb(5,"label",16),V.Fc(6,"Odaberite vrstu otpada: "),V.Vb(),V.Vb(),V.Wb(7,"div",5),V.Wb(8,"nb-radio-group",17),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().trashType=e}),V.Wb(9,"nb-radio",8),V.Fc(10,"Neopasni otpad"),V.Vb(),V.Wb(11,"nb-radio",8),V.Fc(12,"Opasni otpad"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(13,"div",2),V.Wb(14,"div",3),V.Wb(15,"div",4),V.Wb(16,"div",5),V.Wb(17,"label",18),V.Fc(18,"Odaberite vrstu dozvole koju \u017eelite da izradite: "),V.Vb(),V.Vb(),V.Wb(19,"div",5),V.Wb(20,"nb-select",19),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().permitType=e}),V.Wb(21,"nb-option",8),V.Fc(22,"Transport"),V.Vb(),V.Wb(23,"nb-option",8),V.Fc(24,"Sakupljac"),V.Vb(),V.Wb(25,"nb-option",8),V.Fc(26,"Tretman"),V.Vb(),V.Wb(27,"nb-option",8),V.Fc(28,"Odlaganje"),V.Vb(),V.Wb(29,"nb-option",8),V.Fc(30,"Skladi\u0161tenje"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=V.hc();V.Eb(8),V.nc("ngModel",t.trashType),V.Eb(1),V.nc("value","safe"),V.Eb(2),V.nc("value","unsafe"),V.Eb(9),V.nc("ngModel",t.permitType),V.Eb(1),V.nc("value","transport"),V.Eb(2),V.nc("value","collector"),V.Eb(2),V.nc("value","treatment"),V.Eb(2),V.nc("value","disposal"),V.Eb(2),V.nc("value","cache")}}function w(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div"),V.Wb(1,"div",2),V.Wb(2,"div",3),V.Wb(3,"div",4),V.Wb(4,"div",5),V.Wb(5,"label",20),V.Fc(6,"Email za kontakt: "),V.Vb(),V.Vb(),V.Wb(7,"div",5),V.Wb(8,"input",21),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().email=e}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(9,"div",2),V.Wb(10,"div",3),V.Wb(11,"div",4),V.Wb(12,"div",5),V.Wb(13,"label",22),V.Fc(14,"Dodatno:"),V.Vb(),V.Vb(),V.Wb(15,"div",5),V.Wb(16,"textarea",23),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().message=e}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=V.hc();V.Eb(8),V.nc("ngModel",t.email),V.Eb(8),V.nc("ngModel",t.message)}}var C,E=((C=function(){function n(i,t,a,r,o){e(this,n),this.permitService=i,this.roleService=t,this.userService=a,this.router=r,this.toastrService=o}return i(n,[{key:"ngOnInit",value:function(){var e=this;this.permitService.getCompaniesPermits(this.roleService.getCompanyID()).pipe(Object(p.a)()).subscribe(function(n){e.permits=n,e.permits$=Object(g.a)(e.permits)});var n=this.roleService.getUsername();this.userService.getUser(n,"username").subscribe(function(n){e.email=n.email})}},{key:"sendRequest",value:function(){var e=this;"renewal"===this.requestType?this.permitService.sendPermitRequest(this.email,this.message,this.requestType,this.selectedPermit._id).subscribe(function(n){n?(e.toastrService.showToast("Uspeh","Uspe\u0161no ste poslali zahtev!","success"),setTimeout(function(){e.router.navigate(["pages"])},1500)):e.toastrService.showToast("Gre\u0161ka","Pogledajte opet sve informacije!","warning")},function(n){e.toastrService.showToast("Gre\u0161ka","Pogledajte opet sve informacije!","warning")}):this.permitService.sendPermitRequest(this.email,this.message,this.requestType,void 0,this.trashType,this.permitType).subscribe(function(n){n?(e.toastrService.showToast("Uspeh","Uspe\u0161no ste poslali zahtev!","success"),setTimeout(function(){e.router.navigate(["pages"])},1500)):e.toastrService.showToast("Gre\u0161ka","Pogledajte opet sve informacije!","warning")},function(n){e.toastrService.showToast("Gre\u0161ka","Pogledajte opet sve informacije!","warning")})}}]),n}()).\u0275fac=function(e){return new(e||C)(V.Qb(m.a),V.Qb(f.a),V.Qb(h.a),V.Qb(u.c),V.Qb(v.a))},C.\u0275cmp=V.Kb({type:C,selectors:[["permit-renewal"]],decls:25,vars:6,consts:[[1,"container-fluid"],[3,"ngSubmit"],[1,"row","my-1"],[1,"col-6"],[1,"row"],[1,"col-12"],["for","input-requestType",1,"label"],["id","input-requestType","name","requestType",3,"ngModel","ngModelChange"],[3,"value"],[4,"ngIf"],[1,"row","mt-3","justify-content-end","d-flex"],[1,"col-3"],["nbButton","","fullWidth","","status","primary","type","submit"],["for","input-permitSelect",1,"label"],["placeholder","Dozvola #1","name","permitSelect","fullWidth","","required","","id","input-permitSelect",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","input-trashType",1,"label"],["id","input-trashType","name","trashType",3,"ngModel","ngModelChange"],["for","input-permitCreate",1,"label"],["placeholder","Vrsta dozvole","name","permitType","fullWidth","","required","","id","input-permitCreate",3,"ngModel","ngModelChange"],["for","input-email",1,"label"],["nbInput","","fullWidth","","id","input-email","required","","type","email","disabled","","name","email",3,"ngModel","ngModelChange"],["for","input-message",1,"label"],["id","input-message","name","message","placeholder","Dodajte ne\u0161to dodatno...","nbInput","","fullWidth","","type","text",3,"ngModel","ngModelChange"]],template:function(e,n){1&e&&(V.Wb(0,"nb-card"),V.Wb(1,"nb-card-header"),V.Fc(2,"Zahtev za obnovu/izradu dozvole"),V.Vb(),V.Wb(3,"nb-card-body"),V.Wb(4,"div",0),V.Wb(5,"form",1),V.dc("ngSubmit",function(){return n.sendRequest()}),V.Wb(6,"div",2),V.Wb(7,"div",3),V.Wb(8,"div",4),V.Wb(9,"div",5),V.Wb(10,"label",6),V.Fc(11,"Odaberite vrstu zahteva: "),V.Vb(),V.Vb(),V.Wb(12,"div",5),V.Wb(13,"nb-radio-group",7),V.dc("ngModelChange",function(e){return n.requestType=e}),V.Wb(14,"nb-radio",8),V.Fc(15,"Obnova"),V.Vb(),V.Wb(16,"nb-radio",8),V.Fc(17,"Izrada"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Dc(18,y,11,4,"div",9),V.Dc(19,M,31,9,"div",9),V.Dc(20,w,17,2,"div",9),V.Wb(21,"div",10),V.Wb(22,"div",11),V.Wb(23,"button",12),V.Fc(24,"Po\u0161alji zahtev"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()),2&e&&(V.Eb(13),V.nc("ngModel",n.requestType),V.Eb(1),V.nc("value","renewal"),V.Eb(2),V.nc("value","creation"),V.Eb(2),V.nc("ngIf","renewal"===n.requestType),V.Eb(1),V.nc("ngIf","creation"===n.requestType),V.Eb(1),V.nc("ngIf",""!==n.requestType))},directives:[l.A,l.D,l.z,o.w,o.l,o.m,l.pb,o.k,o.n,l.ob,r.n,l.t,l.tb,o.s,r.m,l.ib,l.T,o.b],pipes:[r.b],styles:[""]}),C),I=a("McNs"),F=a("kBrA"),k=["viewTrash"];function D(e,n){1&e&&(V.Wb(0,"p",30),V.Fc(1," Naziv dozvole je obavezan! "),V.Vb())}function x(e,n){if(1&e&&(V.Ub(0),V.Dc(1,D,2,0,"p",29),V.Tb()),2&e){V.hc();var i=V.vc(9);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required)}}var S=function(){return{standalone:!0}};function N(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",10),V.Wb(1,"div",11),V.Wb(2,"label",31),V.Fc(3,"Skladi\u0161te:"),V.Vb(),V.Vb(),V.Wb(4,"div",9),V.Wb(5,"input",32),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().$implicit.storage.name=e}),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=V.hc().$implicit;V.Eb(5),V.nc("ngModel",t.storage.name)("ngModelOptions",V.qc(2,S))}}function T(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div"),V.Wb(1,"div",3),V.Wb(2,"div",9),V.Wb(3,"div",10),V.Wb(4,"div",11),V.Wb(5,"label",12),V.Fc(6,"Naziv dozvole:"),V.Vb(),V.Vb(),V.Wb(7,"div",9),V.Wb(8,"input",13,14),V.dc("ngModelChange",function(e){return n.$implicit.name=e}),V.Vb(),V.Dc(10,x,2,1,"ng-container",15),V.Vb(),V.Vb(),V.Wb(11,"div",10),V.Wb(12,"div",11),V.Wb(13,"label",16),V.Fc(14,"\u0160ifra dozvole:"),V.Vb(),V.Vb(),V.Wb(15,"div",9),V.Wb(16,"input",17),V.dc("ngModelChange",function(e){return n.$implicit.code=e}),V.Vb(),V.Vb(),V.Vb(),V.Wb(17,"div",10),V.Wb(18,"div",11),V.Wb(19,"label",18),V.Fc(20,"Datum trajanja dozvole:"),V.Vb(),V.Vb(),V.Wb(21,"div",19),V.Rb(22,"input",20),V.Vb(),V.Wb(23,"button",21),V.Fc(24,"-"),V.Vb(),V.Wb(25,"div",22),V.Rb(26,"input",23),V.Vb(),V.Vb(),V.Vb(),V.Wb(27,"div",9),V.Wb(28,"div",10),V.Wb(29,"div",11),V.Wb(30,"label",24),V.Fc(31,"Vrsta dozvole:"),V.Vb(),V.Vb(),V.Wb(32,"div",9),V.Wb(33,"input",25),V.dc("ngModelChange",function(e){return n.$implicit.type=e}),V.Vb(),V.Vb(),V.Vb(),V.Dc(34,N,6,3,"div",26),V.Wb(35,"div",10),V.Wb(36,"div",11),V.Rb(37,"label",27),V.Vb(),V.Wb(38,"div",9),V.Wb(39,"button",28),V.dc("click",function(){V.xc(i);var e=n.$implicit;return V.hc().openPermitsTrashWindow(e)}),V.Fc(40,"Pogledaj listu otpada "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=n.$implicit,a=V.vc(9),r=V.hc();V.Eb(8),V.nc("ngModel",t.name)("ngModelOptions",V.qc(16,S))("maxlength",r.getConfigValue("forms.validation.permitName.maxLength"))("minlength",r.getConfigValue("forms.validation.permitName.minLength"))("required",r.getConfigValue("forms.validation.permitName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",r.inputsDisabled),V.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),V.Eb(2),V.nc("ngIf",a.invalid&&a.touched),V.Eb(6),V.nc("ngModel",t.code)("ngModelOptions",V.qc(17,S)),V.Eb(6),V.nc("placeholder",r.getDate(t.dateCreation)),V.Eb(4),V.nc("placeholder",r.getDate(t.dateExpiration)),V.Eb(7),V.nc("ngModel",t.type)("ngModelOptions",V.qc(18,S)),V.Eb(1),V.nc("ngIf",void 0!==t.storage)}}function q(e,n){if(1&e){var i=V.Xb();V.Wb(0,"view-permits-trash-popup",33),V.dc("callUpdatePermitsTrash",function(e){return V.xc(i),V.hc().updatePermitsTrashMethod(e)}),V.Vb()}if(2&e){var t=V.hc();V.nc("selectedPermit",t.selectedPermit)}}var z,P=((z=function(){function n(i,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;e(this,n),this.permitService=i,this.roleService=t,this.options=a,this.toastrService=r,this.datePipe=o,this.windowService=l,this.permits=[],this.inputsDisabled=!0}return i(n,[{key:"ngOnInit",value:function(){var e=this;this.permitService.getCompaniesPermits(this.roleService.getCompanyID()).pipe(Object(p.a)()).subscribe(function(n){e.permits=n})}},{key:"getConfigValue",value:function(e){return Object(I.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updatePermits",value:function(e){var n=this;e.valid?(this.permits.forEach(function(e){return n.permitService.updatePermit(e,e._id).subscribe(function(e){})}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"openPermitsTrashWindow",value:function(e){this.selectedPermit=e,this.windowRef=this.windowService.open(this.viewTrash,{title:"Lista otpada"})}},{key:"updatePermitsTrashMethod",value:function(e){this.selectedPermit.trashList=e,this.permitService.updatePermit(this.selectedPermit,this.selectedPermit._id).subscribe(function(e){}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.windowRef.close()}},{key:"getDate",value:function(e){return this.datePipe.transform(e,"dd-MM-yyyy")}},{key:"showToast",value:function(e,n,i){this.toastrService.show(n,e,{status:i})}}]),n}()).\u0275fac=function(e){return new(e||z)(V.Qb(m.a),V.Qb(f.a),V.Qb(I.a),V.Qb(l.Mb),V.Qb(r.e),V.Qb(l.Ub))},z.\u0275cmp=V.Kb({type:z,selectors:[["profile-permit"]],viewQuery:function(e,n){var i;1&e&&V.Lc(k,1,V.P),2&e&&V.uc(i=V.ec())&&(n.viewTrash=i.first)},decls:17,vars:3,consts:[[3,"ngSubmit"],["formPermit","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["viewTrash",""],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-permitName",1,"label"],["fullWidth","","id","input-permitName","name","permitName","nbInput","","type","text",3,"ngModel","ngModelOptions","maxlength","minlength","required","status","disabled","ngModelChange"],["permitName","ngModel"],[4,"ngIf"],["for","input-permitCode",1,"label"],["disabled","","fullWidth","","id","input-permitCode","name","permitCode","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["for","input-dateCreation",1,"label"],[1,"col-5","mr-0","pr-0"],["disabled","","fullWidth","","id","input-dateCreation","name","dateCreation","nbInput","","type","text",3,"placeholder"],["disabled","","nbButton","",1,"mx-0","px-0","col-1"],[1,"col-5","ml-0","pl-0"],["disabled","","fullWidth","","id","input-dateExpiration","name","dateExpiration","nbInput","","type","text",3,"placeholder"],["for","input-permiType",1,"label"],["disabled","","fullWidth","","id","input-permiType","name","permiType","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["class","row mb-2",4,"ngIf"],[1,"label"],["nbButton","","fullWidth","","status","success","type","button",3,"click"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-permitStorage",1,"label"],["disabled","","fullWidth","","id","input-permitStorage","name","permitStorage","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],[3,"selectedPermit","callUpdatePermitsTrash"]],template:function(e,n){if(1&e){var i=V.Xb();V.Wb(0,"nb-card"),V.Wb(1,"nb-card-header"),V.Fc(2,"Dozvole"),V.Vb(),V.Wb(3,"nb-card-body"),V.Wb(4,"form",0,1),V.dc("ngSubmit",function(){V.xc(i);var e=V.vc(5);return n.updatePermits(e)}),V.Dc(6,T,41,19,"div",2),V.Wb(7,"div",3),V.Rb(8,"div",4),V.Wb(9,"div",5),V.Wb(10,"button",6),V.dc("click",function(){return n.enableInputs()}),V.Fc(11," IZMENI "),V.Vb(),V.Vb(),V.Wb(12,"div",5),V.Wb(13,"button",7),V.Fc(14,"SA\u010cUVAJ"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Dc(15,q,1,1,"ng-template",null,8,V.Ec)}2&e&&(V.Eb(6),V.nc("ngForOf",n.permits),V.Eb(4),V.nc("disabled",!n.inputsDisabled),V.Eb(3),V.nc("disabled",n.inputsDisabled))},directives:[l.A,l.D,l.z,o.w,o.l,o.m,r.m,l.t,l.T,o.b,o.k,o.n,o.f,o.g,o.s,r.n,F.a],styles:[""]}),z),j=a("H5EB");function L(e,n){1&e&&(V.Wb(0,"p",19),V.Fc(1," Registarski broj tablice je obavezan! "),V.Vb())}function O(e,n){1&e&&(V.Wb(0,"p",19),V.Fc(1," Registarski broj tablice mora biti validan! "),V.Vb())}function U(e,n){if(1&e&&(V.Ub(0),V.Dc(1,L,2,0,"p",18),V.Dc(2,O,2,0,"p",18),V.Tb()),2&e){V.hc();var i=V.vc(9);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.pattern)}}var R=function(){return{standalone:!0}};function Q(e,n){if(1&e&&(V.Wb(0,"div"),V.Wb(1,"div",8),V.Wb(2,"div",9),V.Wb(3,"div",10),V.Wb(4,"div",11),V.Wb(5,"label",12),V.Fc(6,"Registarski broj tablice:"),V.Vb(),V.Vb(),V.Wb(7,"div",9),V.Wb(8,"input",13,14),V.dc("ngModelChange",function(e){return n.$implicit.licensePlate=e}),V.Vb(),V.Dc(10,U,3,2,"ng-container",15),V.Vb(),V.Vb(),V.Wb(11,"div",10),V.Wb(12,"div",11),V.Wb(13,"label",16),V.Fc(14,"Vrsta vozila:"),V.Vb(),V.Vb(),V.Wb(15,"div",9),V.Rb(16,"input",17),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()),2&e){var i=n.$implicit,t=V.vc(9),a=V.hc();V.Eb(8),V.nc("ngModel",i.licensePlate)("ngModelOptions",V.qc(7,R))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",a.inputsDisabled),V.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),V.Eb(2),V.nc("ngIf",t.invalid&&t.touched),V.Eb(6),V.nc("placeholder",i.type)}}var A,B=((A=function(){function n(i,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;e(this,n),this.vehicleService=i,this.roleService=t,this.options=a,this.toastrService=r,this.vehicles=[],this.inputsDisabled=!0}return i(n,[{key:"ngOnInit",value:function(){var e=this;this.vehicleService.getCompaniesVehicles(this.roleService.getCompanyID()).pipe(Object(p.a)()).subscribe(function(n){e.vehicles=n})}},{key:"getConfigValue",value:function(e){return Object(I.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updatePrevoznoSredstvo",value:function(e){var n=this;e.valid?(this.vehicles.forEach(function(e){return n.vehicleService.updateVehicle(e,e._id).subscribe(function(e){})}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,n,i){this.toastrService.show(n,e,{status:i})}}]),n}()).\u0275fac=function(e){return new(e||A)(V.Qb(j.a),V.Qb(f.a),V.Qb(I.a),V.Qb(l.Mb))},A.\u0275cmp=V.Kb({type:A,selectors:[["profile-vehicle"]],decls:15,vars:3,consts:[[3,"ngSubmit"],["formVehicle","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],[1,"row","mt-3"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-licensePlate",1,"label"],["required","","pattern","([A-\u017d]{2})-(\\d{3,4})-([A-\u017d]{2})","fullWidth","","id","input-licensePlate","name","licensePlate","nbInput","","type","text",3,"ngModel","ngModelOptions","status","disabled","ngModelChange"],["licensePlate","ngModel"],[4,"ngIf"],["for","input-type",1,"label"],["fullWidth","","disabled","","id","input-type","name","type","nbInput","","type","text",3,"placeholder"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,n){if(1&e){var i=V.Xb();V.Wb(0,"nb-card"),V.Wb(1,"nb-card-header"),V.Fc(2,"Vozila"),V.Vb(),V.Wb(3,"nb-card-body"),V.Wb(4,"form",0,1),V.dc("ngSubmit",function(){V.xc(i);var e=V.vc(5);return n.updatePrevoznoSredstvo(e)}),V.Dc(6,Q,17,8,"div",2),V.Wb(7,"div",3),V.Rb(8,"div",4),V.Wb(9,"div",5),V.Wb(10,"button",6),V.dc("click",function(){return n.enableInputs()}),V.Fc(11," IZMENI "),V.Vb(),V.Vb(),V.Wb(12,"div",5),V.Wb(13,"button",7),V.Fc(14,"SA\u010cUVAJ"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}2&e&&(V.Eb(6),V.nc("ngForOf",n.vehicles),V.Eb(4),V.nc("disabled",!n.inputsDisabled),V.Eb(3),V.nc("disabled",n.inputsDisabled))},directives:[l.A,l.D,l.z,o.w,o.l,o.m,r.m,l.t,l.T,o.b,o.s,o.q,o.k,o.n,r.n],styles:[""]}),A);function $(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Ime je obavezno! "),V.Vb())}function X(e,n){if(1&e&&(V.Wb(0,"p",43),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Ic(" Ime mora da bude du\u017ee od ",i.getConfigValue("forms.validation.firstName.minLength")," a kra\u0107e od ",i.getConfigValue("forms.validation.firstName.maxLength")," ")}}function K(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Ime mora biti validno! "),V.Vb())}function G(e,n){if(1&e&&(V.Ub(0),V.Dc(1,$,2,0,"p",42),V.Dc(2,X,2,2,"p",42),V.Dc(3,K,2,0,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(10);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength)),V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.pattern)}}function Z(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Prezime je obavezno! "),V.Vb())}function _(e,n){if(1&e&&(V.Wb(0,"p",43),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Ic(" Prezime mora da bude du\u017ee od ",i.getConfigValue("forms.validation.lastName.minLength")," a kra\u0107e od ",i.getConfigValue("forms.validation.lastName.maxLength")," ")}}function J(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Prezime mora biti validno! "),V.Vb())}function H(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Z,2,0,"p",42),V.Dc(2,_,2,2,"p",42),V.Dc(3,J,2,0,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(18);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength)),V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.pattern)}}function Y(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Email je obavezan! "),V.Vb())}function ee(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Email mora biti validan! "),V.Vb())}function ne(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Y,2,0,"p",42),V.Dc(2,ee,2,0,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(26);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.pattern)}}function ie(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Korisni\u010dko ime je obavezno! "),V.Vb())}function te(e,n){if(1&e&&(V.Wb(0,"p",43),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Ic(" Korisni\u010dko ime mora da bude du\u017ee od ",i.getConfigValue("forms.validation.username.minLength")," a kra\u0107e od ",i.getConfigValue("forms.validation.username.maxLength")," ")}}function ae(e,n){if(1&e&&(V.Ub(0),V.Dc(1,ie,2,0,"p",42),V.Dc(2,te,2,2,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(34);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function re(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Telefon je obavezan! "),V.Vb())}function oe(e,n){if(1&e&&(V.Wb(0,"p",43),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Ic(" Telefon mora da bude du\u017ei od ",i.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",i.getConfigValue("forms.validation.phone.maxLength")," ")}}function le(e,n){if(1&e&&(V.Ub(0),V.Dc(1,re,2,0,"p",42),V.Dc(2,oe,2,2,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(42);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function se(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," \u0160ifra je obavezna! "),V.Vb())}function be(e,n){if(1&e&&(V.Wb(0,"p",43),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Hc(" \u0160ifra ne sme biti kra\u0107a od ",i.getConfigValue("forms.validation.password.minLength"),"! ")}}function de(e,n){if(1&e&&(V.Ub(0),V.Dc(1,se,2,0,"p",42),V.Dc(2,be,2,1,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(50);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function ce(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Nova \u0161ifra je obavezna! "),V.Vb())}function ue(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Nova \u0161ifra ne mo\u017ee da se podudara sa starom \u0161ifrom! "),V.Vb())}function ge(e,n){if(1&e&&(V.Wb(0,"p",43),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Hc(" \u0160ifra ne sme biti kra\u0107a od ",i.getConfigValue("forms.validation.password.minLength"),"! ")}}function pe(e,n){if(1&e&&(V.Ub(0),V.Dc(1,ce,2,0,"p",42),V.Dc(2,ue,2,0,"p",42),V.Dc(3,ge,2,1,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(61),t=V.vc(50);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",i.value===t.value),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function me(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," Ponovna \u0161ifra je obavezna! "),V.Vb())}function fe(e,n){1&e&&(V.Wb(0,"p",43),V.Fc(1," \u0160ifra se ne poklapa sa ve\u0107 upisanom \u0161ifrom! "),V.Vb())}function ve(e,n){if(1&e&&(V.Ub(0),V.Dc(1,me,2,0,"p",42),V.Dc(2,fe,2,0,"p",42),V.Tb()),2&e){V.hc();var i=V.vc(69),t=V.vc(61);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",t.value!==i.value)}}var he,Ve=((he=function(){function n(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e(this,n),this.userService=i,this.options=t,this.toastrService=a,this.roleService=r,this.authService=o,this.showPassword="eye",this.oldPassword="",this.newPassword="",this.retypePassword="",this.user={email:"",firstName:"",lastName:"",password:"",phone:"",role:"",username:""},this.inputsDisabled=!0}return i(n,[{key:"ngOnInit",value:function(){var e=this;this.userService.getUserProfile(this.roleService.getUsername()).pipe(Object(p.a)()).subscribe(function(n){e.user=n})}},{key:"getConfigValue",value:function(e){return Object(I.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"setNewPassword",value:function(e){var n=this;e.disabled=!0,this.userService.changePassword(this.user._id,this.oldPassword,this.newPassword).subscribe(function(e){e?n.showToast("Uspeh","Uspe\u0161no ste promenili \u0161ifru!","success"):n.showToast("Gre\u0161ka","Proverite \u0161ifru!","danger")},function(e){n.showToast("Gre\u0161ka","Proverite \u0161ifru!","danger")}),e.disabled=!1}},{key:"updateUser",value:function(e){if(e.valid){this.userService.updateUser(this.user,this.user.username,"username").subscribe(function(e){}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0;var n=null;this.authService.getToken().subscribe(function(e){n=e}),this.authService.refreshToken("email",n).subscribe(function(e){})}else this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,n,i){this.toastrService.show(n,e,{status:i})}}]),n}()).\u0275fac=function(e){return new(e||he)(V.Qb(h.a),V.Qb(I.a),V.Qb(l.Mb),V.Qb(f.a),V.Qb(I.g))},he.\u0275cmp=V.Kb({type:he,selectors:[["profile-user"]],decls:85,vars:66,consts:[[3,"ngSubmit"],["formKorisnik","ngForm"],[1,"row"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-firstName",1,"label"],[1,"col-8"],["fullWidth","","id","input-firstName","name","firstName","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["firstName","ngModel"],[4,"ngIf"],["for","input-lastName",1,"label"],["fullWidth","","id","input-lastName","name","lastName","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["lastName","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["email","ngModel"],["for","input-username",1,"label"],["fullWidth","","id","input-username","name","username","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["username","ngModel"],["for","input-phone",1,"label"],["fullWidth","","id","input-phone","name","phone","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["phone","ngModel"],["for","input-oldPassword",1,"label","col-12"],[1,"col-6","pr-0"],["fullWidth","","id","input-oldPassword","name","oldPassword","nbInput","","placeholder","\u0160ifra",3,"ngModel","maxlength","minlength","required","status","type","ngModelChange"],["oldPasswordModel","ngModel"],[1,"col-2","pl-0"],["fullWidth","","tabindex","-1","nbButton","","type","button",3,"click"],[3,"icon"],["for","input-password",1,"label","col-12"],["fullWidth","","id","input-password","name","newPassword","nbInput","","placeholder","\u0160ifra",3,"ngModel","maxlength","minlength","required","status","type","ngModelChange"],["passwordModel","ngModel"],["for","input-rePassword",1,"label","col-12"],["fullWidth","","id","input-rePassword","name","rePass","nbInput","","placeholder","Potvrdi \u0161ifru",3,"ngModel","required","status","type","ngModelChange"],["retypePasswordModel","ngModel"],[1,"row","mt-2"],["nbButton","","type","button","status","success",3,"click"],["ResetPassword",""],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,n){if(1&e){var i=V.Xb();V.Wb(0,"form",0,1),V.dc("ngSubmit",function(){V.xc(i);var e=V.vc(1);return n.updateUser(e)}),V.Wb(2,"div",2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"label",6),V.Fc(7,"Ime:"),V.Vb(),V.Vb(),V.Wb(8,"div",7),V.Wb(9,"input",8,9),V.dc("ngModelChange",function(e){return n.user.firstName=e}),V.Vb(),V.Dc(11,G,4,3,"ng-container",10),V.Vb(),V.Vb(),V.Wb(12,"div",4),V.Wb(13,"div",5),V.Wb(14,"label",11),V.Fc(15,"Prezime:"),V.Vb(),V.Vb(),V.Wb(16,"div",7),V.Wb(17,"input",12,13),V.dc("ngModelChange",function(e){return n.user.lastName=e}),V.Vb(),V.Dc(19,H,4,3,"ng-container",10),V.Vb(),V.Vb(),V.Wb(20,"div",4),V.Wb(21,"div",5),V.Wb(22,"label",14),V.Fc(23,"Email:"),V.Vb(),V.Vb(),V.Wb(24,"div",7),V.Wb(25,"input",15,16),V.dc("ngModelChange",function(e){return n.user.email=e}),V.Vb(),V.Dc(27,ne,3,2,"ng-container",10),V.Vb(),V.Vb(),V.Wb(28,"div",4),V.Wb(29,"div",5),V.Wb(30,"label",17),V.Fc(31,"Korisni\u010dko ime:"),V.Vb(),V.Vb(),V.Wb(32,"div",7),V.Wb(33,"input",18,19),V.dc("ngModelChange",function(e){return n.user.username=e}),V.Vb(),V.Dc(35,ae,3,2,"ng-container",10),V.Vb(),V.Vb(),V.Wb(36,"div",4),V.Wb(37,"div",5),V.Wb(38,"label",20),V.Fc(39,"Telefon:"),V.Vb(),V.Vb(),V.Wb(40,"div",7),V.Wb(41,"input",21,22),V.dc("ngModelChange",function(e){return n.user.phone=e}),V.Vb(),V.Dc(43,le,3,2,"ng-container",10),V.Vb(),V.Vb(),V.Vb(),V.Wb(44,"div",3),V.Wb(45,"div",4),V.Wb(46,"label",23),V.Fc(47,"Trenutna \u0161ifra:"),V.Vb(),V.Wb(48,"div",24),V.Wb(49,"input",25,26),V.dc("ngModelChange",function(e){return n.oldPassword=e}),V.Vb(),V.Vb(),V.Wb(51,"div",27),V.Wb(52,"button",28),V.dc("click",function(){return n.showPassword="eye"===n.showPassword?"eye-off":"eye"}),V.Rb(53,"nb-icon",29),V.Vb(),V.Vb(),V.Wb(54,"div",5),V.Dc(55,de,3,2,"ng-container",10),V.Vb(),V.Vb(),V.Wb(56,"div",4),V.Wb(57,"label",30),V.Fc(58,"Nova \u0161ifra:"),V.Vb(),V.Wb(59,"div",7),V.Wb(60,"input",31,32),V.dc("ngModelChange",function(e){return n.newPassword=e}),V.Vb(),V.Vb(),V.Wb(62,"div",5),V.Dc(63,pe,4,3,"ng-container",10),V.Vb(),V.Vb(),V.Wb(64,"div",2),V.Wb(65,"label",33),V.Fc(66,"Ponovi \u0161ifru:"),V.Vb(),V.Wb(67,"div",7),V.Wb(68,"input",34,35),V.dc("ngModelChange",function(e){return n.retypePassword=e}),V.Vb(),V.Vb(),V.Wb(70,"div",5),V.Dc(71,ve,3,2,"ng-container",10),V.Vb(),V.Vb(),V.Wb(72,"div",36),V.Wb(73,"div",7),V.Wb(74,"button",37,38),V.dc("click",function(){V.xc(i);var e=V.vc(75);return n.setNewPassword(e)}),V.Fc(76,"Promeni \u0161ifru"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(77,"div",2),V.Rb(78,"div",7),V.Wb(79,"div",39),V.Wb(80,"button",40),V.dc("click",function(){return n.enableInputs()}),V.Fc(81,"IZMENI"),V.Vb(),V.Vb(),V.Wb(82,"div",39),V.Wb(83,"button",41),V.Fc(84,"SA\u010cUVAJ"),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=V.vc(10),a=V.vc(18),r=V.vc(26),o=V.vc(34),l=V.vc(42),s=V.vc(50),b=V.vc(61),d=V.vc(69);V.Eb(9),V.nc("ngModel",n.user.firstName)("maxlength",n.getConfigValue("forms.validation.firstName.maxLength"))("minlength",n.getConfigValue("forms.validation.firstName.minLength"))("pattern",n.getConfigValue("forms.validation.firstName.pattern"))("required",n.getConfigValue("forms.validation.firstName.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),V.Eb(2),V.nc("ngIf",t.invalid&&t.touched),V.Eb(6),V.nc("ngModel",n.user.lastName)("maxlength",n.getConfigValue("forms.validation.lastName.maxLength"))("minlength",n.getConfigValue("forms.validation.lastName.minLength"))("pattern",n.getConfigValue("forms.validation.lastName.pattern"))("required",n.getConfigValue("forms.validation.lastName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),V.Eb(2),V.nc("ngIf",a.invalid&&a.touched),V.Eb(6),V.nc("ngModel",n.user.email)("pattern",n.getConfigValue("forms.validation.email.pattern"))("required",n.getConfigValue("forms.validation.email.required"))("status",r.dirty?r.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),V.Eb(2),V.nc("ngIf",r.invalid&&r.touched),V.Eb(6),V.nc("ngModel",n.user.username)("maxlength",n.getConfigValue("forms.validation.username.maxLength"))("minlength",n.getConfigValue("forms.validation.username.minLength"))("required",n.getConfigValue("forms.validation.username.required"))("status",o.dirty?o.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),V.Eb(2),V.nc("ngIf",o.invalid&&o.touched),V.Eb(6),V.nc("ngModel",n.user.phone)("maxlength",n.getConfigValue("forms.validation.phone.maxLength"))("minlength",n.getConfigValue("forms.validation.telefon.minLength"))("required",n.getConfigValue("forms.validation.telefon.required"))("status",l.dirty?l.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),V.Eb(2),V.nc("ngIf",l.invalid&&l.touched),V.Eb(6),V.nc("ngModel",n.oldPassword)("maxlength",n.getConfigValue("forms.validation.password.maxLength"))("minlength",n.getConfigValue("forms.validation.password.minLength"))("required",n.getConfigValue("forms.validation.password.required"))("status",s.dirty?s.invalid?"danger":"success":"basic")("type","eye"===n.showPassword?"password":"text"),V.Fb("aria-invalid",!(!s.invalid||!s.touched)||null),V.Eb(4),V.nc("icon",n.showPassword),V.Eb(2),V.nc("ngIf",s.invalid&&s.touched),V.Eb(5),V.nc("ngModel",n.newPassword)("maxlength",n.getConfigValue("forms.validation.password.maxLength"))("minlength",n.getConfigValue("forms.validation.password.minLength"))("required",n.getConfigValue("forms.validation.password.required"))("status",b.dirty?b.invalid?"danger":"success":"basic")("type","eye"===n.showPassword?"password":"text"),V.Fb("aria-invalid",!(!b.invalid||!b.touched)||null),V.Eb(3),V.nc("ngIf",b.invalid&&b.touched||b.value===s.value),V.Eb(5),V.nc("ngModel",n.retypePassword)("required",n.getConfigValue("forms.validation.password.required"))("status",d.dirty?d.invalid||b.value!==d.value?"danger":"success":"basic")("type","eye"===n.showPassword?"password":"text"),V.Fb("aria-invalid",!(!d.invalid||!d.touched)||null),V.Eb(3),V.nc("ngIf",d.invalid&&b.touched||b.value!==d.value),V.Eb(9),V.nc("disabled",!n.inputsDisabled),V.Eb(3),V.nc("disabled",n.inputsDisabled)}},directives:[o.w,o.l,o.m,l.T,o.b,o.k,o.n,o.f,o.g,o.q,o.s,r.n,l.t,l.Q],styles:[".error-message[_ngcontent-%COMP%]{color:red}"]}),he),We=a("wH5/");function ye(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Email je obavezan! "),V.Vb())}function Me(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Email mora biti validan! "),V.Vb())}function we(e,n){if(1&e&&(V.Ub(0),V.Dc(1,ye,2,0,"p",41),V.Dc(2,Me,2,0,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(31);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.pattern)}}function Ce(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Email je obavezan! "),V.Vb())}function Ee(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Email mora biti validan! "),V.Vb())}function Ie(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Ce,2,0,"p",41),V.Dc(2,Ee,2,0,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(39);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.pattern)}}function Fe(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Telefon je obavezan! "),V.Vb())}function ke(e,n){if(1&e&&(V.Wb(0,"p",42),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Ic(" Telefon mora da bude du\u017ei od ",i.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",i.getConfigValue("forms.validation.phone.maxLength")," ")}}function De(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Fe,2,0,"p",41),V.Dc(2,ke,2,2,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(47);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function xe(e,n){if(1&e&&(V.Wb(0,"p",42),V.Fc(1),V.Vb()),2&e){var i=V.hc(3);V.Eb(1),V.Ic(" Faks mora da bude du\u017ei od ",i.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",i.getConfigValue("forms.validation.phone.maxLength")," ")}}function Se(e,n){if(1&e&&(V.Ub(0),V.Dc(1,xe,2,2,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(6);V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function Ne(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",4),V.Wb(1,"div",5),V.Wb(2,"label",43),V.Fc(3,"Faks:"),V.Vb(),V.Vb(),V.Wb(4,"div",3),V.Wb(5,"input",44,45),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().company.fax=e}),V.Vb(),V.Dc(7,Se,2,1,"ng-container",18),V.Vb(),V.Vb()}if(2&e){var t=V.vc(6),a=V.hc();V.Eb(5),V.nc("ngModel",a.company.fax)("maxlength",a.getConfigValue("forms.validation.phone.maxLength"))("minlength",a.getConfigValue("forms.validation.phone.minLength"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",a.inputsDisabled),V.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),V.Eb(2),V.nc("ngIf",t.invalid&&t.touched)}}function Te(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Zakosni zastupnik firme je obavezan! "),V.Vb())}function qe(e,n){if(1&e&&(V.Wb(0,"p",42),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Ic(" Zakosni zastupnik mora da bude du\u017ei od ",i.getConfigValue("forms.validation.firstName.minLength")," a kra\u0107i od ",i.getConfigValue("forms.validation.firstName.maxLength")," ")}}function ze(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Te,2,0,"p",41),V.Dc(2,qe,2,2,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(57);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function Pe(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Zakosni zastupnik firme je obavezan! "),V.Vb())}function je(e,n){if(1&e&&(V.Wb(0,"p",42),V.Fc(1),V.Vb()),2&e){var i=V.hc(2);V.Eb(1),V.Ic(" Zakosni zastupnik mora da bude du\u017ei od ",i.getConfigValue("forms.validation.lastName.minLength")," a kra\u0107i od ",i.getConfigValue("forms.validation.lastName.maxLength")," ")}}function Le(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Pe,2,0,"p",41),V.Dc(2,je,2,2,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(64);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function Oe(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Ime odgovornog lica za upravljanje otpadom je obavezno! "),V.Vb())}function Ue(e,n){if(1&e&&(V.Wb(0,"p",42),V.Fc(1),V.Vb()),2&e){var i=V.hc(3);V.Eb(1),V.Hc(" Ime odgovornog lica za upravljanje otpadom mora biti du\u017ee ",i.getConfigValue("forms.validation.firstName.minLength")," ")}}function Re(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Oe,2,0,"p",41),V.Dc(2,Ue,2,1,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(6);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function Qe(e,n){1&e&&(V.Wb(0,"p",42),V.Fc(1," Prezime odgovornog lica za upravljanje otpadom je obavezno! "),V.Vb())}function Ae(e,n){if(1&e&&(V.Wb(0,"p",42),V.Fc(1),V.Vb()),2&e){var i=V.hc(3);V.Eb(1),V.Hc(" Prezime odgovornog lica za upravljanje otpadom mora da bude du\u017ee od ",i.getConfigValue("forms.validation.lastName.minLength")," ")}}function Be(e,n){if(1&e&&(V.Ub(0),V.Dc(1,Qe,2,0,"p",41),V.Dc(2,Ae,2,1,"p",41),V.Tb()),2&e){V.hc();var i=V.vc(13);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required),V.Eb(1),V.nc("ngIf",(null==i.errors?null:i.errors.minlength)||(null==i.errors?null:i.errors.maxlength))}}function $e(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",4),V.Wb(1,"div",5),V.Wb(2,"label",46),V.Fc(3,"Ime odgovornog lica za upravljanje otpadom:"),V.Vb(),V.Vb(),V.Wb(4,"div",3),V.Wb(5,"input",47,48),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().company.wasteManager.firstName=e}),V.Vb(),V.Dc(7,Re,3,2,"ng-container",18),V.Vb(),V.Wb(8,"div",5),V.Wb(9,"label",49),V.Fc(10,"Prezime odgovornog lica za upravljanje otpadom:"),V.Vb(),V.Vb(),V.Wb(11,"div",3),V.Wb(12,"input",50,51),V.dc("ngModelChange",function(e){return V.xc(i),V.hc().company.wasteManager.lastName=e}),V.Vb(),V.Dc(14,Be,3,2,"ng-container",18),V.Vb(),V.Vb()}if(2&e){var t=V.vc(6),a=V.vc(13),r=V.hc();V.Eb(5),V.nc("ngModel",r.company.wasteManager.firstName)("maxlength",r.getConfigValue("forms.validation.firstName.maxLength"))("minlength",r.getConfigValue("forms.validation.firstName.minLength"))("required",r.getConfigValue("forms.validation.firstName.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",r.inputsDisabled),V.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),V.Eb(2),V.nc("ngIf",t.invalid&&t.touched),V.Eb(5),V.nc("ngModel",r.company.wasteManager.lastName)("maxlength",r.getConfigValue("forms.validation.lastName.maxLength"))("minlength",r.getConfigValue("forms.validation.lastName.minLength"))("required",r.getConfigValue("forms.validation.lastName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",r.inputsDisabled),V.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),V.Eb(2),V.nc("ngIf",a.invalid&&a.touched)}}function Xe(e,n){1&e&&V.Rb(0,"input",52),2&e&&V.nc("placeholder",n.$implicit)}var Ke,Ge=((Ke=function(){function n(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e(this,n),this.companyService=i,this.options=t,this.toastrService=a,this.roleService=r,this.authService=o,this.company={address:{location:{placeName:"",placeCode:0,zipCode:"",townshipCode:0,townshipName:""},street:""},email:"",emailReception:"",legalRep:{firstName:"",lastName:""},nriz:{username:"",password:""},manager:"",mat:"",name:"",occupation:{name:"",code:""},operations:[],pib:"",telephone:"",fax:""},this.inputsDisabled=!0}return i(n,[{key:"ngOnInit",value:function(){var e=this;this.companyService.getCompany(this.roleService.getCompanyID()).pipe(Object(p.a)()).subscribe(function(n){e.company=n})}},{key:"getConfigValue",value:function(e){return Object(I.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updateFirma",value:function(e){if(e.valid){this.companyService.updateCompany(this.company,this.company._id).subscribe(function(e){}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0;var n=null;this.authService.getToken().subscribe(function(e){n=e}),this.authService.refreshToken("email",n).subscribe(function(e){})}else this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,n,i){this.toastrService.show(n,e,{status:i})}}]),n}()).\u0275fac=function(e){return new(e||Ke)(V.Qb(We.a),V.Qb(I.a),V.Qb(l.Mb),V.Qb(f.a),V.Qb(I.g))},Ke.\u0275cmp=V.Kb({type:Ke,selectors:[["profile-company"]],decls:87,vars:47,consts:[[1,"col-12",3,"ngSubmit"],["formKorisnik","ngForm"],[1,"row"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-companyName",1,"label"],["disabled","","fullWidth","","id","input-companyName","name","companyName","nbInput","","type","text",3,"ngModel","ngModelChange"],["companyName","ngModel"],["for","input-pib",1,"label"],["disabled","","fullWidth","","id","input-pib","name","pib","nbInput","","type","text",3,"ngModel","ngModelChange"],["pib","ngModel"],["for","input-mat",1,"label"],["disabled","","fullWidth","","id","input-mat","name","mat","nbInput","","type","text",3,"ngModel","ngModelChange"],["mat","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["email","ngModel"],[4,"ngIf"],["for","input-emailReception",1,"label"],["fullWidth","","id","input-emailReception","name","emailReception","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["emailReception","ngModel"],["for","input-telephone",1,"label"],["fullWidth","","id","input-telephone","name","telephone","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["telephone","ngModel"],["class","row mb-2",4,"ngIf"],["for","input-legalRepFname",1,"label"],["fullWidth","","id","input-legalRepFname","name","legalRepFname","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["legalRepFname","ngModel"],["for","input-legalRepLName",1,"label"],["fullWidth","","id","input-legalRepLName","name","legalRepLName","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["legalRepLName","ngModel"],["for","input-address",1,"label"],["disabled","","fullWidth","","id","input-address","name","address","nbInput","","type","text",3,"placeholder"],[1,"label"],["disabled","","fullWidth","","nbInput","","type","text",3,"placeholder",4,"ngFor","ngForOf"],[1,"row","mt-3"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-fax",1,"label"],["fullWidth","","id","input-fax","name","fax","nbInput","","type","text",3,"ngModel","maxlength","minlength","status","disabled","ngModelChange"],["fax","ngModel"],["for","input-wasteManagerFName",1,"label"],["fullWidth","","id","input-wasteManagerFName","name","wasteManagerFName","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["wasteManagerFName","ngModel"],["for","input-wasteManagerLName",1,"label"],["fullWidth","","id","input-wasteManagerLName","name","wasteManagerLName","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["wasteManagerLName","ngModel"],["disabled","","fullWidth","","nbInput","","type","text",3,"placeholder"]],template:function(e,n){if(1&e){var i=V.Xb();V.Wb(0,"form",0,1),V.dc("ngSubmit",function(){V.xc(i);var e=V.vc(1);return n.updateFirma(e)}),V.Wb(2,"div",2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"label",6),V.Fc(7,"Naziv Firme:"),V.Vb(),V.Vb(),V.Wb(8,"div",3),V.Wb(9,"input",7,8),V.dc("ngModelChange",function(e){return n.company.name=e}),V.Vb(),V.Vb(),V.Vb(),V.Wb(11,"div",4),V.Wb(12,"div",5),V.Wb(13,"label",9),V.Fc(14,"PIB:"),V.Vb(),V.Vb(),V.Wb(15,"div",3),V.Wb(16,"input",10,11),V.dc("ngModelChange",function(e){return n.company.pib=e}),V.Vb(),V.Vb(),V.Vb(),V.Wb(18,"div",4),V.Wb(19,"div",5),V.Wb(20,"label",12),V.Fc(21,"Mati\u010dni broj:"),V.Vb(),V.Vb(),V.Wb(22,"div",3),V.Wb(23,"input",13,14),V.dc("ngModelChange",function(e){return n.company.mat=e}),V.Vb(),V.Vb(),V.Vb(),V.Wb(25,"div",4),V.Wb(26,"div",5),V.Wb(27,"label",15),V.Fc(28,"Email:"),V.Vb(),V.Vb(),V.Wb(29,"div",3),V.Wb(30,"input",16,17),V.dc("ngModelChange",function(e){return n.company.email=e}),V.Vb(),V.Dc(32,we,3,2,"ng-container",18),V.Vb(),V.Vb(),V.Wb(33,"div",4),V.Wb(34,"div",5),V.Wb(35,"label",19),V.Fc(36,"Email za prijem dokumenata:"),V.Vb(),V.Vb(),V.Wb(37,"div",3),V.Wb(38,"input",20,21),V.dc("ngModelChange",function(e){return n.company.emailReception=e}),V.Vb(),V.Dc(40,Ie,3,2,"ng-container",18),V.Vb(),V.Vb(),V.Wb(41,"div",4),V.Wb(42,"div",5),V.Wb(43,"label",22),V.Fc(44,"Telefon:"),V.Vb(),V.Vb(),V.Wb(45,"div",3),V.Wb(46,"input",23,24),V.dc("ngModelChange",function(e){return n.company.telephone=e}),V.Vb(),V.Dc(48,De,3,2,"ng-container",18),V.Vb(),V.Vb(),V.Dc(49,Ne,8,7,"div",25),V.Vb(),V.Wb(50,"div",3),V.Wb(51,"div",4),V.Wb(52,"div",5),V.Wb(53,"label",26),V.Fc(54,"Ime zakonskog zastupnika:"),V.Vb(),V.Vb(),V.Wb(55,"div",3),V.Wb(56,"input",27,28),V.dc("ngModelChange",function(e){return n.company.legalRep.firstName=e}),V.Vb(),V.Dc(58,ze,3,2,"ng-container",18),V.Vb(),V.Wb(59,"div",5),V.Wb(60,"label",29),V.Fc(61,"Prezime zakonskog zastupnika:"),V.Vb(),V.Vb(),V.Wb(62,"div",3),V.Wb(63,"input",30,31),V.dc("ngModelChange",function(e){return n.company.legalRep.lastName=e}),V.Vb(),V.Dc(65,Le,3,2,"ng-container",18),V.Vb(),V.Vb(),V.Dc(66,$e,15,16,"div",25),V.Wb(67,"div",4),V.Wb(68,"div",5),V.Wb(69,"label",32),V.Fc(70,"Adresa Firme:"),V.Vb(),V.Vb(),V.Wb(71,"div",5),V.Rb(72,"input",33),V.Vb(),V.Vb(),V.Wb(73,"div",2),V.Wb(74,"div",5),V.Wb(75,"label",34),V.Fc(76,"Rad firme:"),V.Vb(),V.Vb(),V.Wb(77,"div",5),V.Dc(78,Xe,1,1,"input",35),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(79,"div",36),V.Rb(80,"div",37),V.Wb(81,"div",38),V.Wb(82,"button",39),V.dc("click",function(){return n.enableInputs()}),V.Fc(83," IZMENI "),V.Vb(),V.Vb(),V.Wb(84,"div",38),V.Wb(85,"button",40),V.Fc(86,"SA\u010cUVAJ"),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=V.vc(31),a=V.vc(39),r=V.vc(47),o=V.vc(57),l=V.vc(64);V.Eb(9),V.nc("ngModel",n.company.name),V.Eb(7),V.nc("ngModel",n.company.pib),V.Eb(7),V.nc("ngModel",n.company.mat),V.Eb(7),V.nc("ngModel",n.company.email)("pattern",n.getConfigValue("forms.validation.email.pattern"))("required",n.getConfigValue("forms.validation.email.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),V.Eb(2),V.nc("ngIf",t.invalid&&t.touched),V.Eb(6),V.nc("ngModel",n.company.emailReception)("pattern",n.getConfigValue("forms.validation.email.pattern"))("required",n.getConfigValue("forms.validation.email.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),V.Eb(2),V.nc("ngIf",a.invalid&&a.touched),V.Eb(6),V.nc("ngModel",n.company.telephone)("maxlength",n.getConfigValue("forms.validation.phone.maxLength"))("minlength",n.getConfigValue("forms.validation.phone.minLength"))("required",n.getConfigValue("forms.validation.phone.required"))("status",r.dirty?r.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),V.Eb(2),V.nc("ngIf",r.invalid&&r.touched),V.Eb(1),V.nc("ngIf",""===n.company.fax),V.Eb(7),V.nc("ngModel",n.company.legalRep.firstName)("maxlength",n.getConfigValue("forms.validation.firstName.maxLength"))("minlength",n.getConfigValue("forms.validation.firstName.minLength"))("required",n.getConfigValue("forms.validation.firstName.required"))("status",o.dirty?o.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),V.Eb(2),V.nc("ngIf",o.invalid&&o.touched),V.Eb(5),V.nc("ngModel",n.company.legalRep.lastName)("maxlength",n.getConfigValue("forms.validation.lastName.maxLength"))("minlength",n.getConfigValue("forms.validation.lastName.minLength"))("required",n.getConfigValue("forms.validation.lastName.required"))("status",l.dirty?l.invalid?"danger":"success":"basic")("disabled",n.inputsDisabled),V.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),V.Eb(2),V.nc("ngIf",l.invalid&&l.touched),V.Eb(1),V.nc("ngIf",void 0!==n.company.wasteManager),V.Eb(6),V.nc("placeholder",n.company.address.location.townshipName+", "+n.company.address.location.placeName+", "+n.company.address.street),V.Eb(6),V.nc("ngForOf",n.company.operations),V.Eb(4),V.nc("disabled",!n.inputsDisabled),V.Eb(3),V.nc("disabled",n.inputsDisabled)}},directives:[o.w,o.l,o.m,l.T,o.b,o.k,o.n,o.q,o.s,r.n,o.f,o.g,r.m,l.t],styles:[".divider-left[_ngcontent-%COMP%]{border-left:1px solid grey}"]}),Ke),Ze=a("7Oz7"),_e=a("navU");function Je(e,n){1&e&&(V.Wb(0,"label",23),V.Fc(1,"Naziv Deponije:"),V.Vb())}function He(e,n){1&e&&(V.Wb(0,"label",23),V.Fc(1,"Naziv Skladi\u0161ta za tretman:"),V.Vb())}function Ye(e,n){1&e&&(V.Wb(0,"label",23),V.Fc(1,"Naziv Skladi\u0161ta za skladi\u0161tenje:"),V.Vb())}function en(e,n){1&e&&(V.Wb(0,"label",23),V.Fc(1,"Naziv Skladi\u0161ta:"),V.Vb())}function nn(e,n){1&e&&(V.Wb(0,"p",25),V.Fc(1," Naziv skladi\u0161ta je obavezan! "),V.Vb())}function tn(e,n){if(1&e&&(V.Ub(0),V.Dc(1,nn,2,0,"p",24),V.Tb()),2&e){V.hc();var i=V.vc(11);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required)}}function an(e,n){1&e&&(V.Wb(0,"p",25),V.Fc(1," Veli\u010dina skladi\u0161ta je obavezna! "),V.Vb())}function rn(e,n){if(1&e&&(V.Ub(0),V.Dc(1,an,2,0,"p",24),V.Tb()),2&e){V.hc();var i=V.vc(19);V.Eb(1),V.nc("ngIf",null==i.errors?null:i.errors.required)}}var on=function(){return{standalone:!0}};function ln(e,n){if(1&e&&(V.Wb(0,"div"),V.Wb(1,"div",3),V.Wb(2,"div",8),V.Wb(3,"div",9),V.Wb(4,"div",10),V.Dc(5,Je,2,0,"label",11),V.Dc(6,He,2,0,"label",11),V.Dc(7,Ye,2,0,"label",11),V.Dc(8,en,2,0,"label",12),V.Vb(),V.Wb(9,"div",8),V.Wb(10,"input",13,14),V.dc("ngModelChange",function(e){return n.$implicit.name=e}),V.Vb(),V.Dc(12,tn,2,1,"ng-container",15),V.Vb(),V.Vb(),V.Wb(13,"div",9),V.Wb(14,"div",16),V.Wb(15,"label",17),V.Fc(16,"Veli\u010dina skladi\u0161ta:"),V.Vb(),V.Vb(),V.Wb(17,"div",8),V.Wb(18,"input",18,19),V.dc("ngModelChange",function(e){return n.$implicit.maxAmount=e}),V.Vb(),V.Dc(20,rn,2,1,"ng-container",15),V.Vb(),V.Vb(),V.Vb(),V.Wb(21,"div",8),V.Wb(22,"div",9),V.Wb(23,"div",16),V.Wb(24,"label",20),V.Fc(25,"Adresa Skladi\u0161ta:"),V.Vb(),V.Vb(),V.Wb(26,"div",16),V.Rb(27,"input",21),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(28,"div",9),V.Wb(29,"div",16),V.Rb(30,"storage-meter",22),V.Vb(),V.Vb(),V.Vb()),2&e){var i=n.$implicit,t=V.vc(11),a=V.vc(19),r=V.hc();V.Eb(4),V.nc("ngSwitch",i.__t),V.Eb(1),V.nc("ngSwitchCase","StorageDump"),V.Eb(1),V.nc("ngSwitchCase","StorageTreatment"),V.Eb(1),V.nc("ngSwitchCase","StorageCache"),V.Eb(3),V.nc("ngModel",i.name)("ngModelOptions",V.qc(23,on))("maxlength",r.getConfigValue("forms.validation.storageName.maxLength"))("minlength",r.getConfigValue("forms.validation.storageName.minLength"))("required",r.getConfigValue("forms.validation.storageName.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",r.inputsDisabled),V.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),V.Eb(2),V.nc("ngIf",t.invalid&&t.touched),V.Eb(6),V.nc("ngModel",i.maxAmount)("ngModelOptions",V.qc(24,on))("pattern",r.getConfigValue("forms.validation.storageSize.pattern"))("required",r.getConfigValue("forms.validation.storageSize.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",r.inputsDisabled),V.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),V.Eb(2),V.nc("ngIf",a.invalid&&a.touched),V.Eb(7),V.nc("placeholder",i.address.location.townshipName+", "+i.address.location.placeName+", "+i.address.street),V.Eb(3),V.nc("storage",i)}}var sn,bn,dn,cn,un=((sn=function(){function n(i,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;e(this,n),this.storageService=i,this.roleService=t,this.options=a,this.toastrService=r,this.storages=[],this.inputsDisabled=!0}return i(n,[{key:"ngOnInit",value:function(){var e=this;this.storageService.getCompaniesStorage(this.roleService.getCompanyID()).pipe(Object(p.a)()).subscribe(function(n){e.storages=n})}},{key:"getConfigValue",value:function(e){return Object(I.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updateStorage",value:function(e){var n=this;e.valid?(this.storages.forEach(function(e){return n.storageService.updateStorage(e,e._id).subscribe(function(e){})}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,n,i){this.toastrService.show(n,e,{status:i})}}]),n}()).\u0275fac=function(e){return new(e||sn)(V.Qb(Ze.a),V.Qb(f.a),V.Qb(I.a),V.Qb(l.Mb))},sn.\u0275cmp=V.Kb({type:sn,selectors:[["profile-storages"]],decls:11,vars:3,consts:[[3,"ngSubmit"],["formStorage","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","status","primary","fullWidth","","type","button",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12",3,"ngSwitch"],["class","label","for","input-storageName",4,"ngSwitchCase"],["class","label","for","input-storageName",4,"ngSwitchDefault"],["fullWidth","","id","input-storageName","name","storageName","nbInput","","type","text",3,"ngModel","ngModelOptions","maxlength","minlength","required","status","disabled","ngModelChange"],["storageName","ngModel"],[4,"ngIf"],[1,"col-12"],["for","input-storageSize",1,"label"],["fullWidth","","id","input-storageSize","name","storageSize","nbInput","","type","number",3,"ngModel","ngModelOptions","pattern","required","status","disabled","ngModelChange"],["storageSize","ngModel"],["for","input-address",1,"label"],["disabled","","fullWidth","","id","input-address","name","address","nbInput","","type","text",3,"placeholder"],[3,"storage"],["for","input-storageName",1,"label"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,n){if(1&e){var i=V.Xb();V.Wb(0,"form",0,1),V.dc("ngSubmit",function(){V.xc(i);var e=V.vc(1);return n.updateStorage(e)}),V.Dc(2,ln,31,25,"div",2),V.Wb(3,"div",3),V.Rb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"button",6),V.dc("click",function(){return n.enableInputs()}),V.Fc(7," IZMENI "),V.Vb(),V.Vb(),V.Wb(8,"div",5),V.Wb(9,"button",7),V.Fc(10,"SA\u010cUVAJ"),V.Vb(),V.Vb(),V.Vb(),V.Vb()}2&e&&(V.Eb(2),V.nc("ngForOf",n.storages),V.Eb(4),V.nc("disabled",!n.inputsDisabled),V.Eb(3),V.nc("disabled",n.inputsDisabled))},directives:[o.w,o.l,o.m,r.m,l.t,r.o,r.p,r.q,l.T,o.b,o.k,o.n,o.f,o.g,o.s,r.n,o.p,o.q,_e.a],styles:[""]}),sn),gn=[{path:"vehicles",component:B,pathMatch:"full"},{path:"permits",component:P,pathMatch:"full"},{path:"permit-renewal",component:E},{path:":activeTab",component:(bn=function(){function n(i,t){var a=this;e(this,n),this.roleService=i,this.activatedRoute=t,this.activatedRoute.params.subscribe(function(e){a.activeTab=e.activeTab})}return i(n,[{key:"ngOnInit",value:function(){var e=this;this.roleService.getOperations().subscribe(function(n){e.operations=n})}}]),n}(),bn.\u0275fac=function(e){return new(e||bn)(V.Qb(f.a),V.Qb(u.a))},bn.\u0275cmp=V.Kb({type:bn,selectors:[["profile"]],decls:8,vars:4,consts:[["tabIcon","person","tabTitle","Korisnik",3,"active"],["tabIcon","briefcase","tabTitle","Firma",3,"active"],["tabIcon","cube","tabTitle","Skladi\u0161ta",3,"active","disabled"]],template:function(e,n){1&e&&(V.Wb(0,"nb-card"),V.Wb(1,"nb-tabset"),V.Wb(2,"nb-tab",0),V.Rb(3,"profile-user"),V.Vb(),V.Wb(4,"nb-tab",1),V.Rb(5,"profile-company"),V.Vb(),V.Wb(6,"nb-tab",2),V.Rb(7,"profile-storages"),V.Vb(),V.Vb(),V.Vb()),2&e&&(V.Eb(2),V.nc("active","user"===n.activeTab),V.Eb(2),V.nc("active","company"===n.activeTab),V.Eb(2),V.nc("active","storages"===n.activeTab)("disabled",!(null!=n.operations&&n.operations.production||null!=n.operations&&n.operations.treatment||null!=n.operations&&n.operations.disposal||null!=n.operations&&n.operations.cache)))},directives:[l.A,l.Hb,l.Gb,Ve,Ge,un],styles:[""]}),bn)}],pn=((cn=function n(){e(this,n)}).\u0275fac=function(e){return new(e||cn)},cn.\u0275mod=V.Ob({type:cn}),cn.\u0275inj=V.Nb({imports:[[u.g.forChild(gn)],u.g]}),cn),mn=((dn=function n(){e(this,n)}).\u0275fac=function(e){return new(e||dn)},dn.\u0275mod=V.Ob({type:dn}),dn.\u0275inj=V.Nb({imports:[[pn,r.c,o.e,l.U,l.nb,l.w,l.Ib,l.E,l.lb,s.c,b.PagesModule,d.a,c.StorageModule,l.S,l.qb,l.ub]]}),dn)}}])}();