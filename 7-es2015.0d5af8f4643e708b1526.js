(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8FOb":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("AytR"),a=n("fXoL"),o=n("tk/3");let s=(()=>{class t extends class{}{constructor(t){super(),this.http=t,this.apiUrl=i.a.apiUrl}getOOtpad(){return this.http.get(this.apiUrl+"/api/opasniotpad")}dodajOOtpad(t,e){return this.http.post(this.apiUrl+"/api/opasniotpad",{otpad:t,skladiste:e})}updateOOtpad(t,e,n,i){return this.http.patch(this.apiUrl+"/api/opasniotpad/"+t._id,{otpad:t,skladiste:e,brDokumenta:i,nazivFirme:n})}deleteOOtpad(t,e){return this.http.delete(this.apiUrl+"/api/opasniotpad/"+t._id+"/"+e)}}return t.\u0275fac=function(e){return new(e||t)(a.bc(o.b))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac}),t})()},"8sB5":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("AytR"),a=n("fXoL"),o=n("tk/3"),s=n("McNs");let c=(()=>{class t extends class{}{constructor(t,e){super(),this.http=t,this.authService=e,this.apiUrl=i.a.apiUrl}getPrevoznoSredstvo(){}updatePrevoznoSredstvo(t){return this.http.patch(this.apiUrl+"/api/prevoznosredstvo/"+t._id,t)}getPrevoznoSredstvoFirme(){let t="";return this.authService.getToken().subscribe(e=>{t=e.getPayload().data.firma._id}),this.http.get(this.apiUrl+"/api/prevoznosredstvo/firma/"+t)}}return t.\u0275fac=function(e){return new(e||t)(a.bc(o.b),a.bc(s.g))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac}),t})()},"9pL+":function(t,e,n){"use strict";n.r(e),n.d(e,"PtotpadModule",(function(){return v}));var i=n("vTDv"),a=n("aceb"),o=n("RS3s"),s=n("O8xV"),c=n("3Pt+"),r=n("tyNb"),d=n("fXoL");let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Lb({type:t,selectors:[["ngx-ptotpad"]],decls:1,vars:0,template:function(t,e){1&t&&d.Sb(0,"router-outlet")},directives:[r.h],encapsulation:2}),t})();var b=n("AytR"),u=n("tk/3");let p=(()=>{class t extends class{}{constructor(t){super(),this.http=t,this.apiUrl=b.a.apiUrl}getPTOtpad(){return this.http.get(this.apiUrl+"/api/posebnitokoviotpada")}}return t.\u0275fac=function(e){return new(e||t)(d.bc(u.b))},t.\u0275prov=d.Nb({token:t,factory:t.\u0275fac}),t})();var h=n("ofXK");const g=[{path:"",component:l,children:[{path:"dodaj-otpad",component:(()=>{class t{constructor(t,e){this.katalogService=t,this.ptotpadService=e,this.katalog=new o.a,this.settings={actions:{add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj",filter:!1},naziv:{title:"Naziv",filter:!1}}},this.ptotpad={_id:"",cLista:"",fizickoStanje:"",hLista:"",yLista:"",naziv:"",opis:"",indeksniBroj:"",kolicina:0,masa:0,jedinicaMere:"",opasnaKomponenta:[{kgMaterije:0,cas:"",hemijskiNaziv:""}]}}ngOnInit(){this.katalogService.getKatalog().subscribe(t=>{this.katalog.load(t)})}onSearch(t=""){this.katalog.setFilter([{field:"indeksniBroj",search:t}],!1)}chooseOtpad(t){this.ptotpad.indeksniBroj=t.data.indeksniBroj,this.ptotpad.naziv=t.data.naziv,this.ptotpad.opis=t.data.naziv}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(s.a),d.Rb(p))},t.\u0275cmp=d.Lb({type:t,selectors:[["ngx-dodaj-otpad"]],decls:59,vars:15,consts:[[1,"container-fluid"],[1,"flex-fill","px-4"],[1,"row"],[1,"col-6","flex-fill"],[1,"row","my-3"],[1,"col-12"],["nbInput","","name","naziv",1,"col","ml-3",3,"placeholder","ngModel","ngModelChange"],["nbInput","","name","opis",1,"col","ml-3",3,"placeholder","ngModel","ngModelChange"],["fullWidth","","decimals","1","step","0.1","min","0","type","number","nbInput","","placeholder","0.0","name","kolicina",1,"col-2","ml-3",3,"ngModel","ngModelChange"],["nbButton","","disabled",""],["selected","Cvrsto","name","stanje",1,"col",3,"ngModel","ngModelChange"],["value","Cvrsto"],["value","Tecno"],["value","Gasovito"],["value","Prah"],["nbInput","","name","Jedinica mere",1,"col","ml-3",3,"ngModel","ngModelChange"],["fullWidth","","decimals","1","step","0.1","min","0","type","number","nbInput","","placeholder","0.0","name","Masa",1,"col-2","ml-3",3,"ngModel","ngModelChange"],["nbButton","","type","submit","status","primary",1,"ml-3"],[1,"col-6"],[1,"col-7"],["nbInput","","fullWidth","","type","text","placeholder","Pretrazi",1,"col-3",3,"input"],["search",""],[3,"source","settings","custom"]],template:function(t,e){if(1&t){const t=d.Yb();d.Xb(0,"div"),d.Xb(1,"nb-card",0),d.Xb(2,"nb-card-header"),d.Ec(3," Dodajte novi inventar otpada "),d.Wb(),d.Xb(4,"nb-card-body"),d.Xb(5,"div",1),d.Xb(6,"div",2),d.Xb(7,"div",3),d.Xb(8,"form"),d.Xb(9,"div",4),d.Xb(10,"label",5),d.Ec(11),d.Wb(),d.Wb(),d.Xb(12,"div",4),d.Xb(13,"label",5),d.Ec(14,"Naziv: "),d.Wb(),d.Xb(15,"input",6),d.fc("ngModelChange",(function(t){return e.ptotpad.naziv=t})),d.Wb(),d.Wb(),d.Xb(16,"div",4),d.Xb(17,"label",5),d.Ec(18,"Opis: "),d.Wb(),d.Xb(19,"input",7),d.fc("ngModelChange",(function(t){return e.ptotpad.opis=t})),d.Wb(),d.Wb(),d.Xb(20,"div",4),d.Xb(21,"label",5),d.Ec(22,"Trenutna kolicina na skladistu: "),d.Wb(),d.Xb(23,"input",8),d.fc("ngModelChange",(function(t){return e.ptotpad.kolicina=t})),d.Wb(),d.Xb(24,"button",9),d.Ec(25,"kg"),d.Wb(),d.Wb(),d.Xb(26,"div",4),d.Xb(27,"label",5),d.Ec(28,"Fizicko stanje otpada: "),d.Wb(),d.Xb(29,"nb-select",10),d.fc("ngModelChange",(function(t){return e.ptotpad.fizickoStanje=t})),d.Xb(30,"nb-option",11),d.Ec(31,"Cvrsto"),d.Wb(),d.Xb(32,"nb-option",12),d.Ec(33,"Tecno"),d.Wb(),d.Xb(34,"nb-option",13),d.Ec(35,"Gasovito"),d.Wb(),d.Xb(36,"nb-option",14),d.Ec(37,"Prah"),d.Wb(),d.Wb(),d.Wb(),d.Xb(38,"div",4),d.Xb(39,"label",5),d.Ec(40,"Jedinica mere: "),d.Wb(),d.Xb(41,"input",15),d.fc("ngModelChange",(function(t){return e.ptotpad.jedinicaMere=t})),d.Wb(),d.Wb(),d.Xb(42,"div",4),d.Xb(43,"label",5),d.Ec(44,"Masa jedinicnog proizvoda: "),d.Wb(),d.Xb(45,"input",16),d.fc("ngModelChange",(function(t){return e.ptotpad.masa=t})),d.Wb(),d.Xb(46,"button",9),d.Ec(47),d.Wb(),d.Wb(),d.Xb(48,"div",4),d.Xb(49,"button",17),d.Ec(50,"Dodaj"),d.Wb(),d.Wb(),d.Wb(),d.Ec(51),d.ic(52,"json"),d.Wb(),d.Xb(53,"div",18),d.Xb(54,"label",19),d.Ec(55,"Pretrazi po indeksnom broju:"),d.Wb(),d.Xb(56,"input",20,21),d.fc("input",(function(){d.wc(t);const n=d.uc(57);return n.value.length>=1&&e.onSearch(n.value)})),d.Wb(),d.Xb(58,"ng2-smart-table",22),d.fc("custom",(function(t){return e.chooseOtpad(t)})),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb()}2&t&&(d.Eb(11),d.Gc("Indeksni broj: ",e.ptotpad.indeksniBroj,""),d.Eb(4),d.nc("placeholder",e.ptotpad.naziv)("ngModel",e.ptotpad.naziv),d.Eb(4),d.nc("placeholder",e.ptotpad.opis)("ngModel",e.ptotpad.opis),d.Eb(4),d.nc("ngModel",e.ptotpad.kolicina),d.Eb(6),d.nc("ngModel",e.ptotpad.fizickoStanje),d.Eb(12),d.nc("ngModel",e.ptotpad.jedinicaMere),d.Eb(4),d.nc("ngModel",e.ptotpad.masa),d.Eb(2),d.Fc(e.ptotpad.jedinicaMere),d.Eb(4),d.Gc(" ",d.jc(52,13,e.ptotpad)," "),d.Eb(7),d.nc("source",e.katalog)("settings",e.settings))},directives:[a.w,a.y,a.v,c.w,c.l,c.m,a.O,c.b,c.k,c.n,c.p,a.t,a.nb,a.db,o.b],pipes:[h.h],styles:[""]}),t})()}]}];let f=(()=>{class t{}return t.\u0275mod=d.Pb({type:t}),t.\u0275inj=d.Ob({factory:function(e){return new(e||t)},imports:[[r.g.forChild(g)],r.g]}),t})(),v=(()=>{class t{}return t.\u0275mod=d.Pb({type:t}),t.\u0275inj=d.Ob({factory:function(e){return new(e||t)},providers:[s.a,p],imports:[[i.a,a.z,a.P,a.pb,a.C,o.c,a.u,c.e,f]]}),t})()},"E+HJ":function(t,e,n){"use strict";n.r(e),n.d(e,"AotpadModule",(function(){return W}));var i=n("vTDv"),a=n("tyNb"),o=n("O8xV"),s=n("RS3s"),c=n("fXoL"),r=n("tk/3");let d=(()=>{class t extends class{}{constructor(t){super(),this.http=t}getAOtpad(){return this.http.get("api/ambalazniotpad")}}return t.\u0275fac=function(e){return new(e||t)(c.bc(r.b))},t.\u0275prov=c.Nb({token:t,factory:t.\u0275fac}),t})();var l=n("aceb"),b=n("3Pt+"),u=n("ofXK");let p=(()=>{class t{constructor(t,e){this.katalogService=t,this.aotpadService=e,this.katalog=new s.a,this.settings={hideSubHeader:!0,actions:{add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj",filter:!1},naziv:{title:"Naziv",filter:!1}}},this.aotpad={_id:"",fizickoStanje:"",indeksniBroj:"",naziv:"",opis:"",kolicina:0,komunalan:!1}}ngOnInit(){this.katalogService.getKatalog().subscribe(t=>{this.katalog.load(t)})}onSearch(t=""){this.katalog.setFilter([{field:"indeksniBroj",search:t}],!1)}chooseOtpad(t){this.aotpad.indeksniBroj=t.data.indeksniBroj,this.aotpad.naziv=t.data.naziv,this.aotpad.opis=t.data.naziv}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.a),c.Rb(d))},t.\u0275cmp=c.Lb({type:t,selectors:[["ngx-dodaj-otpad"]],decls:55,vars:13,consts:[[1,"container-fluid"],[1,"flex-fill","px-4"],[1,"row"],[1,"col-6","flex-fill"],[1,"row","my-3"],[1,"col-12"],["nbInput","","name","naziv",1,"col","ml-3",3,"placeholder","ngModel","ngModelChange"],["nbInput","","name","opis",1,"col","ml-3",3,"placeholder","ngModel","ngModelChange"],["fullWidth","","decimals","1","step","0.1","min","0","type","number","nbInput","","placeholder","0.0","name","kolicina",1,"col-2","ml-3",3,"ngModel","ngModelChange"],["nbButton","","disabled",""],["selected","Cvrsto","name","stanje",1,"col",3,"ngModel","ngModelChange"],["value","Cvrsto"],["value","Tecno"],["value","Gasovito"],["value","Prah"],[1,"row","my-3","ml-3"],[3,"ngModel","ngModelChange"],["name","komunalan",3,"valueChange"],["checked","","name","nekomunalan",3,"valueChange"],["nbButton","","type","submit","status","primary",1,"ml-3"],[1,"col-6"],[1,"col-7"],["nbInput","","fullWidth","","type","text","placeholder","Pretrazi",1,"col-3",3,"input"],["search",""],[3,"source","settings","custom"]],template:function(t,e){if(1&t){const t=c.Yb();c.Xb(0,"div"),c.Xb(1,"nb-card",0),c.Xb(2,"nb-card-header"),c.Ec(3," Dodajte novi inventar otpada "),c.Wb(),c.Xb(4,"nb-card-body"),c.Xb(5,"div",1),c.Xb(6,"div",2),c.Xb(7,"div",3),c.Xb(8,"form"),c.Xb(9,"div",4),c.Xb(10,"label",5),c.Ec(11),c.Wb(),c.Wb(),c.Xb(12,"div",4),c.Xb(13,"label",5),c.Ec(14,"Naziv: "),c.Wb(),c.Xb(15,"input",6),c.fc("ngModelChange",(function(t){return e.aotpad.naziv=t})),c.Wb(),c.Wb(),c.Xb(16,"div",4),c.Xb(17,"label",5),c.Ec(18,"Opis: "),c.Wb(),c.Xb(19,"input",7),c.fc("ngModelChange",(function(t){return e.aotpad.opis=t})),c.Wb(),c.Wb(),c.Xb(20,"div",4),c.Xb(21,"label",5),c.Ec(22,"Trenutna kolicina na skladistu: "),c.Wb(),c.Xb(23,"input",8),c.fc("ngModelChange",(function(t){return e.aotpad.kolicina=t})),c.Wb(),c.Xb(24,"button",9),c.Ec(25,"kg"),c.Wb(),c.Wb(),c.Xb(26,"div",4),c.Xb(27,"label",5),c.Ec(28,"Fizicko stanje otpada: "),c.Wb(),c.Xb(29,"nb-select",10),c.fc("ngModelChange",(function(t){return e.aotpad.fizickoStanje=t})),c.Xb(30,"nb-option",11),c.Ec(31,"Cvrsto"),c.Wb(),c.Xb(32,"nb-option",12),c.Ec(33,"Tecno"),c.Wb(),c.Xb(34,"nb-option",13),c.Ec(35,"Gasovito"),c.Wb(),c.Xb(36,"nb-option",14),c.Ec(37,"Prah"),c.Wb(),c.Wb(),c.Wb(),c.Xb(38,"div",15),c.Xb(39,"nb-radio-group",16),c.fc("ngModelChange",(function(t){return e.aotpad.komunalan=t})),c.Xb(40,"nb-radio",17),c.fc("valueChange",(function(){return e.aotpad.komunalan=!0})),c.Ec(41,"Komunalan"),c.Wb(),c.Xb(42,"nb-radio",18),c.fc("valueChange",(function(){return e.aotpad.komunalan=!1})),c.Ec(43,"Nekomunalan"),c.Wb(),c.Wb(),c.Wb(),c.Xb(44,"div",4),c.Xb(45,"button",19),c.Ec(46,"Dodaj"),c.Wb(),c.Wb(),c.Wb(),c.Ec(47),c.ic(48,"json"),c.Wb(),c.Xb(49,"div",20),c.Xb(50,"label",21),c.Ec(51,"Pretrazi po indeksnom broju:"),c.Wb(),c.Xb(52,"input",22,23),c.fc("input",(function(){c.wc(t);const n=c.uc(53);return n.value.length>=1&&e.onSearch(n.value)})),c.Wb(),c.Xb(54,"ng2-smart-table",24),c.fc("custom",(function(t){return e.chooseOtpad(t)})),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()}2&t&&(c.Eb(11),c.Gc("Indeksni broj: ",e.aotpad.indeksniBroj,""),c.Eb(4),c.nc("placeholder",e.aotpad.naziv)("ngModel",e.aotpad.naziv),c.Eb(4),c.nc("placeholder",e.aotpad.opis)("ngModel",e.aotpad.opis),c.Eb(4),c.nc("ngModel",e.aotpad.kolicina),c.Eb(6),c.nc("ngModel",e.aotpad.fizickoStanje),c.Eb(10),c.nc("ngModel",e.aotpad.komunalan),c.Eb(8),c.Gc(" ",c.jc(48,11,e.aotpad)," "),c.Eb(7),c.nc("source",e.katalog)("settings",e.settings))},directives:[l.w,l.y,l.v,b.w,b.l,b.m,l.O,b.b,b.k,b.n,b.p,l.t,l.nb,l.db,l.kb,l.jb,s.b],pipes:[u.h],styles:[""]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Lb({type:t,selectors:[["ngx-aotpad"]],decls:1,vars:0,template:function(t,e){1&t&&c.Sb(0,"router-outlet")},directives:[a.h],encapsulation:2}),t})();var g=n("LRne");let f=(()=>{class t extends class{}{constructor(t){super(),this.http=t}getAmbalaza(){return this.http.get("api/ambalaza")}getVrsteAmbalaza(){return Object(g.a)(["PET","Staklo","Druga vrsta plastike","Gvo\u017e\u0111e","Aluminijum","Palete","Ostalo Drvo","Tekstil","Keramika","Druge vrste ambala\u017ee"])}}return t.\u0275fac=function(e){return new(e||t)(c.bc(r.b))},t.\u0275prov=c.Nb({token:t,factory:t.\u0275fac}),t})();function v(t,e){if(1&t&&(c.Xb(0,"nb-option",17),c.Ec(1),c.Wb()),2&t){const t=e.$implicit;c.nc("value",t),c.Eb(1),c.Fc(t)}}const m=[{path:"",component:h,children:[{path:"dodaj-otpad",component:p},{path:"dodaj-ambalazu",component:(()=>{class t{constructor(t,e){this.katalogService=t,this.ambalazaService=e,this.ambalaza={_id:"",naziv:"",opis:"",kolicina:0,povratna:!0}}ngOnInit(){this.ambalazaService.getVrsteAmbalaza().subscribe(t=>{this.vrste=t})}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(o.a),c.Rb(f))},t.\u0275cmp=c.Lb({type:t,selectors:[["ngx-dodaj-ambalazu"]],decls:37,vars:12,consts:[[1,"container-fluid"],[1,"flex-fill","px-4"],[1,"row"],[1,"col-6","flex-fill"],[1,"row","my-3"],["name","naziv",1,"col-8",3,"selected","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12"],["nbInput","","name","naziv",1,"col","ml-3",3,"placeholder","ngModel","ngModelChange"],["nbInput","","name","opis",1,"col","ml-3",3,"placeholder","ngModel","ngModelChange"],["fullWidth","","pattern","[0-9]*","min","0","type","number","nbInput","","placeholder","0.0","name","kolicina",1,"col-2","ml-3",3,"ngModel","ngModelChange"],["nbButton","","disabled",""],[1,"row","my-3","ml-3"],[3,"ngModel","ngModelChange"],["name","povratna",3,"valueChange"],["checked","","name","nepovratna",3,"valueChange"],["nbButton","","type","submit","status","primary",1,"ml-3"],[3,"value"]],template:function(t,e){1&t&&(c.Xb(0,"div"),c.Xb(1,"nb-card",0),c.Xb(2,"nb-card-header"),c.Ec(3," Dodajte novi inventar ambalaze "),c.Wb(),c.Xb(4,"nb-card-body"),c.Xb(5,"div",1),c.Xb(6,"div",2),c.Xb(7,"div",3),c.Xb(8,"form"),c.Xb(9,"div",4),c.Xb(10,"nb-select",5),c.fc("ngModelChange",(function(t){return e.ambalaza.naziv=t})),c.Cc(11,v,2,2,"nb-option",6),c.Wb(),c.Wb(),c.Xb(12,"div",4),c.Xb(13,"label",7),c.Ec(14,"Naziv: "),c.Wb(),c.Xb(15,"input",8),c.fc("ngModelChange",(function(t){return e.ambalaza.naziv=t})),c.Wb(),c.Wb(),c.Xb(16,"div",4),c.Xb(17,"label",7),c.Ec(18,"Opis: "),c.Wb(),c.Xb(19,"input",9),c.fc("ngModelChange",(function(t){return e.ambalaza.opis=t})),c.Wb(),c.Wb(),c.Xb(20,"div",4),c.Xb(21,"label",7),c.Ec(22,"Trenutna kolicina na skladistu: "),c.Wb(),c.Xb(23,"input",10),c.fc("ngModelChange",(function(t){return e.ambalaza.kolicina=t})),c.Wb(),c.Xb(24,"button",11),c.Ec(25,"kg"),c.Wb(),c.Wb(),c.Xb(26,"div",12),c.Xb(27,"nb-radio-group",13),c.fc("ngModelChange",(function(t){return e.ambalaza.povratna=t})),c.Xb(28,"nb-radio",14),c.fc("valueChange",(function(){return e.ambalaza.povratna=!0})),c.Ec(29,"Povratna"),c.Wb(),c.Xb(30,"nb-radio",15),c.fc("valueChange",(function(){return e.ambalaza.povratna=!1})),c.Ec(31,"Nepovratna"),c.Wb(),c.Wb(),c.Wb(),c.Xb(32,"div",4),c.Xb(33,"button",16),c.Ec(34,"Dodaj"),c.Wb(),c.Wb(),c.Wb(),c.Ec(35),c.ic(36,"json"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Eb(10),c.nc("selected",e.vrste[0])("ngModel",e.ambalaza.naziv),c.Eb(1),c.nc("ngForOf",e.vrste),c.Eb(4),c.nc("placeholder",e.ambalaza.naziv)("ngModel",e.ambalaza.naziv),c.Eb(4),c.nc("placeholder",e.ambalaza.opis)("ngModel",e.ambalaza.opis),c.Eb(4),c.nc("ngModel",e.ambalaza.kolicina),c.Eb(4),c.nc("ngModel",e.ambalaza.povratna),c.Eb(8),c.Gc(" ",c.jc(36,10,e.ambalaza)," "))},directives:[l.w,l.y,l.v,b.w,b.l,b.m,l.nb,b.k,b.n,u.m,l.O,b.b,b.p,b.q,l.t,l.kb,l.jb,l.db],pipes:[u.h],styles:[""]}),t})()}]}];let k=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[a.g.forChild(m)],a.g]}),t})(),W=(()=>{class t{}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},providers:[o.a,d,f],imports:[[i.a,k,l.z,l.P,l.pb,l.C,s.c,l.u,b.e,l.lb]]}),t})()},O97o:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("AytR"),a=n("fXoL"),o=n("tk/3"),s=n("McNs");let c=(()=>{class t extends class{}{constructor(t,e){super(),this.http=t,this.authService=e,this.apiUrl=i.a.apiUrl}getDozvola(){return this.http.get(this.apiUrl+"/api/dozvola")}updateDozvola(t){return this.http.patch(this.apiUrl+"/api/dozvola/"+t._id,t)}getDozvolaFirme(t){let e="";return this.authService.getToken().subscribe(t=>{e=t.getPayload().data.firma._id}),this.http.get(this.apiUrl+"/api/dozvola/firma/"+e+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(a.bc(o.b),a.bc(s.g))},t.\u0275prov=a.Nb({token:t,factory:t.\u0275fac}),t})()},dgmN:function(t,e,n){"use strict";n.r(e),n.d(e,"PagesModule",(function(){return wt}));var i=n("3Pt+"),a=n("aceb"),o=n("RS3s"),s=n("O97o"),c=n("g6/h"),r=n("v7Ib"),d=n("8sB5"),l=n("ud2R"),b=n("vTDv"),u=n("E+HJ"),p=n("fXoL");let h=(()=>{class t{}return t.\u0275mod=p.Pb({type:t}),t.\u0275inj=p.Ob({factory:function(e){return new(e||t)},imports:[[i.e,b.a,a.z,a.Lb,a.u,a.n,a.N,a.u]]}),t})();var g=n("o/8v"),f=n("rDBk"),v=n("tyNb");let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-dashboard"]],decls:2,vars:0,consts:[[1,"row"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Ec(1," Glavni panel!\n"),p.Wb())},styles:[".nb-theme-default   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-dark   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-cosmic   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-corporate   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}"]}),t})(),k=(()=>{class t{constructor(t){this.menuService=t}goToHome(){this.menuService.navigateHome()}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(a.bb))},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["nbButton","","fullWidth","","type","button",1,"home-button",3,"click"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Xb(1,"div",1),p.Xb(2,"nb-card"),p.Xb(3,"nb-card-body"),p.Xb(4,"div",2),p.Xb(5,"h2",3),p.Ec(6,"404 Ne postoji"),p.Wb(),p.Xb(7,"small",4),p.Ec(8,"Stranica koju ste tra\u017eili ne postoji"),p.Wb(),p.Xb(9,"button",5),p.fc("click",(function(){return e.goToHome()})),p.Ec(10," Vrati me na po\u010detnu "),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Wb())},directives:[a.w,a.v,a.t],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),t})();var W=n("McNs"),X=n("mgFL");let j=(()=>{class t{constructor(t,e,n){this.roleService=t,this.authService=e,this.router=n,this.menu=[],this.authService.getToken().subscribe(t=>{"admin"===t.getPayload().data.korisnik.uloga&&this.router.navigate(["admin"])})}ngOnInit(){this.authService.getToken().subscribe(t=>{const e=t.getPayload().data.firma.radFirme;this.roleService.getOperationsMenu(e).subscribe(t=>{this.menu=t})})}ngOnDestroy(){this.menu=[]}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(l.a),p.Rb(W.g),p.Rb(v.c))},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(t,e){1&t&&(p.Xb(0,"ngx-one-column-layout"),p.Sb(1,"nb-menu",0),p.Sb(2,"router-outlet"),p.Wb()),2&t&&(p.Eb(1),p.nc("items",e.menu))},directives:[X.a,a.Z,v.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),t})();var M=n("pVkk"),T=n("ofXK"),E=n("LRne"),S=n("El76"),z=n("8FOb");const O={edit:{confirmSave:!0,editButtonContent:'<i class="fa fa-edit"></i>',saveButtonContent:'<i class="fa fa-check"></i>',cancelButtonContent:'<i class="fa fa-times"></i>'},delete:{confirmDelete:!0,deleteButtonContent:'<i class="fa fa-trash"></i>',saveButtonContent:"save",cancelButtonContent:"cancel"},actions:{position:"right",add:!1,edit:!0,delete:!0},columns:{indeksniBroj:{title:"Indeksni Broj",editable:!1},naziv:{title:"Naziv"},opis:{title:"Opis"},kolicina:{title:"Koli\u010dina (kg)",editable:!1}}},C={hideSubHeader:!0,actions:{columnTitle:"Dodaj na skladi\u0161te",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-plus"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj"},naziv:{title:"Naziv"},opis:{title:"Opis"},kolicina:{title:"Koli\u010dina (kg)"}}};let w=(()=>{class t{constructor(){}ngOnInit(){}calculateStatus(){return this.storage.kolicina/this.storage.maxKolicina*100<33?"success":this.storage.kolicina/this.storage.maxKolicina*100<66?"warning":"danger"}calculateValue(){return this.storage.kolicina/this.storage.maxKolicina*100}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Lb({type:t,selectors:[["storage-meter"]],inputs:{storage:"storage"},decls:6,vars:4,consts:[[1,"row"],[1,"col-12","text-center","progress-bar-text"],[1,"badge","badge-light"],[1,"col-12"],["size","large",3,"value","status"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Xb(1,"div",1),p.Xb(2,"span",2),p.Ec(3),p.Wb(),p.Wb(),p.Xb(4,"div",3),p.Sb(5,"nb-progress-bar",4),p.Wb(),p.Wb()),2&t&&(p.Eb(3),p.Hc("",e.storage.kolicina,"/",e.storage.maxKolicina,""),p.Eb(2),p.nc("value",e.calculateValue())("status",e.calculateStatus()))},directives:[a.hb],styles:[".progress-bar-text[_ngcontent-%COMP%]{font-size:1.3rem;z-index:1;position:relative;transform:translateY(101%)}"]}),t})();const y=["Deponovanje otpada u zemlji\u0161te ili na zemlji\u0161te","Izlaganje otpada procesima u zemlji\u0161tu","Duboko ubrizgavanje","Povr\u0161insko deponovanje ","Odlaganje otpada u posebno projektovane deponije","Ispu\u0161tanje u vode, osim u mora, odnosno okeane","Ispu\u0161tanje u mora, odnosno okeane, uklju\u010duju\u0107i utiskivanje u morsko dno","Biolo\u0161ki tretmani koji nisu nazna\u010deni na drugom mestu u ovoj listi, a \u010diji su kona\u010dni proizvodi jedinjenja ili sme\u0161e koje se odbacuju u bilo kojoj od operacija od D1 do D12","Fizi\u010dko-hemijsk itretmani koji nisu nazna\u010deni na drugom mestu u ovoj listi, a \u010diji su kona\u010dni proizvodi jedinjenja ili sme\u0161e koje se odbacuju u bilo kojoj od operacija od D1 do D12","Spaljivanje (insineracija) na tlu","Spaljivanje (insineracija) na moru","Trajno skladi\u0161tenje","Me\u0161anje otpada pre podvrgavanja bilo kojoj od operacija od D1 do D12","Prepakovanje otpada pre podvrgavanja bil okojoj od operacija od D1 do D13","Skladi\u0161tenje otpada koje prethodi bilo kojoj od operacija od D1 do D14"],I=["Kori\u0161\u0107enje otpada prvenstveno ka goriva ili drugog sredstva za proizvodnju energine","Regeneracija/prerada rastvara\u010da","Recikliranje/prerada organskih materija koji se ne koriste kao rastvara\u010di (uklju\u010duju\u0107i kompostiranje i ostale procese biolo\u0161ke transformacije)","Recikliranje/prerada metala i jedinjenja metala","Recikliranje/prerada drugih neorganskih materijala","Regeneracija kiselina ili baza","Obnavljanje komponenata koje se koriste za smanjenje zaga\u0111enja","Obnavljanje komponenata katalizatora","Re-rafinacija ili drugi na\u010din ponovnog iskori\u0161\u0107enja otpadnog ulja","Izlaganje otpada procesima u zemlji\u0161tu koji imaju korist za poljoprivredu il iekolo\u0161ki napredak","Promene radi podvrgavanja otpada bilo kojoj od operacija od R1 do R11","Skladi\u0161tenje otpada namenjenih za bilo koju operaciju od R1 do R12 (isklju\u010duju\u0107i privremeno skladi\u0161tenje otpada na lokaciji njegovog nastanka) "];function F(t,e){if(1&t&&(p.Xb(0,"nb-option-group",27),p.Xb(1,"nb-option",11),p.Ec(2),p.Wb(),p.Wb()),2&t){const t=e.$implicit,n=e.index,i=p.hc(2);p.nc("title","disposal"===i.type?"D"+(n+1):"R"+(n+1)),p.Eb(1),p.nc("value","disposal"===i.type?"D"+(n+1):"R"+(n+1)),p.Eb(1),p.Fc(t)}}function D(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Xb(1,"div",4),p.Xb(2,"label",15),p.Ec(3,"Naziv preduze\u0107a od kojeg je preuzet otpad: "),p.Wb(),p.Xb(4,"div",13),p.Xb(5,"input",16,17),p.fc("ngModelChange",(function(e){return p.wc(t),p.hc().companyName=e})),p.Wb(),p.Wb(),p.Wb(),p.Xb(7,"div",18),p.Xb(8,"label",19),p.Ec(9,"Broj dokumenta o kretanju otpada: "),p.Wb(),p.Xb(10,"div",13),p.Xb(11,"input",20,21),p.fc("ngModelChange",(function(e){return p.wc(t),p.hc().documentNo=e})),p.Wb(),p.Wb(),p.Wb(),p.Xb(13,"div",18),p.Xb(14,"label",22),p.Ec(15),p.Wb(),p.Xb(16,"div",13),p.Xb(17,"nb-select",23),p.fc("ngModelChange",(function(e){p.wc(t);const n=p.hc();return"disposal"===n.type?n.selectedTrash.dOznaka:n.selectedTrash.rOznaka=e})),p.Cc(18,F,3,3,"nb-option-group",24),p.Wb(),p.Wb(),p.Xb(19,"div",25),p.Xb(20,"nb-checkbox",null,26),p.Ec(22),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=p.uc(21),e=p.hc();p.Eb(5),p.nc("ngModel",e.companyName),p.Eb(6),p.nc("ngModel",e.documentNo),p.Eb(4),p.Gc("","disposal"===e.type?"D":"R"," Oznaka: "),p.Eb(2),p.nc("ngModel","disposal"===e.type?e.selectedTrash.dOznaka:e.selectedTrash.rOznaka)("disabled",!t.checked),p.Eb(1),p.nc("ngForOf",e.currentTags),p.Eb(4),p.Gc("Promeni ","disposal"===e.type?"D":"R"," oznaku otpada")}}const P=function(){return{standalone:!0}};let x=(()=>{class t{constructor(){this.callAddTrash=new p.o,this.storageAmmountUnit="KG",this.D_TAGS=y,this.R_TAGS=I,this.currentTags="disposal"===this.type?y:I}ngOnInit(){}callAddTrashMethod(){"KG"!==this.storageAmmountUnit&&(this.trashAmmount*=1e3),this.callAddTrash.emit({trashAmmount:this.trashAmmount,companyName:this.companyName,documentNo:this.documentNo})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Lb({type:t,selectors:[["add-trash-popup"]],inputs:{type:"type",selectedTrash:"selectedTrash"},outputs:{callAddTrash:"callAddTrash"},decls:23,vars:10,consts:[[2,"max-width","50vw"],[3,"ngSubmit"],["addForm","ngForm"],[4,"ngIf"],[1,"row"],["for","input-Kolicina",1,"label","col-12"],[1,"col-10","pr-0"],["fullWidth","","id","input-Kolicina","min","1","name","koli\u010dina","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","0","type","number",1,"form-control",3,"ngModel","ngModelChange"],["kolicina","ngModel"],[1,"pl-0","col-2"],["fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value"],[1,"row","my-2"],[1,"col-12"],["fullWidth","","type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["for","input-nazivFirme",1,"label","col-12"],["required","","fullWidth","","id","input-nazivFirme","name","nazivFirme","nbInput","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["nazivFirme1","ngModel"],[1,"row","mt-1"],["for","input-brDokumenta",1,"label","col-12"],["required","","fullWidth","","id","input-brDokumenta","name","brDokumenta","nbInput","","type","text",1,"form-control",3,"ngModel","ngModelChange"],["brDokumenta1","ngModel"],["for","input-dOznaka",1,"col-12","label"],["fullWidth","","name","dOznaka","id","input-dOznaka",1,"pr-2",3,"ngModel","disabled","ngModelChange"],[3,"title",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["checkBox",""],[3,"title"]],template:function(t,e){if(1&t&&(p.Xb(0,"div",0),p.Xb(1,"form",1,2),p.fc("ngSubmit",(function(){return e.callAddTrashMethod()})),p.Cc(3,D,23,7,"div",3),p.Xb(4,"div",4),p.Xb(5,"label",5),p.Ec(6,"Koli\u010dina koju dodajete: "),p.Wb(),p.Xb(7,"div",6),p.Xb(8,"input",7,8),p.fc("ngModelChange",(function(t){return e.trashAmmount=t})),p.Wb(),p.Wb(),p.Xb(10,"div",9),p.Xb(11,"nb-select",10),p.fc("ngModelChange",(function(t){return e.storageAmmountUnit=t})),p.Xb(12,"nb-option",11),p.Ec(13,"KG"),p.Wb(),p.Xb(14,"nb-option",11),p.Ec(15,"T"),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Xb(16,"div",12),p.Xb(17,"div",13),p.Xb(18,"p"),p.Ec(19),p.Wb(),p.Wb(),p.Wb(),p.Xb(20,"div",4),p.Xb(21,"button",14),p.Ec(22," Dodaj "),p.Wb(),p.Wb(),p.Wb(),p.Wb()),2&t){const t=p.uc(2),n=p.uc(9);p.Eb(3),p.nc("ngIf","production"!==e.type),p.Eb(5),p.nc("ngModel",e.trashAmmount),p.Eb(3),p.nc("ngModelOptions",p.qc(9,P))("selected","KG")("ngModel",e.storageAmmountUnit),p.Eb(1),p.nc("value","KG"),p.Eb(2),p.nc("value","T"),p.Eb(5),p.Gc("Trenutna kolicina otpada na skladistu: ",e.selectedTrash.kolicina," KG"),p.Eb(2),p.nc("disabled",n.value<1||void 0===n.value&&t.valid)}},directives:[i.w,i.l,i.m,T.n,a.O,i.p,i.b,i.k,i.n,a.nb,a.db,i.s,T.m,a.B,a.eb],styles:[""]}),t})();const B=["addTrash"];function N(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Sb(1,"storage-meter",3),p.Xb(2,"nb-card"),p.Xb(3,"nb-card-header"),p.Xb(4,"div",4),p.Xb(5,"div",5),p.Xb(6,"h2",6),p.Ec(7),p.Wb(),p.Wb(),p.Xb(8,"div",7),p.Xb(9,"nb-icon",8),p.fc("click",(function(){return p.wc(t),p.hc().edit()})),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Xb(10,"nb-card-body"),p.Xb(11,"ng2-smart-table",9),p.fc("custom",(function(n){p.wc(t);const i=e.$implicit;return p.hc().chooseAction(n,i)}))("editConfirm",(function(n){p.wc(t);const i=e.$implicit;return p.hc().updateTrash(n,i)}))("deleteConfirm",(function(n){p.wc(t);const i=e.$implicit;return p.hc().deleteTrash(n,i)})),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=e.$implicit,n=p.hc();p.Eb(1),p.nc("storage",t),p.Eb(6),p.Fc(null==t?null:t.naziv),p.Eb(2),p.nc("icon",n.editIcon),p.Eb(2),p.nc("settings",n.currentSettings)("source",null==t?null:t.neopasniOtpad)}}function _(t,e){if(1&t){const t=p.Yb();p.Xb(0,"add-trash-popup",10),p.fc("callAddTrash",(function(e){return p.wc(t),p.hc().addTrashMethod(e)})),p.Wb()}if(2&t){const t=p.hc();p.nc("type","production")("selectedTrash",t.selectedTrash)}}let R=(()=>{class t{constructor(t,e,n,i,a){this.storageService=t,this.windowService=e,this.safeTrashService=n,this.unsafeTrashService=i,this.toastrService=a,this.updateStorageEvent=new p.o,this.settings=C,this.currentSettings=this.settings,this.editSettings=O,this.editIcon="edit"}ngOnInit(){this.mergeTrash(),this.storage$=Object(E.a)(this.storage)}updateStorage(){this.updateStorageEvent.emit(),this.mergeTrash(),this.storage$=Object(E.a)(this.storage)}mergeTrash(){for(const t of this.storage)t.neopasniOtpad=t.neopasniOtpad.concat(t.opasniOtpad)}edit(){this.currentSettings!==this.editSettings?(this.currentSettings=this.editSettings,this.editIcon="close"):(this.currentSettings=this.settings,this.editIcon="edit")}chooseAction(t,e){this.selectedStorage=e,"add"===t.action&&this.openAddTrashWindow(t.data)}openAddTrashWindow(t){this.selectedTrash=t,this.windowRef=this.windowService.open(this.addTrash,{title:"Dodaj proizvedenu kolicinu: "+this.selectedTrash.naziv})}addTrashMethod(t){this.selectedTrash.kolicina+=t,this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(this.selectedTrash,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}):this.safeTrashService.updateNOtpad(this.selectedTrash,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+t+" (kg) "+this.selectedTrash.naziv+" na skladi\u0161te.","success"),this.windowRef.close(),t=NaN}updateTrash({newData:t,confirm:e},n){this.selectedStorage=n;try{this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(t,this.selectedStorage._id).subscribe(t=>{}):this.safeTrashService.updateNOtpad(t,this.selectedStorage._id).subscribe(t=>{}),this.updateStorage(),e.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+t.naziv,"success")}catch(i){e.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+t.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:t,confirm:e},n){if(this.selectedStorage=n,window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+t.naziv+"?"))try{t.indeksniBroj.endsWith("*")?this.unsafeTrashService.deleteOOtpad(t,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}):this.safeTrashService.deleteNOtpad(t,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}),e.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+t.naziv,"success")}catch(i){e.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+t.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(M.a),p.Rb(a.Nb),p.Rb(S.a),p.Rb(z.a),p.Rb(a.Hb))},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-skladiste-proizvodnja"]],viewQuery:function(t,e){var n;1&t&&p.Lc(B,!0,p.N),2&t&&p.tc(n=p.gc())&&(e.addTrash=n.first)},inputs:{storage:"storage"},outputs:{updateStorageEvent:"updateStorageEvent"},decls:5,vars:3,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["addTrash",""],[3,"storage"],[1,"row"],[1,"col-11"],[1,"text-left"],[1,"col-1","d-flex","justify-content-center","align-items-center"],[1,"edit-button",3,"icon","click"],[1,"order-table",3,"settings","source","custom","editConfirm","deleteConfirm"],[3,"type","selectedTrash","callAddTrash"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Cc(1,N,12,5,"div",1),p.ic(2,"async"),p.Wb(),p.Cc(3,_,1,2,"ng-template",null,2,p.Dc)),2&t&&(p.Eb(1),p.nc("ngForOf",p.jc(2,1,e.storage$)))},directives:[T.m,w,a.w,a.y,a.L,a.v,o.b,x],pipes:[T.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}.edit-button[_ngcontent-%COMP%]{font-size:2rem}.edit-button[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),t})();var K=n("AytR"),L=n("tk/3");let A=(()=>{class t extends class{}{constructor(t){super(),this.http=t,this.apiUrl=K.a.apiUrl}getTransactions(t="",e=""){return this.http.get(this.apiUrl+"/api/transaction")}getTransaction(t){return this.http.get(this.apiUrl+"/api/transaction/"+t)}getTransportersTransactions(t=""){return this.http.get(this.apiUrl+"/api/transaction/"+t)}getUnfinishedTransactions(t=""){return this.http.get(this.apiUrl+"/api/transaction/unfinished/"+t)}updateTransaction(t){return this.http.patch(this.apiUrl+"/api/transaction/"+t._id,{transaction:t})}}return t.\u0275fac=function(e){return new(e||t)(p.bc(L.b))},t.\u0275prov=p.Nb({token:t,factory:t.\u0275fac}),t})();const U={hideSubHeader:!0,actions:{columnTitle:"Dodaj otpad/Obradi otpad/Zavr\u0161i tretman",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-plus"></i>'},{name:"process",title:'<i class="fa fa-trash-restore"></i>'},{name:"leftover",title:'<i class="fa fa-exclamation-triangle"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj"},naziv:{title:"Naziv"},opis:{title:"Opis"},kolicina:{title:"Kolicina"}}};function $(t,e){if(1&t&&(p.Xb(0,"nb-option",18),p.Ec(1),p.Wb()),2&t){const t=e.$implicit,n=e.index,i=p.hc();p.nc("value",t),p.Eb(1),p.Ic(" ",t.nazivFirme," | ",i.dateStrings[n]," | ",t.kolicinaOtpada," kg ")}}const G=function(){return{standalone:!0}};let Y=(()=>{class t{constructor(t){this.transactionService=t,this.callProcessTrash=new p.o,this.storageAmmountUnit="KG",this.dateStrings=[],this.leftoverTrashCreated=!1}ngOnInit(){this.transactionService.getTransportersTransactions(this.selectedTrash._id).subscribe(t=>{this.transactions=t,this.transactions$=Object(E.a)(t),this.dateStrings=[],this.transactions.forEach(t=>{this.dateStrings.push(t.datum.toString().slice(0,10))})})}onChange(t){const e=t.toLowerCase();this.transactions$=Object(E.a)(this.transactions.filter(t=>t.nazivFirme.includes(e)))}chooseTransaction(t,e){this.selectedTransaction=e,t.value=e.nazivFirme+" | "+e.kolicinaOtpada+" kg"}callProcessTrashMethod(){"KG"!==this.storageAmmountUnit&&(this.trashAmmount*=1e3),this.callProcessTrash.emit({selectedTransaction:this.selectedTransaction,trashAmmount:this.trashAmmount,trashCreated:this.leftoverTrashCreated})}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(A))},t.\u0275cmp=p.Lb({type:t,selectors:[["process-trash-popup"]],inputs:{selectedTrash:"selectedTrash"},outputs:{callProcessTrash:"callProcessTrash"},decls:35,vars:18,consts:[[2,"max-width","50vw"],[3,"ngSubmit"],["obradiForm","ngForm"],[1,"row"],[1,"label","col-12"],[1,"col-12"],["nbInput","","fullWidth","","type","text","name","transaction-input","placeholder","Unesi naziv firme",3,"ngModelOptions","ngModel","nbAutocomplete","ngModelChange","input"],["autoInput",""],["fullWidth","",3,"selectedChange"],["auto",""],["value","-"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],[3,"ngModel","ngModelOptions","ngModelChange"],["nbInput","","name","kolicinaOtpada","fullWidth","","type","number","onkeypress","return /[0-9]/i.test(event.key)","min","1",3,"disabled","max","ngModelOptions","ngModel","ngModelChange"],["kolicina",""],[1,"row","my-2"],["nbButton","","fullWidth","","type","submit",3,"disabled","status"],[3,"value"]],template:function(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div",0),p.Xb(1,"form",1,2),p.fc("ngSubmit",(function(){return e.callProcessTrashMethod()})),p.Xb(3,"div",3),p.Xb(4,"label",4),p.Ec(5,"Odaberi otpad koje firme: "),p.Sb(6,"br"),p.Ec(7,"(Naziv firme | Datum | Koli\u010dina otpada)"),p.Wb(),p.Xb(8,"div",5),p.Xb(9,"input",6,7),p.fc("ngModelChange",(function(t){return e.selectedTransaction=t}))("input",(function(){p.wc(t);const n=p.uc(10);return e.onChange(n.value)})),p.Wb(),p.Xb(11,"nb-autocomplete",8,9),p.fc("selectedChange",(function(n){p.wc(t);const i=p.uc(10);return e.chooseTransaction(i,n)})),p.Xb(13,"nb-option",10),p.Ec(14,"-"),p.Wb(),p.Cc(15,$,2,4,"nb-option",11),p.ic(16,"async"),p.Wb(),p.Wb(),p.Wb(),p.Xb(17,"div",3),p.Xb(18,"div",12),p.Xb(19,"nb-toggle",13),p.fc("ngModelChange",(function(t){return e.leftoverTrashCreated=t})),p.Ec(20," Da li nastaje neki otpad tokom odlaganje? "),p.Wb(),p.Wb(),p.Wb(),p.Xb(21,"div",3),p.Xb(22,"label",4),p.Ec(23,"Odaberi koli\u010dinu za preradu:"),p.Wb(),p.Xb(24,"div",5),p.Xb(25,"input",14,15),p.fc("ngModelChange",(function(t){return e.trashAmmount=t})),p.Wb(),p.Wb(),p.Wb(),p.Xb(27,"div",16),p.Xb(28,"div",5),p.Xb(29,"p"),p.Ec(30),p.Wb(),p.Wb(),p.Wb(),p.Xb(31,"div",3),p.Xb(32,"div",5),p.Xb(33,"button",17),p.Ec(34," Obradi "),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=p.uc(12),n=p.uc(26);p.Eb(9),p.nc("ngModelOptions",p.qc(15,G))("ngModel",e.selectedTransaction)("nbAutocomplete",t),p.Eb(6),p.nc("ngForOf",p.jc(16,13,e.transactions$)),p.Eb(4),p.nc("ngModel",e.leftoverTrashCreated)("ngModelOptions",p.qc(16,G)),p.Eb(6),p.nc("disabled",void 0===e.selectedTransaction)("max",null==e.selectedTransaction?null:e.selectedTransaction.kolicinaOtpada)("ngModelOptions",p.qc(17,G))("ngModel",e.trashAmmount),p.Eb(5),p.Gc("Trenutna kolicina otpada na skladistu: ",e.selectedTrash.kolicina," KG"),p.Eb(3),p.nc("disabled",n.value<1||void 0===n.value)("status","primary")}},directives:[i.w,i.l,i.m,a.O,i.b,a.r,i.k,i.n,a.q,a.db,T.m,a.Ib,i.p,a.t],pipes:[T.b],styles:[""]}),t})();var q=n("O8xV");function H(t,e){if(1&t&&(p.Xb(0,"nb-option",7),p.Ec(1),p.Wb()),2&t){const t=e.$implicit;p.nc("value",t),p.Eb(1),p.Gc(" ",t.naziv," ")}}function V(t,e){if(1&t&&(p.Xb(0,"nb-option",7),p.Ec(1),p.Wb()),2&t){const t=e.$implicit;p.nc("value",t),p.Eb(1),p.Hc(" ",t.indeksniBroj," | ",t.naziv," ")}}const J=function(){return{standalone:!0}};function Z(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div",18),p.Xb(1,"div",16),p.Xb(2,"label",3),p.Ec(3,"Indeksni broj:"),p.Wb(),p.Xb(4,"input",19),p.fc("ngModelChange",(function(n){return p.wc(t),e.$implicit.indeksniBroj=n})),p.Wb(),p.Wb(),p.Xb(5,"div",16),p.Xb(6,"label",3),p.Ec(7,"Naziv:"),p.Wb(),p.Xb(8,"input",20),p.fc("ngModelChange",(function(n){return p.wc(t),e.$implicit.naziv=n})),p.Wb(),p.Wb(),p.Xb(9,"div",21),p.Xb(10,"label",3),p.Ec(11,"Kolicina:"),p.Wb(),p.Xb(12,"input",22),p.fc("ngModelChange",(function(n){return p.wc(t),e.$implicit.kolicina=n})),p.Wb(),p.Wb(),p.Xb(13,"div",23),p.Sb(14,"br"),p.Xb(15,"button",24),p.fc("click",(function(){p.wc(t);const n=e.$implicit;return p.hc(2).removeTrash(n)})),p.Sb(16,"nb-icon",25),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=e.$implicit;p.Eb(4),p.nc("ngModelOptions",p.qc(6,J))("ngModel",t.indeksniBroj),p.Eb(4),p.nc("ngModelOptions",p.qc(7,J))("ngModel",t.naziv),p.Eb(4),p.nc("ngModelOptions",p.qc(8,J))("ngModel",t.kolicina)}}function Q(t,e){if(1&t){const t=p.Yb();p.Xb(0,"nb-accordion-item",8),p.fc("collapsedChange",(function(){p.wc(t);const n=e.$implicit;return p.hc().chooseTransaction(n)})),p.Xb(1,"nb-accordion-item-header"),p.Ec(2),p.Wb(),p.Xb(3,"nb-accordion-item-body"),p.Xb(4,"form",null,9),p.Xb(6,"div",1),p.Xb(7,"div",2),p.Xb(8,"label",3),p.Ec(9,"Odaberi otpade koji nastaju:"),p.Wb(),p.Xb(10,"div",2),p.Xb(11,"input",10,11),p.fc("input",(function(){p.wc(t);const e=p.uc(12);return p.hc().onChange(e.value)})),p.Wb(),p.Xb(13,"nb-autocomplete",12,13),p.fc("selectedChange",(function(e){p.wc(t);const n=p.uc(12);return p.hc().updateLeftoverTrash(e,n)})),p.Cc(15,V,2,3,"nb-option",5),p.ic(16,"async"),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Cc(17,Z,17,9,"div",14),p.Xb(18,"div",15),p.Xb(19,"div",16),p.Xb(20,"button",17),p.fc("click",(function(){return p.wc(t),p.hc().callLeftoverTrashMethod()})),p.Ec(21,"Dodaj nastale otpade "),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=e.$implicit,n=p.uc(14),i=p.hc();p.Eb(2),p.Ic("",t.nazivFirme," | ",t.datum," | ",t.kolicinaOtpada,""),p.Eb(9),p.nc("nbAutocomplete",n),p.Eb(4),p.nc("ngForOf",p.jc(16,7,i.catalog$)),p.Eb(2),p.nc("ngForOf",i.leftoverTrashCreated),p.Eb(3),p.nc("disabled",0===i.leftoverTrashCreated.length||void 0===i.selectedStorage)}}let tt=(()=>{class t{constructor(t,e){this.catalogService=t,this.transactionService=e,this.callLeftoverTrash=new p.o}ngOnInit(){this.leftoverTrashCreated=[],this.unfinshedTransactions$=this.transactionService.getUnfinishedTransactions(this.selectedTrash._id),this.storageProduction$=Object(E.a)(this.storageProduction),this.catalogService.getKatalog().subscribe(t=>{this.catalog=t,this.catalog$=Object(E.a)(t)})}callLeftoverTrashMethod(){this.callLeftoverTrash.emit({selectedTransaction:this.selectedTransaction,leftoverTrashCreated:this.leftoverTrashCreated,selectedStorage:this.selectedStorage})}chooseTransaction(t){this.selectedTransaction=t}onChange(t){const e=t.toLowerCase();this.catalog$=Object(E.a)(this.catalog.filter(t=>t.naziv.includes(e)))}updateLeftoverTrash(t,e){e.value="",delete t._id,t.opis=t.naziv,t.kolicina=0,this.leftoverTrashCreated.includes(t)||this.leftoverTrashCreated.push(t)}removeTrash(t){this.leftoverTrashCreated=this.leftoverTrashCreated.filter(e=>e.indeksniBroj!==t.indeksniBroj)}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(q.a),p.Rb(A))},t.\u0275cmp=p.Lb({type:t,selectors:[["leftover-trash-popup"]],inputs:{selectedTrash:"selectedTrash",storageProduction:"storageProduction"},outputs:{callLeftoverTrash:"callLeftoverTrash"},decls:11,vars:7,consts:[[2,"width","50vw"],[1,"row"],[1,"col-12"],[1,"col-12","label"],["fullWidth","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"collapsedChange",4,"ngFor","ngForOf"],[3,"value"],[3,"collapsedChange"],["LeftoverTrashForm",""],["nbInput","","fullWidth","","type","text","placeholder","Unesi naziv otpada",3,"nbAutocomplete","input"],["autoInput",""],[3,"selectedChange"],["auto",""],["class","row my-2",4,"ngFor","ngForOf"],[1,"row","mt-2"],[1,"col-4"],["fullWidth","","nbButton","","status","primary",3,"disabled","click"],[1,"row","my-2"],["fullWidth","","nbInput","","disabled","",3,"ngModelOptions","ngModel","ngModelChange"],["fullWidth","","nbInput","",3,"ngModelOptions","ngModel","ngModelChange"],[1,"col-3"],["fullWidth","","type","number","min","1","nbInput","",3,"ngModelOptions","ngModel","ngModelChange"],[1,"col-1"],["fullWidth","","nbButton","",1,"mt-1",3,"click"],["icon","close"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Xb(1,"div",1),p.Xb(2,"div",2),p.Xb(3,"label",3),p.Ec(4,"Odaberite skladiste na kome ce nastati otpad:"),p.Wb(),p.Xb(5,"nb-select",4),p.fc("ngModelChange",(function(t){return e.selectedStorage=t})),p.Cc(6,H,2,2,"nb-option",5),p.ic(7,"async"),p.Wb(),p.Wb(),p.Wb(),p.Xb(8,"nb-accordion"),p.Cc(9,Q,22,9,"nb-accordion-item",6),p.ic(10,"async"),p.Wb(),p.Wb()),2&t&&(p.Eb(5),p.nc("ngModel",e.selectedStorage),p.Eb(1),p.nc("ngForOf",p.jc(7,3,e.storageProduction$)),p.Eb(3),p.nc("ngForOf",p.jc(10,5,e.unfinshedTransactions$)))},directives:[a.nb,i.k,i.n,T.m,a.g,a.db,a.i,a.j,a.h,i.w,i.l,i.m,a.O,a.r,a.q,a.t,i.b,i.p,a.L],pipes:[T.b],styles:[""]}),t})();const et=["addTrashTemplate"],nt=["processTrashTemplate"],it=["leftoverTrashTemplate"];function at(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Sb(1,"storage-meter",5),p.Xb(2,"nb-card"),p.Xb(3,"nb-card-header"),p.Xb(4,"div",6),p.Xb(5,"div",7),p.Xb(6,"h2",8),p.Ec(7),p.Wb(),p.Wb(),p.Xb(8,"div",9),p.Xb(9,"nb-icon",10),p.fc("click",(function(){return p.wc(t),p.hc().edit()})),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Xb(10,"nb-card-body"),p.Xb(11,"ng2-smart-table",11),p.fc("custom",(function(n){p.wc(t);const i=e.$implicit;return p.hc().chooseAction(n,i)}))("editConfirm",(function(n){p.wc(t);const i=e.$implicit;return p.hc().updateTrash(n,i)}))("deleteConfirm",(function(n){p.wc(t);const i=e.$implicit;return p.hc().deleteTrash(n,i)})),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=e.$implicit,n=p.hc();p.Eb(1),p.nc("storage",t),p.Eb(6),p.Fc(null==t?null:t.naziv),p.Eb(2),p.nc("icon",n.editIcon),p.Eb(2),p.nc("settings",n.currentSettings)("source",null==t?null:t.neopasniOtpad)}}function ot(t,e){if(1&t){const t=p.Yb();p.Xb(0,"add-trash-popup",12),p.fc("callAddTrash",(function(e){return p.wc(t),p.hc().addTrashMethod(e)})),p.Wb()}if(2&t){const t=p.hc();p.nc("type","treatment")("selectedTrash",t.selectedTrash)}}function st(t,e){if(1&t){const t=p.Yb();p.Xb(0,"process-trash-popup",13),p.fc("callProcessTrash",(function(e){return p.wc(t),p.hc().processTrashMethod(e)})),p.Wb()}if(2&t){const t=p.hc();p.nc("selectedTrash",t.selectedTrash)}}function ct(t,e){if(1&t){const t=p.Yb();p.Xb(0,"leftover-trash-popup",14),p.fc("callLeftoverTrash",(function(e){return p.wc(t),p.hc().leftoverTrashMethod(e)})),p.Wb()}if(2&t){const t=p.hc();p.nc("selectedTrash",t.selectedTrash)("storageProduction",t.storage)}}let rt=(()=>{class t{constructor(t,e,n,i,a,o){this.storageService=t,this.windowService=e,this.safeTrashService=n,this.unsafeTrashService=i,this.transactionsService=a,this.toastrService=o,this.updateStorageEvent=new p.o,this.settings=U,this.currentSettings=this.settings,this.editSettings=O,this.editIcon="edit",this.leftoverTrashCreated=[],this.unfinishedTransactions=[]}ngOnInit(){this.mergeTrash(),this.storageTreatment$=Object(E.a)(this.storageTreatment)}updateStorage(){this.updateStorageEvent.emit(),this.mergeTrash()}mergeTrash(){for(const t of this.storageTreatment)t.neopasniOtpad=t.neopasniOtpad.concat(t.opasniOtpad)}edit(){this.currentSettings!==this.editSettings?(this.currentSettings=this.editSettings,this.editIcon="close"):(this.currentSettings=this.settings,this.editIcon="edit")}chooseAction(t,e){this.selectedStorageTreatment=e,"add"===t.action?this.openAddTrashWindow(t.data):"process"===t.action?this.openProcessTrashWindow(t.data):"leftover"===t.action&&this.openLeftoverTrashWindow(t.data)}openAddTrashWindow(t){this.selectedTrash=t,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj donetu kolicinu: "+this.selectedTrash.naziv})}addTrashMethod({trashAmmount:t,documentNo:e,companyName:n}){this.selectedTrash.kolicina+=t,this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(this.selectedTrash,this.selectedStorageTreatment._id,n,e).subscribe(t=>{this.updateStorage()}):this.safeTrashService.updateNOtpad(this.selectedTrash,this.selectedStorageTreatment._id,n,e).subscribe(t=>{this.updateStorage()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+t+" (kg) "+this.selectedTrash.naziv+" na skladi\u0161te.","success"),this.windowRef.close(),t=NaN}openProcessTrashWindow(t){this.selectedTrash=t,this.windowRef=this.windowService.open(this.processTrashTemplate,{title:"Obradi odre\u0111enu koli\u010dinu: "+this.selectedTrash.naziv})}processTrashMethod({selectedTransaction:t,trashAmmount:e,trashCreated:n}){this.selectedTrash.kolicina-=e;const i=n?t.nazivFirme:"",a=n?t.brojDKO:"";this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(this.selectedTrash,this.selectedStorageTreatment._id,i,a).subscribe(t=>{}):this.safeTrashService.updateNOtpad(this.selectedTrash,this.selectedStorageTreatment._id,i,a).subscribe(t=>{}),t.finished=!0,this.transactionsService.updateTransaction(t).subscribe(t=>{}),this.updateStorage(),this.showToast("Uspeh","Uspe\u0161no ste obradili "+e+" (kg) "+this.selectedTrash.naziv+" na skladi\u0161te.","success"),this.windowRef.close(),e=NaN}openLeftoverTrashWindow(t){this.selectedTrash=t,this.transactionsService.getUnfinishedTransactions(this.selectedTrash._id).subscribe(t=>{this.unfinishedTransactions=t}),this.windowRef=this.windowService.open(this.leftoverTrashTemplate,{title:"Zavr\u0161i proizvodnju preostalog otpada"})}leftoverTrashMethod({selectedTransaction:t,leftoverTrashCreated:e,selectedStorage:n}){e.forEach(t=>{this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.dodajOOtpad(t,n._id).subscribe(t=>{this.updateStorage()}):this.safeTrashService.dodajNOtpad(t,n._id).subscribe(t=>{this.updateStorage()})}),t.nazivFirme=null,t.brojDKO=null,t.finished=!0,this.transactionsService.updateTransaction(t).subscribe(t=>{}),this.showToast("Uspeh","Uspesno ste dodali otpade!","success"),this.windowRef.close()}updateTrash({newData:t,confirm:e},n){this.selectedStorage=n;try{this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(t,this.selectedStorage._id).subscribe(t=>{}):this.safeTrashService.updateNOtpad(t,this.selectedStorage._id).subscribe(t=>{}),this.updateStorage(),e.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+t.naziv,"success")}catch(i){e.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+t.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:t,confirm:e},n){if(this.selectedStorage=n,window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+t.naziv+"?"))try{t.indeksniBroj.endsWith("*")?this.unsafeTrashService.deleteOOtpad(t,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}):this.safeTrashService.deleteNOtpad(t,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}),e.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+t.naziv,"success")}catch(i){e.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+t.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(M.a),p.Rb(a.Nb),p.Rb(S.a),p.Rb(z.a),p.Rb(A),p.Rb(a.Hb))},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-skladiste-tretman"]],viewQuery:function(t,e){var n;1&t&&(p.Lc(et,!0,p.N),p.Lc(nt,!0,p.N),p.Lc(it,!0,p.N)),2&t&&(p.tc(n=p.gc())&&(e.addTrashTemplate=n.first),p.tc(n=p.gc())&&(e.processTrashTemplate=n.first),p.tc(n=p.gc())&&(e.leftoverTrashTemplate=n.first))},inputs:{storageTreatment:"storageTreatment",storage:"storage"},outputs:{updateStorageEvent:"updateStorageEvent"},decls:9,vars:3,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["addTrashTemplate",""],["processTrashTemplate",""],["leftoverTrashTemplate",""],[3,"storage"],[1,"row"],[1,"col-11"],[1,"text-left"],[1,"col-1","d-flex","justify-content-center","align-items-center"],[1,"edit-button",3,"icon","click"],[3,"settings","source","custom","editConfirm","deleteConfirm"],[3,"type","selectedTrash","callAddTrash"],[3,"selectedTrash","callProcessTrash"],[3,"selectedTrash","storageProduction","callLeftoverTrash"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Cc(1,at,12,5,"div",1),p.ic(2,"async"),p.Wb(),p.Cc(3,ot,1,2,"ng-template",null,2,p.Dc),p.Cc(5,st,1,1,"ng-template",null,3,p.Dc),p.Cc(7,ct,1,2,"ng-template",null,4,p.Dc)),2&t&&(p.Eb(1),p.nc("ngForOf",p.jc(2,1,e.storageTreatment$)))},directives:[T.m,w,a.w,a.y,a.L,a.v,o.b,x,Y,tt],pipes:[T.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:60px;text-align:center}.edit-button[_ngcontent-%COMP%]{font-size:2rem}.edit-button[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),t})();const dt={hideSubHeader:!0,actions:{columnTitle:"Dodaj otpad/Odlo\u017ei otpad/Zavr\u0161i odlaganje",position:"right",edit:!1,add:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-plus"></i>'},{name:"dispose",title:'<i class="fa fa-trash-alt"></i>'},{name:"leftover",title:'<i class="fa fa-exclamation-triangle"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj"},naziv:{title:"Naziv"},opis:{title:"Opis"},kolicina:{title:"Kolicina"}}},lt=["addTrashTemplate"],bt=["disposeTrashTemplate"],ut=["leftoverTrashTemplate"];function pt(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Sb(1,"storage-meter",5),p.Xb(2,"nb-card"),p.Xb(3,"nb-card-header"),p.Xb(4,"div",6),p.Xb(5,"div",7),p.Xb(6,"h2",8),p.Ec(7),p.Wb(),p.Wb(),p.Xb(8,"div",9),p.Xb(9,"nb-icon",10),p.fc("click",(function(){return p.wc(t),p.hc().edit()})),p.Wb(),p.Wb(),p.Wb(),p.Wb(),p.Xb(10,"nb-card-body"),p.Xb(11,"ng2-smart-table",11),p.fc("custom",(function(n){p.wc(t);const i=e.$implicit;return p.hc().chooseAction(n,i)}))("editConfirm",(function(n){p.wc(t);const i=e.$implicit;return p.hc().updateTrash(n,i)}))("deleteConfirm",(function(n){p.wc(t);const i=e.$implicit;return p.hc().deleteTrash(n,i)})),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=e.$implicit,n=p.hc();p.Eb(1),p.nc("storage",t),p.Eb(6),p.Fc(null==t?null:t.naziv),p.Eb(2),p.nc("icon",n.editIcon),p.Eb(2),p.nc("settings",n.currentSettings)("source",null==t?null:t.neopasniOtpad)}}function ht(t,e){if(1&t){const t=p.Yb();p.Xb(0,"add-trash-popup",12),p.fc("callAddTrash",(function(e){return p.wc(t),p.hc().addTrashMethod(e)})),p.Wb()}if(2&t){const t=p.hc();p.nc("type","disposal")("selectedTrash",t.selectedTrash)}}function gt(t,e){if(1&t){const t=p.Yb();p.Xb(0,"process-trash-popup",13),p.fc("callProcessTrash",(function(e){return p.wc(t),p.hc().disposeTrashMethod(e)})),p.Wb()}if(2&t){const t=p.hc();p.nc("selectedTrash",t.selectedTrash)}}function ft(t,e){if(1&t){const t=p.Yb();p.Xb(0,"leftover-trash-popup",14),p.fc("callLeftoverTrash",(function(e){return p.wc(t),p.hc().leftoverTrashMethod(e)})),p.Wb()}if(2&t){const t=p.hc();p.nc("selectedTrash",t.selectedTrash)("storageProduction",t.storage)}}let vt=(()=>{class t{constructor(t,e,n,i,a,o){this.storageService=t,this.windowService=e,this.safeTrashService=n,this.unsafeTrashService=i,this.toastrService=a,this.transactionsService=o,this.updateStorageEvent=new p.o,this.settings=dt,this.currentSettings=this.settings,this.editSettings=O,this.editIcon="edit",this.leftoverTrashCreated=[],this.unfinishedTransactions=[]}ngOnInit(){this.mergeTrash(),this.storageDisposal$=Object(E.a)(this.storageDisposal)}updateStorage(){this.updateStorageEvent.emit(),this.mergeTrash()}mergeTrash(){for(const t of this.storageDisposal)t.neopasniOtpad=t.neopasniOtpad.concat(t.opasniOtpad)}edit(){this.currentSettings!==this.editSettings?(this.currentSettings=this.editSettings,this.editIcon="close"):(this.currentSettings=this.settings,this.editIcon="edit")}chooseAction(t,e){this.selectedStorageDisposal=e,"add"===t.action?this.openAddTrashWindow(t.data):"dispose"===t.action?this.openDisposeTrashWindow(t.data):"leftover"===t.action&&this.openLeftoverTrashWindow(t.data)}openAddTrashWindow(t){this.selectedTrash=t,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj donetu kolicinu: "+this.selectedTrash.naziv})}addTrashMethod({trashAmmount:t,documentNo:e,companyName:n}){this.selectedTrash.kolicina+=t,this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(this.selectedTrash,this.selectedStorageDisposal._id,n,e).subscribe(t=>{this.updateStorage()}):this.safeTrashService.updateNOtpad(this.selectedTrash,this.selectedStorageDisposal._id,n,e).subscribe(t=>{this.updateStorage()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+t+" (kg) "+this.selectedTrash.naziv+" na skladi\u0161te.","success"),this.windowRef.close(),t=NaN}openDisposeTrashWindow(t){this.selectedTrash=t,this.windowRef=this.windowService.open(this.disposeTrashTemplate,{title:"Obradi odre\u0111enu koli\u010dinu: "+this.selectedTrash.naziv})}disposeTrashMethod({selectedTransaction:t,trashAmmount:e,trashCreated:n}){this.selectedTrash.kolicina-=e;const i=n?t.nazivFirme:"",a=n?t.brojDKO:"";this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(this.selectedTrash,this.selectedStorageDisposal._id,i,a).subscribe(t=>{}):this.safeTrashService.updateNOtpad(this.selectedTrash,this.selectedStorageDisposal._id,i,a).subscribe(t=>{}),t.finished=!0,this.transactionsService.updateTransaction(t).subscribe(t=>{}),this.updateStorage(),this.showToast("Uspeh","Uspe\u0161no ste obradili "+e+" (kg) "+this.selectedTrash.naziv+" na skladi\u0161te.","success"),this.windowRef.close(),e=NaN}openLeftoverTrashWindow(t){this.selectedTrash=t,this.transactionsService.getUnfinishedTransactions(this.selectedTrash._id).subscribe(t=>{this.unfinishedTransactions=t}),this.windowRef=this.windowService.open(this.leftoverTrashTemplate,{title:"Zavr\u0161i proizvodnju preostalog otpada"})}leftoverTrashMethod({selectedTransaction:t,leftoverTrashCreated:e,selectedStorage:n}){e.forEach(t=>{this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.dodajOOtpad(t,n._id).subscribe(t=>{this.updateStorage()}):this.safeTrashService.dodajNOtpad(t,n._id).subscribe(t=>{this.updateStorage()})}),t.nazivFirme=null,t.brojDKO=null,t.finished=!0,this.transactionsService.updateTransaction(t).subscribe(t=>{}),this.showToast("Uspeh","Uspesno ste dodali otpade!","success"),this.windowRef.close()}updateTrash({newData:t,confirm:e},n){this.selectedStorage=n;try{this.selectedTrash.indeksniBroj.endsWith("*")?this.unsafeTrashService.updateOOtpad(t,this.selectedStorage._id).subscribe(t=>{}):this.safeTrashService.updateNOtpad(t,this.selectedStorage._id).subscribe(t=>{}),this.updateStorage(),e.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste uredili "+t.naziv,"success")}catch(i){e.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da promenite "+t.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}deleteTrash({data:t,confirm:e},n){if(this.selectedStorage=n,window.confirm("Da li ste sigurni da \u017eelite da obri\u0161ete "+t.naziv+"?"))try{t.indeksniBroj.endsWith("*")?this.unsafeTrashService.deleteOOtpad(t,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}):this.safeTrashService.deleteNOtpad(t,this.selectedStorage._id).subscribe(t=>{this.updateStorage()}),e.resolve(),this.showToast("Uspeh!","Uspe\u0161no ste obrisali "+t.naziv,"success")}catch(i){e.reject(),this.showToast("Gre\u0161ka!","Do\u0161lo je do gre\u0161ke dok ste poku\u0161ali da obri\u0161ete "+t.naziv+". Molimo vas poku\u0161ajte kasnije.","danger")}}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(M.a),p.Rb(a.Nb),p.Rb(S.a),p.Rb(z.a),p.Rb(a.Hb),p.Rb(A))},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-skladiste-deponija"]],viewQuery:function(t,e){var n;1&t&&(p.Lc(lt,!0,p.N),p.Lc(bt,!0,p.N),p.Lc(ut,!0,p.N)),2&t&&(p.tc(n=p.gc())&&(e.addTrashTemplate=n.first),p.tc(n=p.gc())&&(e.disposeTrashTemplate=n.first),p.tc(n=p.gc())&&(e.leftoverTrashTemplate=n.first))},inputs:{storageDisposal:"storageDisposal",storage:"storage"},outputs:{updateStorageEvent:"updateStorageEvent"},decls:9,vars:3,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["addTrashTemplate",""],["disposeTrashTemplate",""],["leftoverTrashTemplate",""],[3,"storage"],[1,"row"],[1,"col-11"],[1,"text-left"],[1,"col-1","d-flex","justify-content-center","align-items-center"],[1,"edit-button",3,"icon","click"],[1,"order-table",3,"settings","source","custom","editConfirm","deleteConfirm"],[3,"type","selectedTrash","callAddTrash"],[3,"selectedTrash","callProcessTrash"],[3,"selectedTrash","storageProduction","callLeftoverTrash"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Cc(1,pt,12,5,"div",1),p.ic(2,"async"),p.Wb(),p.Cc(3,ht,1,2,"ng-template",null,2,p.Dc),p.Cc(5,gt,1,1,"ng-template",null,3,p.Dc),p.Cc(7,ft,1,2,"ng-template",null,4,p.Dc)),2&t&&(p.Eb(1),p.nc("ngForOf",p.jc(2,1,e.storageDisposal$)))},directives:[T.m,w,a.w,a.y,a.L,a.v,o.b,x,Y,tt],pipes:[T.b],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom{display:inline-block;width:60px;text-align:center}.edit-button[_ngcontent-%COMP%]{font-size:2rem}.edit-button[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),t})();const mt=["dodajKolicinu"];function kt(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Xb(1,"nb-card"),p.Xb(2,"nb-card-header"),p.Xb(3,"h2",3),p.Ec(4),p.Wb(),p.Wb(),p.Xb(5,"nb-card-body"),p.Xb(6,"ng2-smart-table",4),p.fc("custom",(function(n){p.wc(t);const i=e.$implicit;return p.hc().changeKolicina(n,i)})),p.Wb(),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=e.$implicit,n=p.hc();p.Eb(4),p.Fc(null==t?null:t.naziv),p.Eb(2),p.nc("settings",n.settings)("source",null==t?null:t.neopasniOtpad)}}function Wt(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div",5),p.Xb(1,"form",6,7),p.fc("ngSubmit",(function(){return p.wc(t),p.hc().dodajOtpad()})),p.Xb(3,"div",8),p.Xb(4,"label",9),p.Ec(5,"Dodaj: "),p.Wb(),p.Xb(6,"input",10,11),p.fc("ngModelChange",(function(e){return p.wc(t),p.hc().otpadKolicina=e})),p.Wb(),p.Wb(),p.Xb(8,"div",12),p.Xb(9,"p"),p.Ec(10),p.Wb(),p.Wb(),p.Xb(11,"button",13),p.Ec(12,"Dodaj"),p.Wb(),p.Wb(),p.Wb()}if(2&t){const t=p.uc(7),e=p.hc();p.Eb(6),p.nc("ngModel",e.otpadKolicina),p.Eb(4),p.Gc("Trenutna kolicina otpada na skladistu: ",e.otpad.kolicina,""),p.Eb(1),p.nc("disabled",t.value<1||t.value===e.NaN)}}let Xt=(()=>{class t{constructor(t,e,n){this.skladisteService=t,this.windowService=e,this.notpadService=n,this.settings=C}ngOnInit(){this.updateSkladiste()}updateSkladiste(){this.skladisteService.getSkladisteSkladistenjeFirme().subscribe(t=>{this.skladistaSkladistenje=t,this.mergeOtpads()})}mergeOtpads(){if(void 0!==this.skladistaSkladistenje)for(const t of this.skladistaSkladistenje)t.neopasniOtpad=t.neopasniOtpad.concat(t.opasniOtpad)}dodajOtpad(){this.otpad.kolicina+=this.otpadKolicina,this.notpadService.updateNOtpad(this.otpad,this.currSkladiste._id).subscribe(t=>{this.updateSkladiste()})}changeKolicina(t,e){this.currSkladiste=e;const n=t.data;this.otpad=n,this.windowService.open(this.dodajKolicinu,{title:"Dodaj proizvedenu kolicinu: "+n.naziv})}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(M.a),p.Rb(a.Nb),p.Rb(S.a))},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-skladiste-skladistenje"]],viewQuery:function(t,e){var n;1&t&&p.Lc(mt,!0,p.N),2&t&&p.tc(n=p.gc())&&(e.dodajKolicinu=n.first)},decls:4,vars:1,consts:[[1,"container-fluid"],[4,"ngFor","ngForOf"],["dodajKolicinu",""],[1,"text-center"],[3,"settings","source","custom"],[1,"p-4"],[3,"ngSubmit"],["dodajForm","ngForm"],[1,"form-group","mt-0"],["for","input-Kolicina",1,"mb-2"],["fullWidth","","id","input-Kolicina","min","1","name","koli\u010dina","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","0","type","number",1,"form-control",3,"ngModel","ngModelChange"],["kolicina","ngModel"],[1,"form-group"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Cc(1,kt,7,3,"div",1),p.Wb(),p.Cc(2,Wt,13,3,"ng-template",null,2,p.Dc)),2&t&&(p.Eb(1),p.nc("ngForOf",e.skladistaSkladistenje))},directives:[T.m,a.w,a.y,a.v,o.b,i.w,i.l,i.m,a.O,i.p,i.b,i.k,i.n],styles:[""]}),t})();function jt(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Xb(1,"ngx-skladiste-proizvodnja",2),p.fc("updateStorageEvent",(function(){return p.wc(t),p.hc().updateStorage()})),p.Wb(),p.Wb()}if(2&t){const t=p.hc();p.Eb(1),p.nc("storage",t.storageProduction)}}function Mt(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Xb(1,"ngx-skladiste-tretman",3),p.fc("updateStorageEvent",(function(){return p.wc(t),p.hc().updateStorage()})),p.Wb(),p.Wb()}if(2&t){const t=p.hc();p.Eb(1),p.nc("storageTreatment",t.storageTreatment)("storage",t.storageProduction)}}function Tt(t,e){if(1&t){const t=p.Yb();p.Xb(0,"div"),p.Xb(1,"ngx-skladiste-deponija",4),p.fc("updateStorageEvent",(function(){return p.wc(t),p.hc().updateStorage()})),p.Wb(),p.Wb()}if(2&t){const t=p.hc();p.Eb(1),p.nc("storageDisposal",t.storageDisposal)("storage",t.storageProduction)}}function Et(t,e){1&t&&(p.Xb(0,"div"),p.Sb(1,"ngx-skladiste-skladistenje"),p.Wb())}const St=[{path:"",component:j,children:[{path:"dashboard",component:m},{path:"profile",loadChildren:()=>n.e(11).then(n.bind(null,"723k")).then(t=>t.ProfileModule)},{path:"skladiste",component:(()=>{class t{constructor(t,e){this.roleService=t,this.skladisteService=e,this.allStorage=[],this.storageProduction=[],this.storageTreatment=[],this.storageDisposal=[],this.storageCache=[],this.loading=!1}ngOnInit(){this.roleService.getOperations().subscribe(t=>{this.operations=t}),this.updateStorage()}updateStorage(){this.loading=!0,this.allStorage=[],this.storageDisposal=[],this.storageProduction=[],this.storageTreatment=[],this.storageCache=[],this.skladisteService.getAllSkladistaFirme().subscribe(t=>{this.allStorage=t;for(const e of this.allStorage)void 0===e.__t&&void 0===e.skladistenje?this.storageProduction.push(e):"SkladisteTretman"===e.__t?this.storageTreatment.push(e):"SkladisteDeponija"===e.__t?this.storageDisposal.push(e):e.skladistenje&&this.storageCache.push(e);this.loading=!1})}}return t.\u0275fac=function(e){return new(e||t)(p.Rb(l.a),p.Rb(M.a))},t.\u0275cmp=p.Lb({type:t,selectors:[["ngx-skladiste"]],decls:5,vars:4,consts:[[1,"container-fluid"],[4,"ngIf"],[3,"storage","updateStorageEvent"],[3,"storageTreatment","storage","updateStorageEvent"],[3,"storageDisposal","storage","updateStorageEvent"]],template:function(t,e){1&t&&(p.Xb(0,"div",0),p.Cc(1,jt,2,1,"div",1),p.Cc(2,Mt,2,2,"div",1),p.Cc(3,Tt,2,2,"div",1),p.Cc(4,Et,2,0,"div",1),p.Wb()),2&t&&(p.Eb(1),p.nc("ngIf",e.operations.production&&!e.loading),p.Eb(1),p.nc("ngIf",e.operations.treatment&&!e.loading),p.Eb(1),p.nc("ngIf",e.operations.disposal&&!e.loading),p.Eb(1),p.nc("ngIf",e.operations.cache&&!e.loading))},directives:[T.n,R,rt,vt,Xt],styles:[""]}),t})()},{path:"notpad",loadChildren:()=>Promise.resolve().then(n.bind(null,"o/8v")).then(t=>t.NotpadModule)},{path:"ootpad",loadChildren:()=>Promise.resolve().then(n.bind(null,"rDBk")).then(t=>t.OotpadModule)},{path:"ptotpad",loadChildren:()=>Promise.resolve().then(n.bind(null,"9pL+")).then(t=>t.PtotpadModule)},{path:"aotpad",loadChildren:()=>Promise.resolve().then(n.bind(null,"E+HJ")).then(t=>t.AotpadModule)},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"**",component:k}]}];let zt=(()=>{class t{}return t.\u0275mod=p.Pb({type:t}),t.\u0275inj=p.Ob({factory:function(e){return new(e||t)},imports:[[v.g.forChild(St)],v.g]}),t})();var Ot=n("9pL+");let Ct=(()=>{class t{}return t.\u0275mod=p.Pb({type:t}),t.\u0275inj=p.Ob({factory:function(e){return new(e||t)},providers:[M.a,l.a,q.a,A],imports:[[b.a,a.z,o.c,i.e,a.P,a.gb,a.X,a.pb,a.s,a.u,a.ib,a.C,a.N,a.W,a.Jb,a.k]]}),t})(),wt=(()=>{class t{}return t.\u0275mod=p.Pb({type:t}),t.\u0275inj=p.Ob({factory:function(e){return new(e||t)},providers:[r.a,l.a,a.Hb,c.a,s.a,d.a],imports:[[zt,b.a,a.ab,a.u,h,g.NotpadModule,f.OotpadModule,Ot.PtotpadModule,u.AotpadModule,Ct,a.z,a.Db,a.N,i.e,a.K,a.P,a.ib,a.gb,o.c]]}),t})()},"o/8v":function(t,e,n){"use strict";n.r(e),n.d(e,"NotpadModule",(function(){return U}));var i=n("O97o"),a=n("vTDv"),o=n("tyNb"),s=n("RS3s"),c=n("El76"),r=n("pVkk");const d={pager:{perPage:5},hideSubHeader:!0,actions:{columnTitle:"Odaberi",position:"right",add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus-square"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj"},naziv:{title:"Naziv"}}};var l=n("fXoL"),b=n("aceb"),u=n("3Pt+"),p=n("ofXK");function h(t,e){if(1&t){const t=l.Yb();l.Xb(0,"nb-option",37),l.fc("selectionChange",(function(){l.wc(t);const n=e.$implicit;return l.hc().updateKatalog(n)})),l.Ec(1),l.Wb()}if(2&t){const t=e.$implicit;l.nc("value",null==t?null:t.skladistaDeponija),l.Eb(1),l.Fc(null==t?null:t.skladistaDeponija.naziv)}}function g(t,e){if(1&t&&(l.Xb(0,"nb-option",26),l.Ec(1),l.Wb()),2&t){const t=e.$implicit;l.nc("value",t),l.Eb(1),l.Fc(t)}}function f(t,e){if(1&t&&(l.Xb(0,"nb-option",26),l.Ec(1),l.Wb()),2&t){const t=e.$implicit;l.nc("value",t),l.Eb(1),l.Fc(t)}}function v(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",14),l.Xb(1,"label",38),l.Ec(2,"\u0160ifra ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",13),l.Xb(4,"input",39),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.sifraIspitivanja=e})),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.hc();l.Eb(4),l.nc("ngModel",t.notpad.sifraIspitivanja)}}function m(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",14),l.Xb(1,"label",40),l.Ec(2,"Datum ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",13),l.Xb(4,"input",41),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.datumIspitivanja=e})),l.Wb(),l.Sb(5,"nb-datepicker",42,43),l.Wb(),l.Wb()}if(2&t){const t=l.uc(6),e=l.hc();l.Eb(4),l.nc("ngModel",e.notpad.datumIspitivanja)("nbDatepicker",t),l.Eb(1),l.nc("max",e.today())}}const k=function(){return{standalone:!0}};let W=(()=>{class t{constructor(t,e,n,i,a){this.dozvolaService=t,this.otpadService=e,this.router=n,this.toastrService=i,this.skladisteService=a,this.settings=d,this.katalog=new s.a,this.fizickaStanja=["\u010cvrsto","Te\u010dno","Gasovito","Prah"],this.dOznake=[],this.dozvola=[],this.skladistaDeponija=[],this.notpad={indeksniBroj:"",naziv:"",opis:"",kolicina:NaN,dOznaka:""},this.storageAmmountUnit="KG";for(let o=1;o<=13;o++)this.dOznake.push("D"+o)}ngOnInit(){this.skladisteService.getSkladisteDeponijaFirme().subscribe(t=>{this.skladistaDeponija=t}),this.dozvolaService.getDozvolaFirme("dump").subscribe(t=>{this.dozvola=t,this.updateKatalog(this.dozvola[0])})}today(){return new Date}onSearch(t){""===t&&this.katalog.setFilter([]),this.katalog.setFilter([{field:"indeksniBroj",search:t,filter:function(t,e){return t.replace(/\s+/g,"").includes(e.replace(/\s+/g,""))}},{field:"naziv",search:t}],!1)}updateKatalog(t){this.skladiste=this.skladistaDeponija.find(e=>e._id===t.skladistaDeponija._id);const e=this.skladiste.neopasniOtpad.concat(this.skladiste.opasniOtpad),n=Array.from(e,t=>t.indeksniBroj);let i=t.listaOtpada;i=i.filter(t=>!n.includes(t.indeksniBroj)),this.katalog.load(i)}chooseOtpad(t){this.notpad.indeksniBroj=t.data.indeksniBroj,this.notpad.naziv=t.data.naziv,this.notpad.opis=t.data.naziv}addTrash(){this.notpad.tretman=!0,"T"===this.storageAmmountUnit&&(this.notpad.kolicina*=1e3),delete this.notpad._id,this.otpadService.dodajNOtpad(this.notpad,this.skladiste._id).subscribe(),this.showToast("Uspeh","Uspe\u0161no ste dodali otpad na skladi\u0161te "+this.skladiste.naziv,"success"),this.router.navigate(["pages","skladiste"])}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(i.a),l.Rb(c.a),l.Rb(o.c),l.Rb(b.Hb),l.Rb(r.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["ngx-dodaj-deponija"]],decls:74,vars:21,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"col-4"],[1,"label"],[1,"col-8"],["fullWidth","",3,"ngModel","ngModelChange"],[3,"value","selectionChange",4,"ngFor","ngForOf"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],[1,"col-6"],[1,"row","mb-2"],["for","input-indeksniBroj",1,"col-12","label"],["nbInput","","fullWidth","","disabled","","id","input-indeksniBroj",3,"placeholder"],["for","input-naziv",1,"col-12","label"],["placeholder","Naziv","fullWidth","","name","naziv","id","input-naziv","nbInput","",3,"ngModel","ngModelChange"],["for","input-opis",1,"col-12","label"],["placeholder","Opis","fullWidth","","name","opis","id","input-opis","nbInput","",3,"ngModel","ngModelChange"],["id","input-kolicina",1,"col-12","label"],[1,"col-3","pr-0"],["decimals","1","fullWidth","","min","0","name","kolicina","nbInput","","placeholder","0.0","step","0.1","type","number",3,"ngModel","ngModelChange"],[1,"col-1","pl-0"],["fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value"],["for","input-fizickoStanje",1,"col-12","label"],["placeholder","Fizi\u010dko stanje","fullWidth","","name","stanje","id","input-fizickoStanje","selected","Cvrsto",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","label"],["fullWidth","","required","","name","rOznaka",3,"ngModel","ngModelChange"],["status","basic"],["ispitivanje",""],["class","row mb-2",4,"ngIf"],[1,"row","my-2"],["nbButton","","fullWidth","","status","primary","type","submit",3,"disabled"],[3,"value","selectionChange"],["for","input-sifraIspitivanja",1,"col-12","label"],["fullWidth","","id","input-sifraIspitivanja","name","sifra","nbInput","","placeholder","\u0160ifra","required","","type","text",3,"ngModel","ngModelChange"],["for","input-datumIspitivanja",1,"col-12","label"],["fullWidth","","placeholder","Datum","id","input-datumIspitivanja","name","datum","nbInput","","required","",3,"ngModel","nbDatepicker","ngModelChange"],[3,"max"],["datumInput",""]],template:function(t,e){if(1&t){const t=l.Yb();l.Xb(0,"nb-card",0),l.Xb(1,"nb-card-header"),l.Xb(2,"h5"),l.Ec(3,"Dodajte novi inventar neopasnog otpada"),l.Wb(),l.Wb(),l.Xb(4,"nb-card-body"),l.Xb(5,"div",1),l.Xb(6,"div",2),l.Xb(7,"div",1),l.Xb(8,"div",3),l.Xb(9,"label",4),l.Ec(10,"Odaberite skladi\u0161te:"),l.Wb(),l.Wb(),l.Xb(11,"div",5),l.Xb(12,"label",4),l.Ec(13,"Pretrazi po indeksnom broju ili nazivu:"),l.Wb(),l.Wb(),l.Xb(14,"div",3),l.Xb(15,"nb-select",6),l.fc("ngModelChange",(function(t){return e.skladiste=t})),l.Cc(16,h,2,2,"nb-option",7),l.Wb(),l.Wb(),l.Xb(17,"div",5),l.Xb(18,"input",8,9),l.fc("input",(function(){l.wc(t);const n=l.uc(19);return n.value.length>=1&&e.onSearch(n.value)})),l.Wb(),l.Wb(),l.Wb(),l.Xb(20,"ng2-smart-table",10),l.fc("custom",(function(t){return e.chooseOtpad(t)})),l.Wb(),l.Wb(),l.Wb(),l.Xb(21,"form",11,12),l.fc("ngSubmit",(function(){return e.addTrash()})),l.Xb(23,"div",1),l.Xb(24,"div",13),l.Xb(25,"div",14),l.Xb(26,"label",15),l.Ec(27,"Indeksni broj:"),l.Wb(),l.Xb(28,"div",13),l.Sb(29,"input",16),l.Wb(),l.Wb(),l.Xb(30,"div",14),l.Xb(31,"label",17),l.Ec(32,"Naziv: "),l.Wb(),l.Xb(33,"div",13),l.Xb(34,"input",18),l.fc("ngModelChange",(function(t){return e.notpad.naziv=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(35,"div",14),l.Xb(36,"label",19),l.Ec(37,"Opis: "),l.Wb(),l.Xb(38,"div",13),l.Xb(39,"input",20),l.fc("ngModelChange",(function(t){return e.notpad.opis=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(40,"div",14),l.Xb(41,"label",21),l.Ec(42,"Trenutna koli\u010dina na skladistu: "),l.Wb(),l.Xb(43,"div",22),l.Xb(44,"input",23),l.fc("ngModelChange",(function(t){return e.notpad.kolicina=t})),l.Wb(),l.Wb(),l.Xb(45,"div",24),l.Xb(46,"nb-select",25),l.fc("ngModelChange",(function(t){return e.storageAmmountUnit=t})),l.Xb(47,"nb-option",26),l.Ec(48,"KG"),l.Wb(),l.Xb(49,"nb-option",26),l.Ec(50,"T"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(51,"div",14),l.Xb(52,"label",27),l.Ec(53,"Fizicko stanje otpada: "),l.Wb(),l.Xb(54,"div",13),l.Xb(55,"nb-select",28),l.fc("ngModelChange",(function(t){return e.notpad.fizickoStanje=t})),l.Cc(56,g,2,2,"nb-option",29),l.Wb(),l.Wb(),l.Wb(),l.Xb(57,"div",14),l.Xb(58,"label",30),l.Ec(59,"Odaberite D oznaku (mo\u017eete promentiti u svakom trenutku): "),l.Wb(),l.Xb(60,"div",13),l.Xb(61,"nb-select",31),l.fc("ngModelChange",(function(t){return e.notpad.dOznaka=t})),l.Cc(62,f,2,2,"nb-option",29),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(63,"div",13),l.Sb(64,"div",14),l.Xb(65,"nb-toggle",32,33),l.Ec(67,"Imam dokumenat o ispitivanju otpada"),l.Wb(),l.Cc(68,v,5,1,"div",34),l.Cc(69,m,7,3,"div",34),l.Wb(),l.Wb(),l.Xb(70,"div",35),l.Xb(71,"div",2),l.Xb(72,"button",36),l.Ec(73,"Dodaj "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.uc(22),n=l.uc(66);l.Eb(15),l.nc("ngModel",e.skladiste),l.Eb(1),l.nc("ngForOf",e.dozvola),l.Eb(4),l.nc("source",e.katalog)("settings",e.settings),l.Eb(9),l.nc("placeholder",e.notpad.indeksniBroj||"00 00 00"),l.Eb(5),l.nc("ngModel",e.notpad.naziv),l.Eb(5),l.nc("ngModel",e.notpad.opis),l.Eb(5),l.nc("ngModel",e.notpad.kolicina),l.Eb(2),l.nc("ngModelOptions",l.qc(20,k))("selected","KG")("ngModel",e.storageAmmountUnit),l.Eb(1),l.nc("value","KG"),l.Eb(2),l.nc("value","T"),l.Eb(6),l.nc("ngModel",e.notpad.fizickoStanje),l.Eb(1),l.nc("ngForOf",e.fizickaStanja),l.Eb(5),l.nc("ngModel",e.notpad.dOznaka),l.Eb(1),l.nc("ngForOf",e.dOznake),l.Eb(6),l.nc("ngIf",n.checked),l.Eb(1),l.nc("ngIf",n.checked),l.Eb(3),l.nc("disabled",!t.valid)}},directives:[b.w,b.y,b.v,b.nb,u.k,u.n,p.m,b.O,s.b,u.w,u.l,u.m,u.b,u.p,b.db,u.s,b.Ib,p.n,b.t,b.H,b.G],styles:[""]}),t})();var X=n("O8xV"),j=n("McNs");function M(t,e){if(1&t&&(l.Xb(0,"nb-option",22),l.Ec(1),l.Wb()),2&t){const t=e.$implicit;l.nc("value",t),l.Eb(1),l.Fc(t)}}function T(t,e){if(1&t&&(l.Xb(0,"nb-option",22),l.Ec(1),l.Wb()),2&t){const t=e.$implicit;l.nc("value",t),l.Eb(1),l.Fc(t.naziv)}}function E(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",10),l.Xb(1,"label",33),l.Ec(2,"\u0160ifra ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",9),l.Xb(4,"input",34),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.sifraIspitivanja=e})),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.hc();l.Eb(4),l.nc("ngModel",t.notpad.sifraIspitivanja)}}function S(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",10),l.Xb(1,"label",35),l.Ec(2,"Datum ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",9),l.Xb(4,"input",36),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.datumIspitivanja=e})),l.Wb(),l.Sb(5,"nb-datepicker",37,38),l.Wb(),l.Wb()}if(2&t){const t=l.uc(6),e=l.hc();l.Eb(4),l.nc("ngModel",e.notpad.datumIspitivanja)("nbDatepicker",t),l.Eb(1),l.nc("max",e.today())}}const z=function(){return{standalone:!0}};let O=(()=>{class t{constructor(t,e,n,i,a,o){this.katalogService=t,this.otpadService=e,this.router=n,this.authService=i,this.skladisteService=a,this.toastrService=o,this.settings=d,this.katalog=new s.a,this.storageAmmountUnit="KG",this.skladista=[],this.fizickaStanja=["\u010cvrsto","Te\u010dno","Gasovito","Prah"],this.notpad={indeksniBroj:"",naziv:"",opis:"",fizickoStanje:"",kolicina:NaN}}ngOnInit(){this.katalogService.getNeopasanKatalog().subscribe(t=>{this.katalog.load(t)}),this.skladisteService.getSkladisteFirme().subscribe(t=>{this.skladista=t})}onSearch(t){""===t&&this.katalog.setFilter([]),this.katalog.setFilter([{field:"indeksniBroj",search:t,filter:function(t,e){return t.replace(/\s+/g,"").includes(e.replace(/\s+/g,""))}},{field:"naziv",search:t}],!1)}chooseOtpad(t){this.notpad.indeksniBroj=t.data.indeksniBroj,this.notpad.naziv=t.data.naziv,this.notpad.opis=t.data.naziv}today(){return new Date}addTrash(){"T"===this.storageAmmountUnit&&(this.notpad.kolicina*=1e3),delete this.notpad._id,this.otpadService.dodajNOtpad(this.notpad,this.skladiste._id).subscribe(),this.showToast("Uspeh","Uspe\u0161no ste dodali otpad na skladi\u0161te "+this.skladiste.naziv,"success"),this.router.navigate(["pages","skladiste"])}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(X.a),l.Rb(c.a),l.Rb(o.c),l.Rb(j.g),l.Rb(r.a),l.Rb(b.Hb))},t.\u0275cmp=l.Lb({type:t,selectors:[["ngx-dodaj-otpad"]],decls:65,vars:19,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"col-12","pl-0"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",1,"col-12",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],[1,"col-6"],[1,"row","mb-2"],["for","input-indeksniBroj",1,"col-12","label"],["nbInput","","fullWidth","","disabled","","id","input-indeksniBroj",3,"placeholder"],["for","input-naziv",1,"col-12","label"],["placeholder","Naziv","fullWidth","","name","naziv","id","input-naziv","nbInput","",3,"ngModel","ngModelChange"],["for","input-opis",1,"col-12","label"],["placeholder","Opis","fullWidth","","name","opis","id","input-opis","nbInput","",3,"ngModel","ngModelChange"],["id","input-kolicina",1,"col-12","label"],[1,"col-3","pr-0"],["decimals","1","fullWidth","","min","0","name","kolicina","nbInput","","placeholder","0.0","step","0.1","type","number",3,"ngModel","ngModelChange"],[1,"col-1","pl-0"],["fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value"],["for","input-fizickoStanje",1,"col-12","label"],["placeholder","Fizi\u010dko stanje","fullWidth","","name","stanje","id","input-fizickoStanje","selected","Cvrsto",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","label"],["fullWidth","","required","","name","skladiste",3,"ngModel","ngModelChange"],["status","basic"],["ispitivanje",""],["class","row mb-2",4,"ngIf"],[1,"row","my-2"],["nbButton","","fullWidth","","status","primary","type","submit",3,"disabled"],["for","input-sifraIspitivanja",1,"col-12","label"],["fullWidth","","id","input-sifraIspitivanja","name","sifra","nbInput","","placeholder","\u0160ifra","required","","type","text",3,"ngModel","ngModelChange"],["for","input-datumIspitivanja",1,"col-12","label"],["fullWidth","","placeholder","Datum","id","input-datumIspitivanja","name","datum","nbInput","","required","",3,"ngModel","nbDatepicker","ngModelChange"],[3,"max"],["datumInput",""]],template:function(t,e){if(1&t){const t=l.Yb();l.Xb(0,"nb-card",0),l.Xb(1,"nb-card-header"),l.Xb(2,"h5"),l.Ec(3,"Dodajte novi inventar neopasnog otpada"),l.Wb(),l.Wb(),l.Xb(4,"nb-card-body"),l.Xb(5,"div",1),l.Xb(6,"div",2),l.Xb(7,"label",3),l.Ec(8,"Pretra\u017ei po indeksnom broju ili nazivu:"),l.Wb(),l.Xb(9,"input",4,5),l.fc("input",(function(){l.wc(t);const n=l.uc(10);return n.value.length>=1&&e.onSearch(n.value)})),l.Wb(),l.Xb(11,"ng2-smart-table",6),l.fc("custom",(function(t){return e.chooseOtpad(t)})),l.Wb(),l.Wb(),l.Wb(),l.Xb(12,"form",7,8),l.fc("ngSubmit",(function(){return e.addTrash()})),l.Xb(14,"div",1),l.Xb(15,"div",9),l.Xb(16,"div",10),l.Xb(17,"label",11),l.Ec(18,"Indeksni broj:"),l.Wb(),l.Xb(19,"div",9),l.Sb(20,"input",12),l.Wb(),l.Wb(),l.Xb(21,"div",10),l.Xb(22,"label",13),l.Ec(23,"Naziv: "),l.Wb(),l.Xb(24,"div",9),l.Xb(25,"input",14),l.fc("ngModelChange",(function(t){return e.notpad.naziv=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(26,"div",10),l.Xb(27,"label",15),l.Ec(28,"Opis: "),l.Wb(),l.Xb(29,"div",9),l.Xb(30,"input",16),l.fc("ngModelChange",(function(t){return e.notpad.opis=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(31,"div",10),l.Xb(32,"label",17),l.Ec(33,"Trenutna koli\u010dina na skladistu: "),l.Wb(),l.Xb(34,"div",18),l.Xb(35,"input",19),l.fc("ngModelChange",(function(t){return e.notpad.kolicina=t})),l.Wb(),l.Wb(),l.Xb(36,"div",20),l.Xb(37,"nb-select",21),l.fc("ngModelChange",(function(t){return e.storageAmmountUnit=t})),l.Xb(38,"nb-option",22),l.Ec(39,"KG"),l.Wb(),l.Xb(40,"nb-option",22),l.Ec(41,"T"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(42,"div",10),l.Xb(43,"label",23),l.Ec(44,"Fizicko stanje otpada: "),l.Wb(),l.Xb(45,"div",9),l.Xb(46,"nb-select",24),l.fc("ngModelChange",(function(t){return e.notpad.fizickoStanje=t})),l.Cc(47,M,2,2,"nb-option",25),l.Wb(),l.Wb(),l.Wb(),l.Xb(48,"div",10),l.Xb(49,"label",26),l.Ec(50,"Odaberite skladi\u0161te za otpad: "),l.Wb(),l.Xb(51,"div",9),l.Xb(52,"nb-select",27),l.fc("ngModelChange",(function(t){return e.skladiste=t})),l.Cc(53,T,2,2,"nb-option",25),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(54,"div",9),l.Sb(55,"div",10),l.Xb(56,"nb-toggle",28,29),l.Ec(58,"Imam dokumenat o ispitivanju otpada"),l.Wb(),l.Cc(59,E,5,1,"div",30),l.Cc(60,S,7,3,"div",30),l.Wb(),l.Wb(),l.Xb(61,"div",31),l.Xb(62,"div",2),l.Xb(63,"button",32),l.Ec(64,"Dodaj "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.uc(13),n=l.uc(57);l.Eb(11),l.nc("source",e.katalog)("settings",e.settings),l.Eb(9),l.nc("placeholder",e.notpad.indeksniBroj||"00 00 00"),l.Eb(5),l.nc("ngModel",e.notpad.naziv),l.Eb(5),l.nc("ngModel",e.notpad.opis),l.Eb(5),l.nc("ngModel",e.notpad.kolicina),l.Eb(2),l.nc("ngModelOptions",l.qc(18,z))("selected","KG")("ngModel",e.storageAmmountUnit),l.Eb(1),l.nc("value","KG"),l.Eb(2),l.nc("value","T"),l.Eb(6),l.nc("ngModel",e.notpad.fizickoStanje),l.Eb(1),l.nc("ngForOf",e.fizickaStanja),l.Eb(5),l.nc("ngModel",e.skladiste),l.Eb(1),l.nc("ngForOf",e.skladista),l.Eb(6),l.nc("ngIf",n.checked),l.Eb(1),l.nc("ngIf",n.checked),l.Eb(3),l.nc("disabled",!t.valid)}},directives:[b.w,b.y,b.v,b.O,s.b,u.w,u.l,u.m,u.b,u.k,u.n,u.p,b.nb,b.db,p.m,u.s,b.Ib,p.n,b.t,b.H,b.G],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff}"]}),t})();function C(t,e){if(1&t){const t=l.Yb();l.Xb(0,"nb-option",35),l.fc("selectionChange",(function(){l.wc(t);const n=e.$implicit;return l.hc().updateKatalog(n)})),l.Ec(1),l.Wb()}if(2&t){const t=e.$implicit;l.nc("value",null==t?null:t.skladistaSkladistenje),l.Eb(1),l.Fc(null==t?null:t.skladistaSkladistenje.naziv)}}function w(t,e){if(1&t&&(l.Xb(0,"nb-option",26),l.Ec(1),l.Wb()),2&t){const t=e.$implicit;l.nc("value",t),l.Eb(1),l.Fc(t)}}function y(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",14),l.Xb(1,"label",36),l.Ec(2,"\u0160ifra ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",13),l.Xb(4,"input",37),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.sifraIspitivanja=e})),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.hc();l.Eb(4),l.nc("ngModel",t.notpad.sifraIspitivanja)}}function I(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",14),l.Xb(1,"label",38),l.Ec(2,"Datum ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",13),l.Xb(4,"input",39),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.datumIspitivanja=e})),l.Wb(),l.Sb(5,"nb-datepicker",40,41),l.Wb(),l.Wb()}if(2&t){const t=l.uc(6),e=l.hc();l.Eb(4),l.nc("ngModel",e.notpad.datumIspitivanja)("nbDatepicker",t),l.Eb(1),l.nc("max",e.today())}}const F=function(){return{standalone:!0}};let D=(()=>{class t{constructor(t,e,n,i,a){this.dozvolaService=t,this.otpadService=e,this.router=n,this.toastrService=i,this.skladisteService=a,this.settings=d,this.katalog=new s.a,this.dozvola=[],this.fizickaStanja=["\u010cvrsto","Te\u010dno","Gasovito","Prah"],this.skladisteSkladistenje=[],this.notpad={indeksniBroj:"",naziv:"",opis:"",kolicina:0},this.storageAmmountUnit="KG"}ngOnInit(){this.skladisteService.getSkladisteSkladistenjeFirme().subscribe(t=>{this.skladisteSkladistenje=t}),this.dozvolaService.getDozvolaFirme("storage").subscribe(t=>{this.dozvola=t,this.updateKatalog(this.dozvola[0])})}today(){return new Date}onSearch(t){""===t&&this.katalog.setFilter([]),this.katalog.setFilter([{field:"indeksniBroj",search:t,filter:function(t,e){return t.replace(/\s+/g,"").includes(e.replace(/\s+/g,""))}},{field:"naziv",search:t}],!1)}updateKatalog(t){this.skladiste=this.skladisteSkladistenje.find(e=>e._id===t.skladistaSkladistenje._id);const e=this.skladiste.neopasniOtpad.concat(this.skladiste.opasniOtpad),n=Array.from(e,t=>t.indeksniBroj);let i=t.listaOtpada;i=i.filter(t=>!n.includes(t.indeksniBroj)),this.katalog.load(i)}chooseOtpad({data:t}){this.notpad=t,this.notpad.opis=this.notpad.naziv}addTrash(){this.notpad.tretman=!0,"T"===this.storageAmmountUnit&&(this.notpad.kolicina*=1e3),delete this.notpad._id,this.otpadService.dodajNOtpad(this.notpad,this.skladiste._id).subscribe(t=>{}),this.showToast("Uspeh","Uspe\u0161no ste dodali otpad na skladi\u0161te "+this.skladiste.naziv,"success"),this.router.navigate(["pages","skladiste"])}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(i.a),l.Rb(c.a),l.Rb(o.c),l.Rb(b.Hb),l.Rb(r.a))},t.\u0275cmp=l.Lb({type:t,selectors:[["ngx-dodaj-skladistenje"]],decls:68,vars:19,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"col-4"],[1,"label"],[1,"col-8"],["fullWidth","",3,"ngModel","ngModelChange"],[3,"value","selectionChange",4,"ngFor","ngForOf"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],[1,"col-6"],[1,"row","mb-2"],["for","input-indeksniBroj",1,"col-12","label"],["nbInput","","fullWidth","","disabled","","id","input-indeksniBroj",3,"placeholder"],["for","input-naziv",1,"col-12","label"],["placeholder","Naziv","fullWidth","","name","naziv","id","input-naziv","nbInput","",3,"ngModel","ngModelChange"],["for","input-opis",1,"col-12","label"],["placeholder","Opis","fullWidth","","name","opis","id","input-opis","nbInput","",3,"ngModel","ngModelChange"],["id","input-kolicina",1,"col-12","label"],[1,"col-3","pr-0"],["decimals","1","fullWidth","","min","0","name","kolicina","nbInput","","placeholder","0.0","step","0.1","type","number",3,"ngModel","ngModelChange"],[1,"col-1","pl-0"],["fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value"],["for","input-fizickoStanje",1,"col-12","label"],["placeholder","Fizi\u010dko stanje","fullWidth","","name","stanje","id","input-fizickoStanje","selected","Cvrsto",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["status","basic"],["ispitivanje",""],["class","row mb-2",4,"ngIf"],[1,"row","my-2"],["nbButton","","fullWidth","","status","primary","type","submit",3,"disabled"],[3,"value","selectionChange"],["for","input-sifraIspitivanja",1,"col-12","label"],["fullWidth","","id","input-sifraIspitivanja","name","sifra","nbInput","","placeholder","\u0160ifra","required","","type","text",3,"ngModel","ngModelChange"],["for","input-datumIspitivanja",1,"col-12","label"],["fullWidth","","placeholder","Datum","id","input-datumIspitivanja","name","datum","nbInput","","required","",3,"ngModel","nbDatepicker","ngModelChange"],[3,"max"],["datumInput",""]],template:function(t,e){if(1&t){const t=l.Yb();l.Xb(0,"nb-card",0),l.Xb(1,"nb-card-header"),l.Xb(2,"h5"),l.Ec(3,"Dodajte novi inventar neopasnog otpada"),l.Wb(),l.Wb(),l.Xb(4,"nb-card-body"),l.Xb(5,"div",1),l.Xb(6,"div",2),l.Xb(7,"div",1),l.Xb(8,"div",3),l.Xb(9,"label",4),l.Ec(10,"Odaberite skladi\u0161te:"),l.Wb(),l.Wb(),l.Xb(11,"div",5),l.Xb(12,"label",4),l.Ec(13,"Pretrazi po indeksnom broju ili nazivu:"),l.Wb(),l.Wb(),l.Xb(14,"div",3),l.Xb(15,"nb-select",6),l.fc("ngModelChange",(function(t){return e.skladiste=t})),l.Cc(16,C,2,2,"nb-option",7),l.Wb(),l.Wb(),l.Xb(17,"div",5),l.Xb(18,"input",8,9),l.fc("input",(function(){l.wc(t);const n=l.uc(19);return n.value.length>=1&&e.onSearch(n.value)})),l.Wb(),l.Wb(),l.Wb(),l.Xb(20,"ng2-smart-table",10),l.fc("custom",(function(t){return e.chooseOtpad(t)})),l.Wb(),l.Wb(),l.Wb(),l.Xb(21,"form",11,12),l.fc("ngSubmit",(function(){return e.addTrash()})),l.Xb(23,"div",1),l.Xb(24,"div",13),l.Xb(25,"div",14),l.Xb(26,"label",15),l.Ec(27,"Indeksni broj:"),l.Wb(),l.Xb(28,"div",13),l.Sb(29,"input",16),l.Wb(),l.Wb(),l.Xb(30,"div",14),l.Xb(31,"label",17),l.Ec(32,"Naziv: "),l.Wb(),l.Xb(33,"div",13),l.Xb(34,"input",18),l.fc("ngModelChange",(function(t){return e.notpad.naziv=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(35,"div",14),l.Xb(36,"label",19),l.Ec(37,"Opis: "),l.Wb(),l.Xb(38,"div",13),l.Xb(39,"input",20),l.fc("ngModelChange",(function(t){return e.notpad.opis=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(40,"div",14),l.Xb(41,"label",21),l.Ec(42,"Trenutna koli\u010dina na skladistu: "),l.Wb(),l.Xb(43,"div",22),l.Xb(44,"input",23),l.fc("ngModelChange",(function(t){return e.notpad.kolicina=t})),l.Wb(),l.Wb(),l.Xb(45,"div",24),l.Xb(46,"nb-select",25),l.fc("ngModelChange",(function(t){return e.storageAmmountUnit=t})),l.Xb(47,"nb-option",26),l.Ec(48,"KG"),l.Wb(),l.Xb(49,"nb-option",26),l.Ec(50,"T"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(51,"div",14),l.Xb(52,"label",27),l.Ec(53,"Fizicko stanje otpada: "),l.Wb(),l.Xb(54,"div",13),l.Xb(55,"nb-select",28),l.fc("ngModelChange",(function(t){return e.notpad.fizickoStanje=t})),l.Cc(56,w,2,2,"nb-option",29),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(57,"div",13),l.Sb(58,"div",14),l.Xb(59,"nb-toggle",30,31),l.Ec(61,"Imam dokumenat o ispitivanju otpada"),l.Wb(),l.Cc(62,y,5,1,"div",32),l.Cc(63,I,7,3,"div",32),l.Wb(),l.Wb(),l.Xb(64,"div",33),l.Xb(65,"div",2),l.Xb(66,"button",34),l.Ec(67,"Dodaj "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.uc(22),n=l.uc(60);l.Eb(15),l.nc("ngModel",e.skladiste),l.Eb(1),l.nc("ngForOf",e.dozvola),l.Eb(4),l.nc("source",e.katalog)("settings",e.settings),l.Eb(9),l.nc("placeholder",e.notpad.indeksniBroj||"00 00 00"),l.Eb(5),l.nc("ngModel",e.notpad.naziv),l.Eb(5),l.nc("ngModel",e.notpad.opis),l.Eb(5),l.nc("ngModel",e.notpad.kolicina),l.Eb(2),l.nc("ngModelOptions",l.qc(18,F))("selected","KG")("ngModel",e.storageAmmountUnit),l.Eb(1),l.nc("value","KG"),l.Eb(2),l.nc("value","T"),l.Eb(6),l.nc("ngModel",e.notpad.fizickoStanje),l.Eb(1),l.nc("ngForOf",e.fizickaStanja),l.Eb(6),l.nc("ngIf",n.checked),l.Eb(1),l.nc("ngIf",n.checked),l.Eb(3),l.nc("disabled",!t.valid)}},directives:[b.w,b.y,b.v,b.nb,u.k,u.n,p.m,b.O,s.b,u.w,u.l,u.m,u.b,u.p,b.db,b.Ib,p.n,b.t,u.s,b.H,b.G],styles:[""]}),t})();function P(t,e){if(1&t){const t=l.Yb();l.Xb(0,"nb-option",37),l.fc("selectionChange",(function(){l.wc(t);const n=e.$implicit;return l.hc().updateKatalog(n)})),l.Ec(1),l.Wb()}if(2&t){const t=e.$implicit;l.nc("value",null==t?null:t.skladistaTretman),l.Eb(1),l.Fc(null==t?null:t.skladistaTretman.naziv)}}function x(t,e){if(1&t&&(l.Xb(0,"nb-option",26),l.Ec(1),l.Wb()),2&t){const t=e.$implicit;l.nc("value",t),l.Eb(1),l.Fc(t)}}function B(t,e){if(1&t&&(l.Xb(0,"nb-option",26),l.Ec(1),l.Wb()),2&t){const t=e.$implicit;l.nc("value",t),l.Eb(1),l.Fc(t)}}function N(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",14),l.Xb(1,"label",38),l.Ec(2,"\u0160ifra ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",13),l.Xb(4,"input",39),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.sifraIspitivanja=e})),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.hc();l.Eb(4),l.nc("ngModel",t.notpad.sifraIspitivanja)}}function _(t,e){if(1&t){const t=l.Yb();l.Xb(0,"div",14),l.Xb(1,"label",40),l.Ec(2,"Datum ispitivanja otpada: "),l.Wb(),l.Xb(3,"div",13),l.Xb(4,"input",41),l.fc("ngModelChange",(function(e){return l.wc(t),l.hc().notpad.datumIspitivanja=e})),l.Wb(),l.Sb(5,"nb-datepicker",42,43),l.Wb(),l.Wb()}if(2&t){const t=l.uc(6),e=l.hc();l.Eb(4),l.nc("ngModel",e.notpad.datumIspitivanja)("nbDatepicker",t),l.Eb(1),l.nc("max",e.today())}}const R=function(){return{standalone:!0}};let K=(()=>{class t{constructor(t,e,n,i,a){this.dozvolaService=t,this.otpadService=e,this.router=n,this.skladisteService=i,this.toastrService=a,this.notpad={indeksniBroj:"",naziv:"",opis:"",kolicina:0,tretman:!0},this.fizickaStanja=["\u010cvrsto","Te\u010dno","Gasovito","Prah"],this.katalog=new s.a,this.settings=d,this.rOznake=[],this.storageAmmountUnit="KG";for(let o=1;o<=13;o++)this.rOznake.push("R"+o)}ngOnInit(){this.skladisteService.getSkladisteTretmanFirme().subscribe(t=>{this.skladistaTretman=t}),this.dozvolaService.getDozvolaFirme("treatment").subscribe(t=>{this.dozvola=t,this.updateKatalog(this.dozvola[0])})}today(){return new Date}onSearch(t){""===t&&this.katalog.setFilter([]),this.katalog.setFilter([{field:"indeksniBroj",search:t,filter:function(t,e){return t.replace(/\s+/g,"").includes(e.replace(/\s+/g,""))}},{field:"naziv",search:t}],!1)}updateKatalog(t){this.skladiste=this.skladistaTretman.find(e=>e._id===t.skladistaTretman._id);const e=this.skladiste.neopasniOtpad.concat(this.skladiste.opasniOtpad),n=Array.from(e,t=>t.indeksniBroj);let i=t.listaOtpada;i=i.filter(t=>!n.includes(t.indeksniBroj)),this.katalog.load(i)}chooseOtpad({data:t}){this.notpad=t,this.notpad.opis=this.notpad.naziv}addTrash(){this.notpad.tretman=!0,"T"===this.storageAmmountUnit&&(this.notpad.kolicina*=1e3),delete this.notpad._id,this.otpadService.dodajNOtpad(this.notpad,this.skladiste._id).subscribe(t=>{}),this.showToast("Uspeh","Uspe\u0161no ste dodali otpad na skladi\u0161te "+this.skladiste.naziv,"success"),this.router.navigate(["pages","skladiste"])}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(i.a),l.Rb(c.a),l.Rb(o.c),l.Rb(r.a),l.Rb(b.Hb))},t.\u0275cmp=l.Lb({type:t,selectors:[["ngx-dodaj-tretman"]],decls:74,vars:21,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"col-4"],[1,"label"],[1,"col-8"],["fullWidth","",3,"ngModel","ngModelChange"],[3,"value","selectionChange",4,"ngFor","ngForOf"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],[1,"col-6"],[1,"row","mb-2"],["for","input-indeksniBroj",1,"col-12","label"],["nbInput","","fullWidth","","disabled","","id","input-indeksniBroj",3,"placeholder"],["for","input-naziv",1,"col-12","label"],["placeholder","Naziv","fullWidth","","name","naziv","id","input-naziv","nbInput","",3,"ngModel","ngModelChange"],["for","input-opis",1,"col-12","label"],["placeholder","Opis","fullWidth","","name","opis","id","input-opis","nbInput","",3,"ngModel","ngModelChange"],["id","input-kolicina",1,"col-12","label"],[1,"col-3","pr-0"],["decimals","1","fullWidth","","min","0","name","kolicina","nbInput","","placeholder","0.0","step","0.1","type","number",3,"ngModel","ngModelChange"],[1,"col-1","pl-0"],["fullWidth","",3,"ngModelOptions","selected","ngModel","ngModelChange"],[3,"value"],["for","input-fizickoStanje",1,"col-12","label"],["placeholder","Fizi\u010dko stanje","fullWidth","","name","stanje","id","input-fizickoStanje","selected","Cvrsto",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","label"],["fullWidth","","required","","name","rOznaka",3,"ngModel","ngModelChange"],["status","basic"],["ispitivanje",""],["class","row mb-2",4,"ngIf"],[1,"row","my-2"],["nbButton","","fullWidth","","status","primary","type","submit",3,"disabled"],[3,"value","selectionChange"],["for","input-sifraIspitivanja",1,"col-12","label"],["fullWidth","","id","input-sifraIspitivanja","name","sifra","nbInput","","placeholder","\u0160ifra","required","","type","text",3,"ngModel","ngModelChange"],["for","input-datumIspitivanja",1,"col-12","label"],["fullWidth","","placeholder","Datum","id","input-datumIspitivanja","name","datum","nbInput","","required","",3,"ngModel","nbDatepicker","ngModelChange"],[3,"max"],["datumInput",""]],template:function(t,e){if(1&t){const t=l.Yb();l.Xb(0,"nb-card",0),l.Xb(1,"nb-card-header"),l.Xb(2,"h5"),l.Ec(3,"Dodajte novi inventar neopasnog otpada"),l.Wb(),l.Wb(),l.Xb(4,"nb-card-body"),l.Xb(5,"div",1),l.Xb(6,"div",2),l.Xb(7,"div",1),l.Xb(8,"div",3),l.Xb(9,"label",4),l.Ec(10,"Odaberite skladi\u0161te:"),l.Wb(),l.Wb(),l.Xb(11,"div",5),l.Xb(12,"label",4),l.Ec(13,"Pretrazi po indeksnom broju ili nazivu:"),l.Wb(),l.Wb(),l.Xb(14,"div",3),l.Xb(15,"nb-select",6),l.fc("ngModelChange",(function(t){return e.skladiste=t})),l.Cc(16,P,2,2,"nb-option",7),l.Wb(),l.Wb(),l.Xb(17,"div",5),l.Xb(18,"input",8,9),l.fc("input",(function(){l.wc(t);const n=l.uc(19);return n.value.length>=1&&e.onSearch(n.value)})),l.Wb(),l.Wb(),l.Wb(),l.Xb(20,"ng2-smart-table",10),l.fc("custom",(function(t){return e.chooseOtpad(t)})),l.Wb(),l.Wb(),l.Wb(),l.Xb(21,"form",11,12),l.fc("ngSubmit",(function(){return e.addTrash()})),l.Xb(23,"div",1),l.Xb(24,"div",13),l.Xb(25,"div",14),l.Xb(26,"label",15),l.Ec(27,"Indeksni broj:"),l.Wb(),l.Xb(28,"div",13),l.Sb(29,"input",16),l.Wb(),l.Wb(),l.Xb(30,"div",14),l.Xb(31,"label",17),l.Ec(32,"Naziv: "),l.Wb(),l.Xb(33,"div",13),l.Xb(34,"input",18),l.fc("ngModelChange",(function(t){return e.notpad.naziv=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(35,"div",14),l.Xb(36,"label",19),l.Ec(37,"Opis: "),l.Wb(),l.Xb(38,"div",13),l.Xb(39,"input",20),l.fc("ngModelChange",(function(t){return e.notpad.opis=t})),l.Wb(),l.Wb(),l.Wb(),l.Xb(40,"div",14),l.Xb(41,"label",21),l.Ec(42,"Trenutna koli\u010dina na skladistu: "),l.Wb(),l.Xb(43,"div",22),l.Xb(44,"input",23),l.fc("ngModelChange",(function(t){return e.notpad.kolicina=t})),l.Wb(),l.Wb(),l.Xb(45,"div",24),l.Xb(46,"nb-select",25),l.fc("ngModelChange",(function(t){return e.storageAmmountUnit=t})),l.Xb(47,"nb-option",26),l.Ec(48,"KG"),l.Wb(),l.Xb(49,"nb-option",26),l.Ec(50,"T"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(51,"div",14),l.Xb(52,"label",27),l.Ec(53,"Fizicko stanje otpada: "),l.Wb(),l.Xb(54,"div",13),l.Xb(55,"nb-select",28),l.fc("ngModelChange",(function(t){return e.notpad.fizickoStanje=t})),l.Cc(56,x,2,2,"nb-option",29),l.Wb(),l.Wb(),l.Wb(),l.Xb(57,"div",14),l.Xb(58,"label",30),l.Ec(59,"Odaberite R oznaku (mo\u017eete promentiti u svakom trenutku): "),l.Wb(),l.Xb(60,"div",13),l.Xb(61,"nb-select",31),l.fc("ngModelChange",(function(t){return e.notpad.rOznaka=t})),l.Cc(62,B,2,2,"nb-option",29),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(63,"div",13),l.Sb(64,"div",14),l.Xb(65,"nb-toggle",32,33),l.Ec(67,"Imam dokumenat o ispitivanju otpada"),l.Wb(),l.Cc(68,N,5,1,"div",34),l.Cc(69,_,7,3,"div",34),l.Wb(),l.Wb(),l.Xb(70,"div",35),l.Xb(71,"div",2),l.Xb(72,"button",36),l.Ec(73,"Dodaj "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&t){const t=l.uc(22),n=l.uc(66);l.Eb(15),l.nc("ngModel",e.skladiste),l.Eb(1),l.nc("ngForOf",e.dozvola),l.Eb(4),l.nc("source",e.katalog)("settings",e.settings),l.Eb(9),l.nc("placeholder",e.notpad.indeksniBroj||"00 00 00"),l.Eb(5),l.nc("ngModel",e.notpad.naziv),l.Eb(5),l.nc("ngModel",e.notpad.opis),l.Eb(5),l.nc("ngModel",e.notpad.kolicina),l.Eb(2),l.nc("ngModelOptions",l.qc(20,R))("selected","KG")("ngModel",e.storageAmmountUnit),l.Eb(1),l.nc("value","KG"),l.Eb(2),l.nc("value","T"),l.Eb(6),l.nc("ngModel",e.notpad.fizickoStanje),l.Eb(1),l.nc("ngForOf",e.fizickaStanja),l.Eb(5),l.nc("ngModel",e.notpad.rOznaka),l.Eb(1),l.nc("ngForOf",e.rOznake),l.Eb(6),l.nc("ngIf",n.checked),l.Eb(1),l.nc("ngIf",n.checked),l.Eb(3),l.nc("disabled",!t.valid)}},directives:[b.w,b.y,b.v,b.nb,u.k,u.n,p.m,b.O,s.b,u.w,u.l,u.m,u.b,u.p,b.db,u.s,b.Ib,p.n,b.t,b.H,b.G],styles:[""]}),t})();const L=[{path:"",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Lb({type:t,selectors:[["ngx-notpad"]],decls:1,vars:0,template:function(t,e){1&t&&l.Sb(0,"router-outlet")},directives:[o.h],encapsulation:2}),t})(),children:[{path:"dodaj-proizvodnja",component:O},{path:"dodaj-tretman",component:K},{path:"dodaj-deponija",component:W},{path:"dodaj-skladistenje",component:D}]}];let A=(()=>{class t{}return t.\u0275mod=l.Pb({type:t}),t.\u0275inj=l.Ob({factory:function(e){return new(e||t)},imports:[[o.g.forChild(L)],o.g]}),t})(),U=(()=>{class t{}return t.\u0275mod=l.Pb({type:t}),t.\u0275inj=l.Ob({factory:function(e){return new(e||t)},providers:[X.a,c.a,i.a],imports:[[a.a,A,b.z,b.P,b.pb,b.C,s.c,b.u,u.e,b.I,b.Jb]]}),t})()},rDBk:function(t,e,n){"use strict";n.r(e),n.d(e,"OotpadModule",(function(){return T}));var i=n("pVkk"),a=n("vTDv"),o=n("tyNb"),s=n("fXoL");let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Lb({type:t,selectors:[["ngx-dodaj-deponija"]],decls:2,vars:0,template:function(t,e){1&t&&(s.Xb(0,"p"),s.Ec(1,"dodaj-deponija works!"),s.Wb())},styles:[""]}),t})(),r=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Lb({type:t,selectors:[["ngx-dodaj-skladistenje"]],decls:2,vars:0,template:function(t,e){1&t&&(s.Xb(0,"p"),s.Ec(1,"dodaj-skladistenje works!"),s.Wb())},styles:[""]}),t})(),d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Lb({type:t,selectors:[["ngx-dodaj-tretman"]],decls:2,vars:0,template:function(t,e){1&t&&(s.Xb(0,"p"),s.Ec(1,"dodaj-tretman works!"),s.Wb())},styles:[""]}),t})(),l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Lb({type:t,selectors:[["ngx-ootpad"]],decls:1,vars:0,template:function(t,e){1&t&&s.Sb(0,"router-outlet")},directives:[o.h],encapsulation:2}),t})();var b=n("O8xV"),u=n("RS3s"),p=n("8FOb");const h={pager:{perPage:5},hideSubHeader:!0,actions:{columnTitle:"Odaberi",position:"right",add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus-square"></i>'}]},columns:{indeksniBroj:{title:"Indeksni Broj"},naziv:{title:"Naziv"}}};var g=n("aceb"),f=n("3Pt+"),v=n("ofXK");function m(t,e){if(1&t&&(s.Xb(0,"nb-option",46),s.Ec(1),s.Wb()),2&t){const t=e.$implicit;s.nc("value",t),s.Eb(1),s.Fc(t)}}function k(t,e){if(1&t){const t=s.Yb();s.Xb(0,"div",32),s.Ec(1),s.Xb(2,"div",10),s.Xb(3,"label",38),s.Ec(4,"CAS: "),s.Wb(),s.Xb(5,"div",12),s.Xb(6,"input",48),s.fc("ngModelChange",(function(n){return s.wc(t),e.$implicit.cas=n})),s.Wb(),s.Wb(),s.Wb(),s.Xb(7,"div",10),s.Xb(8,"label",38),s.Ec(9,"Hemijski naziv: "),s.Wb(),s.Xb(10,"div",12),s.Xb(11,"input",49),s.fc("ngModelChange",(function(n){return s.wc(t),e.$implicit.hemijskiNaziv=n})),s.Wb(),s.Wb(),s.Wb(),s.Xb(12,"div",10),s.Xb(13,"label",38),s.Ec(14,"Kilograma opasne materije po kilogram otpada: "),s.Wb(),s.Xb(15,"div",19),s.Xb(16,"input",50),s.fc("ngModelChange",(function(n){return s.wc(t),e.$implicit.kgMaterije=n})),s.Wb(),s.Wb(),s.Xb(17,"div",21),s.Xb(18,"button",51),s.Ec(19,"kg"),s.Wb(),s.Wb(),s.Wb(),s.Wb()}if(2&t){const t=e.$implicit,n=e.index;s.Eb(1),s.Gc(" Komponenta #",n+1," "),s.Eb(5),s.nc("ngModel",t.cas),s.Eb(5),s.nc("ngModel",t.hemijskiNaziv),s.Eb(5),s.nc("ngModel",t.kgMaterije)}}function W(t,e){if(1&t&&(s.Xb(0,"div",10),s.Cc(1,k,20,4,"div",47),s.Wb()),2&t){const t=s.hc();s.Eb(1),s.nc("ngForOf",t.ootpad.opasnaKomponenta)}}function X(t,e){if(1&t&&(s.Xb(0,"nb-option",46),s.Ec(1),s.Wb()),2&t){const t=e.$implicit;s.nc("value",t),s.Eb(1),s.Fc(t.naziv)}}const j=[{path:"",component:l,children:[{path:"dodaj-proizvodnja",component:(()=>{class t{constructor(t,e,n,i,a){this.katalogService=t,this.opasniOtpadService=e,this.skladisteService=n,this.router=i,this.toastrService=a,this.katalog=new u.a,this.settings=h,this.brojKomponenti=1,this.fizickaStanja=["\u010cvrsto","Te\u010dno","Gasovito","Prah"],this.ootpad={cLista:"",fizickoStanje:"",hLista:"",yLista:"",naziv:"",opis:"",indeksniBroj:"",kolicina:0,opasnaKomponenta:[]}}ngOnInit(){this.katalogService.getOpasanKatalog().subscribe(t=>{this.katalog.load(t)}),this.skladisteService.getSkladisteFirme().subscribe(t=>{this.skladista=t}),this.updateCAS()}onSearch(t=""){this.katalog.setFilter([{field:"indeksniBroj",search:t,filter:function(t,e){return t.replace(/\s+/g,"").includes(e.replace(/\s+/g,""))}}],!0)}updateCAS(){this.ootpad.opasnaKomponenta=new Array(this.brojKomponenti);for(let t=0;t<this.brojKomponenti;t++)this.ootpad.opasnaKomponenta[t]={kgMaterije:0,cas:"",hemijskiNaziv:""}}chooseOtpad(t){this.ootpad.indeksniBroj=t.data.indeksniBroj,this.ootpad.naziv=t.data.naziv,this.ootpad.opis=t.data.naziv}today(){return new Date}addTrash(){this.opasniOtpadService.dodajOOtpad(this.ootpad,this.skladiste._id).subscribe(),this.showToast("Uspeh","Uspe\u0161no ste dodali otpad na skladi\u0161te "+this.skladiste.naziv,"success"),this.router.navigate(["pages","skladiste"])}showToast(t,e,n){this.toastrService.show(e,t,{status:n})}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(b.a),s.Rb(p.a),s.Rb(i.a),s.Rb(o.c),s.Rb(g.Hb))},t.\u0275cmp=s.Lb({type:t,selectors:[["ngx-dodaj-otpad"]],decls:90,vars:20,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"col-12","pl-0"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",1,"col-12",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],[1,"col-4"],[1,"row","mb-2"],["for","input-indeksniBroj",1,"col-12","label"],[1,"col-8"],["nbInput","","disabled","","id","input-indeksniBroj",3,"placeholder"],["for","input-naziv",1,"col-12","label"],["placeholder","Naziv","fullWidth","","name","naziv","id","input-naziv","nbInput","",3,"ngModel","ngModelChange"],["for","input-opis",1,"col-12","label"],["placeholder","Opis","fullWidth","","name","opis","id","input-opis","nbInput","",3,"ngModel","ngModelChange"],["id","input-kolicina",1,"col-12","label"],[1,"col-6","pr-0"],["decimals","1","fullWidth","","min","0","name","kolicina","nbInput","","placeholder","0.0","step","0.1","type","number",3,"ngModel","ngModelChange"],[1,"col-2","pl-0"],["nbButton","","fullWidth","","disabled",""],["for","input-fizickoStanje",1,"col-12","label"],["placeholder","Fizi\u010dko stanje","fullWidth","","name","stanje","id","input-fizickoStanje","selected","Cvrsto",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","input-sifraIspitivanja",1,"col-12","label"],["fullWidth","","id","input-sifraIspitivanja","name","sifra","nbInput","","placeholder","\u0160ifra","required","","type","text",3,"ngModel","ngModelChange"],["for","input-datumIspitivanja",1,"col-12","label"],["fullWidth","","placeholder","Datum","id","input-datumIspitivanja","name","datum","nbInput","","required","",3,"ngModel","nbDatepicker","ngModelChange"],[3,"max"],["datumInput",""],[1,"col-6"],[1,"col-4","label"],[1,"col-4","mb-2"],["fullWidth","","name","Hlista","nbInput","","type","text","required","",3,"ngModel","ngModelChange"],["fullWidth","","name","YLista","nbInput","","type","text","required","",3,"ngModel","ngModelChange"],["fullWidth","","name","CLista","nbInput","","type","text","required","",3,"ngModel","ngModelChange"],[1,"col-12","label"],["fullWidth","","min","1","name","brojKomponeti","nbInput","","type","number",3,"ngModel","ngModelChange"],[1,"col-3"],["fullWidth","","nbButton","","type","button",3,"click"],["class","row mb-2",4,"ngIf"],["fullWidth","","required","","name","skladiste",3,"ngModel","ngModelChange"],[1,"row","my-2"],["nbButton","","fullWidth","","status","primary","type","submit",3,"disabled"],[3,"value"],["class","col-6",4,"ngFor","ngForOf"],["nbInput","","type","text","required","","name","CAS",3,"ngModel","ngModelChange"],["nbInput","","type","text","required","","name","Hemijski naziv",3,"ngModel","ngModelChange"],["fullWidth","","decimals","1","step","0.1","min","0","type","number","nbInput","","placeholder","0.0","name","Kg opasne materije",3,"ngModel","ngModelChange"],["nbButton","","disabled",""]],template:function(t,e){if(1&t){const t=s.Yb();s.Xb(0,"nb-card",0),s.Xb(1,"nb-card-header"),s.Xb(2,"h5"),s.Ec(3,"Dodajte novi inventar opasnog otpada"),s.Wb(),s.Wb(),s.Xb(4,"nb-card-body"),s.Xb(5,"div",1),s.Xb(6,"div",2),s.Xb(7,"label",3),s.Ec(8,"Pretra\u017ei po indeksnom broju:"),s.Wb(),s.Xb(9,"input",4,5),s.fc("input",(function(){s.wc(t);const n=s.uc(10);return e.onSearch(n.value)})),s.Wb(),s.Xb(11,"ng2-smart-table",6),s.fc("custom",(function(t){return e.chooseOtpad(t)})),s.Wb(),s.Wb(),s.Wb(),s.Xb(12,"form",7,8),s.fc("ngSubmit",(function(){return e.addTrash()})),s.Xb(14,"div",1),s.Xb(15,"div",9),s.Xb(16,"div",10),s.Xb(17,"label",11),s.Ec(18,"Indeksni broj:"),s.Wb(),s.Xb(19,"div",12),s.Sb(20,"input",13),s.Wb(),s.Wb(),s.Xb(21,"div",10),s.Xb(22,"label",14),s.Ec(23,"Naziv: "),s.Wb(),s.Xb(24,"div",12),s.Xb(25,"input",15),s.fc("ngModelChange",(function(t){return e.ootpad.naziv=t})),s.Wb(),s.Wb(),s.Wb(),s.Xb(26,"div",10),s.Xb(27,"label",16),s.Ec(28,"Opis: "),s.Wb(),s.Xb(29,"div",12),s.Xb(30,"input",17),s.fc("ngModelChange",(function(t){return e.ootpad.opis=t})),s.Wb(),s.Wb(),s.Wb(),s.Xb(31,"div",10),s.Xb(32,"label",18),s.Ec(33,"Trenutna koli\u010dina na skladistu: "),s.Wb(),s.Xb(34,"div",19),s.Xb(35,"input",20),s.fc("ngModelChange",(function(t){return e.ootpad.kolicina=t})),s.Wb(),s.Wb(),s.Xb(36,"div",21),s.Xb(37,"button",22),s.Ec(38,"kg"),s.Wb(),s.Wb(),s.Wb(),s.Xb(39,"div",10),s.Xb(40,"label",23),s.Ec(41,"Fizicko stanje otpada: "),s.Wb(),s.Xb(42,"div",12),s.Xb(43,"nb-select",24),s.fc("ngModelChange",(function(t){return e.ootpad.fizickoStanje=t})),s.Cc(44,m,2,2,"nb-option",25),s.Wb(),s.Wb(),s.Wb(),s.Xb(45,"div",10),s.Xb(46,"label",26),s.Ec(47,"\u0160ifra ispitivanja otpada: "),s.Wb(),s.Xb(48,"div",12),s.Xb(49,"input",27),s.fc("ngModelChange",(function(t){return e.ootpad.sifraIspitivanja=t})),s.Wb(),s.Wb(),s.Wb(),s.Xb(50,"div",10),s.Xb(51,"label",28),s.Ec(52,"Datum ispitivanja otpada: "),s.Wb(),s.Xb(53,"div",12),s.Xb(54,"input",29),s.fc("ngModelChange",(function(t){return e.ootpad.datumIspitivanja=t})),s.Wb(),s.Sb(55,"nb-datepicker",30,31),s.Wb(),s.Wb(),s.Wb(),s.Xb(57,"div",32),s.Xb(58,"div",10),s.Xb(59,"label",33),s.Ec(60,"H-Lista: "),s.Wb(),s.Xb(61,"label",33),s.Ec(62,"Y-Lista: "),s.Wb(),s.Xb(63,"label",33),s.Ec(64,"C-Lista: "),s.Wb(),s.Xb(65,"div",34),s.Xb(66,"input",35),s.fc("ngModelChange",(function(t){return e.ootpad.hLista=t})),s.Wb(),s.Wb(),s.Xb(67,"div",34),s.Xb(68,"input",36),s.fc("ngModelChange",(function(t){return e.ootpad.yLista=t})),s.Wb(),s.Wb(),s.Xb(69,"div",9),s.Xb(70,"input",37),s.fc("ngModelChange",(function(t){return e.ootpad.cLista=t})),s.Wb(),s.Wb(),s.Wb(),s.Xb(71,"div",10),s.Xb(72,"label",38),s.Ec(73,"Broj opasnih komponenta u otpadu: "),s.Wb(),s.Xb(74,"div",32),s.Xb(75,"input",39),s.fc("ngModelChange",(function(t){return e.brojKomponenti=t})),s.Wb(),s.Wb(),s.Xb(76,"div",40),s.Xb(77,"button",41),s.fc("click",(function(){return e.updateCAS()})),s.Ec(78,"Odaberi"),s.Wb(),s.Wb(),s.Wb(),s.Cc(79,W,2,1,"div",42),s.Xb(80,"div",10),s.Xb(81,"label",38),s.Ec(82,"Odaberite skladi\u0161te za otpad: "),s.Wb(),s.Xb(83,"div",32),s.Xb(84,"nb-select",43),s.fc("ngModelChange",(function(t){return e.skladiste=t})),s.Cc(85,X,2,2,"nb-option",25),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(86,"div",44),s.Xb(87,"div",2),s.Xb(88,"button",45),s.Ec(89,"Dodaj "),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Wb()}if(2&t){const t=s.uc(13),n=s.uc(56);s.Eb(11),s.nc("source",e.katalog)("settings",e.settings),s.Eb(9),s.nc("placeholder",e.ootpad.indeksniBroj||"00 00 00"),s.Eb(5),s.nc("ngModel",e.ootpad.naziv),s.Eb(5),s.nc("ngModel",e.ootpad.opis),s.Eb(5),s.nc("ngModel",e.ootpad.kolicina),s.Eb(8),s.nc("ngModel",e.ootpad.fizickoStanje),s.Eb(1),s.nc("ngForOf",e.fizickaStanja),s.Eb(5),s.nc("ngModel",e.ootpad.sifraIspitivanja),s.Eb(5),s.nc("ngModel",e.ootpad.datumIspitivanja)("nbDatepicker",n),s.Eb(1),s.nc("max",e.today()),s.Eb(11),s.nc("ngModel",e.ootpad.hLista),s.Eb(2),s.nc("ngModel",e.ootpad.yLista),s.Eb(2),s.nc("ngModel",e.ootpad.cLista),s.Eb(5),s.nc("ngModel",e.brojKomponenti),s.Eb(4),s.nc("ngIf",e.brojKomponenti>0),s.Eb(5),s.nc("ngModel",e.skladiste),s.Eb(1),s.nc("ngForOf",e.skladista),s.Eb(3),s.nc("disabled",!t.valid)}},directives:[g.w,g.y,g.v,g.O,u.b,f.w,f.l,f.m,f.b,f.k,f.n,f.p,g.t,g.nb,v.m,f.s,g.H,g.G,v.n,g.db],styles:["[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff}"]}),t})()},{path:"dodaj-tretman",component:d},{path:"dodaj-deponija",component:c},{path:"dodaj-skladistenje",component:r}]}];let M=(()=>{class t{}return t.\u0275mod=s.Pb({type:t}),t.\u0275inj=s.Ob({factory:function(e){return new(e||t)},imports:[[o.g.forChild(j)],o.g]}),t})(),T=(()=>{class t{}return t.\u0275mod=s.Pb({type:t}),t.\u0275inj=s.Ob({factory:function(e){return new(e||t)},providers:[b.a,p.a,i.a],imports:[[a.a,M,g.z,g.P,g.pb,g.C,u.c,g.u,f.e,g.I]]}),t})()}}]);