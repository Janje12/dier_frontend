function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Yj9t:function(e,t,n){"use strict";n.r(t),n.d(t,"NgxAuthModule",(function(){return Wi}));var i,a,o,r,c=n("ofXK"),s=n("3Pt+"),l=n("tyNb"),u=n("RS3s"),b=n("wH5/"),d=n("LRne"),p=n("AytR"),g=n("fXoL"),f=n("tk/3"),m=((i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).http=e,i.apiUrl=p.a.apiUrl,i}return _createClass(n,[{key:"createOccupation",value:function(e){}},{key:"deleteOccupation",value:function(e,t){}},{key:"getOccupation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id";return this.http.get(this.apiUrl+"/api/occupation/one/"+"".concat(t,"/").concat(e))}},{key:"getOccupations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id";return this.http.get(this.apiUrl+"/api/occupation/many/"+"".concat(t,"/").concat(e))}},{key:"updateOccupation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_id";return this.http.patch(this.apiUrl+"/api/occupation/one/"+"".concat(n,"/").concat(t),e)}},{key:"filter",value:function(e,t){var n=e.toLowerCase();if(void 0!==t)return Object(d.a)(t.filter((function(e){return e.name.toLowerCase().includes(n)||e.code.includes(n)})))}}]),n}(function(){return function e(){_classCallCheck(this,e)}}())).\u0275fac=function(e){return new(e||i)(g.bc(f.b))},i.\u0275prov=g.Nb({token:i,factory:i.\u0275fac}),i),h=n("ibGe"),v=((a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).http=e,i.townshipsIsLoaded=!1,i.apiUrl=p.a.apiUrl,i}return _createClass(n,[{key:"createLocation",value:function(e){}},{key:"deleteLocation",value:function(e,t){}},{key:"getLocation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id";return this.http.get(this.apiUrl+"/api/location/one/"+"".concat(t,"/").concat(e))}},{key:"getLocations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id";return this.http.get(this.apiUrl+"/api/location/many/"+"".concat(t,"/").concat(e))}},{key:"updateLocation",value:function(e,t,n){return this.http.patch(this.apiUrl+"/api/location/one/"+"".concat(n,"/").concat(t),e)}},{key:"getDistinctTownships",value:function(){return this.townshipsIsLoaded||(this.townshipNames=this.http.get(this.apiUrl+"/api/location/townships"),this.townshipsIsLoaded=!0),this.townshipNames}},{key:"getPlacesFromTownship",value:function(e){return this.http.get(this.apiUrl+"/api/location/place/"+e)}},{key:"filter",value:function(e,t){var n=e.toLowerCase();if(void 0!==t)return Object(d.a)(t.filter((function(e){return e.toLowerCase().includes(n)})))}}]),n}(function(){return function e(){_classCallCheck(this,e)}}())).\u0275fac=function(e){return new(e||a)(g.bc(f.b))},a.\u0275prov=g.Nb({token:a,factory:a.\u0275fac}),a),y=n("bS1W"),W=n("fo3O"),X=n("H5EB"),k=((o=function(){function e(t,n,i,a){_classCallCheck(this,e),this.userService=t,this.companyService=n,this.permitService=i,this.vehicleService=a,this.clearData(),Object(g.Y)()&&(this.user={_id:"",email:"serbiansolutions@gmail.com",firstName:"Filip",username:"random"+(1e3*Math.random()).toFixed(0),lastName:"Balandzic",password:"nikjan00",phone:(1e10*Math.random()).toFixed(0),role:"manager"},this.company={storages:[],address:{location:{placeCode:0,placeName:"Arnajevo",townshipCode:0,townshipName:"Beograd",zipCode:"31210"},street:"Nikola tesla 2"},occupation:{code:"",name:"Proizvodnja mesnih prera\u0111evina"},email:"random1"+(1e3*Math.random()).toFixed(0)+"@gmail.com",emailReception:"random"+(1e3*Math.random()).toFixed(0)+"@gmail.com",mat:(1e8*Math.random()).toFixed(0),manager:"random",name:"Test",pib:(1e9*Math.random()).toFixed(0),operations:[],telephone:(1e10*Math.random()).toFixed(0),legalRep:{firstName:"Nikola",lastName:"Jankovic"},nriz:{username:"",password:""},wasteManager:{firstName:"",lastName:""}},this.operations=["Transport Neopasnog Otpada"])}return _createClass(e,[{key:"clearData",value:function(){this.user={email:"",firstName:"",username:"",lastName:"",password:"",phone:"",role:"manager"},this.company={occupation:{code:"",name:""},address:{location:{townshipCode:0,townshipName:"",placeCode:0,placeName:"",zipCode:""},street:""},email:"",emailReception:"",mat:"",manager:"",name:"",pib:"",operations:[],storages:[],permits:[],telephone:"",legalRep:{firstName:"",lastName:""},wasteManager:{firstName:"",lastName:""},nriz:{username:"",password:""}},this.operations=[],this.permitCode=""}},{key:"sendPermit",value:function(e){var t=this;this.permitCode$=e,e.subscribe((function(e){t.permitCode=e}))}},{key:"getPermit",value:function(){return Object(d.a)(this.permitCode)}},{key:"sendOperations",value:function(e){var t=this;this.operations$=e,e.subscribe((function(e){t.operations=e}))}},{key:"getOperations",value:function(){return Object(d.a)(this.operations)}},{key:"sendUser",value:function(e){var t=this;this.user$=e,e.subscribe((function(e){t.user=e}))}},{key:"getUser",value:function(){return void 0!==this.company&&void 0!==this.user&&(this.user.company=this.company),Object(d.a)(this.user)}},{key:"sendCompany",value:function(e){var t=this;this.company$=e,e.subscribe((function(e){t.company=e}))}},{key:"getCompany",value:function(){if(void 0!==this.company)return void 0!==this.operations&&(this.company.operations=this.operations),void 0!==this.user&&(this.company.manager=this.user.username),Object(d.a)(this.company)}},{key:"checkUser",value:function(e){var t=[];return t.push(this.userService.getUser(e.username,"username").toPromise().then((function(e){return null===e}))),t.push(this.userService.getUser(e.phone,"phone").toPromise().then((function(e){return null===e}))),t.push(this.userService.getUser(e.email,"email").toPromise().then((function(e){return null===e}))),t}},{key:"checkCompany",value:function(e){var t=[];return t.push(this.companyService.getCompany(e.pib,"pib").toPromise().then((function(e){return null===e}))),t.push(this.companyService.getCompany(e.mat,"mat").toPromise().then((function(e){return null===e}))),t.push(this.companyService.getCompany(e.email,"email").toPromise().then((function(e){return null===e}))),t.push(this.companyService.getCompany(e.emailReception,"emailReception").toPromise().then((function(e){return null===e}))),t.push(this.companyService.getCompany(e.telephone,"telephone").toPromise().then((function(e){return null===e}))),t.push(""===e.nriz.username||this.companyService.getCompany(e.nriz.username,"nriz.username").toPromise().then((function(e){return null===e}))),t}},{key:"checkPermits",value:function(e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(this.permitService.getPermit(a.code,"code").toPromise().then((function(e){return null===e})).catch((function(e){return!0})))}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"checkVehicles",value:function(e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(this.vehicleService.getVehicle(a.licensePlate,"licensePlate").toPromise().then((function(e){return null===e})))}}catch(o){i.e(o)}finally{i.f()}return n}}]),e}()).\u0275fac=function(e){return new(e||o)(g.bc(W.a),g.bc(b.a),g.bc(y.a),g.bc(X.a))},o.\u0275prov=g.Nb({token:o,factory:o.\u0275fac}),o),C=n("vTDv"),M=n("McNs"),I=((r=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;setTimeout((function(){e.router.navigate(["login"])}),3e3)}}]),e}()).\u0275fac=function(e){return new(e||r)(g.Rb(l.c))},r.\u0275cmp=g.Lb({type:r,selectors:[["auth-email-confirmation"]],decls:5,vars:0,consts:[[1,"text-center"],[1,"text-muted"]],template:function(e,t){1&e&&(g.Xb(0,"div",0),g.Xb(1,"h1"),g.Hc(2,"Uspe\u0161no ste potvrdili va\u0161 Email!"),g.Wb(),g.Xb(3,"h5",1),g.Hc(4,"Automatski \u0107emo vas prebaciti na login stranicu..."),g.Wb(),g.Wb())},styles:[""]}),r),w=n("aceb");function E(e,t){1&e&&(g.Xb(0,"p",13),g.Hc(1," Morate upisati email! "),g.Wb())}function j(e,t){1&e&&(g.Xb(0,"p",13),g.Hc(1," Email mora biti validan! "),g.Wb())}function x(e,t){if(1&e&&(g.Vb(0),g.Fc(1,E,2,0,"p",12),g.Fc(2,j,2,0,"p",12),g.Ub()),2&e){g.jc();var n=g.xc(10);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.pattern)}}var O,N=((O=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,n),(i=t.call(this,e,a,o,r)).service=e,i.options=a,i.cd=o,i.router=r,i.email="",i.strategy=i.getConfigValue("forms.login.strategy"),i}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"sendEmail",value:function(e){var t=this;e.invalid||this.service.requestPassword(this.strategy,{email:this.email}).subscribe((function(e){t.router.navigate(["login"])}))}}]),n}(M.l)).\u0275fac=function(e){return new(e||O)(g.Rb(M.g),g.Rb(M.a),g.Rb(g.h),g.Rb(l.c))},O.\u0275cmp=g.Lb({type:O,selectors:[["forgot-password"]],features:[g.Bb],decls:16,vars:6,consts:[[1,"align-self-center","text-center"],[1,"mb-1"],["for","input-email",1,"text-muted"],[1,"mt-4",3,"ngSubmit"],["form","ngForm"],[1,"row","d-flex","justify-content-center"],[1,"col-8"],["tabindex","5","fullWidth","","id","input-email","name","email","nbInput","","placeholder","Email",3,"ngModel","pattern","required","status","ngModelChange"],["emailInput","ngModel"],[4,"ngIf"],[1,"row","mt-3","d-flex","justify-content-center"],["status","primary","size","large","type","submit","nbButton","","fullWidth",""],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",0),g.Xb(1,"h1",1),g.Hc(2,"Zaboravljena lozinka:"),g.Wb(),g.Xb(3,"label",2),g.Hc(4,"Upi\u0161ite va\u0161u email adresa i posla\u0107emo Vam link za resetovanje lozinke"),g.Wb(),g.Xb(5,"form",3,4),g.fc("ngSubmit",(function(){g.zc(n);var e=g.xc(6);return t.sendEmail(e)})),g.Xb(7,"div",5),g.Xb(8,"div",6),g.Xb(9,"input",7,8),g.fc("ngModelChange",(function(e){return t.email=e})),g.Wb(),g.Fc(11,x,3,2,"ng-container",9),g.Wb(),g.Wb(),g.Xb(12,"div",10),g.Xb(13,"div",6),g.Xb(14,"button",11),g.Hc(15,"Po\u0161alji mejl"),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=g.xc(10);g.Eb(9),g.pc("ngModel",t.email)("pattern",t.getConfigValue("forms.validation.email.pattern"))("required",t.getConfigValue("forms.validation.email.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched)}},directives:[s.w,s.l,s.m,w.Q,s.b,s.k,s.n,s.q,s.s,c.m,w.t],styles:[""]}),O),F=n("ud2R");function z(e,t){if(1&e&&(g.Xb(0,"li",32),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.Eb(1),g.Ic(n)}}function H(e,t){if(1&e&&(g.Xb(0,"nb-alert",28),g.Xb(1,"p",29),g.Xb(2,"b"),g.Hc(3,"Do\u0161lo je do gre\u0161ke, proverite podatke!"),g.Wb(),g.Wb(),g.Xb(4,"ul",30),g.Fc(5,z,2,1,"li",31),g.Wb(),g.Wb()),2&e){var n=g.jc();g.Eb(5),g.pc("ngForOf",n.errors)}}function S(e,t){if(1&e&&(g.Xb(0,"li",32),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.Eb(1),g.Ic(n)}}function P(e,t){if(1&e&&(g.Xb(0,"nb-alert",33),g.Xb(1,"p",29),g.Xb(2,"b"),g.Hc(3,"Uspesno ste se ulogovali!"),g.Wb(),g.Wb(),g.Xb(4,"ul",30),g.Fc(5,S,2,1,"li",31),g.Wb(),g.Wb()),2&e){var n=g.jc();g.Eb(5),g.pc("ngForOf",n.messages)}}function V(e,t){1&e&&(g.Xb(0,"p",35),g.Hc(1," Email je obavezan! "),g.Wb())}function R(e,t){if(1&e&&(g.Vb(0),g.Fc(1,V,2,0,"p",34),g.Ub()),2&e){g.jc();var n=g.xc(15);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function T(e,t){1&e&&(g.Xb(0,"p",35),g.Hc(1," \u0160ifra je obavezna! "),g.Wb())}function q(e,t){if(1&e&&(g.Vb(0),g.Fc(1,T,2,0,"p",34),g.Ub()),2&e){g.jc();var n=g.xc(24);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function L(e,t){if(1&e){var n=g.Yb();g.Xb(0,"nb-checkbox",36),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().user.rememberMe=e})),g.Hc(1,"Zapamti me"),g.Wb()}if(2&e){var i=g.jc();g.pc("ngModel",i.user.rememberMe)}}var _,$,U,A=((_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return _classCallCheck(this,n),(i=t.call(this,e,a,o,c)).service=e,i.options=a,i.cd=o,i.roleService=r,i.router=c,i.showPassword="eye",i.redirectDelay=0,i.showMessages={},i.strategy="",i.errors=[],i.messages=[],i.user={email:"",password:"",rememberMe:!1},i.submitted=!1,i.rememberMe=!1,i.redirectDelay=i.getConfigValue("forms.login.redirectDelay"),i.showMessages=i.getConfigValue("forms.login.showMessages"),i.strategy=i.getConfigValue("forms.login.strategy"),i.rememberMe=i.getConfigValue("forms.login.rememberMe"),i}return _createClass(n,[{key:"login",value:function(){var e=this;this.errors=[],this.messages=[],this.submitted=!0,this.service.authenticate(this.strategy,this.user).subscribe((function(t){e.submitted=!1,t.isSuccess()?e.messages=t.getMessages():e.errors=t.getErrors();var n=t.getRedirect();n&&(e.roleService.loginUser(),setTimeout((function(){return e.router.navigateByUrl(n)}),e.redirectDelay)),e.cd.detectChanges()}))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}}]),n}(M.h)).\u0275fac=function(e){return new(e||_)(g.Rb(M.g),g.Rb(M.a),g.Rb(g.h),g.Rb(F.a),g.Rb(l.c))},_.\u0275cmp=g.Lb({type:_,selectors:[["auth-login"]],features:[g.Bb],decls:45,vars:18,consts:[[1,"align-self-center"],["id","title",1,"title"],[1,"row","d-flex","justify-content-center"],[1,"col-8"],["outline","danger","role","alert",4,"ngIf"],["outline","success","role","alert",4,"ngIf"],["aria-labelledby","uloguj se",3,"ngSubmit"],["loginForm","ngForm"],[1,"row","d-flex","justify-content-center","mb-3"],["for","input-email",1,"label"],["autofocus","","fullWidth","","id","input-email","name","email","nbInput","","placeholder","Email adresa/Korisni\u010dko ime",3,"ngModel","required","status","ngModelChange"],["email","ngModel"],[4,"ngIf"],[1,"row","d-flex","justify-content-center","mb-2"],["for","input-password",1,"label"],[1,"col-7","pr-0"],["fullWidth","","id","input-password","name","password","nbInput","","placeholder","\u0160ifra",3,"ngModel","required","status","type","ngModelChange"],["password","ngModel"],[1,"col-1","pl-0"],["fullWidth","","type","button","nbButton","",3,"click"],[3,"icon"],[1,"col-4"],["name","rememberMe",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-4","justify-content-end","d-flex"],["routerLink","../forgot-password",1,"forgot-password"],["fullWidth","","nbButton","","status","success",3,"disabled"],["aria-label","Registruj se",1,"col-8","text-center"],["routerLink","../register-user",1,"text-link"],["outline","danger","role","alert"],[1,"alert-title"],[1,"alert-message-list"],["class","alert-message",4,"ngFor","ngForOf"],[1,"alert-message"],["outline","success","role","alert"],["class","error-message mt-1",4,"ngIf"],[1,"error-message","mt-1"],["name","rememberMe",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(g.Xb(0,"div",0),g.Xb(1,"h1",1),g.Hc(2,"Uloguj se!"),g.Wb(),g.Xb(3,"div",2),g.Xb(4,"div",3),g.Fc(5,H,6,1,"nb-alert",4),g.Fc(6,P,6,1,"nb-alert",5),g.Wb(),g.Wb(),g.Xb(7,"form",6,7),g.fc("ngSubmit",(function(){return t.login()})),g.Xb(9,"div",8),g.Xb(10,"div",3),g.Xb(11,"label",9),g.Hc(12,"Email/Korisni\u010dko ime:"),g.Wb(),g.Wb(),g.Xb(13,"div",3),g.Xb(14,"input",10,11),g.fc("ngModelChange",(function(e){return t.user.email=e})),g.Wb(),g.Wb(),g.Xb(16,"div",3),g.Fc(17,R,2,1,"ng-container",12),g.Wb(),g.Wb(),g.Xb(18,"div",13),g.Xb(19,"div",3),g.Xb(20,"label",14),g.Hc(21,"\u0160ifra:"),g.Wb(),g.Wb(),g.Xb(22,"div",15),g.Xb(23,"input",16,17),g.fc("ngModelChange",(function(e){return t.user.password=e})),g.Wb(),g.Wb(),g.Xb(25,"div",18),g.Xb(26,"button",19),g.fc("click",(function(){return t.showPassword="eye"===t.showPassword?"eye-off":"eye"})),g.Sb(27,"nb-icon",20),g.Wb(),g.Wb(),g.Xb(28,"div",3),g.Fc(29,q,2,1,"ng-container",12),g.Wb(),g.Wb(),g.Xb(30,"div",13),g.Xb(31,"div",21),g.Fc(32,L,2,1,"nb-checkbox",22),g.Wb(),g.Xb(33,"div",23),g.Xb(34,"a",24),g.Hc(35,"Zaboravili ste \u0161ifru?"),g.Wb(),g.Wb(),g.Wb(),g.Xb(36,"div",13),g.Xb(37,"div",3),g.Xb(38,"button",25),g.Hc(39," Uloguj se "),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(40,"div",2),g.Xb(41,"div",26),g.Hc(42," Nemate nalog? "),g.Xb(43,"a",27),g.Hc(44,"Registruj se"),g.Wb(),g.Wb(),g.Wb(),g.Wb()),2&e){var n=g.xc(15),i=g.xc(24);g.Eb(5),g.pc("ngIf",t.showMessages.error&&(null==t.errors?null:t.errors.length)&&!t.submitted),g.Eb(1),g.pc("ngIf",t.showMessages.success&&(null==t.messages?null:t.messages.length)&&!t.submitted),g.Eb(8),g.pc("ngModel",t.user.email)("required",t.getConfigValue("forms.validation.email.required"))("status",n.dirty?n.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),g.Eb(3),g.pc("ngIf",n.touched),g.Eb(6),g.pc("ngModel",t.user.password)("required",t.getConfigValue("forms.validation.password.required"))("status",i.dirty?i.invalid?"danger":"success":"basic")("type","eye"===t.showPassword?"password":"text"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(4),g.pc("icon",t.showPassword),g.Eb(2),g.pc("ngIf",i.touched),g.Eb(3),g.pc("ngIf",t.rememberMe),g.Eb(6),g.Ib("btn-pulse",t.submitted),g.pc("disabled",t.submitted)}},directives:[c.m,s.w,s.l,s.m,w.Q,s.b,s.k,s.n,s.s,w.t,w.N,l.f,w.o,c.l,w.D],styles:[".error-message[_ngcontent-%COMP%]{color:red}"]}),_),D=n("BHmg"),B=((U=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return _classCallCheck(this,n),(a=t.call(this,e,o,r)).service=e,a.widgetService=i,a.options=o,a.router=r,a.roleService=c,a.redirectDelay=0,a.strategy="",a.redirectDelay=a.getConfigValue("forms.logout.redirectDelay"),a.strategy=a.getConfigValue("forms.logout.strategy"),a}return _createClass(n,[{key:"logout",value:function(e){var t=this;this.service.logout(e).subscribe((function(e){var n=e.getRedirect();t.roleService.ngOnDestroy(),t.widgetService.ngOnDestroy(),n&&setTimeout((function(){return t.router.navigateByUrl(n)}),t.redirectDelay)}))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}}]),n}(M.i)).\u0275fac=function(e){return new(e||U)(g.Rb(M.g),g.Rb(D.a),g.Rb(M.a),g.Rb(l.c),g.Rb(F.a))},U.\u0275cmp=g.Lb({type:U,selectors:[["ngx-logout"]],features:[g.Bb],decls:2,vars:0,template:function(e,t){1&e&&(g.Xb(0,"div"),g.Hc(1,"Odjavljivanje u toku..."),g.Wb())},styles:["div[_ngcontent-%COMP%]{margin:auto;width:50%;text-align:center;font-size:1.5rem;font-weight:700}"]}),U),K=(($=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.router=n}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.authService.isAuthenticated().subscribe((function(t){t||e.router.navigate(["auth","login"])})),this.authService.getToken().subscribe((function(t){var n=t.getPayload().data.user;e.router.navigate("admin"===n.role?["admin"]:["pages","dashboard"])}))}}]),e}()).\u0275fac=function(e){return new(e||$)(g.Rb(M.g),g.Rb(l.c))},$.\u0275cmp=g.Lb({type:$,selectors:[["auth-redirect"]],decls:2,vars:0,template:function(e,t){1&e&&(g.Xb(0,"p"),g.Hc(1,"redirect works!"),g.Wb())},styles:[""]}),$),Z=n("SxV6"),J={pager:{perPage:5},hideSubHeader:!0,actions:{columnTitle:"Odaberi",position:"right",add:!1,delete:!1,edit:!1,custom:[{name:"izaberi",title:'<i class="fa fa-plus"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj",filter:!1,sort:!0,sortDirection:"asc"},name:{title:"Naziv",filter:!1}}};function Y(e,t){if(1&e){var n=g.Yb();g.Xb(0,"button",16),g.fc("click",(function(){g.zc(n);var e=t.$implicit;return g.jc().addTrash(e)})),g.Hc(1),g.Wb()}if(2&e){var i=t.$implicit;g.pc("nbPopover",i.name),g.Eb(1),g.Jc(" ",i.indexNumber," ")}}var G,Q=function(e){return["..","register-informations",e]},ee=((G=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,e),this.options=t,this.registerService=n,this.catalogService=i,this.catalog=new u.a,this.settings=J,this.permitType=""}return _createClass(e,[{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"ngOnInit",value:function(){var e=this;this.registerService.getPermit().subscribe((function(t){e.permitCode=t})),this.registerService.getCompany().subscribe((function(t){void 0!==t&&(e.company=t,e.permit=e.company.permits.filter((function(t){return t.code===e.permitCode}))[0],e.permitType=e.permit.type,e.trashList=e.permit.trashList)})),this.registerService.sendCompany(Object(d.a)(this.company));var t=!1,n=!1;this.registerService.getOperations().subscribe((function(i){i.forEach((function(e){e.includes("Neopasnog")&&(t=!0),e.includes("Opasnog")&&(n=!0)})),t&&!n?e.catalogService.getSafeTrash().pipe(Object(Z.a)()).subscribe((function(t){t.sort((function(e,t){return e.indexNumber.localeCompare(t.indexNumber)})),e.catalog.load(t)})):n&&!t?e.catalogService.getUnsafeTrash().pipe(Object(Z.a)()).subscribe((function(t){t.sort((function(e,t){return e.indexNumber.localeCompare(t.indexNumber)})),e.catalog.load(t)})):n&&t&&e.catalogService.getCatalogs().pipe(Object(Z.a)()).subscribe((function(t){t.sort((function(e,t){return e.indexNumber.localeCompare(t.indexNumber)})),e.catalog.load(t)}))}))}},{key:"onSearch",value:function(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"indexNumber",search:e,filter:function(e,t){return e.replace(/\s+/g,"").includes(t.replace(/\s+/g,""))}},{field:"name",search:e}],!1)}},{key:"addTrash",value:function(e){var t=this;this.trashList.some((function(t){return t._id===e._id}))?this.removeTrash(e):this.permit.trashList.push(e),this.company.permits.filter((function(e){return e.code===t.permitCode}))[0]=this.permit}},{key:"removeTrash",value:function(e){var t=this.trashList.filter((function(t){return t._id===e._id}))[0];if(t){var n=this.trashList.indexOf(t,0);n>-1&&this.trashList.splice(n,1)}}}]),e}()).\u0275fac=function(e){return new(e||G)(g.Rb(M.a),g.Rb(k),g.Rb(h.a))},G.\u0275cmp=g.Lb({type:G,selectors:[["register-permit"]],decls:22,vars:7,consts:[[1,"text-center"],["disableStepNavigation","","selectedIndex","3"],["label","User","completed","true"],["label","Firma","completed","true"],["label","Operacije","completed","true"],["label","Informacije"],[1,"row"],[1,"col-4"],["nbButton","","status","warning","class","p-2 m-1","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",3,"nbPopover","click",4,"ngFor","ngForOf"],[1,"col-8"],[1,"ml-0"],["nbInput","","fullWidth","","type","text","placeholder","Pretrazi",3,"input"],["search",""],[3,"source","settings","custom"],["nbButton","","fullWidth","","status","success",1,"mt-2",3,"routerLink","disabled"],["label","Potvrda"],["nbButton","","status","warning","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",1,"p-2","m-1",3,"nbPopover","click"]],template:function(e,t){if(1&e){var n=g.Yb();g.Xb(0,"h1",0),g.Hc(1,"Registruj se!"),g.Wb(),g.Xb(2,"nb-stepper",1),g.Xb(3,"nb-step",2),g.Hc(4,"Test"),g.Wb(),g.Sb(5,"nb-step",3),g.Sb(6,"nb-step",4),g.Xb(7,"nb-step",5),g.Xb(8,"div",6),g.Xb(9,"div",7),g.Xb(10,"h5"),g.Hc(11,"Lista otpada dozvole:"),g.Wb(),g.Fc(12,Y,2,2,"button",8),g.Wb(),g.Xb(13,"div",9),g.Xb(14,"label",10),g.Hc(15,"Pretrazi po indeksnom broju ili nazivu:"),g.Wb(),g.Xb(16,"input",11,12),g.fc("input",(function(){g.zc(n);var e=g.xc(17);return e.value.length>=1&&t.onSearch(e.value)})),g.Wb(),g.Xb(18,"ng2-smart-table",13),g.fc("custom",(function(e){return t.addTrash(e.data)})),g.Wb(),g.Wb(),g.Wb(),g.Xb(19,"button",14),g.Hc(20," Zavr\u0161i "),g.Wb(),g.Wb(),g.Sb(21,"nb-step",15),g.Wb()}2&e&&(g.Eb(12),g.pc("ngForOf",t.trashList),g.Eb(6),g.pc("source",t.catalog)("settings",t.settings),g.Eb(1),g.pc("routerLink",g.tc(5,Q,t.permitType))("disabled",0===(null==t.trashList?null:t.trashList.length)))},directives:[w.zb,w.yb,c.l,w.Q,u.b,w.t,l.d,w.hb],styles:["[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]:hover{color:#1e90ff}"]}),G),te=n("mrSG");function ne(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Naziv firme je obavezan! "),g.Wb())}function ie(e,t){if(1&e&&(g.Xb(0,"p",77),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" Naziv firme mora biti du\u017ei od ",n.getConfigValue("forms.validation.companyName.minLength")," slova! ")}}function ae(e,t){if(1&e&&(g.Xb(0,"p",77),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" Naziv firme mora biti kra\u0107i od ",n.getConfigValue("forms.validation.nazivFirme.maxLength")," slova! ")}}function oe(e,t){if(1&e&&(g.Vb(0),g.Fc(1,ne,2,0,"p",76),g.Fc(2,ie,2,1,"p",76),g.Fc(3,ae,2,1,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(12);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.minlength),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.maxlength)}}function re(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," PIB je obavezan! "),g.Wb())}function ce(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," PIB mora da bude validan! "),g.Wb())}function se(e,t){if(1&e&&(g.Vb(0),g.Fc(1,re,2,0,"p",76),g.Fc(2,ce,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(19);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.minlength)}}function le(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Mati\u010dni broj je obavezan! "),g.Wb())}function ue(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Mati\u010dni broj mora da bude validan! "),g.Wb())}function be(e,t){if(1&e&&(g.Vb(0),g.Fc(1,le,2,0,"p",76),g.Fc(2,ue,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(25),i=g.xc(19);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==i.errors?null:i.errors.minlength)}}function de(e,t){if(1&e&&(g.Xb(0,"nb-option",56),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.pc("value",n),g.Eb(1),g.Ic(n)}}function pe(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Op\u0161tina je obavezna! "),g.Wb())}function ge(e,t){if(1&e&&(g.Vb(0),g.Fc(1,pe,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(36);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function fe(e,t){if(1&e&&(g.Xb(0,"nb-option",56),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.pc("value",n),g.Eb(1),g.Ic(n)}}function me(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Mesto je obavezno! "),g.Wb())}function he(e,t){if(1&e&&(g.Vb(0),g.Fc(1,me,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(46);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function ve(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Po\u0161tanski broj je obavezan "),g.Wb())}function ye(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Po\u0161tanski broj mora biti validan "),g.Wb())}function We(e,t){if(1&e&&(g.Vb(0),g.Fc(1,ve,2,0,"p",76),g.Fc(2,ye,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(57);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function Xe(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Ulica je obavezna! "),g.Wb())}function ke(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Ulica mora biti validna! "),g.Wb())}function Ce(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Xe,2,0,"p",76),g.Fc(2,ke,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(63);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.minlength)}}function Me(e,t){if(1&e&&(g.Xb(0,"nb-option",56),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.pc("value",n.name),g.Eb(1),g.Kc("[",n.code,"] ",n.name,"")}}function Ie(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," \u0160ifra delatnosti je obavezna! "),g.Wb())}function we(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Ie,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(70);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function Ee(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Email je obavezan! "),g.Wb())}function je(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Email mora biti validan! "),g.Wb())}function xe(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Ee,2,0,"p",76),g.Fc(2,je,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(81);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function Oe(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Telefon firme je obavezan! "),g.Wb())}function Ne(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Telefon firme mora biti validan! "),g.Wb())}function Fe(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Oe,2,0,"p",76),g.Fc(2,Ne,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(87);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function ze(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Email je obavezan! "),g.Wb())}function He(e,t){if(1&e&&(g.Vb(0),g.Fc(1,ze,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(99);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function Se(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Email je obavezan! "),g.Wb())}function Pe(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Email mora biti validan! "),g.Wb())}function Ve(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Se,2,0,"p",76),g.Fc(2,Pe,2,0,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(4);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function Re(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",11),g.Xb(1,"label",78),g.Hc(2,"Unesite va\u0161 email za prijem dokumenata:"),g.Wb(),g.Xb(3,"input",79,80),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().tmpEmail=e}))("ngModelChange",(function(){return g.zc(n),g.jc().setCompanyEmail()})),g.Wb(),g.Fc(5,Ve,3,2,"ng-container",10),g.Wb()}if(2&e){var i=g.xc(4),a=g.jc();g.Eb(3),g.pc("ngModel",a.tmpEmail)("pattern",a.getConfigValue("forms.validation.email.pattern"))("required",a.getConfigValue("forms.validation.email.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched||a.checkIssues)}}function Te(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Ime zakonskog zastupnika je obavezno! "),g.Wb())}function qe(e,t){if(1&e&&(g.Xb(0,"p",77),g.Hc(1),g.Wb()),2&e){var n=g.jc(3);g.Eb(1),g.Jc(" Korisni\u010dko ime mora biti du\u017ee od ",n.getConfigValue("forms.validation.username.minLength")," slova! ")}}function Le(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Te,2,0,"p",76),g.Fc(2,qe,2,1,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(5);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function _e(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," \u0160ifra je obavezna! "),g.Wb())}function $e(e,t){if(1&e&&(g.Xb(0,"p",77),g.Hc(1),g.Wb()),2&e){var n=g.jc(3);g.Eb(1),g.Jc(" \u0160ifra mora biti du\u017ee od ",n.getConfigValue("forms.validation.password.minLength")," slova! ")}}function Ue(e,t){if(1&e&&(g.Vb(0),g.Fc(1,_e,2,0,"p",76),g.Fc(2,$e,2,1,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(13);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function Ae(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",5),g.Xb(1,"div",11),g.Xb(2,"label",81),g.Hc(3,"Korisni\u010dko ime:"),g.Wb(),g.Xb(4,"input",82,83),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().company.nriz.username=e})),g.Wb(),g.Fc(6,Le,3,2,"ng-container",10),g.Wb(),g.Xb(7,"div",11),g.Xb(8,"label",84),g.Hc(9,"\u0160ifra:"),g.Wb(),g.Xb(10,"div",85),g.Xb(11,"div",86),g.Xb(12,"input",87,88),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().company.nriz.password=e})),g.Wb(),g.Wb(),g.Xb(14,"div",89),g.Xb(15,"button",90),g.fc("click",(function(){g.zc(n);var e=g.jc();return e.showPassword="eye"===e.showPassword?"eye-off":"eye"})),g.Sb(16,"nb-icon",91),g.Wb(),g.Wb(),g.Wb(),g.Fc(17,Ue,3,2,"ng-container",10),g.Wb(),g.Wb()}if(2&e){var i=g.xc(5),a=g.xc(13),o=g.jc();g.Eb(4),g.pc("ngModel",o.company.nriz.username)("maxlength",o.getConfigValue("forms.validation.username.maxLength"))("minlength",o.getConfigValue("forms.validation.username.minLength"))("required",o.getConfigValue("forms.validation.username.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched||o.checkIssues),g.Eb(6),g.pc("ngModel",o.company.nriz.password)("maxlength",o.getConfigValue("forms.validation.password.maxLength"))("minlength",o.getConfigValue("forms.validation.password.minLength"))("required",o.getConfigValue("forms.validation.password.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("type","eye"===o.showPassword?"password":"text"),g.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),g.Eb(4),g.pc("icon",o.showPassword),g.Eb(1),g.pc("ngIf",a.invalid&&a.touched||o.checkIssues)}}function De(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Ime zakonskog zastupnika je obavezno! "),g.Wb())}function Be(e,t){if(1&e&&(g.Xb(0,"p",77),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" Ime zakonskog zastupnika mora biti du\u017ee od ",n.getConfigValue("forms.validation.firstName.minLength")," slova! ")}}function Ke(e,t){if(1&e&&(g.Vb(0),g.Fc(1,De,2,0,"p",76),g.Fc(2,Be,2,1,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(125);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function Ze(e,t){1&e&&(g.Xb(0,"p",77),g.Hc(1," Prezime zakonskog zastupnika je obavezno! "),g.Wb())}function Je(e,t){if(1&e&&(g.Xb(0,"p",77),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" Prezime zakonskog zastupnika mora biti du\u017ee od ",n.getConfigValue("forms.validation.lastName.minLength")," slova! ")}}function Ye(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Ze,2,0,"p",76),g.Fc(2,Je,2,1,"p",76),g.Ub()),2&e){g.jc();var n=g.xc(131);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}var Ge,Qe=((Ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;_classCallCheck(this,e),this.options=t,this.locationService=n,this.occupationService=i,this.registerService=a,this.router=o,this.toastrService=r,this.showPassword="eye",this.checkIssues=!1,this.tmpEmail="",this.company={address:{location:{placeCode:0,placeName:"",townshipName:"",townshipCode:0,zipCode:""},street:""},email:"",emailReception:"",legalRep:{firstName:"",lastName:""},nriz:{username:"",password:""},manager:"",mat:"",name:"",occupation:{code:"",name:""},operations:[],storages:[],permits:[],pib:"",telephone:""}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.locationService.getDistinctTownships().pipe(Object(Z.a)()).subscribe((function(t){e.townships=t,e.townships$=Object(d.a)(t)})),this.occupationService.getOccupations().pipe(Object(Z.a)()).subscribe((function(t){e.occupations=t,e.occupations$=Object(d.a)(t)})),this.registerService.getCompany().pipe(Object(Z.a)()).subscribe((function(t){void 0!==t&&(e.company=t)})),this.registerService.getUser().pipe(Object(Z.a)()).subscribe((function(t){void 0!==t&&(e.user=t)})),this.registerService.sendCompany(Object(d.a)(this.company))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"checkAddress",value:function(){return this.townships.includes(this.company.address.location.townshipName)&&this.places.includes(this.company.address.location.placeName)}},{key:"checkOccupation",value:function(){return this.occupations.map((function(e){return e.name})).includes(this.company.occupation.name)}},{key:"validateCompany",value:function(e){return Object(te.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.invalid&&this.checkAddress()&&this.checkOccupation()){t.next=2;break}return t.abrupt("return",(this.checkIssues=!0,this.showToast("Gre\u0161ka","Ispravite gre\u0161ke da bi ste nastavili.","warning"),!1));case 2:return n="",t.next=5,Promise.all(this.registerService.checkCompany(this.company)).then((function(e){return n=e[0]?n:"taj pib",n=e[1]?n:"taj mati\u010dni broj",n=e[2]?n:"taj email",n=e[3]?n:"taj email za prijem",n=e[4]?n:"taj telefon",n=e[5]?n:"to korisni\u010dko ime za NRIZ",e[0]&&e[1]&&e[2]&&e[3]&&e[4]&&e[5]}));case 5:if(t.sent){t.next=7;break}return t.abrupt("return",(this.checkIssues=!0,void this.showToast("Gre\u0161ka","Ve\u0107 postoji ".concat(n,"!"),"danger")));case 7:e.valid&&""===this.tmpEmail&&""!==this.company.emailReception?this.router.navigate(["auth/register-operations"]):(this.checkIssues=!0,this.showToast("Gre\u0161ka","Ispravite gre\u0161ke da bi ste nastavili.","warning"));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"showToast",value:function(e,t,n){this.toastrService.show(t,e,{status:n})}},{key:"getPlaces",value:function(e){var t=this;void 0!==e&&this.locationService.getPlacesFromTownship(e).pipe(Object(Z.a)()).subscribe((function(e){t.places=e,t.places$=Object(d.a)(e)}))}},{key:"chooseTownship",value:function(e){var t=this;""!==e?(this.townships$=this.locationService.filter(e,this.townships),void 0!==this.townships$&&this.townships$.subscribe((function(e){t.getPlaces(e[0])}))):this.townships$=Object(d.a)(this.townships)}},{key:"findPlaces",value:function(e){this.places$=this.locationService.filter(e,this.places)}},{key:"findOccupations",value:function(e){this.occupations$=this.occupationService.filter(e,this.occupations)}},{key:"clearTmpEmail",value:function(){this.tmpEmail=""}},{key:"setCompanyEmail",value:function(){this.company.emailReception=this.tmpEmail}}]),e}()).\u0275fac=function(e){return new(e||Ge)(g.Rb(M.a),g.Rb(v),g.Rb(m),g.Rb(k),g.Rb(l.c),g.Rb(w.Kb))},Ge.\u0275cmp=g.Lb({type:Ge,selectors:[["register-company"]],decls:140,vars:104,consts:[[1,"text-center"],["disableStepNavigation","","selectedIndex","1"],["label","Korisnik","completed","true"],["label","Firma"],["companyForm","ngForm"],[1,"row","mb-2"],[1,"col-12"],["for","input-companyName",1,"label"],["autofocus","","fullWidth","","id","input-companyName","name","companyName","nbInput","","placeholder","Naziv firme",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["companyName","ngModel"],[4,"ngIf"],[1,"col-6"],["for","input-pib",1,"label"],["fullWidth","","id","input-pib","name","pib","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","PIB",3,"ngModel","maxlength","minlength","pattern","required","status","ngModelChange"],["pib","ngModel"],["for","input-mat",1,"label"],["fullWidth","","id","input-mat","name","mat","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","Mati\u010dni broj",3,"ngModel","maxlength","minlength","pattern","required","status","ngModelChange"],["mat","ngModel"],["for","input-adresa",1,"label"],["id","input-adresa",1,"row","ml-2"],["for","input-townshipName",1,"label"],["autocomplete","off","fullWidth","","id","input-townshipName","name","townshipName","nbInput","","placeholder","Naziv op\u0161tine",3,"ngModel","nbAutocomplete","required","ngModelChange"],["townshipName","ngModel"],["autoOpstinaSelect",""],[3,"value",4,"ngFor","ngForOf"],["for","input-placeName",1,"label"],["autocomplete","off","fullWidth","","id","input-placeName","name","placeName","nbInput","","placeholder","Naziv mesta",3,"ngModel","nbAutocomplete","required","ngModelChange"],["placeName","ngModel"],["autoMestoSelect",""],[1,"row","ml-2","mt-2"],[1,"col-3"],["for","input-zipCode",1,"label"],["fullWidth","","id","input-zipCode","name","zipCode","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","Po\u0161tanski broj",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["zipCode","ngModel"],[1,"col-9"],["for","input-street",1,"label"],["fullWidth","","id","input-street","name","street","nbInput","","placeholder","Ulica i broj",3,"ngModel","minlength","required","status","ngModelChange"],["street","ngModel"],["for","input-occupation",1,"label"],["autocomplete","off","fullWidth","","id","input-occupation","name","occupation","nbInput","","placeholder","Delatnost",3,"ngModel","nbAutocomplete","required","ngModelChange"],["occupation","ngModel"],["autoDelatnostSelect",""],[1,"col-4"],["for","input-companyEmail",1,"label"],["fullWidth","","id","input-companyEmail","name","companyEmail","nbInput","","placeholder","Email firme",3,"ngModel","required","pattern","status","ngModelChange"],["companyEmail","ngModel"],["for","input-companyTelephone",1,"label"],["fullWidth","","id","input-companyTelephone","name","companyTelephone","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","Telefon firme",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["companyTelephone","ngModel"],["for","input-companyFax",1,"label"],["fullWidth","","id","input-companyFax","name","companyFax","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","Faks firme",3,"ngModel","maxlength","minlength","ngModelChange"],["companyFax","ngModel"],["for","input-emailPrijem",1,"label"],["fullWidth","","id","input-companyEmailReception","name","companyEmailReception","placeholder","Email za prijem dokumenata",3,"ngModel","required","selected","status","ngModelChange"],["companyEmailReception","ngModel"],[3,"value","selectionChange"],[3,"value"],["otherEmail",""],["class","col-6",4,"ngIf"],["for","toggle-nriz",1,"label"],["id","toggle-nriz"],["nrizToggle",""],["class","row mb-2",4,"ngIf"],[1,"label","pl-0","col-12"],[1,"row","ml-2"],["for","input-fNameLegalRep",1,"label"],["fullWidth","","id","input-fNameLegalRep","name","fNameLegalRep","nbInput","","placeholder","Ime",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["fNameLegalRepo","ngModel"],["for","input-lNameLegalRep",1,"label"],["fullWidth","","id","input-lNameLegalRep","name","lNameLegalRep","nbInput","","placeholder","Prezime",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["lNameLegalRepo","ngModel"],["nbButton","","fullWidth","","status","danger","type","button","routerLink","../register-user",1,"mt-2","col-6"],["nbButton","","fullWidth","","status","success","type","submit",1,"mt-2","col-6",3,"click"],["label","Operacije"],["label","Informacije"],["label","Potvrda"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-companyEmailReception2",1,"label"],["fullWidth","","id","input-companyEmailReception2","name","companyEmailReception2","nbInput","","placeholder","Email",3,"ngModel","pattern","required","status","ngModelChange"],["companyEmailReception2","ngModel"],["for","input-usernameNRIZ",1,"label"],["fullWidth","","id","input-usernameNRIZ","name","usernameNRIZ","nbInput","","placeholder","Korisni\u010dko ime",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["usernameNRIZ","ngModel"],["for","input-passwordNRIZ",1,"label"],[1,"row"],[1,"col-10","pr-0"],["fullWidth","","id","input-passwordNRIZ","name","passwordNRIZ","nbInput","","placeholder","\u0160ifra",3,"ngModel","maxlength","minlength","required","status","type","ngModelChange"],["passwordNRIZ","ngModel"],[1,"col-2","pl-0"],["fullWidth","","tabindex","-1","nbButton","","type","button",3,"click"],[3,"icon"]],template:function(e,t){if(1&e){var n=g.Yb();g.Xb(0,"h1",0),g.Hc(1,"Registruj se!"),g.Wb(),g.Xb(2,"nb-stepper",1),g.Sb(3,"nb-step",2),g.Xb(4,"nb-step",3),g.Xb(5,"form",null,4),g.Xb(7,"div",5),g.Xb(8,"div",6),g.Xb(9,"label",7),g.Hc(10,"Naziv Firme:"),g.Wb(),g.Xb(11,"input",8,9),g.fc("ngModelChange",(function(e){return t.company.name=e})),g.Wb(),g.Fc(13,oe,4,3,"ng-container",10),g.Wb(),g.Wb(),g.Xb(14,"div",5),g.Xb(15,"div",11),g.Xb(16,"label",12),g.Hc(17,"Poreski identifikacioni broj (PIB):"),g.Wb(),g.Xb(18,"input",13,14),g.fc("ngModelChange",(function(e){return t.company.pib=e})),g.Wb(),g.Fc(20,se,3,2,"ng-container",10),g.Wb(),g.Xb(21,"div",11),g.Xb(22,"label",15),g.Hc(23,"Mati\u010dni broj:"),g.Wb(),g.Xb(24,"input",16,17),g.fc("ngModelChange",(function(e){return t.company.mat=e})),g.Wb(),g.Fc(26,be,3,2,"ng-container",10),g.Wb(),g.Wb(),g.Xb(27,"div",5),g.Xb(28,"div",6),g.Xb(29,"label",18),g.Hc(30,"Adresa:"),g.Wb(),g.Xb(31,"div",19),g.Xb(32,"div",11),g.Xb(33,"nb-select-label",20),g.Hc(34,"Op\u0161tina:"),g.Wb(),g.Xb(35,"input",21,22),g.fc("ngModelChange",(function(){g.zc(n);var e=g.xc(36);return t.chooseTownship(e.value)}))("ngModelChange",(function(e){return t.company.address.location.townshipName=e})),g.Wb(),g.Xb(37,"nb-autocomplete",null,23),g.Fc(39,de,2,2,"nb-option",24),g.kc(40,"async"),g.Wb(),g.Fc(41,ge,2,1,"ng-container",10),g.Wb(),g.Xb(42,"div",11),g.Xb(43,"nb-select-label",25),g.Hc(44,"Mesto:"),g.Wb(),g.Xb(45,"input",26,27),g.fc("ngModelChange",(function(){g.zc(n);var e=g.xc(46);return t.findPlaces(e.value)}))("ngModelChange",(function(e){return t.company.address.location.placeName=e})),g.Wb(),g.Xb(47,"nb-autocomplete",null,28),g.Fc(49,fe,2,2,"nb-option",24),g.kc(50,"async"),g.Wb(),g.Fc(51,he,2,1,"ng-container",10),g.Wb(),g.Wb(),g.Xb(52,"div",29),g.Xb(53,"div",30),g.Xb(54,"label",31),g.Hc(55,"Po\u0161tanski broj:"),g.Wb(),g.Xb(56,"input",32,33),g.fc("ngModelChange",(function(e){return t.company.address.location.zipCode=e})),g.Wb(),g.Fc(58,We,3,2,"ng-container",10),g.Wb(),g.Xb(59,"div",34),g.Xb(60,"label",35),g.Hc(61,"Ulica i broj:"),g.Wb(),g.Xb(62,"input",36,37),g.fc("ngModelChange",(function(e){return t.company.address.street=e})),g.Wb(),g.Fc(64,Ce,3,2,"ng-container",10),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(65,"div",5),g.Xb(66,"div",6),g.Xb(67,"nb-select-label",38),g.Hc(68,"\u0160ifra delatnosti:"),g.Wb(),g.Xb(69,"input",39,40),g.fc("ngModelChange",(function(){g.zc(n);var e=g.xc(70);return t.findOccupations(e.value)}))("ngModelChange",(function(e){return t.company.occupation.name=e})),g.Wb(),g.Xb(71,"nb-autocomplete",null,41),g.Fc(73,Me,2,3,"nb-option",24),g.kc(74,"async"),g.Wb(),g.Fc(75,we,2,1,"ng-container",10),g.Wb(),g.Wb(),g.Xb(76,"div",5),g.Xb(77,"div",42),g.Xb(78,"label",43),g.Hc(79,"Email firme:"),g.Wb(),g.Xb(80,"input",44,45),g.fc("ngModelChange",(function(e){return t.company.email=e})),g.Wb(),g.Fc(82,xe,3,2,"ng-container",10),g.Wb(),g.Xb(83,"div",42),g.Xb(84,"label",46),g.Hc(85,"Telefon firme:"),g.Wb(),g.Xb(86,"input",47,48),g.fc("ngModelChange",(function(e){return t.company.telephone=e})),g.Wb(),g.Fc(88,Fe,3,2,"ng-container",10),g.Wb(),g.Xb(89,"div",42),g.Xb(90,"label",49),g.Hc(91,"Faks firme:"),g.Wb(),g.Xb(92,"input",50,51),g.fc("ngModelChange",(function(e){return t.company.fax=e})),g.Wb(),g.Wb(),g.Wb(),g.Xb(94,"div",5),g.Xb(95,"div",11),g.Xb(96,"nb-select-label",52),g.Hc(97,"Birajte email za prijem dokumenata: "),g.Wb(),g.Xb(98,"nb-select",53,54),g.fc("ngModelChange",(function(e){return t.company.emailReception=e})),g.Xb(100,"nb-option",55),g.fc("selectionChange",(function(){return t.clearTmpEmail()})),g.Hc(101),g.Wb(),g.Xb(102,"nb-option",55),g.fc("selectionChange",(function(){return t.clearTmpEmail()})),g.Hc(103),g.Wb(),g.Xb(104,"nb-option",56,57),g.Hc(106,"Drugi email"),g.Wb(),g.Wb(),g.Fc(107,He,2,1,"ng-container",10),g.Wb(),g.Fc(108,Re,6,6,"div",58),g.Wb(),g.Xb(109,"div",5),g.Xb(110,"div",11),g.Xb(111,"label",59),g.Hc(112,"Da li imate nalog na NRIZ (Nacionalni registar izvora zaga\u0111ivanja)?"),g.Wb(),g.Sb(113,"nb-toggle",60,61),g.Wb(),g.Wb(),g.Fc(115,Ae,18,16,"div",62),g.Xb(116,"div",5),g.Xb(117,"div",6),g.Xb(118,"label",63),g.Hc(119,"Puno ime zakonskog zastupnika firme:"),g.Wb(),g.Xb(120,"div",64),g.Xb(121,"div",11),g.Xb(122,"label",65),g.Hc(123,"Ime:"),g.Wb(),g.Xb(124,"input",66,67),g.fc("ngModelChange",(function(e){return t.company.legalRep.firstName=e})),g.Wb(),g.Fc(126,Ke,3,2,"ng-container",10),g.Wb(),g.Xb(127,"div",11),g.Xb(128,"label",68),g.Hc(129,"Prezime:"),g.Wb(),g.Xb(130,"input",69,70),g.fc("ngModelChange",(function(e){return t.company.legalRep.lastName=e})),g.Wb(),g.Fc(132,Ye,3,2,"ng-container",10),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(133,"button",71),g.Hc(134," Nazad "),g.Wb(),g.Xb(135,"button",72),g.fc("click",(function(){g.zc(n);var e=g.xc(6);return t.validateCompany(e)})),g.Hc(136," Dalje "),g.Wb(),g.Wb(),g.Wb(),g.Sb(137,"nb-step",73),g.Sb(138,"nb-step",74),g.Sb(139,"nb-step",75),g.Wb()}if(2&e){var i=g.xc(12),a=g.xc(19),o=g.xc(25),r=g.xc(36),c=g.xc(38),s=g.xc(46),l=g.xc(48),u=g.xc(57),b=g.xc(63),d=g.xc(70),p=g.xc(72),f=g.xc(81),m=g.xc(87),h=g.xc(93),v=g.xc(99),y=g.xc(105),W=g.xc(114),X=g.xc(125),k=g.xc(131);g.Eb(11),g.pc("ngModel",t.company.name)("maxlength",t.getConfigValue("forms.validation.companyName.maxLength"))("minlength",t.getConfigValue("forms.validation.companyName.minLength"))("required",t.getConfigValue("forms.validation.companyName.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched||t.checkIssues),g.Eb(5),g.pc("ngModel",t.company.pib)("maxlength",t.getConfigValue("forms.validation.pib.maxLength"))("minlength",t.getConfigValue("forms.validation.pib.minLength"))("pattern",t.getConfigValue("forms.validation.pib.pattern"))("required",t.getConfigValue("forms.validation.pib.required"))("status",a.dirty?a.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),g.Eb(2),g.pc("ngIf",a.invalid&&a.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.company.mat)("maxlength",t.getConfigValue("forms.validation.mat.maxLength"))("minlength",t.getConfigValue("forms.validation.mat.minLength"))("pattern",t.getConfigValue("forms.validation.mat.pattern"))("required",t.getConfigValue("forms.validation.mat.required"))("status",o.dirty?o.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),g.Eb(2),g.pc("ngIf",o.invalid&&o.touched||t.checkIssues),g.Eb(9),g.pc("ngModel",t.company.address.location.townshipName)("nbAutocomplete",c)("required",t.getConfigValue("forms.validation.address.required")),g.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),g.Eb(4),g.pc("ngForOf",g.lc(40,98,t.townships$)),g.Eb(2),g.pc("ngIf",t.checkIssues),g.Eb(4),g.pc("ngModel",t.company.address.location.placeName)("nbAutocomplete",l)("required",t.getConfigValue("forms.validation.address.required")),g.Fb("aria-invalid",!(!s.invalid||!s.touched)||null),g.Eb(4),g.pc("ngForOf",g.lc(50,100,t.places$)),g.Eb(2),g.pc("ngIf",t.checkIssues),g.Eb(5),g.pc("ngModel",t.company.address.location.zipCode)("maxlength",t.getConfigValue("forms.validation.zipCode.maxLength"))("minlength",t.getConfigValue("forms.validation.zipCode.minLength"))("required",t.getConfigValue("forms.validation.zipCode.required"))("status",u.dirty?u.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!u.invalid||!u.touched)||null),g.Eb(2),g.pc("ngIf",u.invalid&&u.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.company.address.street)("minlength",t.getConfigValue("forms.validation.street.minLength"))("required",t.getConfigValue("forms.validation.street.required"))("status",b.dirty?b.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!b.invalid||!b.touched)||null),g.Eb(2),g.pc("ngIf",b.invalid&&b.touched||t.checkIssues),g.Eb(5),g.pc("ngModel",t.company.occupation.name)("nbAutocomplete",p)("required",t.getConfigValue("forms.validation.occupation.required")),g.Fb("aria-invalid",!(!d.invalid||!d.touched)||null),g.Eb(4),g.pc("ngForOf",g.lc(74,102,t.occupations$)),g.Eb(2),g.pc("ngIf",d.invalid&&d.touched||t.checkIssues),g.Eb(5),g.pc("ngModel",t.company.email)("required",t.getConfigValue("forms.validation.email.required"))("pattern",t.getConfigValue("forms.validation.email.pattern"))("status",f.dirty?f.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!f.invalid||!f.touched)||null),g.Eb(2),g.pc("ngIf",f.invalid&&f.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.company.telephone)("maxlength",t.getConfigValue("forms.validation.phone.maxLength"))("minlength",t.getConfigValue("forms.validation.phone.minLength"))("required",t.getConfigValue("forms.validation.phone.required"))("status",m.dirty?m.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!m.invalid||!m.touched)||null),g.Eb(2),g.pc("ngIf",m.invalid&&m.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.company.fax)("maxlength",t.getConfigValue("forms.validation.phone.maxLength"))("minlength",t.getConfigValue("forms.validation.phone.minLength")),g.Fb("aria-invalid",!(!h.invalid||!h.touched)||null),g.Eb(6),g.pc("ngModel",t.company.emailReception)("required",t.getConfigValue("forms.validation.email.required"))("selected",t.company.email)("status",v.dirty?v.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!v.invalid||!v.touched)||null),g.Eb(2),g.pc("value",t.company.email),g.Eb(1),g.Ic(t.company.email),g.Eb(1),g.pc("value",null==t.user?null:t.user.email),g.Eb(1),g.Ic(null==t.user?null:t.user.email),g.Eb(1),g.pc("value",t.company.emailReception),g.Eb(3),g.pc("ngIf",v.invalid&&v.touched||t.checkIssues),g.Eb(1),g.pc("ngIf",y.selected),g.Eb(7),g.pc("ngIf",W.checked),g.Eb(9),g.pc("ngModel",t.company.legalRep.firstName)("maxlength",t.getConfigValue("forms.validation.firstName.maxLength"))("minlength",t.getConfigValue("forms.validation.firstName.minLength"))("required",t.getConfigValue("forms.validation.firstName.required"))("status",X.dirty?X.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!X.invalid||!X.touched)||null),g.Eb(2),g.pc("ngIf",X.invalid&&X.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.company.legalRep.lastName)("maxlength",t.getConfigValue("forms.validation.lastName.maxLength"))("minlength",t.getConfigValue("forms.validation.lastName.minLength"))("required",t.getConfigValue("forms.validation.lastName.required"))("status",k.dirty?k.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!k.invalid||!k.touched)||null),g.Eb(2),g.pc("ngIf",k.invalid&&k.touched||t.checkIssues)}},directives:[w.zb,w.yb,s.w,s.l,s.m,w.Q,s.b,s.k,s.n,s.f,s.g,s.s,c.m,s.q,w.rb,w.r,w.q,c.l,w.qb,w.fb,w.Lb,w.t,l.d,w.N],pipes:[c.b],styles:[".error-message[_ngcontent-%COMP%]{color:#ff3d71}.example-viewport[_ngcontent-%COMP%]{height:100px;width:100%;border:1px solid #000}.example-item[_ngcontent-%COMP%]{height:50px}"]}),Ge),et=function(){return{standalone:!0}};function tt(e,t){if(1&e){var n=g.Yb();g.Xb(0,"form",2),g.fc("ngSubmit",(function(){return g.zc(n),g.jc().updatePermitsForm()})),g.Xb(1,"div",3),g.Xb(2,"div",4),g.Xb(3,"label",5),g.Hc(4,"Broj dozvola:"),g.Wb(),g.Xb(5,"input",6),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().permitsNo=e})),g.Wb(),g.Wb(),g.Wb(),g.Xb(6,"div",3),g.Xb(7,"div",7),g.Xb(8,"button",8),g.Hc(9,"Odaberi"),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=g.jc();g.Eb(5),g.pc("ngModelOptions",g.sc(2,et))("ngModel",i.permitsNo)}}function nt(e,t){1&e&&(g.Xb(0,"p",34),g.Hc(1," Naziv dozvole je obavezna! "),g.Wb())}function it(e,t){if(1&e&&(g.Xb(0,"p",34),g.Hc(1),g.Wb()),2&e){var n=g.jc(4);g.Eb(1),g.Jc(" Naziv dozvole mora biti du\u017ei od ",n.getConfigValue("forms.validation.permitName.minLength")," slova! ")}}function at(e,t){if(1&e&&(g.Vb(0),g.Fc(1,nt,2,0,"p",33),g.Fc(2,it,2,1,"p",33),g.Ub()),2&e){g.jc();var n=g.xc(10);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.maxLength)||(null==n.errors?null:n.errors.minLength))}}function ot(e,t){1&e&&(g.Xb(0,"p",34),g.Hc(1," \u0160ifra dozvole je obavezna! "),g.Wb())}function rt(e,t){if(1&e&&(g.Vb(0),g.Fc(1,ot,2,0,"p",33),g.Ub()),2&e){g.jc();var n=g.xc(17);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function ct(e,t){if(1&e&&(g.Xb(0,"nb-option",39),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.pc("value",n),g.Eb(1),g.Ic(n.name)}}function st(e,t){1&e&&(g.Xb(0,"p",34),g.Hc(1," Postrojenje za koje je vezana dozvola je obavezno! "),g.Wb())}function lt(e,t){if(1&e&&(g.Vb(0),g.Fc(1,st,2,0,"p",33),g.Ub()),2&e){g.jc();var n=g.xc(4);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function ut(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",18),g.Xb(1,"label",35),g.Hc(2,"Odaberi postrojenje:"),g.Wb(),g.Xb(3,"nb-select",36,37),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().$implicit.storage=e}))("ngModelChange",(function(){g.zc(n);var e=g.jc().$implicit;return g.jc(2).setAddress(e,e.storage)})),g.Fc(5,ct,2,2,"nb-option",38),g.kc(6,"async"),g.Wb(),g.Fc(7,lt,2,1,"ng-container",17),g.Wb()}if(2&e){var i=g.xc(4),a=g.jc().$implicit,o=g.jc(2);g.Eb(3),g.pc("ngModel",a.storage)("ngModelOptions",g.sc(7,et))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Eb(2),g.pc("ngForOf",g.lc(6,5,o.storages$)),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched||o.checkIssues)}}function bt(e,t){1&e&&(g.Xb(0,"p",34),g.Hc(1," Datum nastanka dozvole je obavezan! "),g.Wb())}function dt(e,t){1&e&&(g.Xb(0,"p",34),g.Hc(1," Datum nastanka dozvole ne mo\u017ee biti posle datum izdavanja! "),g.Wb())}function pt(e,t){if(1&e&&(g.Vb(0),g.Fc(1,bt,2,0,"p",33),g.Fc(2,dt,2,0,"p",33),g.Ub()),2&e){var n=g.jc().$implicit,i=g.xc(25),a=g.jc(2);g.Eb(1),g.pc("ngIf",null==i.errors?null:i.errors.required),g.Eb(1),g.pc("ngIf",!a.dateValid(n))}}function gt(e,t){1&e&&(g.Xb(0,"p",34),g.Hc(1," Datum isteka dozvole je obavezan! "),g.Wb())}function ft(e,t){if(1&e&&(g.Vb(0),g.Fc(1,gt,2,0,"p",33),g.Ub()),2&e){g.jc();var n=g.xc(33);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function mt(e,t){1&e&&(g.Xb(0,"p",34),g.Hc(1," Morate dodati bar jedan otpad na listu otpada dozvole! "),g.Wb())}function ht(e,t){if(1&e&&(g.Vb(0),g.Fc(1,mt,2,0,"p",33),g.Ub()),2&e){var n=g.jc().$implicit;g.Eb(1),g.pc("ngIf",n.trashList.length<1)}}function vt(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",7),g.Xb(1,"form",null,11),g.Xb(3,"nb-card",12),g.Xb(4,"nb-card-body"),g.Xb(5,"div",3),g.Xb(6,"div",13),g.Xb(7,"label",14),g.Hc(8,"Naziv Dozvole:"),g.Wb(),g.Xb(9,"input",15,16),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.name=e})),g.Wb(),g.Fc(11,at,3,2,"ng-container",17),g.Wb(),g.Wb(),g.Xb(12,"div",3),g.Xb(13,"div",18),g.Xb(14,"label",19),g.Hc(15,"\u0160ifra Dozvole:"),g.Wb(),g.Xb(16,"input",20,21),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.code=e})),g.Wb(),g.Fc(18,rt,2,1,"ng-container",17),g.Wb(),g.Fc(19,ut,8,8,"div",22),g.Wb(),g.Xb(20,"div",3),g.Xb(21,"div",4),g.Xb(22,"label",23),g.Hc(23,"Datum izdavanja dozvole:"),g.Wb(),g.Xb(24,"input",24,25),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.dateCreation=e})),g.Wb(),g.Sb(26,"nb-datepicker",null,26),g.Fc(28,pt,3,2,"ng-container",17),g.Wb(),g.Xb(29,"div",4),g.Xb(30,"label",27),g.Hc(31,"Datum isteka dozvole:"),g.Wb(),g.Xb(32,"input",28,29),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.dateExpiration=e})),g.Wb(),g.Sb(34,"nb-datepicker",null,30),g.Fc(36,ft,2,1,"ng-container",17),g.Wb(),g.Wb(),g.Xb(37,"div",3),g.Xb(38,"div",31),g.Xb(39,"button",32),g.fc("click",(function(){g.zc(n);var e=t.$implicit;return g.jc(2).choosePermit(e)})),g.Hc(40,"Odaberi otpade "),g.Wb(),g.Fc(41,ht,2,1,"ng-container",17),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=t.$implicit,a=t.index,o=g.xc(10),r=g.xc(17),c=g.xc(25),s=g.xc(27),l=g.xc(33),u=g.xc(35),b=g.jc(2);g.Eb(9),g.rc("placeholder","Dozvola #",a+1,""),g.pc("ngModel",i.name)("ngModelOptions",g.sc(32,et))("required",b.getConfigValue("forms.validation.permitName.required"))("maxlength",b.getConfigValue("forms.validation.permitName.maxLength"))("minLength",b.getConfigValue("forms.validation.permitName.minLength"))("status",o.dirty?o.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),g.Eb(2),g.pc("ngIf",o.invalid&&o.touched||b.checkIssues),g.Eb(5),g.pc("ngModel",i.code)("ngModelOptions",g.sc(33,et))("required",b.getConfigValue("forms.validation.permitCode.required"))("status",r.dirty?r.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),g.Eb(2),g.pc("ngIf",r.invalid&&r.touched||b.checkIssues),g.Eb(1),g.pc("ngIf","transport"!==b.permitType&&"collector"!==b.permitType),g.Eb(5),g.pc("ngModel",i.dateCreation)("nbDatepicker",s)("ngModelOptions",g.sc(34,et))("required",b.getConfigValue("forms.validation.date.required"))("status",b.dateValid(i)?"success":"danger"),g.Fb("aria-invalid",!(!c.invalid||!c.touched)||null),g.Eb(4),g.pc("ngIf",!b.dateValid(i)||b.checkIssues),g.Eb(4),g.pc("ngModel",i.dateExpiration)("nbDatepicker",u)("ngModelOptions",g.sc(35,et))("required",b.getConfigValue("forms.validation.date.required"))("status",b.dateValid(i)?"success":"danger"),g.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),g.Eb(4),g.pc("ngIf",l.invalid&&l.touched||b.checkIssues),g.Eb(3),g.pc("disabled",""===i.code),g.Eb(2),g.pc("ngIf",b.checkIssues)}}function yt(e,t){if(1&e&&(g.Xb(0,"div",9),g.Fc(1,vt,42,36,"div",10),g.kc(2,"async"),g.Wb()),2&e){var n=g.jc();g.Eb(1),g.pc("ngForOf",g.lc(2,1,n.permits$))}}var Wt,Xt=((Wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;_classCallCheck(this,e),this.options=t,this.router=n,this.registerService=i,this.toastrService=a,this.storages=[],this.permitsNo=0,this.checkIssues=!1,this.valid=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.registerService.getCompany().pipe(Object(Z.a)()).subscribe((function(t){void 0!==t&&(e.company=t,void 0!==t.permits&&(e.permits=e.company.permits.filter((function(t){return t.type===e.permitType})),e.permitsNo=e.permits.length,e.permits$=Object(d.a)(e.permits)))})),"transport"!==this.permitType&&"collector"!==this.permitType&&(this.permitsNo=this.storageNo,this.storages$=Object(d.a)(this.storages)),this.validatePermits(),this.registerService.sendCompany(Object(d.a)(this.company))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"showToast",value:function(e,t,n){this.toastrService.show(t,e,{status:n})}},{key:"checkValid",value:function(){return Object(te.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validatePermits(),this.valid){e.next=2;break}return e.abrupt("return",!1);case 2:return t="",e.next=5,Promise.all(this.registerService.checkPermits(this.permits)).then((function(e){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t=a?t:"ta \u0161ifra",a)return a}}catch(o){i.e(o)}finally{i.f()}return!1}));case 5:if(!e.sent){e.next=9;break}e.t0=!!this.valid||(this.checkIssues=!0,!1),e.next=10;break;case 9:e.t0=(this.checkIssues=!0,this.showToast("Gre\u0161ka","Ve\u0107 postoji ".concat(t," dozvole!"),"danger"),!1);case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"validatePermits",value:function(){if(this.permits){this.valid=this.permits.length>0;var e,t=_createForOfIteratorHelper(this.permits);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(""===n.name||n.name.length<3){this.valid=!1;break}if(""===n.code){this.valid=!1;break}if(void 0===n.dateCreation||void 0===n.dateExpiration){this.valid=!1;break}if(void 0===n.storage&&"transport"!==this.permitType&&"collector"!==this.permitType){this.valid=!1;break}if(n.trashList.length<1){this.valid=!1;break}}}catch(i){t.e(i)}finally{t.f()}}}},{key:"updatePermitsForm",value:function(e,t){var n=this;0===this.permitsNo&&(this.permitsNo=e,this.storages$=t),this.company.permits?"transport"===this.permitType?this.company.permits=this.company.permits.filter((function(e){return"transport"!==e.type})):"collector"===this.permitType&&(this.company.permits=this.company.permits.filter((function(e){return"collector"!==e.type}))):this.company.permits=[],this.permits=new Array(this.permitsNo);for(var i=0;i<this.permitsNo;i++)this.permits[i]={address:{location:void 0,street:""},code:"",dateCreation:new Date,dateExpiration:new Date,name:"",storage:{name:"",maxAmount:0,address:{location:{placeCode:0,placeName:"",townshipCode:0,townshipName:"",zipCode:""},street:""},amount:0},trashList:[],type:this.permitType},"transport"!==this.permitType&&"collector"!==this.permitType||(delete this.permits[i].storage,delete this.permits[i].address);this.permits$=Object(d.a)(this.permits),this.permits.forEach((function(e){return n.company.permits.push(e)})),this.validatePermits()}},{key:"choosePermit",value:function(e){this.registerService.sendPermit(Object(d.a)(e.code)),this.router.navigate(["/auth/register-permit"])}},{key:"dateValid",value:function(e){return e.dateCreation<=e.dateExpiration}},{key:"setAddress",value:function(e,t){e.address=t.address}}]),e}()).\u0275fac=function(e){return new(e||Wt)(g.Rb(M.a),g.Rb(l.c),g.Rb(k),g.Rb(w.Kb))},Wt.\u0275cmp=g.Lb({type:Wt,selectors:[["register-trash-permit"]],inputs:{permitType:"permitType",storageNo:"storageNo",storages:"storages"},decls:2,vars:2,consts:[[3,"ngSubmit",4,"ngIf"],["class","row pt-4",4,"ngIf"],[3,"ngSubmit"],[1,"row"],[1,"col-6"],["for","input-permitsNo",1,"col-12"],["name","vehiclesNo","fullWidth","","nbInput","","id","input-permitsNo","placeholder","0","step","1","type","number","min","1",3,"ngModelOptions","ngModel","ngModelChange"],[1,"col-12"],["nbButton","","status","primary","type","submit","fullWidth",""],[1,"row","pt-4"],["class","col-12",4,"ngFor","ngForOf"],["permitForm","ngForm"],["accent","success"],[1,"col-12","mb-2"],["for","input-permitName",1,"label"],["autofocus","","fullWidth","","id","input-permitName","name","permitName","nbInput","","placeholder","Naziv",3,"ngModel","ngModelOptions","required","maxlength","minLength","status","placeholder","ngModelChange"],["permitName","ngModel"],[4,"ngIf"],[1,"col-6","mb-2"],["for","input-permitCode",1,"label"],["fullWidth","","id","input-permitCode","name","permitCode","nbInput","","placeholder","\u0160ifra",3,"ngModel","ngModelOptions","required","status","ngModelChange"],["permitCode","ngModel"],["class","col-6 mb-2",4,"ngIf"],["for","input-dateCreation",1,"label"],["fullWidth","","id","input-dateCreation","name","dateCreation","nbInput","",3,"ngModel","nbDatepicker","ngModelOptions","required","status","ngModelChange"],["dateCreation","ngModel"],["dateCreationPicker",""],["for","input-dateExpiration",1,"label"],["fullWidth","","id","input-dateExpiration","name","dateExpiration","nbInput","",3,"ngModel","nbDatepicker","ngModelOptions","required","status","ngModelChange"],["dateExpiration","ngModel"],["dateExpirationPicker",""],[1,"col-6","mt-2"],["nbButton","","status","success","type","button",3,"disabled","click"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-permitsStorage",1,"label"],["name","permitsStorage","fullWidth","","id","input-permitsStorage","required","",3,"ngModel","ngModelOptions","status","ngModelChange"],["permitsStorage","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(g.Fc(0,tt,10,3,"form",0),g.Fc(1,yt,3,3,"div",1)),2&e&&(g.pc("ngIf","transport"===t.permitType||"collector"===t.permitType),g.Eb(1),g.pc("ngIf",t.permitsNo>0))},directives:[c.m,s.w,s.l,s.m,w.Q,s.p,s.b,s.k,s.n,w.t,c.l,w.x,w.w,s.s,s.f,w.J,w.I,w.qb,w.fb],pipes:[c.b],styles:[""]}),Wt),kt=["permitRef"];function Ct(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Naziv skladi\u0161ta je obavezan! "),g.Wb())}function Mt(e,t){if(1&e&&(g.Xb(0,"p",53),g.Hc(1),g.Wb()),2&e){var n=g.jc(4);g.Eb(1),g.Jc(" Naziv skladi\u0161ta mora biti du\u017ei od ",n.getConfigValue("forms.validation.storageName.minLength")," slova! ")}}function It(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Ct,2,0,"p",52),g.Fc(2,Mt,2,1,"p",52),g.Ub()),2&e){g.jc();var n=g.xc(10);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function wt(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Vrsta skladi\u0161ta je obavezna! "),g.Wb())}function Et(e,t){if(1&e&&(g.Vb(0),g.Fc(1,wt,2,0,"p",52),g.Ub()),2&e){g.jc();var n=g.xc(5);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}var jt=function(){return{standalone:!0}};function xt(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",14),g.Xb(1,"div",5),g.Xb(2,"nb-select-label",54),g.Hc(3,"Vrsta Deponije:"),g.Wb(),g.Xb(4,"nb-select",55,56),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().$implicit.dumpType=e})),g.Xb(6,"nb-option",57),g.Hc(7,"Neopasan otpad"),g.Wb(),g.Xb(8,"nb-option",58),g.Hc(9,"Opasan otpad"),g.Wb(),g.Xb(10,"nb-option",59),g.Hc(11,"Inertan otpad"),g.Wb(),g.Wb(),g.Fc(12,Et,2,1,"ng-container",9),g.Wb(),g.Wb()}if(2&e){var i=g.xc(5),a=g.jc().$implicit,o=g.jc(2);g.Eb(4),g.pc("ngModel",a.dumpType)("ngModelOptions",g.sc(6,jt))("required",o.getConfigValue("forms.validation.dumpType.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(8),g.pc("ngIf",i.invalid&&i.touched||o.checkIssues)}}function Ot(e,t){if(1&e&&(g.Xb(0,"nb-option",51),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.pc("value",n),g.Eb(1),g.Ic(n)}}function Nt(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Op\u0161tina je obavezna! "),g.Wb())}function Ft(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Nt,2,0,"p",52),g.Ub()),2&e){g.jc();var n=g.xc(22);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function zt(e,t){if(1&e&&(g.Xb(0,"nb-option",51),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.pc("value",n),g.Eb(1),g.Ic(n)}}function Ht(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Mesto je obavezno! "),g.Wb())}function St(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Ht,2,0,"p",52),g.Ub()),2&e){g.jc();var n=g.xc(32);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function Pt(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Po\u0161tanski broj je obavezan! "),g.Wb())}function Vt(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Po\u0161tanski broj mora biti validan! "),g.Wb())}function Rt(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Pt,2,0,"p",52),g.Fc(2,Vt,2,0,"p",52),g.Ub()),2&e){g.jc();var n=g.xc(43);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function Tt(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Ulica je obavezna! "),g.Wb())}function qt(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Tt,2,0,"p",52),g.Ub()),2&e){g.jc();var n=g.xc(49);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required)}}function Lt(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Veli\u010dina skladi\u0161ta je obavezna! "),g.Wb())}function _t(e,t){1&e&&(g.Xb(0,"p",53),g.Hc(1," Veli\u010dina skladi\u0161ta ne mo\u017ee biti 0! "),g.Wb())}function $t(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Lt,2,0,"p",52),g.Fc(2,_t,2,0,"p",52),g.Ub()),2&e){g.jc();var n=g.xc(93),i=g.jc(2);g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.required)||i.isNaN(n.value)),g.Eb(1),g.pc("ngIf",n<1)}}function Ut(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",5),g.Xb(1,"form",null,12),g.Xb(3,"nb-card",13),g.Xb(4,"nb-card-body"),g.Xb(5,"div",14),g.Xb(6,"div",5),g.Xb(7,"label",15),g.Hc(8,"Naziv Skladi\u0161ta:"),g.Wb(),g.Xb(9,"input",16,17),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.name=e})),g.Wb(),g.Fc(11,It,3,2,"ng-container",9),g.Wb(),g.Wb(),g.Fc(12,xt,13,7,"div",18),g.Xb(13,"div",19),g.Xb(14,"div",5),g.Xb(15,"label",20),g.Hc(16,"Adresa:"),g.Wb(),g.Xb(17,"div",21),g.Xb(18,"div",22),g.Xb(19,"nb-select-label",23),g.Hc(20,"Op\u0161tina:"),g.Wb(),g.Xb(21,"input",24,25),g.fc("ngModelChange",(function(){g.zc(n);var e=g.xc(22);return g.jc(2).chooseTownship(e.value)}))("ngModelChange",(function(e){return g.zc(n),t.$implicit.address.location.townshipName=e})),g.Wb(),g.Xb(23,"nb-autocomplete",null,26),g.Fc(25,Ot,2,2,"nb-option",27),g.kc(26,"async"),g.Wb(),g.Fc(27,Ft,2,1,"ng-container",9),g.Wb(),g.Xb(28,"div",22),g.Xb(29,"nb-select-label",28),g.Hc(30,"Mesto:"),g.Wb(),g.Xb(31,"input",29,30),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc(2).findPlaces(e)}))("ngModelChange",(function(e){return g.zc(n),t.$implicit.address.location.placeName=e})),g.Wb(),g.Xb(33,"nb-autocomplete",null,31),g.Fc(35,zt,2,2,"nb-option",27),g.kc(36,"async"),g.Wb(),g.Fc(37,St,2,1,"ng-container",9),g.Wb(),g.Wb(),g.Xb(38,"div",32),g.Xb(39,"div",33),g.Xb(40,"label",34),g.Hc(41,"Po\u0161tanski broj:"),g.Wb(),g.Xb(42,"input",35,36),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.address.location.zipCode=e})),g.Wb(),g.Fc(44,Rt,3,2,"ng-container",9),g.Wb(),g.Xb(45,"div",37),g.Xb(46,"label",38),g.Hc(47,"Ulica i broj:"),g.Wb(),g.Xb(48,"input",39,40),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.address.street=e})),g.Wb(),g.Fc(50,qt,2,1,"ng-container",9),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(51,"div",19),g.Xb(52,"div",5),g.Xb(53,"label",41),g.Hc(54,"Geolokacija Sever(N):"),g.Wb(),g.Xb(55,"input",42),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationNorth[0]=e})),g.Wb(),g.Xb(56,"input",42),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationNorth[1]=e})),g.Wb(),g.Xb(57,"span",43),g.Hc(58,"\xb0"),g.Wb(),g.Xb(59,"input",42),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationNorth[2]=e})),g.Wb(),g.Xb(60,"input",42),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationNorth[3]=e})),g.Wb(),g.Xb(61,"span",43),g.Hc(62,"'"),g.Wb(),g.Xb(63,"input",42),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationNorth[4]=e})),g.Wb(),g.Xb(64,"input",42),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationNorth[5]=e})),g.Wb(),g.Xb(65,"input",42),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationNorth[6]=e})),g.Wb(),g.Xb(66,"span",43),g.Hc(67,'"'),g.Wb(),g.Tb(68),g.Wb(),g.Xb(69,"div",5),g.Xb(70,"label",41),g.Hc(71,"Geolokacija Istok(E0):"),g.Wb(),g.Xb(72,"input",44),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationEast[0]=e})),g.Wb(),g.Xb(73,"input",44),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationEast[1]=e})),g.Wb(),g.Xb(74,"span",43),g.Hc(75,"\xb0"),g.Wb(),g.Xb(76,"input",44),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationEast[2]=e})),g.Wb(),g.Xb(77,"input",44),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationEast[3]=e})),g.Wb(),g.Xb(78,"span",43),g.Hc(79,"'"),g.Wb(),g.Xb(80,"input",44),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationEast[4]=e})),g.Wb(),g.Xb(81,"input",44),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationEast[5]=e})),g.Wb(),g.Xb(82,"input",44),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.geolocationEast[6]=e})),g.Wb(),g.Xb(83,"span",43),g.Hc(84,'"'),g.Wb(),g.Tb(85),g.Wb(),g.Wb(),g.Xb(86,"div",19),g.Xb(87,"div",5),g.Xb(88,"label",45),g.Hc(89,"Veli\u010dina skladi\u0161ta:"),g.Wb(),g.Xb(90,"div",4),g.Xb(91,"div",46),g.Xb(92,"input",47,48),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.maxAmount=e})),g.Wb(),g.Wb(),g.Xb(94,"div",49),g.Xb(95,"nb-select",50),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.storageUnit=e})),g.Xb(96,"nb-option",51),g.Hc(97,"KG"),g.Wb(),g.Xb(98,"nb-option",51),g.Hc(99,"T"),g.Wb(),g.Wb(),g.Wb(),g.Fc(100,$t,3,2,"ng-container",9),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=t.$implicit,a=t.index,o=g.xc(10),r=g.xc(22),c=g.xc(24),s=g.xc(32),l=g.xc(34),u=g.xc(43),b=g.xc(49),d=g.xc(93),p=g.jc(2);g.Eb(9),g.pc("ngModel",i.name)("maxlength",p.getConfigValue("forms.validation.storageName.maxLength"))("minlength",p.getConfigValue("forms.validation.storageName.minLength"))("ngModelOptions",g.sc(82,jt))("placeholder","Skladiste #"+a+1)("required",p.getConfigValue("forms.validation.storageName.required"))("status",o.dirty?o.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),g.Eb(2),g.pc("ngIf",o.invalid&&o.touched||p.checkIssues),g.Eb(1),g.pc("ngIf","dump"===p.storageType),g.Eb(9),g.pc("ngModel",i.address.location.townshipName)("nbAutocomplete",c)("ngModelOptions",g.sc(83,jt))("required",p.getConfigValue("forms.validation.address.required")),g.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),g.Eb(4),g.pc("ngForOf",g.lc(26,78,p.townships$)),g.Eb(2),g.pc("ngIf",r.invalid&&r.touched||p.checkIssues),g.Eb(4),g.pc("ngModel",i.address.location.placeName)("nbAutocomplete",l)("ngModelOptions",g.sc(84,jt))("required",p.getConfigValue("forms.validation.address.required")),g.Fb("aria-invalid",!(!s.invalid||!s.touched)||null),g.Eb(4),g.pc("ngForOf",g.lc(36,80,p.places$)),g.Eb(2),g.pc("ngIf",s.invalid&&s.touched||p.checkIssues),g.Eb(5),g.pc("ngModel",i.address.location.zipCode)("maxlength",p.getConfigValue("forms.validation.zipCode.maxLength"))("minlength",p.getConfigValue("forms.validation.zipCode.minLength"))("ngModelOptions",g.sc(85,jt))("required",p.getConfigValue("forms.validation.zipCode.required"))("status",u.dirty?u.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!u.invalid||!u.touched)||null),g.Eb(2),g.pc("ngIf",u.invalid&&u.touched||p.checkIssues),g.Eb(4),g.pc("ngModel",i.address.street)("maxlength",p.getConfigValue("forms.validation.street.maxLength"))("minlength",p.getConfigValue("forms.validation.street.minLength"))("ngModelOptions",g.sc(86,jt))("required",p.getConfigValue("forms.validation.street.required"))("status",b.dirty?b.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!b.invalid||!b.touched)||null),g.Eb(2),g.pc("ngIf",b.invalid&&b.touched||p.checkIssues),g.Eb(5),g.pc("ngModelOptions",g.sc(87,jt))("ngModel",i.geolocationNorth[0]),g.Eb(1),g.pc("ngModelOptions",g.sc(88,jt))("ngModel",i.geolocationNorth[1]),g.Eb(3),g.pc("ngModelOptions",g.sc(89,jt))("ngModel",i.geolocationNorth[2]),g.Eb(1),g.pc("ngModelOptions",g.sc(90,jt))("ngModel",i.geolocationNorth[3]),g.Eb(3),g.pc("ngModelOptions",g.sc(91,jt))("ngModel",i.geolocationNorth[4]),g.Eb(1),g.pc("ngModelOptions",g.sc(92,jt))("ngModel",i.geolocationNorth[5]),g.Eb(1),g.pc("ngModelOptions",g.sc(93,jt))("ngModel",i.geolocationNorth[6]),g.Eb(7),g.pc("ngModelOptions",g.sc(94,jt))("ngModel",i.geolocationEast[0]),g.Eb(1),g.pc("ngModelOptions",g.sc(95,jt))("ngModel",i.geolocationEast[1]),g.Eb(3),g.pc("ngModelOptions",g.sc(96,jt))("ngModel",i.geolocationEast[2]),g.Eb(1),g.pc("ngModelOptions",g.sc(97,jt))("ngModel",i.geolocationEast[3]),g.Eb(3),g.pc("ngModelOptions",g.sc(98,jt))("ngModel",i.geolocationEast[4]),g.Eb(1),g.pc("ngModelOptions",g.sc(99,jt))("ngModel",i.geolocationEast[5]),g.Eb(1),g.pc("ngModelOptions",g.sc(100,jt))("ngModel",i.geolocationEast[6]),g.Eb(10),g.pc("ngModel",i.maxAmount)("min",p.getConfigValue("forms.validation.storageSize.min"))("ngModelOptions",g.sc(101,jt))("required",p.getConfigValue("forms.validation.storageSize.required"))("status",d.dirty?d.invalid?"danger":"success":"basic"),g.Eb(3),g.pc("ngModelOptions",g.sc(102,jt))("ngModel",i.storageUnit),g.Eb(1),g.pc("value","KG"),g.Eb(2),g.pc("value","T"),g.Eb(2),g.pc("ngIf",d.invalid&&d.touched||p.checkIssues)}}function At(e,t){if(1&e&&(g.Xb(0,"div",10),g.Fc(1,Ut,101,103,"div",11),g.kc(2,"async"),g.Wb()),2&e){var n=g.jc();g.Eb(1),g.pc("ngForOf",g.lc(2,1,n.storages$))}}function Dt(e,t){if(1&e&&(g.Xb(0,"div"),g.Sb(1,"register-trash-permit",60,61),g.Wb()),2&e){var n=g.jc();g.Eb(1),g.pc("storageNo",n.storageNo)("storages",n.storages)("permitType",n.storageType)}}var Bt,Kt=((Bt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,e),this.options=t,this.registerService=n,this.locationService=i,this.checkIssues=!1,this.valid=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.registerService.getCompany().pipe(Object(Z.a)()).subscribe((function(t){if(void 0!==t&&(e.company=t,void 0!==t.storages)){var n=[];"treatment"===e.storageType?(n=e.company.storages,e.storages=n.filter((function(e){return void 0!==e.treatment}))):"dump"===e.storageType?(n=e.company.storages,e.storages=n.filter((function(e){return void 0!==e.dumpType}))):"cache"===e.storageType?(n=e.company.storages,e.storages=n.filter((function(e){return void 0!==e.cache}))):(n=e.company.storages,e.storages=n.filter((function(e){return void 0===e.cache&&void 0===e.dumpType&&void 0===e.treatment}))),e.storageNo=e.storages.length,e.storages$=Object(d.a)(e.storages)}})),this.validateStorage(),this.registerService.sendCompany(Object(d.a)(this.company)),this.locationService.getDistinctTownships().pipe(Object(Z.a)()).subscribe((function(t){e.townships=t,e.townships$=Object(d.a)(t)}))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"updateStorages",value:function(){var e=this,t=new Array;"treatment"===this.storageType?(t=this.company.storages,this.company.storages=t.filter((function(e){return void 0===e.treatment}))):"dump"===this.storageType?(t=this.company.storages,this.company.storages=t.filter((function(e){return void 0===e.dumpType}))):"cache"===this.storageType?(t=this.company.storages,this.company.storages=t.filter((function(e){return void 0===e.cache}))):(t=this.company.storages,this.company.storages=t.filter((function(e){return e.treatment||e.dumpType||e.cache}))),this.storages=new Array(this.storageNo);for(var n=0;n<this.storageNo;n++)this.storages[n]={address:{location:{placeName:"",placeCode:0,townshipName:"",townshipCode:0,zipCode:""},street:""},amount:0,storageUnit:"KG",geolocationEast:["0","0","0","0","0","0","0"],geolocationNorth:["0","0","0","0","0","0","0"],maxAmount:NaN,name:"",packages:[],trashes:[]},"cache"===this.storageType&&(this.storages[n].cache="cache"),"treatment"===this.storageType&&(this.storages[n].treatment="treatment"),"dump"===this.storageType&&(this.storages[n].dumpType="");this.storages$=Object(d.a)(this.storages),this.storages.forEach((function(t){return e.company.storages.push(t)})),this.validateStorage(),void 0!==this.permitRef&&this.permitRef.updatePermitsForm(this.storageNo,this.storages$)}},{key:"checkValid",value:function(){return this.validateStorage(),!(void 0!==this.permitRef&&!this.permitRef.checkValid()||!this.valid&&(this.checkIssues=!0,1))}},{key:"validateStorage",value:function(){if(void 0!==this.storages){this.valid=this.storages.length>0;var e,t=_createForOfIteratorHelper(this.storages);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(""===n.name||n.name.length<3){this.valid=!1;break}if(n.maxAmount<1||isNaN(n.maxAmount)){this.valid=!1;break}if(""===n.address.location.placeName||""===n.address.location.townshipName){this.valid=!1;break}if(""===n.address.street){this.valid=!1;break}if("dump"===this.storageType&&""===n.dumpType){this.valid=!1;break}}}catch(i){t.e(i)}finally{t.f()}}}},{key:"getPlaces",value:function(e){var t=this;void 0!==e&&this.locationService.getPlacesFromTownship(e).pipe(Object(Z.a)()).subscribe((function(e){t.places=e,t.places$=Object(d.a)(e)}))}},{key:"chooseTownship",value:function(e){var t=this;""!==e?(this.townships$=this.locationService.filter(e,this.townships),void 0!==this.townships$&&this.townships$.subscribe((function(e){return t.getPlaces(e[0])}))):this.townships$=Object(d.a)(this.townships)}},{key:"findPlaces",value:function(e){this.places$=this.locationService.filter(e,this.places)}},{key:"isNaN",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return!(!isNaN(e)&&void 0!==e)}))}]),e}()).\u0275fac=function(e){return new(e||Bt)(g.Rb(M.a),g.Rb(k),g.Rb(v))},Bt.\u0275cmp=g.Lb({type:Bt,selectors:[["register-trash-storage"]],viewQuery:function(e,t){var n;1&e&&g.Oc(kt,!0),2&e&&g.wc(n=g.gc())&&(t.permitRef=n.first)},inputs:{storageType:"storageType",trashType:"trashType"},decls:15,vars:5,consts:[[1,"row","my-2"],[1,"col-4"],[3,"ngSubmit"],["updateStorageForm",""],[1,"row"],[1,"col-12"],["fullWidth","","min","1","name","storageNo","nbInput","","placeholder","0","step","1","type","number",3,"ngModel","ngModelOptions","ngModelChange"],["nbButton","","status","primary","type","submit","fullWidth",""],["class","row pt-4",4,"ngIf"],[4,"ngIf"],[1,"row","pt-4"],["class","col-12",4,"ngFor","ngForOf"],["storageForm","ngForm"],["accent","primary",1,"p-2"],[1,"row","mb-2","mt-2"],["for","input-storageName",1,"label"],["autofocus","","fullWidth","","id","input-storageName","name","storageName","nbInput","",3,"ngModel","maxlength","minlength","ngModelOptions","placeholder","required","status","ngModelChange"],["storageName","ngModel"],["class","row mb-2 mt-2",4,"ngIf"],[1,"row","mb-2"],["for","input-adresa",1,"label"],["id","input-adresa",1,"row","ml-2"],[1,"col-6"],["for","input-storageTownship",1,"label"],["autofocus","off","autocomplete","off","fullWidth","","id","input-storageTownship","name","storageTownship","nbInput","","placeholder","Op\u0161tina",3,"ngModel","nbAutocomplete","ngModelOptions","required","ngModelChange"],["storageTownship","ngModel"],["autoOpstinaSelect",""],[3,"value",4,"ngFor","ngForOf"],["for","input-storagePlace",1,"label"],["autofocus","off","autocomplete","off","fullWidth","","id","input-storagePlace","name","storagePlace","nbInput","","placeholder","Mesto",3,"ngModel","nbAutocomplete","ngModelOptions","required","ngModelChange"],["storagePlace","ngModel"],["autoMestoSelect",""],[1,"row","ml-2","mt-2"],[1,"col-3"],["for","input-storageZipCode",1,"label"],["fullWidth","","id","input-storageZipCode","name","storageZipCode","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","Po\u0161tanski broj",3,"ngModel","maxlength","minlength","ngModelOptions","required","status","ngModelChange"],["storageZipCode","ngModel"],[1,"col-9"],["for","input-storageStreet",1,"label"],["fullWidth","","id","input-storageStreet","name","storageStreet","nbInput","","placeholder","Ulica i broj",3,"ngModel","maxlength","minlength","ngModelOptions","required","status","ngModelChange"],["storageStreet","ngModel"],[1,"label"],["nbInput","","maxlength","1","fullWidth","","onkeypress","return /[0-9]/i.test(event.key)","type","text",1,"col-1",3,"ngModelOptions","ngModel","ngModelChange"],[1,"mx-1",2,"font-size","1.5rem"],["nbInput","","maxlength","1","fullWidth","","maxlength","1","onkeypress","return /[0-9]/i.test(event.key)","type","text",1,"col-1",3,"ngModelOptions","ngModel","ngModelChange"],["for","input-storageSize",1,"label","pl-0","col-12"],[1,"col-10","pr-0"],["fullWidth","","id","input-storageSize","name","storageSize","nbInput","","placeholder","0","onkeypress","return /[0-9.]/i.test(event.key)","step","1","type","number",3,"ngModel","min","ngModelOptions","required","status","ngModelChange"],["storageSize","ngModel"],[1,"col-2","pl-0"],[3,"ngModelOptions","ngModel","ngModelChange"],[3,"value"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-dumpType",1,"label"],["fullWidth","","id","input-dumpType","name","dumpType","placeholder","Vrsta deponije",3,"ngModel","ngModelOptions","required","status","ngModelChange"],["dumpType","ngModel"],["value","Neopasan"],["value","Opasan"],["value","Inertan"],[3,"storageNo","storages","permitType"],["permitRef",""]],template:function(e,t){1&e&&(g.Xb(0,"div",0),g.Xb(1,"div",1),g.Xb(2,"form",2,3),g.fc("ngSubmit",(function(){return t.updateStorages()})),g.Xb(4,"div",4),g.Xb(5,"div",5),g.Xb(6,"label",5),g.Hc(7,"Broj skladi\u0161ta:"),g.Wb(),g.Xb(8,"input",6),g.fc("ngModelChange",(function(e){return t.storageNo=e})),g.Wb(),g.Wb(),g.Wb(),g.Xb(9,"div",4),g.Xb(10,"div",5),g.Xb(11,"button",7),g.Hc(12,"Odaberi"),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Fc(13,At,3,3,"div",8),g.Fc(14,Dt,3,3,"div",9)),2&e&&(g.Eb(8),g.pc("ngModel",t.storageNo)("ngModelOptions",g.sc(4,jt)),g.Eb(5),g.pc("ngIf",t.storageNo>0),g.Eb(1),g.pc("ngIf","production"!==t.storageType))},directives:[s.w,s.l,s.m,w.Q,s.p,s.b,s.k,s.n,w.t,c.m,c.l,w.x,w.w,s.f,s.g,s.s,w.rb,w.r,w.q,w.qb,w.fb,Xt],pipes:[c.b],styles:[""]}),Bt),Zt=["permitRef"];function Jt(e,t){1&e&&(g.Xb(0,"p",29),g.Hc(1," Registarski broj tablica je obavezan! "),g.Wb())}function Yt(e,t){1&e&&(g.Xb(0,"p",29),g.Hc(1," Registarski broj tablica mora biti validan (npr. BG-234-AA)! "),g.Wb())}function Gt(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Jt,2,0,"p",28),g.Fc(2,Yt,2,0,"p",28),g.Ub()),2&e){g.jc();var n=g.xc(9);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.pattern)||(null==n.errors?null:n.errors.minLength))}}function Qt(e,t){1&e&&(g.Xb(0,"p",29),g.Hc(1," Vrsta vozila je obavezna! "),g.Wb())}function en(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Qt,2,0,"p",28),g.Ub()),2&e){g.jc();var n=g.xc(15);g.Eb(1),g.pc("ngIf",!n.value)}}var tn=function(){return{standalone:!0}};function nn(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",5),g.Xb(1,"form",null,15),g.Xb(3,"nb-card",16),g.Xb(4,"nb-card-body"),g.Xb(5,"div",17),g.Xb(6,"label",18),g.Hc(7,"Registarski broj tablice:"),g.Wb(),g.Xb(8,"input",19,20),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.licensePlate=e})),g.Wb(),g.Fc(10,Gt,3,2,"ng-container",21),g.Wb(),g.Xb(11,"div",17),g.Xb(12,"label",22),g.Hc(13,"Vrsta vozila:"),g.Wb(),g.Xb(14,"nb-select",23,24),g.fc("ngModelChange",(function(e){return g.zc(n),t.$implicit.type=e})),g.Xb(16,"nb-option",25),g.Hc(17,"Kamion"),g.Wb(),g.Xb(18,"nb-option",26),g.Hc(19,"Kombi"),g.Wb(),g.Xb(20,"nb-option",27),g.Hc(21,"Automobil"),g.Wb(),g.Wb(),g.Fc(22,en,2,1,"ng-container",21),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=t.$implicit,a=g.xc(9),o=g.xc(15),r=g.jc(2);g.Eb(8),g.pc("ngModel",i.licensePlate)("maxlength",r.getConfigValue("forms.validation.licensePlate.maxLength"))("minLength",r.getConfigValue("forms.validation.licensePlate.minLength"))("ngModelOptions",g.sc(15,tn))("pattern",r.getConfigValue("forms.validation.licensePlate.pattern"))("required",r.getConfigValue("forms.validation.licensePlate.required"))("status",a.dirty?a.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),g.Eb(2),g.pc("ngIf",a.invalid&&a.touched||r.checkIssues),g.Eb(4),g.pc("ngModel",i.type)("ngModelOptions",g.sc(16,tn))("required",r.getConfigValue("forms.validation.vehicleType.required"))("status",o.dirty?o.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),g.Eb(8),g.pc("ngIf",o.invalid&&o.touched||r.checkIssues)}}function an(e,t){if(1&e&&(g.Xb(0,"div",13),g.Fc(1,nn,23,17,"div",14),g.kc(2,"async"),g.Wb()),2&e){var n=g.jc();g.Eb(1),g.pc("ngForOf",g.lc(2,1,n.vehicles$))}}var on,rn=((on=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,e),this.options=t,this.registerService=n,this.toastrService=i,this.valid=!1,this.checkIssues=!1,this.vehiclesNo=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.registerService.getCompany().pipe(Object(Z.a)()).subscribe((function(t){void 0!==t&&(e.company=t,void 0!==t.vehicles&&(e.vehiclesNo=e.company.vehicles.length,e.vehicles=e.company.vehicles,e.vehicles$=Object(d.a)(e.vehicles)))})),this.validateVehicles(),this.registerService.sendCompany(Object(d.a)(this.company))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"showToast",value:function(e,t,n){this.toastrService.show(t,e,{status:n})}},{key:"checkValid",value:function(){return Object(te.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateVehicles(),this.valid){e.next=2;break}return e.abrupt("return",!1);case 2:return t="",e.next=5,Promise.all(this.registerService.checkVehicles(this.vehicles)).then((function(e){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t=a?t:"ta registarska tablica",a)return a}}catch(o){i.e(o)}finally{i.f()}return!1}));case 5:if(!e.sent){e.next=17;break}if(e.t2=void 0!==this.permitRef,!e.t2){e.next=11;break}return e.next=10,this.permitRef.checkValid();case 10:e.t2=!e.sent;case 11:if(e.t1=e.t2,e.t1){e.next=14;break}e.t1=!this.valid&&(this.checkIssues=!0,1);case 14:e.t0=!e.t1,e.next=18;break;case 17:e.t0=(this.checkIssues=!0,this.showToast("Gre\u0161ka","Ve\u0107 postoji ".concat(t,"!"),"danger"),!1);case 18:return e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,this)})))}},{key:"validateVehicles",value:function(){if(void 0!==this.vehicles){this.valid=this.vehicles.length>0;var e,t=_createForOfIteratorHelper(this.vehicles);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(""===n.licensePlate||n.licensePlate.length<9){this.valid=!1;break}if(""===n.type){this.valid=!1;break}}}catch(i){t.e(i)}finally{t.f()}}}},{key:"updateVehiclesForm",value:function(){this.vehicles=new Array(this.vehiclesNo);for(var e=0;e<this.vehiclesNo;e++)this.vehicles[e]={licensePlate:"",type:""};this.company.vehicles=this.vehicles,this.vehicles$=Object(d.a)(this.vehicles),this.validateVehicles()}}]),e}()).\u0275fac=function(e){return new(e||on)(g.Rb(M.a),g.Rb(k),g.Rb(w.Kb))},on.\u0275cmp=g.Lb({type:on,selectors:[["register-trash-transport"]],viewQuery:function(e,t){var n;1&e&&g.Oc(Zt,!0),2&e&&g.wc(n=g.gc())&&(t.permitRef=n.first)},decls:16,vars:5,consts:[[1,"row","my-2"],[1,"col-8"],[3,"ngSubmit"],["updateForm",""],[1,"row"],[1,"col-6"],["for","input-vehiclesNo",1,"col-12"],["name","vehiclesNo","fullWidth","","nbInput","","id","input-vehiclesNo","placeholder","0","step","1","type","number","min","1",3,"ngModelOptions","ngModel","ngModelChange"],[1,"col-12"],["nbButton","","status","primary","type","submit","fullWidth",""],["class","row pt-4",4,"ngIf"],[3,"permitType"],["permitRef",""],[1,"row","pt-4"],["class","col-6",4,"ngFor","ngForOf"],["transportForm","ngForm"],["accent","danger"],[1,"col-12","mb-2"],["for","input-licensePlate",1,"label"],["fullWidth","","id","input-licensePlate","name","licensePlate","nbInput","","oninput","this.value = this.value.toUpperCase()","placeholder","NS-234-DS",3,"ngModel","maxlength","minLength","ngModelOptions","pattern","required","status","ngModelChange"],["licensePlate","ngModel"],[4,"ngIf"],["for","input-vehicleType",1,"label"],["fullWidth","","id","input-vehicleType","name","vehicleType","placeholder","Odaberi",3,"ngModel","ngModelOptions","required","status","ngModelChange"],["vehicleType","ngModel"],["value","kamion"],["value","kombi"],["value","automobil"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){1&e&&(g.Xb(0,"div",0),g.Xb(1,"div",1),g.Xb(2,"form",2,3),g.fc("ngSubmit",(function(){return t.updateVehiclesForm()})),g.Xb(4,"div",4),g.Xb(5,"div",5),g.Xb(6,"label",6),g.Hc(7,"Broj vozila:"),g.Wb(),g.Xb(8,"input",7),g.fc("ngModelChange",(function(e){return t.vehiclesNo=e})),g.Wb(),g.Wb(),g.Wb(),g.Xb(9,"div",4),g.Xb(10,"div",8),g.Xb(11,"button",9),g.Hc(12,"Odaberi"),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Fc(13,an,3,3,"div",10),g.Sb(14,"register-trash-permit",11,12)),2&e&&(g.Eb(8),g.pc("ngModelOptions",g.sc(4,tn))("ngModel",t.vehiclesNo),g.Eb(5),g.pc("ngIf",t.vehiclesNo>0),g.Eb(1),g.pc("permitType","transport"))},directives:[s.w,s.l,s.m,w.Q,s.p,s.b,s.k,s.n,w.t,c.m,Xt,c.l,w.x,w.w,s.f,s.q,s.s,w.qb,w.fb],pipes:[c.b],styles:[".error-message[_ngcontent-%COMP%]{color:red}.equal[_ngcontent-%COMP%]{display:flex;display:-webkit-flex;flex-wrap:wrap}"]}),on),cn=["productionRef"],sn=["transportRef"],ln=["collectorRef"],un=["treatmentRef"],bn=["dumpRef"],dn=["cacheRef"];function pn(e,t){1&e&&(g.Xb(0,"nb-card",13),g.Xb(1,"nb-card-body"),g.Xb(2,"p",14),g.Hc(3,"Nema potrebe za dodavanje dodatnih informacija za posebne tokove otpada! =)"),g.Wb(),g.Wb(),g.Wb())}function gn(e,t){1&e&&g.Sb(0,"register-trash-storage",19,20),2&e&&g.pc("storageType","production")}function fn(e,t){if(1&e&&(g.Xb(0,"nb-accordion-item",15,16),g.Xb(2,"nb-accordion-item-header"),g.Hc(3,"Proizvodnja "),g.Sb(4,"nb-icon",17),g.Wb(),g.Xb(5,"nb-accordion-item-body"),g.Fc(6,gn,2,1,"register-trash-storage",18),g.Wb(),g.Wb()),2&e){var n=g.xc(1),i=g.jc();g.pc("collapsed","production"!==i.activeTab),g.Eb(4),g.pc("status",i.checkCompletion("production").status)("icon",i.checkCompletion("production").icon),g.Eb(2),g.pc("ngIf",!n.collapsed)}}function mn(e,t){1&e&&g.Sb(0,"register-trash-transport",null,23)}function hn(e,t){if(1&e&&(g.Xb(0,"nb-accordion-item",15,21),g.Xb(2,"nb-accordion-item-header"),g.Hc(3,"Transport \xa0 "),g.Sb(4,"nb-icon",17),g.Wb(),g.Xb(5,"nb-accordion-item-body"),g.Fc(6,mn,2,0,"register-trash-transport",22),g.Wb(),g.Wb()),2&e){var n=g.xc(1),i=g.jc();g.pc("collapsed","transport"!==i.activeTab),g.Eb(4),g.pc("status",i.checkCompletion("transport").status)("icon",i.checkCompletion("transport").icon),g.Eb(2),g.pc("ngIf",!n.collapsed)}}function vn(e,t){1&e&&g.Sb(0,"register-trash-permit",26,27),2&e&&g.pc("permitType","collector")}function yn(e,t){if(1&e&&(g.Xb(0,"nb-accordion-item",15,24),g.Xb(2,"nb-accordion-item-header"),g.Hc(3,"Sakuplja\u010d \xa0 "),g.Sb(4,"nb-icon",17),g.Wb(),g.Xb(5,"nb-accordion-item-body"),g.Fc(6,vn,2,1,"register-trash-permit",25),g.Wb(),g.Wb()),2&e){var n=g.xc(1),i=g.jc();g.pc("collapsed","collector"!==i.activeTab),g.Eb(4),g.pc("status",i.checkCompletion("collector").status)("icon",i.checkCompletion("collector").icon),g.Eb(2),g.pc("ngIf",!n.collapsed)}}function Wn(e,t){1&e&&g.Sb(0,"register-trash-storage",19,29),2&e&&g.pc("storageType","treatment")}function Xn(e,t){if(1&e&&(g.Xb(0,"nb-accordion-item",15,28),g.Xb(2,"nb-accordion-item-header"),g.Hc(3,"Tretman \xa0 "),g.Sb(4,"nb-icon",17),g.Wb(),g.Xb(5,"nb-accordion-item-body"),g.Fc(6,Wn,2,1,"register-trash-storage",18),g.Wb(),g.Wb()),2&e){var n=g.xc(1),i=g.jc();g.pc("collapsed","treatment"!==i.activeTab),g.Eb(4),g.pc("status",i.checkCompletion("treatment").status)("icon",i.checkCompletion("treatment").icon),g.Eb(2),g.pc("ngIf",!n.collapsed)}}function kn(e,t){1&e&&g.Sb(0,"register-trash-storage",19,31),2&e&&g.pc("storageType","dump")}function Cn(e,t){if(1&e&&(g.Xb(0,"nb-accordion-item",15,30),g.Xb(2,"nb-accordion-item-header"),g.Hc(3,"Odlaganje \xa0 "),g.Sb(4,"nb-icon",17),g.Wb(),g.Xb(5,"nb-accordion-item-body"),g.Fc(6,kn,2,1,"register-trash-storage",18),g.Wb(),g.Wb()),2&e){var n=g.xc(1),i=g.jc();g.pc("collapsed","odlaganje"!==i.activeTab),g.Eb(4),g.pc("status",i.checkCompletion("dump").status)("icon",i.checkCompletion("dump").icon),g.Eb(2),g.pc("ngIf",!n.collapsed)}}function Mn(e,t){1&e&&g.Sb(0,"register-trash-storage",19,33),2&e&&g.pc("storageType","cache")}function In(e,t){if(1&e&&(g.Xb(0,"nb-accordion-item",15,32),g.Xb(2,"nb-accordion-item-header"),g.Hc(3,"Skladi\u0161tenje \xa0 "),g.Sb(4,"nb-icon",17),g.Wb(),g.Xb(5,"nb-accordion-item-body"),g.Fc(6,Mn,2,1,"register-trash-storage",18),g.Wb(),g.Wb()),2&e){var n=g.xc(1),i=g.jc();g.pc("collapsed","skladistenje"!==i.activeTab),g.Eb(4),g.pc("status",i.checkCompletion("cache").status)("icon",i.checkCompletion("cache").icon),g.Eb(2),g.pc("ngIf",!n.collapsed)}}var wn,En=((wn=function(){function e(t,n,i,a,o){_classCallCheck(this,e),this.registerService=t,this.router=n,this.toastrService=i,this.roleService=a,this.route=o,this.valid=!1,this.activeTab="",this.loading=!1,this.activeTab=this.route.snapshot.paramMap.get("tab")}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.registerService.getOperations().pipe(Object(Z.a)()).subscribe((function(t){e.roleService.getOperations(t).pipe(Object(Z.a)()).subscribe((function(t){e.operations=t}))}))}},{key:"checkCompletion",value:function(e){return"production"===e&&void 0!==this.productionRef&&this.operations.production&&this.productionRef.valid||"transport"===e&&void 0!==this.transportRef&&this.operations.transport&&this.transportRef.valid||"collector"===e&&void 0!==this.collectorRef&&this.operations.collector&&this.collectorRef.valid||"treatment"===e&&void 0!==this.treatmentRef&&this.operations.treatment&&this.treatmentRef.valid||"dump"===e&&void 0!==this.dumpRef&&this.operations.disposal&&this.dumpRef.valid||"cache"===e&&void 0!==this.cacheRef&&this.operations.cache&&this.cacheRef.valid?{icon:"checkmark-circle-outline",status:"success"}:{icon:"alert-triangle-outline",status:"danger"}}},{key:"validateInformation",value:function(e){return Object(te.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loading=!0,e.multi=!0,e.closeAll(),e.openAll(),setTimeout((function(){return Object(te.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.valid=!0,void 0!==this.productionRef&&this.operations.production&&(this.productionRef.checkValid()||(this.valid=!1)),t.t0=void 0!==this.transportRef&&this.operations.transport,!t.t0){t.next=7;break}return t.next=6,this.transportRef.checkValid();case 6:this.valid=t.sent;case 7:if(t.t1=void 0!==this.collectorRef&&this.operations.collector,!t.t1){t.next=12;break}return t.next=11,this.collectorRef.checkValid();case 11:this.valid=t.sent;case 12:void 0!==this.treatmentRef&&this.operations.treatment&&(this.treatmentRef.checkValid()||(this.valid=!1)),void 0!==this.dumpRef&&this.operations.disposal&&(this.dumpRef.checkValid()||(this.valid=!1)),void 0!==this.cacheRef&&this.operations.cache&&(this.cacheRef.checkValid()||(this.valid=!1)),this.valid?this.router.navigate(["auth/register-confirmation"]):(e.closeAll(),e.multi=!1,this.loading=!1,this.showToast("Gre\u0161ka","Ponovo pogledajte unete informacije!","warning"));case 16:case"end":return t.stop()}}),t,this)})))}),1e3);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"showToast",value:function(e,t,n){this.toastrService.show(t,e,{status:n})}}]),e}()).\u0275fac=function(e){return new(e||wn)(g.Rb(k),g.Rb(l.c),g.Rb(w.Kb),g.Rb(F.a),g.Rb(l.a))},wn.\u0275cmp=g.Lb({type:wn,selectors:[["register-informations"]],viewQuery:function(e,t){var n;1&e&&(g.Oc(cn,!0),g.Oc(sn,!0),g.Oc(ln,!0),g.Oc(un,!0),g.Oc(bn,!0),g.Oc(dn,!0)),2&e&&(g.wc(n=g.gc())&&(t.productionRef=n.first),g.wc(n=g.gc())&&(t.transportRef=n.first),g.wc(n=g.gc())&&(t.collectorRef=n.first),g.wc(n=g.gc())&&(t.treatmentRef=n.first),g.wc(n=g.gc())&&(t.dumpRef=n.first),g.wc(n=g.gc())&&(t.cacheRef=n.first))},decls:21,vars:8,consts:[[1,"text-center"],["disableStepNavigation","","selectedIndex","3"],["label","User","completed","true"],["label","Firma","completed","true"],["label","Operacije","completed","true"],["label","Informacije"],["class","bg-info",4,"ngIf"],["accent","danger","size","tiny","nbSpinnerStatus","danger","nbSpinnerSize","giant","nbSpinnerMessage","Proveravamo unete informacije!",3,"nbSpinner"],["accordionTrash",""],[3,"collapsed",4,"ngIf"],["nbButton","","fullWidth","","status","danger","routerLink","/auth/register-operations",1,"mt-2","col-6"],["nbButton","","fullWidth","","status","success","type","submit",1,"mt-2","col-6",3,"click"],["label","Potvrda"],[1,"bg-info"],[1,"justify-content-center","d-flex"],[3,"collapsed"],["accordionProduction",""],[3,"status","icon"],[3,"storageType",4,"ngIf"],[3,"storageType"],["productionRef",""],["accordionTransport",""],[4,"ngIf"],["transportRef",""],["accordionCollector",""],[3,"permitType",4,"ngIf"],[3,"permitType"],["collectorRef",""],["accordionTreatment",""],["treatmentRef",""],["accordionDump",""],["dumpRef",""],["accordionCache",""],["cacheRef",""]],template:function(e,t){if(1&e){var n=g.Yb();g.Xb(0,"h1",0),g.Hc(1,"Registruj se!"),g.Wb(),g.Xb(2,"nb-stepper",1),g.Sb(3,"nb-step",2),g.Sb(4,"nb-step",3),g.Sb(5,"nb-step",4),g.Xb(6,"nb-step",5),g.Fc(7,pn,4,0,"nb-card",6),g.Xb(8,"nb-accordion",7,8),g.Fc(10,fn,7,4,"nb-accordion-item",9),g.Fc(11,hn,7,4,"nb-accordion-item",9),g.Fc(12,yn,7,4,"nb-accordion-item",9),g.Fc(13,Xn,7,4,"nb-accordion-item",9),g.Fc(14,Cn,7,4,"nb-accordion-item",9),g.Fc(15,In,7,4,"nb-accordion-item",9),g.Wb(),g.Xb(16,"button",10),g.Hc(17," Nazad "),g.Wb(),g.Xb(18,"button",11),g.fc("click",(function(){g.zc(n);var e=g.xc(9);return t.validateInformation(e)})),g.Hc(19," Dalje "),g.Wb(),g.Wb(),g.Sb(20,"nb-step",12),g.Wb()}2&e&&(g.Eb(7),g.pc("ngIf",t.operations.specialWaste),g.Eb(1),g.pc("nbSpinner",t.loading),g.Eb(2),g.pc("ngIf",t.operations.production),g.Eb(1),g.pc("ngIf",t.operations.transport),g.Eb(1),g.pc("ngIf",t.operations.collector),g.Eb(1),g.pc("ngIf",t.operations.treatment),g.Eb(1),g.pc("ngIf",t.operations.disposal),g.Eb(1),g.pc("ngIf",t.operations.cache))},directives:[w.zb,w.yb,c.m,w.g,w.wb,w.t,l.d,w.x,w.w,w.i,w.j,w.N,w.h,Kt,rn,Xt],styles:[".error-message[_ngcontent-%COMP%]{color:#ff3d71}nb-accordion-item[_ngcontent-%COMP%]{background-color:transparent}nb-accordion-item-header[_ngcontent-%COMP%]{background-color:hsla(0,0%,47.1%,.05);border-radius:10px;margin-bottom:5px}nb-accordion[_ngcontent-%COMP%]{box-shadow:none}nb-accordion[_ngcontent-%COMP%], nb-accordion-item-body[_ngcontent-%COMP%]{background-color:transparent}"]}),wn);function jn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Ime je obavezno! "),g.Wb())}function xn(e,t){if(1&e&&(g.Xb(0,"p",44),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" Ime mora da bude du\u017ee od ",n.getConfigValue("forms.validation.ime.minLength")," ")}}function On(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Ime mora biti validno! "),g.Wb())}function Nn(e,t){if(1&e&&(g.Vb(0),g.Fc(1,jn,2,0,"p",43),g.Fc(2,xn,2,1,"p",43),g.Fc(3,On,2,0,"p",43),g.Ub()),2&e){g.jc();var n=g.xc(11);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength)),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function Fn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Prezime je obavezno! "),g.Wb())}function zn(e,t){if(1&e&&(g.Xb(0,"p",44),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" Prezime mora da bude du\u017ee od ",n.getConfigValue("forms.validation.prezime.minLength")," ")}}function Hn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Prezime mora biti validno! "),g.Wb())}function Sn(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Fn,2,0,"p",43),g.Fc(2,zn,2,1,"p",43),g.Fc(3,Hn,2,0,"p",43),g.Ub()),2&e){g.jc();var n=g.xc(17);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.minlength),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function Pn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Korisni\u010dko ime je obavezno! "),g.Wb())}function Vn(e,t){if(1&e&&(g.Xb(0,"p",44),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" Korisni\u010dko ime mora biti du\u017ee od ",n.getConfigValue("forms.validation.korisnickoIme.minLength"),"! ")}}function Rn(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Pn,2,0,"p",43),g.Fc(2,Vn,2,1,"p",43),g.Ub()),2&e){g.jc();var n=g.xc(24);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function Tn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Telefon je obavezan! "),g.Wb())}function qn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Telefon mora biti validan! "),g.Wb())}function Ln(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Tn,2,0,"p",43),g.Fc(2,qn,2,0,"p",43),g.Ub()),2&e){g.jc();var n=g.xc(30);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function _n(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Email je obavezan! "),g.Wb())}function $n(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Email mora biti validan! "),g.Wb())}function Un(e,t){if(1&e&&(g.Vb(0),g.Fc(1,_n,2,0,"p",43),g.Fc(2,$n,2,0,"p",43),g.Ub()),2&e){g.jc();var n=g.xc(37);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function An(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," \u0160ifra je obavezna! "),g.Wb())}function Dn(e,t){if(1&e&&(g.Xb(0,"p",44),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" \u0160ifra ne sme biti kra\u0107a od ",n.getConfigValue("forms.validation.password.minLength"),"! ")}}function Bn(e,t){if(1&e&&(g.Vb(0),g.Fc(1,An,2,0,"p",43),g.Fc(2,Dn,2,1,"p",43),g.Ub()),2&e){g.jc();var n=g.xc(46);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function Kn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," Ponovna \u0161ifra je obavezna! "),g.Wb())}function Zn(e,t){1&e&&(g.Xb(0,"p",44),g.Hc(1," \u0160ifra se ne poklapa sa ve\u0107 upisanom \u0161ifrom! "),g.Wb())}function Jn(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Kn,2,0,"p",43),g.Fc(2,Zn,2,0,"p",43),g.Ub()),2&e){g.jc();var n=g.xc(55),i=g.xc(46);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",i.value!==n.value)}}function Yn(e,t){if(1&e&&(g.Xb(0,"nb-card",30),g.Xb(1,"nb-card-body",31),g.Hc(2),g.Wb(),g.Wb()),2&e){g.jc();var n=g.xc(28),i=g.xc(54);g.Eb(2),g.Jc(" Ako se bavite ",n.checked||i.checked?"tretmanom":"odlaganjem"," otpada, automatski postajete i proizvo\u0111a\u010d otpada. :) ")}}function Gn(e,t){1&e&&(g.Xb(0,"p",42),g.Hc(1," Ime zakonskog zastupnika je obavezno! "),g.Wb())}function Qn(e,t){if(1&e&&(g.Xb(0,"p",42),g.Hc(1),g.Wb()),2&e){var n=g.jc(3);g.Eb(1),g.Jc(" Ime zakonskog zastupnika mora biti du\u017ee od ",n.getConfigValue("forms.validation.firstName.minLength")," slova! ")}}function ei(e,t){if(1&e&&(g.Vb(0),g.Fc(1,Gn,2,0,"p",41),g.Fc(2,Qn,2,1,"p",41),g.Ub()),2&e){g.jc();var n=g.xc(12);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function ti(e,t){1&e&&(g.Xb(0,"p",42),g.Hc(1," Prezime zakonskog zastupnika je obavezno! "),g.Wb())}function ni(e,t){if(1&e&&(g.Xb(0,"p",42),g.Hc(1),g.Wb()),2&e){var n=g.jc(3);g.Eb(1),g.Jc(" Prezime zakonskog zastupnika mora biti du\u017ee od ",n.getConfigValue("forms.validation.lastName.minLength")," slova! ")}}function ii(e,t){if(1&e&&(g.Vb(0),g.Fc(1,ti,2,0,"p",41),g.Fc(2,ni,2,1,"p",41),g.Ub()),2&e){g.jc();var n=g.xc(18);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function ai(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",32),g.Xb(1,"nb-card",9),g.Xb(2,"nb-card-header"),g.Hc(3," Lice zadu\u017eeno za upravljanje otpadom: "),g.Xb(4,"p",33),g.Hc(5," Ako se bavite otpadom/posebnim tokovima otpada morate imati odre\u0111eno lice za upravaljanje otpadom, ako \u017eelite da odaberete da mi to radimo ostavite sebe pa kasnije u aplikaciji mo\u0107i \u0107ete da promenite. "),g.Wb(),g.Wb(),g.Xb(6,"nb-card-body"),g.Xb(7,"div",5),g.Xb(8,"div",8),g.Xb(9,"label",34),g.Hc(10,"Ime:"),g.Wb(),g.Xb(11,"input",35,36),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().company.wasteManager.firstName=e})),g.Wb(),g.Fc(13,ei,3,2,"ng-container",37),g.Wb(),g.Xb(14,"div",8),g.Xb(15,"label",38),g.Hc(16,"Prezime:"),g.Wb(),g.Xb(17,"input",39,40),g.fc("ngModelChange",(function(e){return g.zc(n),g.jc().company.wasteManager.lastName=e})),g.Wb(),g.Fc(19,ii,3,2,"ng-container",37),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=g.xc(12),a=g.xc(18),o=g.jc();g.Eb(11),g.pc("ngModel",o.company.wasteManager.firstName)("maxlength",o.getConfigValue("forms.validation.firstName.maxLength"))("minlength",o.getConfigValue("forms.validation.firstName.minLength"))("required",o.getConfigValue("forms.validation.firstName.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched),g.Eb(4),g.pc("ngModel",o.company.wasteManager.lastName)("maxlength",o.getConfigValue("forms.validation.lastName.maxLength"))("minlength",o.getConfigValue("forms.validation.lastName.minLength"))("required",o.getConfigValue("forms.validation.lastName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),g.Eb(2),g.pc("ngIf",a.invalid&&a.touched)}}function oi(e,t){if(1&e&&(g.Xb(0,"button",29),g.Hc(1),g.Wb()),2&e){var n=t.$implicit;g.Eb(1),g.Ic(n)}}function ri(e,t){1&e&&(g.Xb(0,"p",23),g.Hc(1," \u0160ifra je obavezna! "),g.Wb())}function ci(e,t){if(1&e&&(g.Xb(0,"p",23),g.Hc(1),g.Wb()),2&e){var n=g.jc(2);g.Eb(1),g.Jc(" \u0160ifra ne sme biti kra\u0107a od ",n.getConfigValue("forms.validation.password.minLength"),"! ")}}function si(e,t){if(1&e&&(g.Vb(0),g.Fc(1,ri,2,0,"p",22),g.Fc(2,ci,2,1,"p",22),g.Ub()),2&e){g.jc();var n=g.xc(12);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function li(e,t){1&e&&(g.Xb(0,"p",23),g.Hc(1," Ponovna \u0161ifra je obavezna! "),g.Wb())}function ui(e,t){1&e&&(g.Xb(0,"p",23),g.Hc(1," \u0160ifra se ne poklapa sa ve\u0107 upisanom \u0161ifrom! "),g.Wb())}function bi(e,t){if(1&e&&(g.Vb(0),g.Fc(1,li,2,0,"p",22),g.Fc(2,ui,2,0,"p",22),g.Ub()),2&e){g.jc();var n=g.xc(23),i=g.xc(12);g.Eb(1),g.pc("ngIf",null==n.errors?null:n.errors.required),g.Eb(1),g.pc("ngIf",i.value!==n.value)}}var di,pi,gi,fi,mi,hi,vi=[{path:"",component:M.c,children:[{path:"login",component:A},{path:"register-user",component:(fi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;_classCallCheck(this,e),this.options=t,this.registerService=n,this.router=i,this.toastrService=a,this.showPassword="eye",this.checkIssues=!1,this.user={email:"",firstName:"",lastName:"",password:"",phone:"",role:"manager",username:"",company:null}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.registerService.getUser().pipe(Object(Z.a)()).subscribe((function(t){void 0!==t&&(e.user=t)})),this.registerService.sendUser(Object(d.a)(this.user))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"validateUser",value:function(e){return Object(te.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.invalid){t.next=2;break}return t.abrupt("return",(this.checkIssues=!0,this.showToast("Gre\u0161ka","Ispravite gre\u0161ke da bi ste nastavili.","warning"),!1));case 2:return n="",t.next=5,Promise.all(this.registerService.checkUser(this.user)).then((function(e){return n=e[0]?n:"to korisni\u010dko ime",n=e[1]?n:"taj telefon",n=e[2]?n:"taj email",e[0]&&e[1]&&e[2]}));case 5:if(t.sent){t.next=7;break}return t.abrupt("return",(this.checkIssues=!0,void this.showToast("Gre\u0161ka","Ve\u0107 postoji ".concat(n,"!"),"danger")));case 7:e.valid&&this.retypePassword===this.user.password?this.router.navigate(["auth/register-company"]):(this.checkIssues=!0,this.showToast("Gre\u0161ka","Ispravite gre\u0161ke da bi ste nastavili.","warning"));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"showToast",value:function(e,t,n){this.toastrService.show(t,e,{status:n})}}]),e}(),fi.\u0275fac=function(e){return new(e||fi)(g.Rb(M.a),g.Rb(k),g.Rb(l.c),g.Rb(w.Kb))},fi.\u0275cmp=g.Lb({type:fi,selectors:[["register-user"]],decls:68,vars:51,consts:[[1,"text-center"],["disableStepNavigation",""],["label","Korisnik"],["tabindex","-1"],["userForm","ngForm"],[1,"row","mb-2"],[1,"col-6"],["for","input-firstName",1,"label"],["autofocus","","tabindex","1","fullWidth","","id","input-firstName","name","firstName","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","placeholder","Ime",3,"ngModel","maxlength","minlength","pattern","required","status","ngModelChange"],["firstName","ngModel"],[4,"ngIf"],["for","input-lastName",1,"label"],["fullWidth","","id","input-lastName","tabindex","2","name","lastName","nbInput","","onkeypress","return /[a-zA-Z\u0161\u0111\u017e\u0107\u010d\u0160\u0110\u017d\u0106\u010c\\-]/i.test(event.key)","placeholder","Prezime",3,"ngModel","maxlength","minlength","pattern","required","status","ngModelChange"],["lastName","ngModel"],["for","input-username",1,"label"],["tabindex","3","fullWidth","","id","input-username","name","username","nbInput","","placeholder","Korisni\u010dko ime",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["username","ngModel"],["for","input-phone",1,"label"],["tabindex","4","fullWidth","","id","input-phone","name","phone","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","Telefon",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["phone","ngModel"],[1,"col-12"],["for","input-email",1,"label"],["tabindex","5","fullWidth","","id","input-email","name","email","nbInput","","placeholder","Email",3,"ngModel","pattern","required","status","ngModelChange"],["email","ngModel"],["for","input-password",1,"label","col-12"],[1,"row"],[1,"col-10","pr-0"],["tabindex","6","fullWidth","","id","input-password","name","password","nbInput","","placeholder","\u0160ifra",3,"ngModel","maxlength","minlength","required","status","type","ngModelChange"],["password","ngModel"],[1,"col-2","pl-0"],["fullWidth","","tabindex","-1","nbButton","","type","button",3,"click"],[3,"icon"],["for","input-rePassword",1,"label"],["fullWidth","","id","input-rePassword","name","rePass","tabindex","7","nbInput","","placeholder","Potvrdi \u0161ifru",3,"ngModel","required","status","type","ngModelChange"],["retypePasswordModel","ngModel"],["nbButton","","fullWidth","","status","success","tabindex","8","type","submit",1,"mt-2",3,"click"],["label","Firma"],["label","Operacije"],["label","Informacije"],["label","Potvrda"],[1,"container-fluid"],["aria-label","Uloguj se",1,"text-center","my-2"],["routerLink","../login",1,"text-link"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e){var n=g.Yb();g.Xb(0,"h1",0),g.Hc(1,"Registruj se!"),g.Wb(),g.Xb(2,"nb-stepper",1),g.Xb(3,"nb-step",2),g.Xb(4,"form",3,4),g.Xb(6,"div",5),g.Xb(7,"div",6),g.Xb(8,"label",7),g.Hc(9,"Ime:"),g.Wb(),g.Xb(10,"input",8,9),g.fc("ngModelChange",(function(e){return t.user.firstName=e})),g.Wb(),g.Fc(12,Nn,4,3,"ng-container",10),g.Wb(),g.Xb(13,"div",6),g.Xb(14,"label",11),g.Hc(15,"Prezime:"),g.Wb(),g.Xb(16,"input",12,13),g.fc("ngModelChange",(function(e){return t.user.lastName=e})),g.Wb(),g.Fc(18,Sn,4,3,"ng-container",10),g.Wb(),g.Wb(),g.Xb(19,"div",5),g.Xb(20,"div",6),g.Xb(21,"label",14),g.Hc(22,"Korisni\u010dko ime:"),g.Wb(),g.Xb(23,"input",15,16),g.fc("ngModelChange",(function(e){return t.user.username=e})),g.Wb(),g.Fc(25,Rn,3,2,"ng-container",10),g.Wb(),g.Xb(26,"div",6),g.Xb(27,"label",17),g.Hc(28,"Telefon:"),g.Wb(),g.Xb(29,"input",18,19),g.fc("ngModelChange",(function(e){return t.user.phone=e})),g.Wb(),g.Fc(31,Ln,3,2,"ng-container",10),g.Wb(),g.Wb(),g.Xb(32,"div",5),g.Xb(33,"div",20),g.Xb(34,"label",21),g.Hc(35,"Email:"),g.Wb(),g.Xb(36,"input",22,23),g.fc("ngModelChange",(function(e){return t.user.email=e})),g.Wb(),g.Fc(38,Un,3,2,"ng-container",10),g.Wb(),g.Wb(),g.Xb(39,"div",5),g.Xb(40,"div",6),g.Xb(41,"label",24),g.Hc(42,"\u0160ifra:"),g.Wb(),g.Xb(43,"div",25),g.Xb(44,"div",26),g.Xb(45,"input",27,28),g.fc("ngModelChange",(function(e){return t.user.password=e})),g.Wb(),g.Wb(),g.Xb(47,"div",29),g.Xb(48,"button",30),g.fc("click",(function(){return t.showPassword="eye"===t.showPassword?"eye-off":"eye"})),g.Sb(49,"nb-icon",31),g.Wb(),g.Wb(),g.Wb(),g.Fc(50,Bn,3,2,"ng-container",10),g.Wb(),g.Xb(51,"div",6),g.Xb(52,"label",32),g.Hc(53,"Ponovi \u0161ifru:"),g.Wb(),g.Xb(54,"input",33,34),g.fc("ngModelChange",(function(e){return t.retypePassword=e})),g.Wb(),g.Fc(56,Jn,3,2,"ng-container",10),g.Wb(),g.Wb(),g.Xb(57,"button",35),g.fc("click",(function(){g.zc(n);var e=g.xc(5);return t.validateUser(e)})),g.Hc(58," Dalje "),g.Wb(),g.Wb(),g.Wb(),g.Sb(59,"nb-step",36),g.Sb(60,"nb-step",37),g.Sb(61,"nb-step",38),g.Sb(62,"nb-step",39),g.Wb(),g.Xb(63,"div",40),g.Xb(64,"section",41),g.Hc(65," Ve\u0107 imate nalog? "),g.Xb(66,"a",42),g.Hc(67,"Uloguj se"),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=g.xc(11),a=g.xc(17),o=g.xc(24),r=g.xc(30),c=g.xc(37),s=g.xc(46),l=g.xc(55);g.Eb(10),g.pc("ngModel",t.user.firstName)("maxlength",t.getConfigValue("forms.validation.firstName.maxLength"))("minlength",t.getConfigValue("forms.validation.firstName.minLength"))("pattern",t.getConfigValue("forms.validation.firstName.pattern"))("required",t.getConfigValue("forms.validation.firstName.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.user.lastName)("maxlength",t.getConfigValue("forms.validation.lastName.maxLength"))("minlength",t.getConfigValue("forms.validation.lastName.minLength"))("pattern",t.getConfigValue("forms.validation.lastName.pattern"))("required",t.getConfigValue("forms.validation.lastName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),g.Eb(2),g.pc("ngIf",a.invalid&&a.touched||t.checkIssues),g.Eb(5),g.pc("ngModel",t.user.username)("maxlength",t.getConfigValue("forms.validation.username.maxLength"))("minlength",t.getConfigValue("forms.validation.username.minLength"))("required",t.getConfigValue("forms.validation.username.required"))("status",o.dirty?o.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),g.Eb(2),g.pc("ngIf",o.invalid&&o.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.user.phone)("maxlength",t.getConfigValue("forms.validation.phone.maxLength"))("minlength",t.getConfigValue("forms.validation.phone.minLength"))("required",t.getConfigValue("forms.validation.phone.required"))("status",r.dirty?r.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),g.Eb(2),g.pc("ngIf",r.invalid&&r.touched||t.checkIssues),g.Eb(5),g.pc("ngModel",t.user.email)("pattern",t.getConfigValue("forms.validation.email.pattern"))("required",t.getConfigValue("forms.validation.email.required"))("status",c.dirty?c.invalid?"danger":"success":"basic"),g.Fb("aria-invalid",!(!c.invalid||!c.touched)||null),g.Eb(2),g.pc("ngIf",c.invalid&&c.touched||t.checkIssues),g.Eb(7),g.pc("ngModel",t.user.password)("maxlength",t.getConfigValue("forms.validation.password.maxLength"))("minlength",t.getConfigValue("forms.validation.password.minLength"))("required",t.getConfigValue("forms.validation.password.required"))("status",s.dirty?s.invalid?"danger":"success":"basic")("type","eye"===t.showPassword?"password":"text"),g.Fb("aria-invalid",!(!s.invalid||!s.touched)||null),g.Eb(4),g.pc("icon",t.showPassword),g.Eb(1),g.pc("ngIf",s.invalid&&s.touched||t.checkIssues),g.Eb(4),g.pc("ngModel",t.retypePassword)("required",t.getConfigValue("forms.validation.password.required"))("status",l.dirty?l.invalid||s.value!==l.value?"danger":"success":"basic")("type","eye"===t.showPassword?"password":"text"),g.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),g.Eb(2),g.pc("ngIf",l.invalid&&s.touched||t.checkIssues)}},directives:[w.zb,w.yb,s.w,s.l,s.m,w.Q,s.b,s.k,s.n,s.f,s.g,s.q,s.s,c.m,w.t,w.N,l.f],styles:[".error-message[_ngcontent-%COMP%]{color:#ff3d71}"]}),fi)},{path:"register-company",component:Qe},{path:"register-operations",component:(gi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;_classCallCheck(this,e),this.options=t,this.registerService=n,this.toastrService=i,this.router=a,this.trashIco={icon:"trash",pack:"solid"},this.carBatteryIco={icon:"car-battery",pack:"solid"},this.recyleIco={icon:"recycle",pack:"solid"},this.waterIco={icon:"water",pack:"solid"},this.airIco={icon:"wind",pack:"solid"},this.trashOperationsNo=0,this.specialWasteNo=0,this.packageOperationsNo=0,this.waterOperationsNo=0,this.airOperationsNo=0,this.operations=[],this.company={wasteManager:{firstName:"",lastName:""},address:{location:void 0,street:""},email:"",emailReception:"",legalRep:{firstName:"",lastName:""},manager:"",mat:"",name:"",nriz:{password:"",username:""},occupation:void 0,operations:[],pib:"",telephone:""}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.registerService.getOperations().pipe(Object(Z.a)()).subscribe((function(t){void 0!==t&&(e.operations=t,e.updateOperations())})),this.registerService.getCompany().pipe(Object(Z.a)()).subscribe((function(t){e.company=t})),this.registerService.getUser().pipe(Object(Z.a)()).subscribe((function(t){e.company.wasteManager.firstName=t.firstName,e.company.wasteManager.lastName=t.lastName})),this.registerService.sendCompany(Object(d.a)(this.company)),this.registerService.sendOperations(Object(d.a)(this.operations))}},{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"validateOperations",value:function(){this.trashOperationNumber(!0)+this.specialWasteOperationNumber(!0)===0&&(this.company.wasteManager.firstName="",this.company.wasteManager.lastName=""),this.operations.length>0?this.router.navigate(["auth/register-informations"]):this.showToast("Gre\u0161ka","Odaberite bar jednu operaciju da biste nastavili.","warning")}},{key:"showToast",value:function(e,t,n){this.toastrService.show(t,e,{status:n})}},{key:"trashOperationNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.operations.filter((function(e){return e.toLowerCase().includes("neopasnog")||e.toLowerCase().includes("opasnog")})).length:this.operations.filter((function(e){return e.toLowerCase().includes("neopasnog")||e.toLowerCase().includes("opasnog")})).length+""}},{key:"specialWasteOperationNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.operations.filter((function(e){return e.toLowerCase().includes("tokova")})).length:this.operations.filter((function(e){return e.toLowerCase().includes("tokova")})).length+""}},{key:"updateOperations",value:function(){this.trashOperationsNo=this.operations.filter((function(e){return e.toLowerCase().includes("neopasnog")||e.toLowerCase().includes("opasnog")})).length,this.specialWasteNo=this.operations.filter((function(e){return e.toLowerCase().includes("tokova")})).length}},{key:"addProcessOperation",value:function(e,t,n){this.addOperation(e,t),n.checked||(n.checked=!0),n.disabled||n.setDisabledState(!0),e.includes("Neopasnog")?this.addOperation("Proizvodnja Neopasnog Otpada",t,!1):this.addOperation("Proizvodnja Opasnog Otpada",t,!1)}},{key:"addOperation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t?this.operations.includes(e)||this.operations.push(e):n&&this.operations.splice(this.operations.findIndex((function(t){return t===e})),1)}}]),e}(),gi.\u0275fac=function(e){return new(e||gi)(g.Rb(M.a),g.Rb(k),g.Rb(w.Kb),g.Rb(l.c))},gi.\u0275cmp=g.Lb({type:gi,selectors:[["register-operations"]],decls:89,vars:26,consts:[[1,"text-center"],["disableStepNavigation","","selectedIndex","2"],["label","Korisnik","completed","true"],["label","Firma","completed","true"],["label","Operacije"],[1,"row"],["badgeStatus","primary","responsive","true","tabTitle","Otpad",3,"badgeText","tabIcon"],[1,"row","pb-0","mb-0"],[1,"col-6"],[1,"col-12"],[1,"mx-1",3,"checked","disabled","checkedChange"],["ProizvodnjaNeopasnogOtpada",""],[1,"mx-1",3,"checked","checkedChange"],["SakupljacNeopasnogOtpada",""],["TretmanNeopasnogOtpada",""],["OdlaganjeNeopasnogOtpada",""],["ProizvodnjaOpasnogOtpada",""],["SakupljacOpasnogOtpada",""],["TretmanOpasnogOtpada",""],["OdlaganjeOpasnogOtpada",""],["class","row mt-0 pt-0 bg-warning",4,"ngIf"],["badgeStatus","primary","responsive","true","tabTitle","Posebni tokovi otpada",3,"badgeText","tabIcon"],["responsive","true","tabTitle","Ambalaze",3,"tabIcon"],["responsive","true","tabTitle","Emisije u vode",3,"tabIcon"],["responsive","true","tabTitle","Emisije u vazduh",3,"tabIcon"],["class","row flex-fill ml-3","style","max-width: 54.5vw;",4,"ngIf"],["nbButton","","fullWidth","","status","danger","routerLink","../register-company",1,"mt-2","col-6"],["nbButton","","fullWidth","","status","success","type","submit",1,"col-6","mt-2",3,"click"],["label","Informacije"],["lable","Potvrda"],[1,"row","mt-0","pt-0","bg-warning"],[1,"mt-0"],[1,"row","flex-fill","ml-3",2,"max-width","54.5vw"],[1,"card-subtitle","text-secondary","mt-1"],["for","input-fNameManager",1,"label"],["fullWidth","","id","input-fNameManager","name","fNameManager","nbInput","","placeholder","Ime",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["fNameManager","ngModel"],[4,"ngIf"],["for","input-lNameManager",1,"label"],["fullWidth","","id","input-lNameManager","name","lNameManager","nbInput","","placeholder","Prezime",3,"ngModel","maxlength","minlength","required","status","ngModelChange"],["lNameManager","ngModel"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e){var n=g.Yb();g.Xb(0,"h1",0),g.Hc(1,"Registruj se!"),g.Wb(),g.Xb(2,"nb-stepper",1),g.Xb(3,"nb-step",2),g.Hc(4,"Test"),g.Wb(),g.Sb(5,"nb-step",3),g.Xb(6,"nb-step",4),g.Xb(7,"div",5),g.Xb(8,"nb-tabset"),g.Xb(9,"nb-tab",6),g.Xb(10,"div",7),g.Xb(11,"nb-card",8),g.Xb(12,"nb-card-header"),g.Hc(13,"Neopasan otpad"),g.Wb(),g.Xb(14,"nb-card-body"),g.Xb(15,"div",9),g.Xb(16,"nb-toggle",10,11),g.fc("checkedChange",(function(e){return t.addOperation("Proizvodnja Neopasnog Otpada",e)})),g.Hc(18,"Proizvodnja "),g.Wb(),g.Wb(),g.Xb(19,"div",9),g.Xb(20,"nb-toggle",12),g.fc("checkedChange",(function(e){return t.addOperation("Transport Neopasnog Otpada",e)})),g.Hc(21,"Transport "),g.Wb(),g.Wb(),g.Xb(22,"div",9),g.Xb(23,"nb-toggle",12,13),g.fc("checkedChange",(function(e){return t.addOperation("Sakupljac Neopasnog Otpada",e)})),g.Hc(25," Sakuplja\u010d "),g.Wb(),g.Wb(),g.Xb(26,"div",9),g.Xb(27,"nb-toggle",12,14),g.fc("checkedChange",(function(e){g.zc(n);var i=g.xc(17);return t.addProcessOperation("Tretman Neopasnog Otpada",e,i)})),g.Hc(29,"Tretman "),g.Wb(),g.Wb(),g.Xb(30,"div",9),g.Xb(31,"nb-toggle",12,15),g.fc("checkedChange",(function(e){g.zc(n);var i=g.xc(17);return t.addProcessOperation("Odlaganje Neopasnog Otpada",e,i)})),g.Hc(33,"Odlaganje "),g.Wb(),g.Wb(),g.Xb(34,"div",9),g.Xb(35,"nb-toggle",12),g.fc("checkedChange",(function(e){return t.addOperation("Skladi\u0161tenje Neopasnog Otpada",e)})),g.Hc(36," Skladi\u0161tenje "),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(37,"nb-card",8),g.Xb(38,"nb-card-header"),g.Hc(39,"Opasan otpad"),g.Wb(),g.Xb(40,"nb-card-body"),g.Xb(41,"div",9),g.Xb(42,"nb-toggle",10,16),g.fc("checkedChange",(function(e){return t.addOperation("Proizvodnja Opasnog Otpada",e)})),g.Hc(44," Proizvodnja "),g.Wb(),g.Wb(),g.Xb(45,"div",9),g.Xb(46,"nb-toggle",12),g.fc("checkedChange",(function(e){return t.addOperation("Transport Opasnog Otpada",e)})),g.Hc(47,"Transport "),g.Wb(),g.Wb(),g.Xb(48,"div",9),g.Xb(49,"nb-toggle",12,17),g.fc("checkedChange",(function(e){return t.addOperation("Sakupljac Opasnog Otpada",e)})),g.Hc(51," Sakuplja\u010d "),g.Wb(),g.Wb(),g.Xb(52,"div",9),g.Xb(53,"nb-toggle",12,18),g.fc("checkedChange",(function(e){g.zc(n);var i=g.xc(43);return t.addProcessOperation("Tretman Opasnog Otpada",e,i)})),g.Hc(55,"Tretman "),g.Wb(),g.Wb(),g.Xb(56,"div",9),g.Xb(57,"nb-toggle",12,19),g.fc("checkedChange",(function(e){g.zc(n);var i=g.xc(43);return t.addProcessOperation("Odlaganje Opasnog Otpada",e,i)})),g.Hc(59,"Odlaganje "),g.Wb(),g.Wb(),g.Xb(60,"div",9),g.Xb(61,"nb-toggle",12),g.fc("checkedChange",(function(e){return t.addOperation("Skladi\u0161tenje Opasnog Otpada",e)})),g.Hc(62," Skladi\u0161tenje "),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Fc(63,Yn,3,1,"nb-card",20),g.Wb(),g.Xb(64,"nb-tab",21),g.Xb(65,"div",7),g.Xb(66,"nb-card",9),g.Xb(67,"nb-card-header"),g.Hc(68,"Posebni tokovi otpada"),g.Wb(),g.Xb(69,"nb-card-body"),g.Xb(70,"div",9),g.Xb(71,"nb-toggle",12),g.fc("checkedChange",(function(e){return t.addOperation("Proizvodnja Posebnih Tokova Otpada",e)})),g.Hc(72,"Proizvodnja "),g.Wb(),g.Wb(),g.Xb(73,"div",9),g.Xb(74,"nb-toggle",12),g.fc("checkedChange",(function(e){return t.addOperation("Uvoz Posebnih Tokova Otpada",e)})),g.Hc(75,"Uvoz "),g.Wb(),g.Wb(),g.Xb(76,"div",9),g.Xb(77,"nb-toggle",12),g.fc("checkedChange",(function(e){return t.addOperation("Izvoz Posebnih Tokova Otpada",e)})),g.Hc(78,"Izvoz "),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Sb(79,"nb-tab",22),g.Sb(80,"nb-tab",23),g.Sb(81,"nb-tab",24),g.Wb(),g.Fc(82,ai,20,14,"div",25),g.Wb(),g.Xb(83,"button",26),g.Hc(84," Nazad "),g.Wb(),g.Xb(85,"button",27),g.fc("click",(function(){return t.validateOperations()})),g.Hc(86," Dalje "),g.Wb(),g.Wb(),g.Sb(87,"nb-step",28),g.Sb(88,"nb-step",29),g.Wb()}if(2&e){var i=g.xc(17),a=g.xc(28),o=g.xc(32),r=g.xc(43),c=g.xc(54),s=g.xc(58);g.Eb(9),g.pc("badgeText",t.trashOperationNumber())("tabIcon",t.trashIco),g.Eb(7),g.pc("checked",t.operations.includes("Proizvodnja Neopasnog Otpada"))("disabled",a.checked||o.checked),g.Eb(4),g.pc("checked",t.operations.includes("Transport Neopasnog Otpada")),g.Eb(3),g.pc("checked",t.operations.includes("Sakupljac Neopasnog Otpada")),g.Eb(4),g.pc("checked",t.operations.includes("Tretman Neopasnog Otpada")),g.Eb(4),g.pc("checked",t.operations.includes("Odlaganje Neopasnog Otpada")),g.Eb(4),g.pc("checked",t.operations.includes("Skladi\u0161tenje Neopasnog Otpada")),g.Eb(7),g.pc("checked",t.operations.includes("Proizvodnja Opasnog Otpada"))("disabled",c.checked||s.checked),g.Eb(4),g.pc("checked",t.operations.includes("Transport Opasnog Otpada")),g.Eb(3),g.pc("checked",t.operations.includes("Sakupljac Opasnog Otpada")),g.Eb(4),g.pc("checked",t.operations.includes("Tretman Opasnog Otpada")),g.Eb(4),g.pc("checked",t.operations.includes("Odlaganje Opasnog Otpada")),g.Eb(4),g.pc("checked",t.operations.includes("Skladi\u0161tenje Opasnog Otpada")),g.Eb(2),g.pc("ngIf",r.disabled||i.disabled),g.Eb(1),g.pc("badgeText",t.specialWasteOperationNumber())("tabIcon",t.carBatteryIco),g.Eb(7),g.pc("checked",t.operations.includes("Proizvodnja Posebnih Tokova Otpada")),g.Eb(3),g.pc("checked",t.operations.includes("Uvoz Posebnih Tokova Otpada")),g.Eb(3),g.pc("checked",t.operations.includes("Izvoz Posebnih Tokova Otpada")),g.Eb(2),g.pc("tabIcon",t.recyleIco),g.Eb(1),g.pc("tabIcon",t.waterIco),g.Eb(1),g.pc("tabIcon",t.airIco),g.Eb(1),g.pc("ngIf",t.trashOperationNumber(!0)+0+(t.specialWasteOperationNumber(!0)+0)>0)}},directives:[w.zb,w.yb,w.Fb,w.Eb,w.x,w.A,w.w,w.Lb,c.m,w.t,l.d,w.Q,s.b,s.k,s.n,s.f,s.g,s.s],styles:[""]}),gi)},{path:"register-informations/:tab",component:En,pathMatch:"full"},{path:"register-informations",component:En,pathMatch:"full"},{path:"register-permit",component:ee},{path:"register-confirmation",component:(pi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return _classCallCheck(this,n),(i=t.call(this,e,a,o,r)).service=e,i.options=a,i.cd=o,i.router=r,i.registerService=c,i.redirectDelay=0,i.showMessages=[],i.strategy="",i.submitted=!1,i.errors=[],i.messages=[],i.redirectDelay=i.getConfigValue("forms.register.redirectDelay"),i.showMessages=i.getConfigValue("forms.register.showMessages"),i.strategy=i.getConfigValue("forms.register.strategy"),i}return _createClass(n,[{key:"getConfigValue",value:function(e){return Object(M.n)(this.options,e,null)}},{key:"ngAfterViewInit",value:function(){this.operations$=this.registerService.getOperations(),this.company$=this.registerService.getCompany(),this.user$=this.registerService.getUser()}},{key:"register",value:function(){var e,t=this;this.errors=this.messages=[],this.submitted=!0,this.user$.subscribe((function(t){e=t})),this.service.register(this.strategy,e).subscribe((function(e){t.submitted=!1,e.isSuccess()?t.messages=e.getMessages():t.errors=e.getErrors();var n=e.getRedirect();n&&setTimeout((function(){return t.registerService.clearData(),t.router.navigateByUrl(n)}),t.redirectDelay),t.cd.detectChanges()}))}}]),n}(M.k),pi.\u0275fac=function(e){return new(e||pi)(g.Rb(M.g),g.Rb(M.a),g.Rb(g.h),g.Rb(l.c),g.Rb(k))},pi.\u0275cmp=g.Lb({type:pi,selectors:[["register-confirmation"]],features:[g.Bb],decls:168,vars:63,consts:[[1,"text-center"],["disableStepNavigation","","selectedIndex","4"],["label","User","completed","true"],["label","Firma","completed","true"],["label","Operacije","completed","true"],["label","Informacije","completed","true"],["label","Potvrda"],[1,"row"],[1,"col-4"],[1,"row","mb-2"],[1,"col-12"],[1,"text-muted"],["size","small","nbButton","","fullWidth","","outline","","status","info",1,"no-select"],["size","small","nbButton","","class","no-select rad-text mb-2","fullWidth","","outline","","status","warning",4,"ngFor","ngForOf"],[1,"col-8"],["size","small","nbButton","","fullWidth","","outline","","status","success",1,"no-select"],[1,"col-6"],[1,"col-6","mb-1"],[1,"email-text","p-0","m-0"],[3,"ngSubmit"],["nbButton","","fullWidth","","status","danger","routerLink","../register-informations",1,"mt-2","col-6"],["nbButton","","fullWidth","","status","success","type","submit",1,"col-6","mt-2",3,"disabled"],[1,"row","justify-content-center","mt-2","mb-2"],[1,"col-5","flex-fill"],["name","terms","required",""],["uslovi",""],["href","#","target","_blank"],["name","tacnost","required",""],["tacnost",""],["size","small","nbButton","","fullWidth","","outline","","status","warning",1,"no-select","rad-text","mb-2"]],template:function(e,t){if(1&e&&(g.Xb(0,"h1",0),g.Hc(1,"Registruj se!"),g.Wb(),g.Xb(2,"nb-stepper",1),g.Xb(3,"nb-step",2),g.Hc(4,"Test"),g.Wb(),g.Sb(5,"nb-step",3),g.Sb(6,"nb-step",4),g.Sb(7,"nb-step",5),g.Xb(8,"nb-step",6),g.Xb(9,"div",7),g.Xb(10,"div",8),g.Xb(11,"div",9),g.Xb(12,"h5"),g.Hc(13,"User:"),g.Wb(),g.Wb(),g.Xb(14,"div",9),g.Xb(15,"div",10),g.Xb(16,"label",11),g.Hc(17,"Ime:"),g.Wb(),g.Wb(),g.Xb(18,"div",10),g.Xb(19,"button",12),g.Hc(20),g.kc(21,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(22,"div",9),g.Xb(23,"div",10),g.Xb(24,"label",11),g.Hc(25,"Prezime:"),g.Wb(),g.Wb(),g.Xb(26,"div",10),g.Xb(27,"button",12),g.Hc(28),g.kc(29,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(30,"div",9),g.Xb(31,"div",10),g.Xb(32,"label",11),g.Hc(33,"Telefon:"),g.Wb(),g.Wb(),g.Xb(34,"div",10),g.Xb(35,"button",12),g.Hc(36),g.kc(37,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(38,"div",9),g.Xb(39,"div",10),g.Xb(40,"label",11),g.Hc(41,"Email:"),g.Wb(),g.Wb(),g.Xb(42,"div",10),g.Xb(43,"button",12),g.Hc(44),g.kc(45,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(46,"div",9),g.Xb(47,"div",10),g.Xb(48,"label",11),g.Hc(49,"Korisni\u010dko ime:"),g.Wb(),g.Wb(),g.Xb(50,"div",10),g.Xb(51,"button",12),g.Hc(52),g.kc(53,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(54,"div",9),g.Xb(55,"h5"),g.Hc(56,"Rad firme:"),g.Wb(),g.Wb(),g.Xb(57,"div",9),g.Xb(58,"div",10),g.Fc(59,oi,2,1,"button",13),g.kc(60,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(61,"div",14),g.Xb(62,"div",10),g.Xb(63,"div",9),g.Xb(64,"h5"),g.Hc(65,"Firma:"),g.Wb(),g.Wb(),g.Xb(66,"div",9),g.Xb(67,"div",10),g.Xb(68,"label",11),g.Hc(69,"Naziv:"),g.Wb(),g.Wb(),g.Xb(70,"div",10),g.Xb(71,"button",15),g.Hc(72),g.kc(73,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(74,"div",9),g.Xb(75,"div",16),g.Xb(76,"label",11),g.Hc(77,"PIB:"),g.Wb(),g.Wb(),g.Xb(78,"div",16),g.Xb(79,"label",11),g.Hc(80,"Mati\u010dni broj:"),g.Wb(),g.Wb(),g.Xb(81,"div",16),g.Xb(82,"button",15),g.Hc(83),g.kc(84,"async"),g.Wb(),g.Wb(),g.Xb(85,"div",16),g.Xb(86,"button",15),g.Hc(87),g.kc(88,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(89,"div",9),g.Xb(90,"div",10),g.Xb(91,"label",11),g.Hc(92,"Adresa:"),g.Wb(),g.Xb(93,"button",15),g.Hc(94),g.kc(95,"async"),g.kc(96,"async"),g.kc(97,"async"),g.kc(98,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(99,"div",9),g.Xb(100,"div",10),g.Xb(101,"label",11),g.Hc(102,"Delatnost:"),g.Wb(),g.Wb(),g.Xb(103,"div",10),g.Xb(104,"button",15),g.Hc(105),g.kc(106,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(107,"div",9),g.Xb(108,"div",16),g.Xb(109,"label",11),g.Hc(110,"Email:"),g.Wb(),g.Wb(),g.Xb(111,"div",16),g.Xb(112,"label",11),g.Hc(113,"Telefon:"),g.Wb(),g.Wb(),g.Xb(114,"div",17),g.Xb(115,"button",15),g.Xb(116,"p",18),g.Hc(117),g.kc(118,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(119,"div",17),g.Xb(120,"button",15),g.Hc(121),g.kc(122,"async"),g.Wb(),g.Wb(),g.Xb(123,"div",16),g.Xb(124,"label",11),g.Hc(125,"Email za prijem dokumenata:"),g.Wb(),g.Wb(),g.Xb(126,"div",16),g.Xb(127,"label",11),g.Hc(128,"Faks:"),g.Wb(),g.Wb(),g.Xb(129,"div",16),g.Xb(130,"button",15),g.Xb(131,"p",18),g.Hc(132),g.kc(133,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(134,"div",16),g.Xb(135,"button",15),g.Hc(136),g.kc(137,"async"),g.kc(138,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(139,"div",9),g.Xb(140,"div",10),g.Xb(141,"label",11),g.Hc(142,"Zakonski zastupnik firme:"),g.Wb(),g.Wb(),g.Xb(143,"div",16),g.Xb(144,"button",15),g.Hc(145),g.kc(146,"async"),g.Wb(),g.Wb(),g.Xb(147,"div",16),g.Xb(148,"button",15),g.Hc(149),g.kc(150,"async"),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(151,"form",19),g.fc("ngSubmit",(function(){return t.register()})),g.Xb(152,"button",20),g.Hc(153," Nazad "),g.Wb(),g.Xb(154,"button",21),g.Hc(155," Zavr\u0161i "),g.Wb(),g.Wb(),g.Xb(156,"div",22),g.Xb(157,"div",23),g.Xb(158,"nb-checkbox",24,25),g.Hc(160," Sla\u017eem se sa "),g.Xb(161,"a",26),g.Xb(162,"strong"),g.Hc(163,"Uslovima Kori\u0161\u0107enjima"),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(164,"div",23),g.Xb(165,"nb-checkbox",27,28),g.Hc(167,"Potvr\u0111ujem da su sve unete informacije ta\u010dne "),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()),2&e){var n,i,a,o,r,c,s,l,u,b,d,p,f,m,h=g.xc(159),v=g.xc(166),y=null,W=null;g.Eb(20),g.Ic(null==(n=g.lc(21,21,t.user$))?null:n.firstName),g.Eb(8),g.Ic(null==(i=g.lc(29,23,t.user$))?null:i.lastName),g.Eb(8),g.Ic(null==(a=g.lc(37,25,t.user$))?null:a.phone),g.Eb(8),g.Ic(null==(o=g.lc(45,27,t.user$))?null:o.email),g.Eb(8),g.Ic(null==(r=g.lc(53,29,t.user$))?null:r.username),g.Eb(7),g.pc("ngForOf",g.lc(60,31,t.operations$)),g.Eb(13),g.Ic(null==(c=g.lc(73,33,t.company$))?null:c.name),g.Eb(11),g.Ic(null==(s=g.lc(84,35,t.company$))?null:s.pib),g.Eb(4),g.Ic(null==(l=g.lc(88,37,t.company$))?null:l.mat),g.Eb(7),g.Mc(" ",null==(y=g.lc(95,39,t.company$))?null:y.address.location.townshipName,", ",null==(y=g.lc(96,41,t.company$))?null:y.address.location.placeName,", ",null==(y=g.lc(97,43,t.company$))?null:y.address.street," ",null==(y=g.lc(98,45,t.company$))?null:y.address.location.zipCode,""),g.Eb(11),g.Ic(null==(u=g.lc(106,47,t.company$))?null:u.occupation.name),g.Eb(12),g.Ic(null==(b=g.lc(118,49,t.company$))?null:b.email),g.Eb(4),g.Ic(null==(d=g.lc(122,51,t.company$))?null:d.telephone),g.Eb(11),g.Ic(null==(p=g.lc(133,53,t.company$))?null:p.emailReception),g.Eb(4),g.Ic(""===(null==(W=g.lc(137,55,t.company$))?null:W.fax)?"/":null==(W=g.lc(138,57,t.company$))?null:W.fax),g.Eb(9),g.Ic(null==(f=g.lc(146,59,t.company$))?null:f.legalRep.firstName),g.Eb(4),g.Ic(null==(m=g.lc(150,61,t.company$))?null:m.legalRep.lastName),g.Eb(5),g.pc("disabled",!(h.checked&&v.checked))}},directives:[w.zb,w.yb,w.t,c.l,s.w,s.l,s.m,l.d,w.D],pipes:[c.b],styles:[".no-select[_ngcontent-%COMP%]{pointer-events:none}.email-text[_ngcontent-%COMP%]{color:#00d68f}.email-text[_ngcontent-%COMP%], .rad-text[_ngcontent-%COMP%]{overflow:hidden;font-size:.75rem;font-weight:700;white-space:nowrap;text-overflow:ellipsis}"]}),pi)},{path:"logout",component:B},{path:"email-confirm",component:I},{path:"forgot-password",component:N},{path:"reset-password",component:(di=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return _classCallCheck(this,n),(i=t.call(this,e,a,o,r)).service=e,i.options=a,i.cd=o,i.router=r,i.activatedRoute=c,i.showPassword="eye",i.password="",i.retypePassword="",i.token="",i.strategy=i.getConfigValue("forms.login.strategy"),i}return _createClass(n,[{key:"ngOnInit",value:function(){this.token=this.activatedRoute.snapshot.params.token}},{key:"resetPassword",value:function(e){var t=this;e.invalid||this.service.resetPassword(this.strategy,{password:this.password,token:this.token}).subscribe((function(e){t.router.navigate(["login"])}))}}]),n}(M.m),di.\u0275fac=function(e){return new(e||di)(g.Rb(M.g),g.Rb(M.a),g.Rb(g.h),g.Rb(l.c),g.Rb(l.a))},di.\u0275cmp=g.Lb({type:di,selectors:[["reset-password"]],features:[g.Bb],decls:30,vars:15,consts:[[1,"align-self-center"],[1,"mb-1","text-center"],[1,"mt-4",3,"ngSubmit"],["form","ngForm"],[1,"row","d-flex","justify-content-center"],[1,"col-8"],[1,"row","mb-2"],["for","input-password",1,"label","col-12"],[1,"col-10","pr-0"],["fullWidth","","id","input-password","name","password","nbInput","","placeholder","\u0160ifra",3,"ngModel","maxlength","minlength","required","status","type","ngModelChange"],["passwordModel","ngModel"],[1,"col-2","pl-0"],["fullWidth","","tabindex","-1","nbButton","","type","button",3,"click"],[3,"icon"],[1,"col-12"],[4,"ngIf"],[1,"row"],["for","input-rePassword",1,"label","col-12"],["fullWidth","","id","input-rePassword","name","rePass","nbInput","","placeholder","Potvrdi \u0161ifru",3,"ngModel","required","status","type","ngModelChange"],["retypePasswordModel","ngModel"],[1,"row","mt-3","d-flex","justify-content-center"],["status","success","size","large","type","submit","nbButton","","fullWidth",""],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e){var n=g.Yb();g.Xb(0,"div",0),g.Xb(1,"h1",1),g.Hc(2,"Zaboravljena lozinka:"),g.Wb(),g.Xb(3,"form",2,3),g.fc("ngSubmit",(function(){g.zc(n);var e=g.xc(4);return t.resetPassword(e)})),g.Xb(5,"div",4),g.Xb(6,"div",5),g.Xb(7,"div",6),g.Xb(8,"label",7),g.Hc(9,"\u0160ifra:"),g.Wb(),g.Xb(10,"div",8),g.Xb(11,"input",9,10),g.fc("ngModelChange",(function(e){return t.password=e})),g.Wb(),g.Wb(),g.Xb(13,"div",11),g.Xb(14,"button",12),g.fc("click",(function(){return t.showPassword="eye"===t.showPassword?"eye-off":"eye"})),g.Sb(15,"nb-icon",13),g.Wb(),g.Wb(),g.Xb(16,"div",14),g.Fc(17,si,3,2,"ng-container",15),g.Wb(),g.Wb(),g.Xb(18,"div",16),g.Xb(19,"label",17),g.Hc(20,"Ponovi \u0161ifru:"),g.Wb(),g.Xb(21,"div",14),g.Xb(22,"input",18,19),g.fc("ngModelChange",(function(e){return t.retypePassword=e})),g.Wb(),g.Wb(),g.Xb(24,"div",14),g.Fc(25,bi,3,2,"ng-container",15),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Xb(26,"div",20),g.Xb(27,"div",5),g.Xb(28,"button",21),g.Hc(29,"Promeni lozinku"),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&e){var i=g.xc(12),a=g.xc(23);g.Eb(11),g.pc("ngModel",t.password)("maxlength",t.getConfigValue("forms.validation.password.maxLength"))("minlength",t.getConfigValue("forms.validation.password.minLength"))("required",t.getConfigValue("forms.validation.password.required"))("status",i.dirty?i.invalid?"danger":"success":"basic")("type","eye"===t.showPassword?"password":"text"),g.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),g.Eb(4),g.pc("icon",t.showPassword),g.Eb(2),g.pc("ngIf",i.invalid&&i.touched),g.Eb(5),g.pc("ngModel",t.retypePassword)("required",t.getConfigValue("forms.validation.password.required"))("status",a.dirty?a.invalid||i.value!==a.value?"danger":"success":"basic")("type","eye"===t.showPassword?"password":"text"),g.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),g.Eb(3),g.pc("ngIf",a.invalid&&i.touched)}},directives:[s.w,s.l,s.m,w.Q,s.b,s.k,s.n,s.f,s.g,s.s,w.t,w.N,c.m],styles:[".error-message[_ngcontent-%COMP%]{color:red}"]}),di)}]},{path:"redirect",component:K},{path:"",redirectTo:"auth/login"},{path:"**",redirectTo:"auth/login"}],yi=((hi=function e(){_classCallCheck(this,e)}).\u0275mod=g.Pb({type:hi}),hi.\u0275inj=g.Ob({factory:function(e){return new(e||hi)},imports:[[l.g.forChild(vi)],l.g]}),hi),Wi=((mi=function e(){_classCallCheck(this,e)}).\u0275mod=g.Pb({type:mi}),mi.\u0275inj=g.Ob({factory:function(e){return new(e||mi)},providers:[v,m,k,b.a,y.a,X.a,h.a],imports:[[C.a,c.c,l.g,w.p,w.R,w.u,w.E,yi,w.sb,s.e,w.Mb,w.k,w.Gb,w.s,w.Ab,w.B,u.c,w.ib,w.K,w.P,w.xb]]}),mi)}}]);