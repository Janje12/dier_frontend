function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,i,n){return i&&_defineProperties(e.prototype,i),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"723k":function(e,i,n){"use strict";n.r(i),n.d(i,"ProfileModule",(function(){return Pe}));var t=n("ofXK"),a=n("3Pt+"),l=n("aceb"),r=n("RS3s"),o=n("dgmN"),s=n("bJfm"),b=n("RPbl"),c=n("tyNb"),u=n("ud2R"),d=n("fXoL"),p=n("McNs"),g=n("SxV6"),f=n("fo3O");function m(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Ime je obavezno! "),d.Wb())}function v(e,i){if(1&e&&(d.Xb(0,"p",27),d.Hc(1),d.Wb()),2&e){var n=d.jc(2);d.Eb(1),d.Kc(" Ime mora da bude du\u017ee od ",n.getConfigValue("forms.validation.firstName.minLength")," a kra\u0107e od ",n.getConfigValue("forms.validation.firstName.maxLength")," ")}}function h(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Ime mora biti validno! "),d.Wb())}function W(e,i){if(1&e&&(d.Vb(0),d.Fc(1,m,2,0,"p",26),d.Fc(2,v,2,2,"p",26),d.Fc(3,h,2,0,"p",26),d.Ub()),2&e){d.jc();var n=d.xc(8);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength)),d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function X(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Prezime je obavezno! "),d.Wb())}function y(e,i){if(1&e&&(d.Xb(0,"p",27),d.Hc(1),d.Wb()),2&e){var n=d.jc(2);d.Eb(1),d.Kc(" Prezime mora da bude du\u017ee od ",n.getConfigValue("forms.validation.lastName.minLength")," a kra\u0107e od ",n.getConfigValue("forms.validation.lastName.maxLength")," ")}}function C(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Prezime mora biti validno! "),d.Wb())}function I(e,i){if(1&e&&(d.Vb(0),d.Fc(1,X,2,0,"p",26),d.Fc(2,y,2,2,"p",26),d.Fc(3,C,2,0,"p",26),d.Ub()),2&e){d.jc();var n=d.xc(16);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength)),d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function M(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Email je obavezan! "),d.Wb())}function E(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Email mora biti validan! "),d.Wb())}function x(e,i){if(1&e&&(d.Vb(0),d.Fc(1,M,2,0,"p",26),d.Fc(2,E,2,0,"p",26),d.Ub()),2&e){d.jc();var n=d.xc(24);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function S(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Korisni\u010dko ime je obavezno! "),d.Wb())}function k(e,i){if(1&e&&(d.Xb(0,"p",27),d.Hc(1),d.Wb()),2&e){var n=d.jc(2);d.Eb(1),d.Kc(" Korisni\u010dko ime mora da bude du\u017ee od ",n.getConfigValue("forms.validation.username.minLength")," a kra\u0107e od ",n.getConfigValue("forms.validation.username.maxLength")," ")}}function F(e,i){if(1&e&&(d.Vb(0),d.Fc(1,S,2,0,"p",26),d.Fc(2,k,2,2,"p",26),d.Ub()),2&e){d.jc();var n=d.xc(32);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function w(e,i){1&e&&(d.Xb(0,"p",27),d.Hc(1," Telefon je obavezan! "),d.Wb())}function j(e,i){if(1&e&&(d.Xb(0,"p",27),d.Hc(1),d.Wb()),2&e){var n=d.jc(2);d.Eb(1),d.Kc(" Telefon mora da bude du\u017ei od ",n.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",n.getConfigValue("forms.validation.phone.maxLength")," ")}}function V(e,i){if(1&e&&(d.Vb(0),d.Fc(1,w,2,0,"p",26),d.Fc(2,j,2,2,"p",26),d.Ub()),2&e){d.jc();var n=d.xc(40);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}var z,N=((z=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;_classCallCheck(this,e),this.userService=i,this.options=n,this.toastrService=t,this.roleService=a,this.authService=l,this.user={email:"",firstName:"",lastName:"",password:"",phone:"",role:"",username:""},this.inputsDisabled=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userService.getUserProfile(this.roleService.getUsername()).pipe(Object(g.a)()).subscribe((function(i){e.user=i}))}},{key:"getConfigValue",value:function(e){return Object(p.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updateUser",value:function(e){if(e.valid){this.userService.updateUser(this.user,this.user.username,"username").subscribe((function(e){})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0;var i=null;this.authService.getToken().subscribe((function(e){i=e})),this.authService.refreshToken("email",i).subscribe((function(e){}))}else this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,i,n){this.toastrService.show(i,e,{status:n})}}]),e}()).\u0275fac=function(e){return new(e||z)(d.Rb(f.a),d.Rb(p.a),d.Rb(l.Kb),d.Rb(u.a),d.Rb(p.g))},z.\u0275cmp=d.Lb({type:z,selectors:[["profile-user"]],decls:50,vars:43,consts:[[3,"ngSubmit"],["formKorisnik","ngForm"],[1,"row","mb-2"],[1,"col-12"],["for","input-firstName",1,"label"],[1,"col-3"],["fullWidth","","id","input-firstName","name","firstName","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["firstName","ngModel"],[4,"ngIf"],["for","input-lastName",1,"label"],["fullWidth","","id","input-lastName","name","lastName","nbInput","","onkeypress","return /[a-zA-Z\u010d\u0107\u017e\u0111\u0161\u0160\u0110\u017d\u0106\u010c]/i.test(event.key)","type","text",3,"ngModel","maxlength","minlength","pattern","required","status","disabled","ngModelChange"],["lastName","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["email","ngModel"],["for","input-username",1,"label"],["fullWidth","","id","input-username","name","username","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["username","ngModel"],["for","input-phone",1,"label"],["fullWidth","","id","input-phone","name","phone","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["phone","ngModel"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,i){if(1&e){var n=d.Yb();d.Xb(0,"form",0,1),d.fc("ngSubmit",(function(){d.zc(n);var e=d.xc(1);return i.updateUser(e)})),d.Xb(2,"div",2),d.Xb(3,"div",3),d.Xb(4,"label",4),d.Hc(5,"Ime:"),d.Wb(),d.Wb(),d.Xb(6,"div",5),d.Xb(7,"input",6,7),d.fc("ngModelChange",(function(e){return i.user.firstName=e})),d.Wb(),d.Fc(9,W,4,3,"ng-container",8),d.Wb(),d.Wb(),d.Xb(10,"div",2),d.Xb(11,"div",3),d.Xb(12,"label",9),d.Hc(13,"Prezime:"),d.Wb(),d.Wb(),d.Xb(14,"div",5),d.Xb(15,"input",10,11),d.fc("ngModelChange",(function(e){return i.user.lastName=e})),d.Wb(),d.Fc(17,I,4,3,"ng-container",8),d.Wb(),d.Wb(),d.Xb(18,"div",2),d.Xb(19,"div",3),d.Xb(20,"label",12),d.Hc(21,"Email:"),d.Wb(),d.Wb(),d.Xb(22,"div",5),d.Xb(23,"input",13,14),d.fc("ngModelChange",(function(e){return i.user.email=e})),d.Wb(),d.Fc(25,x,3,2,"ng-container",8),d.Wb(),d.Wb(),d.Xb(26,"div",2),d.Xb(27,"div",3),d.Xb(28,"label",15),d.Hc(29,"Korisni\u010dko ime:"),d.Wb(),d.Wb(),d.Xb(30,"div",5),d.Xb(31,"input",16,17),d.fc("ngModelChange",(function(e){return i.user.username=e})),d.Wb(),d.Fc(33,F,3,2,"ng-container",8),d.Wb(),d.Wb(),d.Xb(34,"div",2),d.Xb(35,"div",3),d.Xb(36,"label",18),d.Hc(37,"Telefon:"),d.Wb(),d.Wb(),d.Xb(38,"div",5),d.Xb(39,"input",19,20),d.fc("ngModelChange",(function(e){return i.user.phone=e})),d.Wb(),d.Fc(41,V,3,2,"ng-container",8),d.Wb(),d.Wb(),d.Xb(42,"div",21),d.Sb(43,"div",22),d.Xb(44,"div",23),d.Xb(45,"button",24),d.fc("click",(function(){return i.enableInputs()})),d.Hc(46,"IZMENI"),d.Wb(),d.Wb(),d.Xb(47,"div",23),d.Xb(48,"button",25),d.Hc(49,"SA\u010cUVAJ"),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){var t=d.xc(8),a=d.xc(16),l=d.xc(24),r=d.xc(32),o=d.xc(40);d.Eb(7),d.pc("ngModel",i.user.firstName)("maxlength",i.getConfigValue("forms.validation.firstName.maxLength"))("minlength",i.getConfigValue("forms.validation.firstName.minLength"))("pattern",i.getConfigValue("forms.validation.firstName.pattern"))("required",i.getConfigValue("forms.validation.firstName.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),d.Eb(2),d.pc("ngIf",t.invalid&&t.touched),d.Eb(6),d.pc("ngModel",i.user.lastName)("maxlength",i.getConfigValue("forms.validation.lastName.maxLength"))("minlength",i.getConfigValue("forms.validation.lastName.minLength"))("pattern",i.getConfigValue("forms.validation.lastName.pattern"))("required",i.getConfigValue("forms.validation.lastName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),d.Eb(2),d.pc("ngIf",a.invalid&&a.touched),d.Eb(6),d.pc("ngModel",i.user.email)("pattern",i.getConfigValue("forms.validation.email.pattern"))("required",i.getConfigValue("forms.validation.email.required"))("status",l.dirty?l.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),d.Eb(2),d.pc("ngIf",l.invalid&&l.touched),d.Eb(6),d.pc("ngModel",i.user.username)("maxlength",i.getConfigValue("forms.validation.username.maxLength"))("minlength",i.getConfigValue("forms.validation.username.minLength"))("required",i.getConfigValue("forms.validation.username.required"))("status",r.dirty?r.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),d.Eb(2),d.pc("ngIf",r.invalid&&r.touched),d.Eb(6),d.pc("ngModel",i.user.phone)("maxlength",i.getConfigValue("forms.validation.phone.maxLength"))("minlength",i.getConfigValue("forms.validation.telefon.minLength"))("required",i.getConfigValue("forms.validation.telefon.required"))("status",o.dirty?o.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!o.invalid||!o.touched)||null),d.Eb(2),d.pc("ngIf",o.invalid&&o.touched),d.Eb(4),d.pc("disabled",!i.inputsDisabled),d.Eb(3),d.pc("disabled",i.inputsDisabled)}},directives:[a.w,a.l,a.m,l.Q,a.b,a.k,a.n,a.f,a.g,a.q,a.s,t.m,l.t],styles:[""]}),z),H=n("wH5/");function R(e,i){1&e&&(d.Xb(0,"p",38),d.Hc(1," Email je obavezan! "),d.Wb())}function q(e,i){1&e&&(d.Xb(0,"p",38),d.Hc(1," Email mora biti validan! "),d.Wb())}function T(e,i){if(1&e&&(d.Vb(0),d.Fc(1,R,2,0,"p",37),d.Fc(2,q,2,0,"p",37),d.Ub()),2&e){d.jc();var n=d.xc(31);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function D(e,i){1&e&&(d.Xb(0,"p",38),d.Hc(1," Email je obavezan! "),d.Wb())}function P(e,i){1&e&&(d.Xb(0,"p",38),d.Hc(1," Email mora biti validan! "),d.Wb())}function O(e,i){if(1&e&&(d.Vb(0),d.Fc(1,D,2,0,"p",37),d.Fc(2,P,2,0,"p",37),d.Ub()),2&e){d.jc();var n=d.xc(39);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.pattern)}}function L(e,i){1&e&&(d.Xb(0,"p",38),d.Hc(1," Telefon je obavezan! "),d.Wb())}function U(e,i){if(1&e&&(d.Xb(0,"p",38),d.Hc(1),d.Wb()),2&e){var n=d.jc(2);d.Eb(1),d.Kc(" Telefon mora da bude du\u017ei od ",n.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",n.getConfigValue("forms.validation.phone.maxLength")," ")}}function _(e,i){if(1&e&&(d.Vb(0),d.Fc(1,L,2,0,"p",37),d.Fc(2,U,2,2,"p",37),d.Ub()),2&e){d.jc();var n=d.xc(47);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function A(e,i){if(1&e&&(d.Xb(0,"p",38),d.Hc(1),d.Wb()),2&e){var n=d.jc(3);d.Eb(1),d.Kc(" Faks mora da bude du\u017ei od ",n.getConfigValue("forms.validation.phone.minLength")," a kra\u0107i od ",n.getConfigValue("forms.validation.phone.maxLength")," ")}}function K(e,i){if(1&e&&(d.Vb(0),d.Fc(1,A,2,2,"p",37),d.Ub()),2&e){d.jc();var n=d.xc(6);d.Eb(1),d.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function B(e,i){if(1&e){var n=d.Yb();d.Xb(0,"div",4),d.Xb(1,"div",5),d.Xb(2,"label",39),d.Hc(3,"Faks:"),d.Wb(),d.Wb(),d.Xb(4,"div",3),d.Xb(5,"input",40,41),d.fc("ngModelChange",(function(e){return d.zc(n),d.jc().company.fax=e})),d.Wb(),d.Fc(7,K,2,1,"ng-container",18),d.Wb(),d.Wb()}if(2&e){var t=d.xc(6),a=d.jc();d.Eb(5),d.pc("ngModel",a.company.fax)("maxlength",a.getConfigValue("forms.validation.phone.maxLength"))("minlength",a.getConfigValue("forms.validation.phone.minLength"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",a.inputsDisabled),d.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),d.Eb(2),d.pc("ngIf",t.invalid&&t.touched)}}function $(e,i){1&e&&(d.Xb(0,"p",38),d.Hc(1," Zakosni zastupnik firme je obavezan! "),d.Wb())}function Y(e,i){if(1&e&&(d.Xb(0,"p",38),d.Hc(1),d.Wb()),2&e){var n=d.jc(2);d.Eb(1),d.Kc(" Zakosni zastupnik mora da bude du\u017ei od ",n.getConfigValue("forms.validation.legalRep.minLength")," a kra\u0107i od ",n.getConfigValue("forms.validation.legalRep.maxLength")," ")}}function Z(e,i){if(1&e&&(d.Vb(0),d.Fc(1,$,2,0,"p",37),d.Fc(2,Y,2,2,"p",37),d.Ub()),2&e){d.jc();var n=d.xc(56);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",(null==n.errors?null:n.errors.minlength)||(null==n.errors?null:n.errors.maxlength))}}function J(e,i){1&e&&d.Sb(0,"input",42),2&e&&d.pc("placeholder",i.$implicit)}var G,Q=((G=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;_classCallCheck(this,e),this.companyService=i,this.options=n,this.toastrService=t,this.roleService=a,this.authService=l,this.company={address:{location:{placeName:"",placeCode:0,zipCode:"",townshipCode:0,townshipName:""},street:""},email:"",emailReception:"",legalRep:{firstName:"",lastName:""},nriz:{username:"",password:""},manager:"",mat:"",name:"",occupation:{name:"",code:""},operations:[],pib:"",telephone:"",fax:""},this.inputsDisabled=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.companyService.getCompany(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe((function(i){e.company=i}))}},{key:"getConfigValue",value:function(e){return Object(p.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updateFirma",value:function(e){if(e.valid){this.companyService.updateCompany(this.company,this.company._id).subscribe((function(e){})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0;var i=null;this.authService.getToken().subscribe((function(e){i=e})),this.authService.refreshToken("email",i).subscribe((function(e){}))}else this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,i,n){this.toastrService.show(i,e,{status:n})}}]),e}()).\u0275fac=function(e){return new(e||G)(d.Rb(H.a),d.Rb(p.a),d.Rb(l.Kb),d.Rb(u.a),d.Rb(p.g))},G.\u0275cmp=d.Lb({type:G,selectors:[["profile-company"]],decls:79,vars:38,consts:[[1,"col-12",3,"ngSubmit"],["formKorisnik","ngForm"],[1,"row"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-companyName",1,"label"],["disabled","","fullWidth","","id","input-companyName","name","companyName","nbInput","","type","text",3,"ngModel","ngModelChange"],["companyName","ngModel"],["for","input-pib",1,"label"],["disabled","","fullWidth","","id","input-pib","name","pib","nbInput","","type","text",3,"ngModel","ngModelChange"],["pib","ngModel"],["for","input-mat",1,"label"],["disabled","","fullWidth","","id","input-mat","name","mat","nbInput","","type","text",3,"ngModel","ngModelChange"],["mat","ngModel"],["for","input-email",1,"label"],["fullWidth","","id","input-email","name","email","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["email","ngModel"],[4,"ngIf"],["for","input-emailReception",1,"label"],["fullWidth","","id","input-emailReception","name","emailReception","nbInput","","type","text",3,"ngModel","pattern","required","status","disabled","ngModelChange"],["emailReception","ngModel"],["for","input-telephone",1,"label"],["fullWidth","","id","input-telephone","name","telephone","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["telephone","ngModel"],["class","row mb-2",4,"ngIf"],["for","input-legalRep",1,"label"],["fullWidth","","id","input-legalRep","name","legalRep","nbInput","","type","text",3,"ngModel","maxlength","minlength","required","status","disabled","ngModelChange"],["legalRep","ngModel"],["for","input-address",1,"label"],["disabled","","fullWidth","","id","input-address","name","address","nbInput","","type","text",3,"placeholder"],[1,"label"],["disabled","","fullWidth","","nbInput","","type","text",3,"placeholder",4,"ngFor","ngForOf"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-fax",1,"label"],["fullWidth","","id","input-fax","name","fax","nbInput","","type","text",3,"ngModel","maxlength","minlength","status","disabled","ngModelChange"],["fax","ngModel"],["disabled","","fullWidth","","nbInput","","type","text",3,"placeholder"]],template:function(e,i){if(1&e){var n=d.Yb();d.Xb(0,"form",0,1),d.fc("ngSubmit",(function(){d.zc(n);var e=d.xc(1);return i.updateFirma(e)})),d.Xb(2,"div",2),d.Xb(3,"div",3),d.Xb(4,"div",4),d.Xb(5,"div",5),d.Xb(6,"label",6),d.Hc(7,"Naziv Firme:"),d.Wb(),d.Wb(),d.Xb(8,"div",3),d.Xb(9,"input",7,8),d.fc("ngModelChange",(function(e){return i.company.name=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(11,"div",4),d.Xb(12,"div",5),d.Xb(13,"label",9),d.Hc(14,"PIB:"),d.Wb(),d.Wb(),d.Xb(15,"div",3),d.Xb(16,"input",10,11),d.fc("ngModelChange",(function(e){return i.company.pib=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(18,"div",4),d.Xb(19,"div",5),d.Xb(20,"label",12),d.Hc(21,"Mati\u010dni broj:"),d.Wb(),d.Wb(),d.Xb(22,"div",3),d.Xb(23,"input",13,14),d.fc("ngModelChange",(function(e){return i.company.mat=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(25,"div",4),d.Xb(26,"div",5),d.Xb(27,"label",15),d.Hc(28,"Email:"),d.Wb(),d.Wb(),d.Xb(29,"div",3),d.Xb(30,"input",16,17),d.fc("ngModelChange",(function(e){return i.company.email=e})),d.Wb(),d.Fc(32,T,3,2,"ng-container",18),d.Wb(),d.Wb(),d.Xb(33,"div",4),d.Xb(34,"div",5),d.Xb(35,"label",19),d.Hc(36,"Email za prijem dokumenata:"),d.Wb(),d.Wb(),d.Xb(37,"div",3),d.Xb(38,"input",20,21),d.fc("ngModelChange",(function(e){return i.company.emailReception=e})),d.Wb(),d.Fc(40,O,3,2,"ng-container",18),d.Wb(),d.Wb(),d.Xb(41,"div",4),d.Xb(42,"div",5),d.Xb(43,"label",22),d.Hc(44,"Telefon:"),d.Wb(),d.Wb(),d.Xb(45,"div",3),d.Xb(46,"input",23,24),d.fc("ngModelChange",(function(e){return i.company.telephone=e})),d.Wb(),d.Fc(48,_,3,2,"ng-container",18),d.Wb(),d.Wb(),d.Fc(49,B,8,7,"div",25),d.Xb(50,"div",4),d.Xb(51,"div",5),d.Xb(52,"label",26),d.Hc(53,"Zakonski Zastupnik Firme:"),d.Wb(),d.Wb(),d.Xb(54,"div",3),d.Xb(55,"input",27,28),d.fc("ngModelChange",(function(e){return i.company.legalRep=e})),d.Wb(),d.Fc(57,Z,3,2,"ng-container",18),d.Wb(),d.Wb(),d.Wb(),d.Xb(58,"div",3),d.Xb(59,"div",4),d.Xb(60,"div",5),d.Xb(61,"label",29),d.Hc(62,"Adresa Firme:"),d.Wb(),d.Wb(),d.Xb(63,"div",5),d.Sb(64,"input",30),d.Wb(),d.Wb(),d.Xb(65,"div",2),d.Xb(66,"div",5),d.Xb(67,"label",31),d.Hc(68,"Rad firme:"),d.Wb(),d.Wb(),d.Xb(69,"div",5),d.Fc(70,J,1,1,"input",32),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(71,"div",2),d.Sb(72,"div",33),d.Xb(73,"div",34),d.Xb(74,"button",35),d.fc("click",(function(){return i.enableInputs()})),d.Hc(75," IZMENI "),d.Wb(),d.Wb(),d.Xb(76,"div",34),d.Xb(77,"button",36),d.Hc(78,"SA\u010cUVAJ"),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){var t=d.xc(31),a=d.xc(39),l=d.xc(47),r=d.xc(56);d.Eb(9),d.pc("ngModel",i.company.name),d.Eb(7),d.pc("ngModel",i.company.pib),d.Eb(7),d.pc("ngModel",i.company.mat),d.Eb(7),d.pc("ngModel",i.company.email)("pattern",i.getConfigValue("forms.validation.email.pattern"))("required",i.getConfigValue("forms.validation.email.required"))("status",t.dirty?t.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!t.invalid||!t.touched)||null),d.Eb(2),d.pc("ngIf",t.invalid&&t.touched),d.Eb(6),d.pc("ngModel",i.company.emailReception)("pattern",i.getConfigValue("forms.validation.email.pattern"))("required",i.getConfigValue("forms.validation.email.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),d.Eb(2),d.pc("ngIf",a.invalid&&a.touched),d.Eb(6),d.pc("ngModel",i.company.telephone)("maxlength",i.getConfigValue("forms.validation.phone.maxLength"))("minlength",i.getConfigValue("forms.validation.phone.minLength"))("required",i.getConfigValue("forms.validation.phone.required"))("status",l.dirty?l.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),d.Eb(2),d.pc("ngIf",l.invalid&&l.touched),d.Eb(1),d.pc("ngIf",""===i.company.fax),d.Eb(6),d.pc("ngModel",i.company.legalRep)("maxlength",i.getConfigValue("forms.validation.legalRep.maxLength"))("minlength",i.getConfigValue("forms.validation.legalRep.minLength"))("required",i.getConfigValue("forms.validation.legalRep.required"))("status",r.dirty?r.invalid?"danger":"success":"basic")("disabled",i.inputsDisabled),d.Fb("aria-invalid",!(!r.invalid||!r.touched)||null),d.Eb(2),d.pc("ngIf",r.invalid&&r.touched),d.Eb(7),d.pc("placeholder",i.company.address.location.townshipName+", "+i.company.address.location.placeName+", "+i.company.address.street),d.Eb(6),d.pc("ngForOf",i.company.operations),d.Eb(4),d.pc("disabled",!i.inputsDisabled),d.Eb(3),d.pc("disabled",i.inputsDisabled)}},directives:[a.w,a.l,a.m,l.Q,a.b,a.k,a.n,a.q,a.s,t.m,a.f,a.g,t.l,l.t],styles:[".divider-left[_ngcontent-%COMP%]{border-left:1px solid grey}"]}),G),ee=n("7Oz7"),ie=n("navU");function ne(e,i){1&e&&(d.Xb(0,"label",23),d.Hc(1,"Naziv Deponije:"),d.Wb())}function te(e,i){1&e&&(d.Xb(0,"label",23),d.Hc(1,"Naziv Skladi\u0161ta za tretman:"),d.Wb())}function ae(e,i){1&e&&(d.Xb(0,"label",23),d.Hc(1,"Naziv Skladi\u0161ta za skladi\u0161tenje:"),d.Wb())}function le(e,i){1&e&&(d.Xb(0,"label",23),d.Hc(1,"Naziv Skladi\u0161ta:"),d.Wb())}function re(e,i){1&e&&(d.Xb(0,"p",25),d.Hc(1," Naziv skladi\u0161ta je obavezan! "),d.Wb())}function oe(e,i){if(1&e&&(d.Vb(0),d.Fc(1,re,2,0,"p",24),d.Ub()),2&e){d.jc();var n=d.xc(11);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required)}}function se(e,i){1&e&&(d.Xb(0,"p",25),d.Hc(1," Veli\u010dina skladi\u0161ta je obavezna! "),d.Wb())}function be(e,i){if(1&e&&(d.Vb(0),d.Fc(1,se,2,0,"p",24),d.Ub()),2&e){d.jc();var n=d.xc(19);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required)}}var ce=function(){return{standalone:!0}};function ue(e,i){if(1&e){var n=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",3),d.Xb(2,"div",8),d.Xb(3,"div",9),d.Xb(4,"div",10),d.Fc(5,ne,2,0,"label",11),d.Fc(6,te,2,0,"label",11),d.Fc(7,ae,2,0,"label",11),d.Fc(8,le,2,0,"label",12),d.Wb(),d.Xb(9,"div",8),d.Xb(10,"input",13,14),d.fc("ngModelChange",(function(e){return d.zc(n),i.$implicit.name=e})),d.Wb(),d.Fc(12,oe,2,1,"ng-container",15),d.Wb(),d.Wb(),d.Xb(13,"div",9),d.Xb(14,"div",16),d.Xb(15,"label",17),d.Hc(16,"Veli\u010dina skladi\u0161ta:"),d.Wb(),d.Wb(),d.Xb(17,"div",8),d.Xb(18,"input",18,19),d.fc("ngModelChange",(function(e){return d.zc(n),i.$implicit.maxAmount=e})),d.Wb(),d.Fc(20,be,2,1,"ng-container",15),d.Wb(),d.Wb(),d.Wb(),d.Xb(21,"div",8),d.Xb(22,"div",9),d.Xb(23,"div",16),d.Xb(24,"label",20),d.Hc(25,"Adresa Skladi\u0161ta:"),d.Wb(),d.Wb(),d.Xb(26,"div",16),d.Sb(27,"input",21),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Xb(28,"div",9),d.Xb(29,"div",16),d.Sb(30,"storage-meter",22),d.Wb(),d.Wb(),d.Wb()}if(2&e){var t=i.$implicit,a=d.xc(11),l=d.xc(19),r=d.jc();d.Eb(4),d.pc("ngSwitch",t.__t),d.Eb(1),d.pc("ngSwitchCase","StorageDump"),d.Eb(1),d.pc("ngSwitchCase","StorageTreatment"),d.Eb(1),d.pc("ngSwitchCase","StorageCache"),d.Eb(3),d.pc("ngModel",t.name)("ngModelOptions",d.sc(23,ce))("maxlength",r.getConfigValue("forms.validation.storageName.maxLength"))("minlength",r.getConfigValue("forms.validation.storageName.minLength"))("required",r.getConfigValue("forms.validation.storageName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",r.inputsDisabled),d.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),d.Eb(2),d.pc("ngIf",a.invalid&&a.touched),d.Eb(6),d.pc("ngModel",t.maxAmount)("ngModelOptions",d.sc(24,ce))("pattern",r.getConfigValue("forms.validation.storageSize.pattern"))("required",r.getConfigValue("forms.validation.storageSize.required"))("status",l.dirty?l.invalid?"danger":"success":"basic")("disabled",r.inputsDisabled),d.Fb("aria-invalid",!(!l.invalid||!l.touched)||null),d.Eb(2),d.pc("ngIf",l.invalid&&l.touched),d.Eb(7),d.pc("placeholder",t.address.location.townshipName+", "+t.address.location.placeName+", "+t.address.street),d.Eb(3),d.pc("storage",t)}}var de,pe=((de=function(){function e(i,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;_classCallCheck(this,e),this.storageService=i,this.roleService=n,this.options=t,this.toastrService=a,this.storages=[],this.inputsDisabled=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.storageService.getCompaniesStorage(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe((function(i){e.storages=i}))}},{key:"getConfigValue",value:function(e){return Object(p.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updateStorage",value:function(e){var i=this;e.valid?(this.storages.forEach((function(e){return i.storageService.updateStorage(e,e._id).subscribe((function(e){}))})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,i,n){this.toastrService.show(i,e,{status:n})}}]),e}()).\u0275fac=function(e){return new(e||de)(d.Rb(ee.a),d.Rb(u.a),d.Rb(p.a),d.Rb(l.Kb))},de.\u0275cmp=d.Lb({type:de,selectors:[["profile-storages"]],decls:11,vars:3,consts:[[3,"ngSubmit"],["formStorage","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","status","primary","fullWidth","","type","button",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12",3,"ngSwitch"],["class","label","for","input-storageName",4,"ngSwitchCase"],["class","label","for","input-storageName",4,"ngSwitchDefault"],["fullWidth","","id","input-storageName","name","storageName","nbInput","","type","text",3,"ngModel","ngModelOptions","maxlength","minlength","required","status","disabled","ngModelChange"],["storageName","ngModel"],[4,"ngIf"],[1,"col-12"],["for","input-storageSize",1,"label"],["fullWidth","","id","input-storageSize","name","storageSize","nbInput","","type","number",3,"ngModel","ngModelOptions","pattern","required","status","disabled","ngModelChange"],["storageSize","ngModel"],["for","input-address",1,"label"],["disabled","","fullWidth","","id","input-address","name","address","nbInput","","type","text",3,"placeholder"],[3,"storage"],["for","input-storageName",1,"label"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,i){if(1&e){var n=d.Yb();d.Xb(0,"form",0,1),d.fc("ngSubmit",(function(){d.zc(n);var e=d.xc(1);return i.updateStorage(e)})),d.Fc(2,ue,31,25,"div",2),d.Xb(3,"div",3),d.Sb(4,"div",4),d.Xb(5,"div",5),d.Xb(6,"button",6),d.fc("click",(function(){return i.enableInputs()})),d.Hc(7," IZMENI "),d.Wb(),d.Wb(),d.Xb(8,"div",5),d.Xb(9,"button",7),d.Hc(10,"SA\u010cUVAJ"),d.Wb(),d.Wb(),d.Wb(),d.Wb()}2&e&&(d.Eb(2),d.pc("ngForOf",i.storages),d.Eb(4),d.pc("disabled",!i.inputsDisabled),d.Eb(3),d.pc("disabled",i.inputsDisabled))},directives:[a.w,a.l,a.m,t.l,l.t,t.n,t.o,t.p,l.Q,a.b,a.k,a.n,a.f,a.g,a.s,t.m,a.p,a.q,ie.a],styles:[""]}),de),ge=n("bS1W"),fe=n("kBrA"),me=["viewTrash"];function ve(e,i){1&e&&(d.Xb(0,"p",30),d.Hc(1," Naziv dozvole je obavezan! "),d.Wb())}function he(e,i){if(1&e&&(d.Vb(0),d.Fc(1,ve,2,0,"p",29),d.Ub()),2&e){d.jc();var n=d.xc(9);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required)}}var We=function(){return{standalone:!0}};function Xe(e,i){if(1&e){var n=d.Yb();d.Xb(0,"div",10),d.Xb(1,"div",11),d.Xb(2,"label",31),d.Hc(3,"Skladi\u0161te:"),d.Wb(),d.Wb(),d.Xb(4,"div",9),d.Xb(5,"input",32),d.fc("ngModelChange",(function(e){return d.zc(n),d.jc().$implicit.storage.name=e})),d.Wb(),d.Wb(),d.Wb()}if(2&e){var t=d.jc().$implicit;d.Eb(5),d.pc("ngModel",t.storage.name)("ngModelOptions",d.sc(2,We))}}function ye(e,i){if(1&e){var n=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",3),d.Xb(2,"div",9),d.Xb(3,"div",10),d.Xb(4,"div",11),d.Xb(5,"label",12),d.Hc(6,"Naziv dozvole:"),d.Wb(),d.Wb(),d.Xb(7,"div",9),d.Xb(8,"input",13,14),d.fc("ngModelChange",(function(e){return d.zc(n),i.$implicit.name=e})),d.Wb(),d.Fc(10,he,2,1,"ng-container",15),d.Wb(),d.Wb(),d.Xb(11,"div",10),d.Xb(12,"div",11),d.Xb(13,"label",16),d.Hc(14,"\u0160ifra dozvole:"),d.Wb(),d.Wb(),d.Xb(15,"div",9),d.Xb(16,"input",17),d.fc("ngModelChange",(function(e){return d.zc(n),i.$implicit.code=e})),d.Wb(),d.Wb(),d.Wb(),d.Xb(17,"div",10),d.Xb(18,"div",11),d.Xb(19,"label",18),d.Hc(20,"Datum trajanja dozvole:"),d.Wb(),d.Wb(),d.Xb(21,"div",19),d.Sb(22,"input",20),d.Wb(),d.Xb(23,"button",21),d.Hc(24,"-"),d.Wb(),d.Xb(25,"div",22),d.Sb(26,"input",23),d.Wb(),d.Wb(),d.Wb(),d.Xb(27,"div",9),d.Xb(28,"div",10),d.Xb(29,"div",11),d.Xb(30,"label",24),d.Hc(31,"Vrsta dozvole:"),d.Wb(),d.Wb(),d.Xb(32,"div",9),d.Xb(33,"input",25),d.fc("ngModelChange",(function(e){return d.zc(n),i.$implicit.type=e})),d.Wb(),d.Wb(),d.Wb(),d.Fc(34,Xe,6,3,"div",26),d.Xb(35,"div",10),d.Xb(36,"div",11),d.Sb(37,"label",27),d.Wb(),d.Xb(38,"div",9),d.Xb(39,"button",28),d.fc("click",(function(){d.zc(n);var e=i.$implicit;return d.jc().openPermitsTrashWindow(e)})),d.Hc(40,"Pogledaj listu otpada "),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Wb()}if(2&e){var t=i.$implicit,a=d.xc(9),l=d.jc();d.Eb(8),d.pc("ngModel",t.name)("ngModelOptions",d.sc(16,We))("maxlength",l.getConfigValue("forms.validation.permitName.maxLength"))("minlength",l.getConfigValue("forms.validation.permitName.minLength"))("required",l.getConfigValue("forms.validation.permitName.required"))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",l.inputsDisabled),d.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),d.Eb(2),d.pc("ngIf",a.invalid&&a.touched),d.Eb(6),d.pc("ngModel",t.code)("ngModelOptions",d.sc(17,We)),d.Eb(6),d.pc("placeholder",l.getDate(t.dateCreation)),d.Eb(4),d.pc("placeholder",l.getDate(t.dateExpiration)),d.Eb(7),d.pc("ngModel",t.type)("ngModelOptions",d.sc(18,We)),d.Eb(1),d.pc("ngIf",void 0!==t.storage)}}function Ce(e,i){if(1&e){var n=d.Yb();d.Xb(0,"view-permits-trash-popup",33),d.fc("callUpdatePermitsTrash",(function(e){return d.zc(n),d.jc().updatePermitsTrashMethod(e)})),d.Wb()}if(2&e){var t=d.jc();d.pc("selectedPermit",t.selectedPermit)}}var Ie,Me=((Ie=function(){function e(i,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;_classCallCheck(this,e),this.permitService=i,this.roleService=n,this.options=t,this.toastrService=a,this.datePipe=l,this.windowService=r,this.permits=[],this.inputsDisabled=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.permitService.getCompaniesPermits(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe((function(i){e.permits=i}))}},{key:"getConfigValue",value:function(e){return Object(p.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updatePermits",value:function(e){var i=this;e.valid?(this.permits.forEach((function(e){return i.permitService.updatePermit(e,e._id).subscribe((function(e){}))})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"openPermitsTrashWindow",value:function(e){this.selectedPermit=e,this.windowRef=this.windowService.open(this.viewTrash,{title:"Lista otpada"})}},{key:"updatePermitsTrashMethod",value:function(e){this.selectedPermit.trashList=e,this.permitService.updatePermit(this.selectedPermit,this.selectedPermit._id).subscribe((function(e){})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.windowRef.close()}},{key:"getDate",value:function(e){return this.datePipe.transform(e,"dd-MM-yyyy")}},{key:"showToast",value:function(e,i,n){this.toastrService.show(i,e,{status:n})}}]),e}()).\u0275fac=function(e){return new(e||Ie)(d.Rb(ge.a),d.Rb(u.a),d.Rb(p.a),d.Rb(l.Kb),d.Rb(t.e),d.Rb(l.Qb))},Ie.\u0275cmp=d.Lb({type:Ie,selectors:[["profile-permit"]],viewQuery:function(e,i){var n;1&e&&d.Oc(me,!0,d.N),2&e&&d.wc(n=d.gc())&&(i.viewTrash=n.first)},decls:13,vars:3,consts:[[3,"ngSubmit"],["formPermit","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],["viewTrash",""],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-permitName",1,"label"],["fullWidth","","id","input-permitName","name","permitName","nbInput","","type","text",3,"ngModel","ngModelOptions","maxlength","minlength","required","status","disabled","ngModelChange"],["permitName","ngModel"],[4,"ngIf"],["for","input-permitCode",1,"label"],["disabled","","fullWidth","","id","input-permitCode","name","permitCode","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["for","input-dateCreation",1,"label"],[1,"col-5","mr-0","pr-0"],["disabled","","fullWidth","","id","input-dateCreation","name","dateCreation","nbInput","","type","text",3,"placeholder"],["disabled","","nbButton","",1,"mx-0","px-0","col-1"],[1,"col-5","ml-0","pl-0"],["disabled","","fullWidth","","id","input-dateExpiration","name","dateExpiration","nbInput","","type","text",3,"placeholder"],["for","input-permiType",1,"label"],["disabled","","fullWidth","","id","input-permiType","name","permiType","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["class","row mb-2",4,"ngIf"],[1,"label"],["nbButton","","fullWidth","","status","success","type","button",3,"click"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["for","input-permitStorage",1,"label"],["disabled","","fullWidth","","id","input-permitStorage","name","permitStorage","nbInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],[3,"selectedPermit","callUpdatePermitsTrash"]],template:function(e,i){if(1&e){var n=d.Yb();d.Xb(0,"form",0,1),d.fc("ngSubmit",(function(){d.zc(n);var e=d.xc(1);return i.updatePermits(e)})),d.Fc(2,ye,41,19,"div",2),d.Xb(3,"div",3),d.Sb(4,"div",4),d.Xb(5,"div",5),d.Xb(6,"button",6),d.fc("click",(function(){return i.enableInputs()})),d.Hc(7," IZMENI "),d.Wb(),d.Wb(),d.Xb(8,"div",5),d.Xb(9,"button",7),d.Hc(10,"SA\u010cUVAJ"),d.Wb(),d.Wb(),d.Wb(),d.Wb(),d.Fc(11,Ce,1,1,"ng-template",null,8,d.Gc)}2&e&&(d.Eb(2),d.pc("ngForOf",i.permits),d.Eb(4),d.pc("disabled",!i.inputsDisabled),d.Eb(3),d.pc("disabled",i.inputsDisabled))},directives:[a.w,a.l,a.m,t.l,l.t,l.Q,a.b,a.k,a.n,a.f,a.g,a.s,t.m,fe.a],styles:[""]}),Ie),Ee=n("H5EB");function xe(e,i){1&e&&(d.Xb(0,"p",18),d.Hc(1," Registarski broj tablice je obavezan! "),d.Wb())}function Se(e,i){1&e&&(d.Xb(0,"p",18),d.Hc(1," Registarski broj tablice mora biti validan! "),d.Wb())}function ke(e,i){if(1&e&&(d.Vb(0),d.Fc(1,xe,2,0,"p",17),d.Fc(2,Se,2,0,"p",17),d.Ub()),2&e){d.jc();var n=d.xc(9);d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.required),d.Eb(1),d.pc("ngIf",null==n.errors?null:n.errors.pattern)}}var Fe=function(){return{standalone:!0}};function we(e,i){if(1&e){var n=d.Yb();d.Xb(0,"div"),d.Xb(1,"div",3),d.Xb(2,"div",8),d.Xb(3,"div",9),d.Xb(4,"div",10),d.Xb(5,"label",11),d.Hc(6,"Registarski broj tablice:"),d.Wb(),d.Wb(),d.Xb(7,"div",8),d.Xb(8,"input",12,13),d.fc("ngModelChange",(function(e){return d.zc(n),i.$implicit.licensePlate=e})),d.Wb(),d.Fc(10,ke,3,2,"ng-container",14),d.Wb(),d.Wb(),d.Xb(11,"div",9),d.Xb(12,"div",10),d.Xb(13,"label",15),d.Hc(14,"Vrsta vozila:"),d.Wb(),d.Wb(),d.Xb(15,"div",8),d.Sb(16,"input",16),d.Wb(),d.Wb(),d.Wb(),d.Sb(17,"div",8),d.Wb(),d.Wb()}if(2&e){var t=i.$implicit,a=d.xc(9),l=d.jc();d.Eb(8),d.pc("ngModel",t.licensePlate)("ngModelOptions",d.sc(7,Fe))("status",a.dirty?a.invalid?"danger":"success":"basic")("disabled",l.inputsDisabled),d.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),d.Eb(2),d.pc("ngIf",a.invalid&&a.touched),d.Eb(6),d.pc("placeholder",t.type)}}var je,Ve=((je=function(){function e(i,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;_classCallCheck(this,e),this.vehicleService=i,this.roleService=n,this.options=t,this.toastrService=a,this.vehicles=[],this.inputsDisabled=!0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.vehicleService.getCompaniesVehicles(this.roleService.getCompanyID()).pipe(Object(g.a)()).subscribe((function(i){e.vehicles=i}))}},{key:"getConfigValue",value:function(e){return Object(p.n)(this.options,e,null)}},{key:"enableInputs",value:function(){this.inputsDisabled=!1}},{key:"updatePrevoznoSredstvo",value:function(e){var i=this;e.valid?(this.vehicles.forEach((function(e){return i.vehicleService.updateVehicle(e,e._id).subscribe((function(e){}))})),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.inputsDisabled=!0):this.showToast("Gre\u0161ka","Informacije koje ste uneli nisu ta\u010dne!","danger")}},{key:"showToast",value:function(e,i,n){this.toastrService.show(i,e,{status:n})}}]),e}()).\u0275fac=function(e){return new(e||je)(d.Rb(Ee.a),d.Rb(u.a),d.Rb(p.a),d.Rb(l.Kb))},je.\u0275cmp=d.Lb({type:je,selectors:[["profile-vehicle"]],decls:11,vars:3,consts:[[3,"ngSubmit"],["formVehicle","ngForm"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-8"],[1,"col-2"],["nbButton","","fullWidth","","type","button","status","primary",3,"disabled","click"],["fullWidth","","nbButton","","status","primary","type","submit",3,"disabled"],[1,"col-6"],[1,"row","mb-2"],[1,"col-12"],["for","input-licensePlate",1,"label"],["required","","pattern","([A-\u017d]{2})-(\\d{3,4})-([A-\u017d]{2})","fullWidth","","id","input-licensePlate","name","licensePlate","nbInput","","type","text",3,"ngModel","ngModelOptions","status","disabled","ngModelChange"],["licensePlate","ngModel"],[4,"ngIf"],["for","input-type",1,"label"],["fullWidth","","disabled","","id","input-type","name","type","nbInput","","type","text",3,"placeholder"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,i){if(1&e){var n=d.Yb();d.Xb(0,"form",0,1),d.fc("ngSubmit",(function(){d.zc(n);var e=d.xc(1);return i.updatePrevoznoSredstvo(e)})),d.Fc(2,we,18,8,"div",2),d.Xb(3,"div",3),d.Sb(4,"div",4),d.Xb(5,"div",5),d.Xb(6,"button",6),d.fc("click",(function(){return i.enableInputs()})),d.Hc(7," IZMENI "),d.Wb(),d.Wb(),d.Xb(8,"div",5),d.Xb(9,"button",7),d.Hc(10,"SA\u010cUVAJ"),d.Wb(),d.Wb(),d.Wb(),d.Wb()}2&e&&(d.Eb(2),d.pc("ngForOf",i.vehicles),d.Eb(4),d.pc("disabled",!i.inputsDisabled),d.Eb(3),d.pc("disabled",i.inputsDisabled))},directives:[a.w,a.l,a.m,t.l,l.t,l.Q,a.b,a.s,a.q,a.k,a.n,t.m],styles:[""]}),je);function ze(e,i){1&e&&d.Sb(0,"profile-permit")}function Ne(e,i){1&e&&d.Sb(0,"profile-vehicle")}var He,Re,qe,Te=[{path:":activeTab",component:(He=function(){function e(i,n){var t=this;_classCallCheck(this,e),this.roleService=i,this.activatedRoute=n,this.activatedRoute.params.subscribe((function(e){t.activeTab=e.activeTab}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.roleService.getOperations().subscribe((function(i){e.operations=i}))}}]),e}(),He.\u0275fac=function(e){return new(e||He)(d.Rb(u.a),d.Rb(c.a))},He.\u0275cmp=d.Lb({type:He,selectors:[["profile"]],decls:12,vars:10,consts:[["tabIcon","person","tabTitle","Korisnik",3,"active"],["tabIcon","briefcase","tabTitle","Firma",3,"active"],["tabIcon","cube","tabTitle","Skladi\u0161ta",3,"active","disabled"],["tabIcon","file-text","tabTitle","Dozvole",3,"active","disabled"],[4,"ngIf"],["tabIcon","car","tabTitle","Prevozna Sredstva",3,"active","disabled"]],template:function(e,i){1&e&&(d.Xb(0,"nb-card"),d.Xb(1,"nb-tabset"),d.Xb(2,"nb-tab",0),d.Sb(3,"profile-user"),d.Wb(),d.Xb(4,"nb-tab",1),d.Sb(5,"profile-company"),d.Wb(),d.Xb(6,"nb-tab",2),d.Sb(7,"profile-storages"),d.Wb(),d.Xb(8,"nb-tab",3),d.Fc(9,ze,1,0,"profile-permit",4),d.Wb(),d.Xb(10,"nb-tab",5),d.Fc(11,Ne,1,0,"profile-vehicle",4),d.Wb(),d.Wb(),d.Wb()),2&e&&(d.Eb(2),d.pc("active","user"===i.activeTab),d.Eb(2),d.pc("active","company"===i.activeTab),d.Eb(2),d.pc("active","storages"===i.activeTab)("disabled",!(null!=i.operations&&i.operations.production||null!=i.operations&&i.operations.treatment||null!=i.operations&&i.operations.disposal||null!=i.operations&&i.operations.cache)),d.Eb(2),d.pc("active","permits"===i.activeTab)("disabled",!(null!=i.operations&&i.operations.transport||null!=i.operations&&i.operations.treatment||null!=i.operations&&i.operations.disposal||null!=i.operations&&i.operations.cache)),d.Eb(1),d.pc("ngIf",(null==i.operations?null:i.operations.transport)||(null==i.operations?null:i.operations.treatment)||(null==i.operations?null:i.operations.disposal)||(null==i.operations?null:i.operations.cache)),d.Eb(1),d.pc("active","vehicles"===i.activeTab)("disabled",!(null!=i.operations&&i.operations.transport)),d.Eb(1),d.pc("ngIf",null==i.operations?null:i.operations.transport))},directives:[l.x,l.Fb,l.Eb,N,Q,pe,t.m,Me,Ve],styles:[""]}),He)}],De=((qe=function e(){_classCallCheck(this,e)}).\u0275mod=d.Pb({type:qe}),qe.\u0275inj=d.Ob({factory:function(e){return new(e||qe)},imports:[[c.g.forChild(Te)],c.g]}),qe),Pe=((Re=function e(){_classCallCheck(this,e)}).\u0275mod=d.Pb({type:Re}),Re.\u0275inj=d.Ob({factory:function(e){return new(e||Re)},imports:[[De,t.c,a.e,l.R,l.kb,l.u,l.Gb,l.B,l.ib,r.c,o.PagesModule,s.a,b.StorageModule]]}),Re)}}]);