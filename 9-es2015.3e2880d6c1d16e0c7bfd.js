(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5IJp":function(e,t,i){"use strict";i.r(t),i.d(t,"TrashModule",function(){return me});var n=i("bS1W"),s=i("BMkl"),a=i("vTDv"),o=i("tyNb"),c=i("RS3s"),r=i("ibGe"),l=i("ud2R"),d=i("7wOV");const b={pager:{perPage:5},hideSubHeader:!0,actions:{columnTitle:"Odaberi",position:"right",add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus-square"></i>'}]},columns:{name:{title:"Naziv"},desc:{title:"Opis"},unitOfMeasure:{title:"Jedinica mere"}}};var u=i("fXoL"),h=i("aceb"),p=i("ofXK"),g=i("3Pt+");function m(e,t){if(1&e&&(u.Wb(0,"nb-option",28),u.Fc(1),u.Vb()),2&e){const e=t.$implicit;u.nc("value",e),u.Eb(1),u.Gc(e)}}function f(e,t){1&e&&(u.Wb(0,"p",30),u.Fc(1," Naziv je obavezan! "),u.Vb())}function v(e,t){if(1&e&&(u.Ub(0),u.Dc(1,f,2,0,"p",29),u.Tb()),2&e){u.hc();const e=u.vc(26);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function W(e,t){1&e&&(u.Wb(0,"p",30),u.Fc(1," Opis je obavezan! "),u.Vb())}function V(e,t){if(1&e&&(u.Ub(0),u.Dc(1,W,2,0,"p",29),u.Tb()),2&e){u.hc();const e=u.vc(33);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function w(e,t){1&e&&(u.Wb(0,"p",30),u.Fc(1," Masa je obavezna! "),u.Vb())}function M(e,t){1&e&&(u.Wb(0,"p",30),u.Fc(1," Masa mora biti broj! "),u.Vb())}function S(e,t){if(1&e&&(u.Ub(0),u.Dc(1,w,2,0,"p",29),u.Dc(2,M,2,0,"p",29),u.Tb()),2&e){u.hc();const e=u.vc(45);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.nc("ngIf",null===e.value)}}function y(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",26),u.Wb(1,"div",12),u.Wb(2,"nb-toggle",31),u.dc("checkedChange",function(){u.xc(e);const i=t.$implicit;return u.hc().addOperation(i)}),u.Fc(3),u.Vb(),u.Vb(),u.Vb()}if(2&e){const e=t.$implicit,i=u.hc();u.Eb(2),u.nc("disabled",i.checkOperation(e)),u.Eb(1),u.Gc(e)}}let x=(()=>{class e{constructor(e,t,i,n,s,a){this.activatedRoute=e,this.catalogService=t,this.specialWasteService=i,this.router=n,this.toastrService=s,this.roleService=a,this.settings=b,this.checkIssues=!1,this.catalog=new c.a,this.otherOperations=[],this.specialWaste={amount:0,desc:"",mass:void 0,name:"",unitOfMeasure:"kg",operationTypes:[]},this.activatedRoute.params.subscribe(e=>{this.operation=e.operation,this.specialWasteType=e.trashType,this.ngOnInit()})}ngOnInit(){this.catalogService.getSpecialWaste().subscribe(e=>{this.catalog.load(e),this.specialWasteClasses=new Set,e.forEach(e=>this.specialWasteClasses.add(e.className))}),this.roleService.getOperations(void 0,void 0,!0).subscribe(e=>{this.operations=e.specialWasteOperations}),this.otherOperations=[],this.specialWaste.operationTypes=[],this.operations.production&&this.otherOperations.push("Proizvodnja"),this.operations.import&&this.otherOperations.push("Uvoz"),this.operations.export&&this.otherOperations.push("Izvoz"),this.specialWaste.operationTypes=this.otherOperations}checkOperation(e){return"Proizvodnja"===e&&"production"===this.operation||"Uvoz"===e&&"import"===this.operation||"Izvoz"===e&&"export"===this.operation}onSearch(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"name",search:e},{field:"className",search:e}],!1)}chooseSpecialWaste({data:e}){this.specialWaste.name=e.name,this.specialWaste.desc=e.desc,this.specialWaste.unitOfMeasure=e.unitOfMeasure}addOperation(e){this.specialWaste.operationTypes.includes(e)?this.specialWaste.operationTypes=this.specialWaste.operationTypes.filter(t=>t!==e):this.specialWaste.operationTypes.push(e)}addSpecialWaste(e){if(e.invalid||isNaN(this.specialWaste.mass))return this.checkIssues=!0,void this.toastrService.showToast("Gre\u0161ka","Ispravite sve gre\u0161ke da bi ste dodali PTO.","warning");delete this.specialWaste._id,this.specialWasteService.createSpecialWaste(this.specialWaste,this.roleService.getCompanyID()).subscribe(),this.toastrService.showToast("Uspeh","Uspe\u0161no ste dodali posebeni tok otpada!","success"),this.router.navigate(["pages","dashboard"])}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(o.a),u.Qb(r.a),u.Qb(s.a),u.Qb(o.c),u.Qb(d.a),u.Qb(l.a))},e.\u0275cmp=u.Kb({type:e,selectors:[["add-special-waste"]],decls:55,vars:12,consts:[[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"col-8","pl-0"],["placeholder","Odaberite razred","fullWidth","",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],["for","input-specialWasteName",1,"col-12","label"],[1,"col-4"],["required","","placeholder","Naziv","fullWidth","","name","specialWasteName","id","input-specialWasteName","nbInput","",3,"ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["for","input-specialWasteDesc",1,"col-12","label"],["required","","placeholder","Opis","fullWidth","","name","specialWasteDesc","id","input-specialWasteDesc","nbInput","",3,"ngModel","ngModelChange"],["desc","ngModel"],["for","input-specialWasteunitOfMeasure",1,"col-12","label"],["required","","disabled","","placeholder","Jedinica mere","fullWidth","","name","specialWasteunitOfMeasure","id","input-specialWasteunitOfMeasure","nbInput","",3,"ngModel","ngModelChange"],["for","input-specialWasteMass",1,"col-12","label"],["required","","fullWidth","","min","0","name","specialWasteMass","nbInput","","onkeypress","return /[0-9]/i.test(event.key)","placeholder","0.0","id","input-specialWasteMass","step","0.1","type","number",3,"ngModel","ngModelChange"],["mass","ngModel"],[1,"col-12","label"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["nbButton","","fullWidth","","status","primary","type","submit"],[3,"value"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["checked","",3,"disabled","checkedChange"]],template:function(e,t){if(1&e){const e=u.Xb();u.Wb(0,"nb-card",0),u.Wb(1,"nb-card-header"),u.Wb(2,"h5"),u.Fc(3,"Dodajte novi inventar posebnih tokova otpada"),u.Vb(),u.Vb(),u.Wb(4,"nb-card-body"),u.Wb(5,"div",1),u.Wb(6,"div",2),u.Wb(7,"label",3),u.Fc(8,"Pretra\u017ei po razredu:"),u.Vb(),u.Vb(),u.Wb(9,"div",2),u.Wb(10,"nb-select",4),u.dc("selectedChange",function(e){return t.onSearch(e)}),u.Dc(11,m,2,2,"nb-option",5),u.Vb(),u.Vb(),u.Wb(12,"div",2),u.Wb(13,"label",3),u.Fc(14,"Pretra\u017ei po nazivu:"),u.Vb(),u.Vb(),u.Wb(15,"div",2),u.Wb(16,"input",6,7),u.dc("input",function(){u.xc(e);const i=u.vc(17);return i.value.length>=1&&t.onSearch(i.value)}),u.Vb(),u.Wb(18,"ng2-smart-table",8),u.dc("custom",function(e){return t.chooseSpecialWaste(e)}),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"form",9,10),u.dc("ngSubmit",function(){u.xc(e);const i=u.vc(20);return t.addSpecialWaste(i)}),u.Wb(21,"div",1),u.Wb(22,"label",11),u.Fc(23,"Naziv: "),u.Vb(),u.Wb(24,"div",12),u.Wb(25,"input",13,14),u.dc("ngModelChange",function(e){return t.specialWaste.name=e}),u.Vb(),u.Dc(27,v,2,1,"ng-container",15),u.Vb(),u.Vb(),u.Wb(28,"div",1),u.Wb(29,"label",16),u.Fc(30,"Opis: "),u.Vb(),u.Wb(31,"div",12),u.Wb(32,"input",17,18),u.dc("ngModelChange",function(e){return t.specialWaste.desc=e}),u.Vb(),u.Dc(34,V,2,1,"ng-container",15),u.Vb(),u.Vb(),u.Wb(35,"div",1),u.Wb(36,"label",19),u.Fc(37,"Jedinica mere: "),u.Vb(),u.Wb(38,"div",12),u.Wb(39,"input",20),u.dc("ngModelChange",function(e){return t.specialWaste.unitOfMeasure=e}),u.Vb(),u.Vb(),u.Vb(),u.Wb(40,"div",1),u.Wb(41,"label",21),u.Fc(42),u.Vb(),u.Wb(43,"div",12),u.Wb(44,"input",22,23),u.dc("ngModelChange",function(e){return t.specialWaste.mass=e}),u.Vb(),u.Dc(46,S,3,2,"ng-container",15),u.Vb(),u.Vb(),u.Wb(47,"div",1),u.Wb(48,"label",24),u.Fc(49,"Izaberite dodatne operacije proizvoda: "),u.Vb(),u.Vb(),u.Dc(50,y,4,2,"div",25),u.Wb(51,"div",26),u.Wb(52,"div",12),u.Wb(53,"button",27),u.Fc(54,"Dodaj "),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&e){const e=u.vc(26),i=u.vc(33),n=u.vc(45);u.Eb(11),u.nc("ngForOf",t.specialWasteClasses),u.Eb(7),u.nc("source",t.catalog)("settings",t.settings),u.Eb(7),u.nc("ngModel",t.specialWaste.name),u.Eb(2),u.nc("ngIf",e.touched||t.checkIssues),u.Eb(5),u.nc("ngModel",t.specialWaste.desc),u.Eb(2),u.nc("ngIf",i.touched||t.checkIssues),u.Eb(5),u.nc("ngModel",t.specialWaste.unitOfMeasure),u.Eb(3),u.Hc("Masa jedinice mere (",t.specialWaste.unitOfMeasure,"): "),u.Eb(2),u.nc("ngModel",t.specialWaste.mass),u.Eb(2),u.nc("ngIf",n.touched||t.checkIssues),u.Eb(4),u.nc("ngForOf",t.otherOperations)}},directives:[h.A,h.D,h.z,h.tb,p.m,h.T,c.b,g.w,g.l,g.m,g.b,g.s,g.k,g.n,p.n,g.p,h.t,h.ib,h.Nb],styles:[".error-message[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]:hover{color:#1e90ff}"]}),e})();var T=i("Lx1j"),F=i("7Oz7");const C={pager:{perPage:5},hideSubHeader:!0,actions:{columnTitle:"Odaberi",position:"right",add:!1,delete:!1,edit:!1,custom:[{name:"dodaj",title:'<i class="fa fa-plus-square"></i>'}]},columns:{indexNumber:{title:"Indeksni Broj"},name:{title:"Naziv"}}};var O=i("UI7+"),E=i("McNs");function P(e,t){if(1&e&&(u.Wb(0,"nb-option",2),u.Fc(1),u.Vb()),2&e){const e=t.$implicit;u.nc("value",e),u.Eb(1),u.Gc(e)}}const k=function(){return{standalone:!0}};let z=(()=>{class e{constructor(){this.storageAmountUnit="KG",this.storageUnits=["KG","T"]}ngOnInit(){}updateStorageUnits(e){this.storageUnits="Te\u010dno"===e?["L"]:"Gasovito"===e?["M3"]:["KG","T"],this.storageAmountUnit=this.storageUnits[0]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Kb({type:e,selectors:[["input-trash-amount"]],inputs:{storageAmountUnit:"storageAmountUnit"},decls:2,vars:5,consts:[["fullWidth","",3,"ngModel","ngModelOptions","selected","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(u.Wb(0,"nb-select",0),u.dc("ngModelChange",function(e){return t.storageAmountUnit=e}),u.Dc(1,P,2,2,"nb-option",1),u.Vb()),2&e&&(u.nc("ngModel",t.storageAmountUnit)("ngModelOptions",u.qc(4,k))("selected","KG"),u.Eb(1),u.nc("ngForOf",t.storageUnits))},directives:[h.tb,g.k,g.n,p.m,h.ib],styles:[""]}),e})();function D(e,t){if(1&e){const e=u.Xb();u.Wb(0,"nb-option",42),u.dc("selectionChange",function(){u.xc(e);const i=t.$implicit;return u.hc(2).updateCatalog(i)}),u.Fc(1),u.Vb()}if(2&e){const e=t.$implicit;u.nc("value",null==e?null:e.storage),u.Eb(1),u.Gc(null==e?null:e.storage.name)}}function I(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",39),u.Wb(1,"nb-select",40),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().selectedStorage=t}),u.Dc(2,D,2,2,"nb-option",41),u.Vb(),u.Vb()}if(2&e){const e=u.hc();u.Eb(1),u.nc("ngModel",e.selectedStorage),u.Eb(1),u.nc("ngForOf",e.permits)}}function L(e,t){1&e&&(u.Wb(0,"p",44),u.Fc(1," Naziv je obavezan! "),u.Vb())}function A(e,t){if(1&e&&(u.Ub(0),u.Dc(1,L,2,0,"p",43),u.Tb()),2&e){u.hc();const e=u.vc(28);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function j(e,t){1&e&&(u.Wb(0,"p",44),u.Fc(1," Opis je obavezan! "),u.Vb())}function _(e,t){if(1&e&&(u.Ub(0),u.Dc(1,j,2,0,"p",43),u.Tb()),2&e){u.hc();const e=u.vc(35);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function N(e,t){1&e&&(u.Wb(0,"p",46),u.Fc(1," Koli\u010dina je obavezna! "),u.Vb())}function U(e,t){1&e&&(u.Wb(0,"p",46),u.Fc(1," Koli\u010dina mora biti broj! "),u.Vb())}function q(e,t){if(1&e&&(u.Ub(0),u.Dc(1,N,2,0,"p",45),u.Dc(2,U,2,0,"p",45),u.Tb()),2&e){u.hc();const e=u.vc(43);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required),u.Eb(1),u.nc("ngIf",null===e.value)}}function R(e,t){if(1&e&&(u.Wb(0,"nb-option",47),u.Fc(1),u.Vb()),2&e){const e=t.$implicit;u.nc("value",e),u.Eb(1),u.Gc(e)}}function Q(e,t){1&e&&(u.Wb(0,"p",44),u.Fc(1," Fizi\u010dko stanje je obavezno! "),u.Vb())}function G(e,t){if(1&e&&(u.Ub(0),u.Dc(1,Q,2,0,"p",43),u.Tb()),2&e){u.hc();const e=u.vc(54);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function $(e,t){if(1&e&&(u.Wb(0,"nb-option",47),u.Fc(1),u.Vb()),2&e){const e=t.$implicit;u.nc("value",e),u.Eb(1),u.Gc(e.name)}}function X(e,t){1&e&&(u.Wb(0,"p",44),u.Fc(1," Morate odabrati skladi\u0161te! "),u.Vb())}function K(e,t){if(1&e&&(u.Ub(0),u.Dc(1,X,2,0,"p",43),u.Tb()),2&e){u.hc();const e=u.vc(5);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function B(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",1),u.Wb(1,"label",48),u.Fc(2,"Odaberite skladi\u0161te za otpad: "),u.Vb(),u.Wb(3,"div",11),u.Wb(4,"nb-select",49,50),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().selectedStorage=t}),u.Dc(6,$,2,2,"nb-option",33),u.Vb(),u.Dc(7,K,2,1,"ng-container",17),u.Vb(),u.Vb()}if(2&e){const e=u.vc(5),t=u.hc();u.Eb(4),u.nc("ngModel",t.selectedStorage),u.Eb(2),u.nc("ngForOf",t.storages),u.Eb(1),u.nc("ngIf",e.touched||t.checkIssues)}}function H(e,t){if(1&e&&(u.Wb(0,"nb-option",47),u.Fc(1),u.Vb()),2&e){const e=t.$implicit,i=t.index;u.nc("value","D"+(i+1)),u.Eb(1),u.Gc("D"+(i+1)+" | "+e)}}function Y(e,t){1&e&&(u.Wb(0,"p",44),u.Fc(1," D oznaka je obavezna! "),u.Vb())}function J(e,t){if(1&e&&(u.Ub(0),u.Dc(1,Y,2,0,"p",43),u.Tb()),2&e){u.hc();const e=u.vc(5);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function Z(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",1),u.Wb(1,"label",48),u.Fc(2,"Odaberite D oznaku (mo\u017eete je promentiti u svakom trenutku): "),u.Vb(),u.Wb(3,"div",51),u.Wb(4,"nb-select",52,53),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().trash.dSign=t}),u.Dc(6,H,2,2,"nb-option",33),u.Vb(),u.Dc(7,J,2,1,"ng-container",17),u.Vb(),u.Vb()}if(2&e){const e=u.vc(5),t=u.hc();u.Eb(4),u.nc("ngModel",t.trash.dSign)("required","dump"===t.operation),u.Eb(2),u.nc("ngForOf",t.dSigns),u.Eb(1),u.nc("ngIf",e.touched||t.checkIssues)}}function ee(e,t){if(1&e&&(u.Wb(0,"nb-option",47),u.Fc(1),u.Vb()),2&e){const e=t.$implicit,i=t.index;u.nc("value","R"+(i+1)),u.Eb(1),u.Gc("R"+(i+1)+" | "+e)}}function te(e,t){1&e&&(u.Wb(0,"p",44),u.Fc(1," R oznaka je obavezna! "),u.Vb())}function ie(e,t){if(1&e&&(u.Ub(0),u.Dc(1,te,2,0,"p",43),u.Tb()),2&e){u.hc();const e=u.vc(5);u.Eb(1),u.nc("ngIf",null==e.errors?null:e.errors.required)}}function ne(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",1),u.Wb(1,"label",48),u.Fc(2,"Odaberite R oznaku (mo\u017eete je promentiti u svakom trenutku): "),u.Vb(),u.Wb(3,"div",51),u.Wb(4,"nb-select",54,55),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().trash.rSign=t}),u.Dc(6,ee,2,2,"nb-option",33),u.Vb(),u.Dc(7,ie,2,1,"ng-container",17),u.Vb(),u.Vb()}if(2&e){const e=u.vc(5),t=u.hc();u.Eb(4),u.nc("ngModel",t.trash.rSign)("required","treatment"===t.operation),u.Eb(2),u.nc("ngForOf",t.rSigns),u.Eb(1),u.nc("ngIf",e.touched||t.checkIssues)}}function se(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",1),u.Wb(1,"label",56),u.Fc(2,"\u0160ifra ispitivanja otpada: "),u.Vb(),u.Wb(3,"div",11),u.Wb(4,"input",57),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().trash.examinationCode=t}),u.Vb(),u.Vb(),u.Vb()}if(2&e){const e=u.hc(),t=u.vc(64);u.Eb(4),u.nc("ngModel",e.trash.examinationCode)("required",t.checked)}}function ae(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",1),u.Wb(1,"label",58),u.Fc(2,"Datum ispitivanja otpada: "),u.Vb(),u.Wb(3,"div",11),u.Wb(4,"input",59),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().trash.examinationDate=t}),u.Vb(),u.Rb(5,"nb-datepicker",60,61),u.Vb(),u.Vb()}if(2&e){const e=u.vc(6),t=u.hc(),i=u.vc(64);u.Eb(4),u.nc("ngModel",t.trash.examinationDate)("nbDatepicker",e)("required",i.checked),u.Eb(1),u.nc("max",t.today())}}function oe(e,t){if(1&e&&(u.Wb(0,"nb-option",47),u.Fc(1),u.Vb()),2&e){const e=t.$implicit,i=t.index;u.nc("value","H"+(i+1)),u.Eb(1),u.Gc("H"+(i+1)+" | "+e)}}function ce(e,t){if(1&e&&(u.Wb(0,"nb-option",47),u.Fc(1),u.Vb()),2&e){const e=t.$implicit,i=t.index;u.nc("value","Y"+(i+1)),u.Eb(1),u.Gc("Y"+(i+1)+" | "+e)}}function re(e,t){if(1&e&&(u.Wb(0,"nb-option",47),u.Fc(1),u.Vb()),2&e){const e=t.$implicit,i=t.index;u.nc("value","C"+(i+1)),u.Eb(1),u.Gc("C"+(i+1)+" | "+e)}}function le(e,t){if(1&e&&(u.Wb(0,"div",11),u.Fc(1),u.Wb(2,"div",1),u.Wb(3,"label",48),u.Fc(4,"CAS: "),u.Vb(),u.Wb(5,"div",68),u.Wb(6,"input",69),u.dc("ngModelChange",function(e){return t.$implicit.CAS=e}),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",1),u.Wb(8,"label",48),u.Fc(9,"Hemijski naziv: "),u.Vb(),u.Wb(10,"div",68),u.Wb(11,"input",70),u.dc("ngModelChange",function(e){return t.$implicit.chemicalName=e}),u.Vb(),u.Vb(),u.Vb(),u.Wb(12,"div",1),u.Wb(13,"label",48),u.Fc(14,"Kilograma opasne materije po kilogram otpada: "),u.Vb(),u.Wb(15,"div",71),u.Wb(16,"input",72),u.dc("ngModelChange",function(e){return t.$implicit.kgOfMatter=e}),u.Vb(),u.Vb(),u.Wb(17,"div",73),u.Wb(18,"button",74),u.Fc(19,"kg"),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e){const e=t.$implicit,i=t.index;u.hc(3);const n=u.vc(64);u.Eb(1),u.Hc(" Komponenta #",i+1," "),u.Eb(5),u.nc("required",n.checked)("ngModel",e.CAS),u.Eb(5),u.nc("ngModel",e.chemicalName)("required",n.checked),u.Eb(5),u.nc("ngModel",e.kgOfMatter)("required",n.checked)}}function de(e,t){if(1&e&&(u.Wb(0,"div",1),u.Dc(1,le,20,7,"div",67),u.Vb()),2&e){const e=u.hc(2);u.Eb(1),u.nc("ngForOf",e.trash.unsafeComponent)}}function be(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div"),u.Wb(1,"div",1),u.Wb(2,"label",62),u.Fc(3,"H-Lista: "),u.Vb(),u.Wb(4,"label",62),u.Fc(5,"Y-Lista: "),u.Vb(),u.Wb(6,"label",62),u.Fc(7,"C-Lista: "),u.Vb(),u.Wb(8,"div",63),u.Wb(9,"nb-select",54),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().trash.hList=t}),u.Dc(10,oe,2,2,"nb-option",33),u.Vb(),u.Vb(),u.Wb(11,"div",63),u.Wb(12,"nb-select",54),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().trash.yList=t}),u.Dc(13,ce,2,2,"nb-option",33),u.Vb(),u.Vb(),u.Wb(14,"div",39),u.Wb(15,"nb-select",54),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().trash.cList=t}),u.Dc(16,re,2,2,"nb-option",33),u.Vb(),u.Vb(),u.Vb(),u.Wb(17,"div",1),u.Wb(18,"label",48),u.Fc(19,"Broj opasnih komponenta u otpadu: "),u.Vb(),u.Wb(20,"div",11),u.Wb(21,"input",64),u.dc("ngModelChange",function(t){return u.xc(e),u.hc().componentsNo=t}),u.Vb(),u.Vb(),u.Wb(22,"div",65),u.Wb(23,"button",66),u.dc("click",function(){return u.xc(e),u.hc().updateCAS()}),u.Fc(24,"Odaberi"),u.Vb(),u.Vb(),u.Vb(),u.Dc(25,de,2,1,"div",34),u.Vb()}if(2&e){const e=u.hc(),t=u.vc(64);u.Eb(9),u.nc("ngModel",e.trash.hList)("required",t.checked),u.Eb(1),u.nc("ngForOf",e.hList),u.Eb(2),u.nc("ngModel",e.trash.yList)("required",t.checked),u.Eb(1),u.nc("ngForOf",e.yList),u.Eb(2),u.nc("ngModel",e.trash.cList)("required",t.checked),u.Eb(1),u.nc("ngForOf",e.cList),u.Eb(5),u.nc("ngModel",e.componentsNo)("required",t.checked),u.Eb(4),u.nc("ngIf",e.componentsNo>0)}}const ue=function(){return{standalone:!0}};let he=(()=>{class e{constructor(e,t,i,n,s,a,o,r,l){this.catalogService=e,this.trashService=t,this.router=i,this.authService=n,this.activatedRoute=s,this.storageService=a,this.toastrService=o,this.roleService=r,this.permitService=l,this.catalog=new c.a,this.storageAmmountUnit="KG",this.storages=[],this.permits=[],this.trash={amount:null,desc:"",indexNumber:"",name:"",dSign:"",rSign:"",state:""},this.componentsNo=0,this.checkIssues=!1,this.settings=Object.assign({},C),this.states=Object.assign([],O.e),this.dSigns=Object.assign([],O.b),this.rSigns=Object.assign([],O.d),this.hList=Object.assign([],O.c),this.yList=Object.assign([],O.f),this.cList=Object.assign([],O.a),this.activatedRoute.params.subscribe(e=>{this.storages=[],this.selectedStorage=void 0,this.operation=e.operation,this.trashType=e.trashType,this.ngOnInit()})}ngOnInit(){this.storageService.getCompaniesStorage(this.roleService.getCompanyID(),this.operation).subscribe(e=>{this.storages=e}),"production"!==this.operation?this.updatePermits():"safe"===this.trashType?this.catalogService.getSafeTrash().subscribe(e=>{this.catalog.load(e)}):this.catalogService.getUnsafeTrash().subscribe(e=>{this.catalog.load(e)}),"unsafe"===this.trashType&&(this.trash=this.trash)}updatePermits(){this.permitService.getCompaniesPermits(this.roleService.getCompanyID(),this.operation).subscribe(e=>{this.permits=e;for(let t=0;t<this.permits.length;t++)this.permits[t].trashList=this.permits[t].trashList.filter("safe"===this.trashType?e=>!e.indexNumber.includes("*"):e=>e.indexNumber.includes("*"));this.updateCatalog(this.permits[0])})}updateCatalog(e){void 0===e&&this.updatePermits(),this.selectedStorage=this.storages.find(t=>t._id===e.storage._id);const t=Array.from(this.selectedStorage.trashes,e=>e.indexNumber);let i=e.trashList;i=i.filter(e=>!t.includes(e.indexNumber)),this.catalog.load(i)}onSearch(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"indexNumber",search:e,filter:function(e,t){return e.replace(/\s+/g,"").includes(t.replace(/\s+/g,""))}},{field:"name",search:e}],!1)}updateCAS(){const e=this.trash;e.unsafeComponent=new Array(this.componentsNo);for(let t=0;t<this.componentsNo;t++)e.unsafeComponent[t]={kgOfMatter:null,CAS:"",chemicalName:""};this.trash=Object.assign({},e)}chooseTrash({data:e}){this.trash.indexNumber=e.indexNumber,this.trash.name=e.name,this.trash.desc=e.name}today(){return new Date}addTrash(e){if(e.invalid||isNaN(this.trash.amount))return this.checkIssues=!0,void this.toastrService.showToast("Gre\u0161ka","Ispravite sve gre\u0161ke da bi ste dodali otpad.","warning");"T"===this.storageAmmountUnit&&(this.trash.amount*=1e3),delete this.trash._id,this.trashService.createTrash(this.trash,this.selectedStorage._id).subscribe(),this.toastrService.showToast("Uspeh","Uspe\u0161no ste dodali otpad na skladi\u0161te "+this.selectedStorage.name,"success"),this.router.navigate(["pages","storage"])}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(r.a),u.Qb(T.a),u.Qb(o.c),u.Qb(E.g),u.Qb(o.a),u.Qb(F.a),u.Qb(d.a),u.Qb(l.a),u.Qb(n.a))},e.\u0275cmp=u.Kb({type:e,selectors:[["pages-add-trash"]],decls:73,vars:27,consts:[[1,"container-fluid"],[1,"row","mb-2"],[1,"col-12"],[1,"col-8","pl-0"],["class","col-4",4,"ngIf"],["nbInput","","fullWidth","","type","text","placeholder","Pretra\u017ei",3,"input"],["search",""],[3,"source","settings","custom"],[3,"ngSubmit"],["addForm","ngForm"],[1,"row"],[1,"col-6"],["for","input-indeksniBroj",1,"col-12","label"],["nbInput","","fullWidth","","disabled","","required","","id","input-indeksniBroj",3,"ngModelOptions","ngModel","placeholder","ngModelChange"],["for","input-trashName",1,"col-12","label"],["fullWidth","","id","input-trashName","name","trashName","nbInput","","placeholder","Naziv","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","ngModel"],[4,"ngIf"],["for","input-trashDesc",1,"col-12","label"],["required","","placeholder","Opis","fullWidth","","name","trashDesc","id","input-trashDesc","nbInput","",3,"ngModel","ngModelChange"],["desc","ngModel"],["for","input-trashAmount",1,"col-12","label"],[1,"row","ml-1"],[1,"col-5","pr-0"],["required","","onkeypress","return /[0-9]/i.test(event.key)","fullWidth","","min","0","name","trashAmount","nbInput","","placeholder","0.0","id","input-trashAmount","step","0.1","type","number",3,"ngModel","ngModelChange"],["amount","ngModel"],[1,"col-1","pl-0"],[3,"storageAmountUnit"],["trashAmount",""],[1,"ml-2","row"],["for","input-trashState",1,"col-12","label"],["required","","placeholder","Fizi\u010dko stanje","fullWidth","","name","trashState","id","input-trashState","selected","Cvrsto",3,"ngModel","selectedChange","ngModelChange"],["state","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","row mb-2",4,"ngIf"],["status","basic",3,"checked","disabled"],["examinationCodeToggle",""],[1,"row","my-2"],["nbButton","","fullWidth","","status","primary","type","submit"],[1,"col-4"],["fullWidth","",3,"ngModel","ngModelChange"],[3,"value","selectionChange",4,"ngFor","ngForOf"],[3,"value","selectionChange"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["class","col-12 error-message mt-1 mb-0",4,"ngIf"],[1,"col-12","error-message","mt-1","mb-0"],[3,"value"],[1,"col-12","label"],["fullWidth","","required","","name","storage",3,"ngModel","ngModelChange"],["storage","ngModel"],[1,"col-10"],["fullWidth","","name","dSign",3,"ngModel","required","ngModelChange"],["dSign","ngModel"],["fullWidth","","name","rSign",3,"ngModel","required","ngModelChange"],["rSign","ngModel"],["for","input-examinationCode",1,"col-12","label"],["fullWidth","","id","input-examinationCode","name","examinationCode","nbInput","","placeholder","\u0160ifra","type","text",3,"ngModel","required","ngModelChange"],["for","input-examinationDate",1,"col-12","label"],["fullWidth","","placeholder","Datum","id","input-examinationDate","name","examinationDate","nbInput","",3,"ngModel","nbDatepicker","required","ngModelChange"],[3,"max"],["examinationDatePicker",""],[1,"col-4","label"],[1,"col-4","mb-2"],["fullWidth","","min","1","name","brojKomponeti","nbInput","","type","number",3,"ngModel","required","ngModelChange"],[1,"col-3"],["fullWidth","","nbButton","","type","button",3,"click"],["class","col-6",4,"ngFor","ngForOf"],[1,"col-8"],["nbInput","","type","text","required","","name","CAS",3,"required","ngModel","ngModelChange"],["nbInput","","type","text","required","","name","Hemijski naziv",3,"ngModel","required","ngModelChange"],[1,"col-6","pr-0"],["fullWidth","","decimals","1","step","0.1","min","0","type","number","nbInput","","placeholder","0.0","name","Kg opasne materije",3,"ngModel","required","ngModelChange"],[1,"col-2","pl-0"],["nbButton","","disabled",""]],template:function(e,t){if(1&e){const e=u.Xb();u.Wb(0,"nb-card",0),u.Wb(1,"nb-card-header"),u.Wb(2,"h5"),u.Fc(3,"Dodajte novi inventar otpada"),u.Vb(),u.Vb(),u.Wb(4,"nb-card-body"),u.Wb(5,"div",1),u.Wb(6,"div",2),u.Wb(7,"label",3),u.Fc(8,"Pretra\u017ei po indeksnom broju ili nazivu:"),u.Vb(),u.Vb(),u.Dc(9,I,3,2,"div",4),u.Wb(10,"div",2),u.Wb(11,"input",5,6),u.dc("input",function(){u.xc(e);const i=u.vc(12);return i.value.length>=1&&t.onSearch(i.value)}),u.Vb(),u.Wb(13,"ng2-smart-table",7),u.dc("custom",function(e){return t.chooseTrash(e)}),u.Vb(),u.Vb(),u.Vb(),u.Wb(14,"form",8,9),u.dc("ngSubmit",function(){u.xc(e);const i=u.vc(15);return t.addTrash(i)}),u.Wb(16,"div",10),u.Wb(17,"div",11),u.Wb(18,"div",1),u.Wb(19,"label",12),u.Fc(20,"Indeksni broj:"),u.Vb(),u.Wb(21,"div",11),u.Wb(22,"input",13),u.dc("ngModelChange",function(e){return t.trash.indexNumber=e}),u.Vb(),u.Vb(),u.Vb(),u.Wb(23,"div",1),u.Wb(24,"label",14),u.Fc(25,"Naziv: "),u.Vb(),u.Wb(26,"div",11),u.Wb(27,"input",15,16),u.dc("ngModelChange",function(e){return t.trash.name=e}),u.Vb(),u.Dc(29,A,2,1,"ng-container",17),u.Vb(),u.Vb(),u.Wb(30,"div",1),u.Wb(31,"label",18),u.Fc(32,"Opis: "),u.Vb(),u.Wb(33,"div",11),u.Wb(34,"input",19,20),u.dc("ngModelChange",function(e){return t.trash.desc=e}),u.Vb(),u.Dc(36,_,2,1,"ng-container",17),u.Vb(),u.Vb(),u.Wb(37,"div",1),u.Wb(38,"label",21),u.Fc(39,"Trenutna koli\u010dina na skladistu: "),u.Vb(),u.Wb(40,"div",22),u.Wb(41,"div",23),u.Wb(42,"input",24,25),u.dc("ngModelChange",function(e){return t.trash.amount=e}),u.Vb(),u.Vb(),u.Wb(44,"div",26),u.Rb(45,"input-trash-amount",27,28),u.Vb(),u.Vb(),u.Wb(47,"div",29),u.Dc(48,q,3,2,"ng-container",17),u.Vb(),u.Vb(),u.Wb(49,"div",1),u.Wb(50,"label",30),u.Fc(51,"Fizicko stanje otpada: "),u.Vb(),u.Wb(52,"div",11),u.Wb(53,"nb-select",31,32),u.dc("selectedChange",function(){return u.xc(e),u.vc(46).updateStorageUnits(t.trash.state)})("ngModelChange",function(e){return t.trash.state=e}),u.Dc(55,R,2,2,"nb-option",33),u.Vb(),u.Dc(56,G,2,1,"ng-container",17),u.Vb(),u.Vb(),u.Dc(57,B,8,3,"div",34),u.Dc(58,Z,8,4,"div",34),u.Dc(59,ne,8,4,"div",34),u.Vb(),u.Wb(60,"div",11),u.Wb(61,"div",1),u.Wb(62,"div",2),u.Wb(63,"nb-toggle",35,36),u.Fc(65,"Imam dokumenat o ispitivanju otpada "),u.Vb(),u.Vb(),u.Vb(),u.Dc(66,se,5,2,"div",34),u.Dc(67,ae,7,4,"div",34),u.Dc(68,be,26,12,"div",17),u.Vb(),u.Wb(69,"div",37),u.Wb(70,"div",2),u.Wb(71,"button",38),u.Fc(72,"Dodaj "),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&e){const e=u.vc(28),i=u.vc(35),n=u.vc(43),s=u.vc(54),a=u.vc(64);u.Eb(9),u.nc("ngIf","production"!==t.operation),u.Eb(4),u.nc("source",t.catalog)("settings",t.settings),u.Eb(9),u.nc("ngModelOptions",u.qc(25,ue))("ngModel",t.trash.indexNumber)("placeholder",t.trash.indexNumber||"00 00 00"),u.Eb(5),u.nc("ngModel",t.trash.name)("ngModelOptions",u.qc(26,ue)),u.Eb(2),u.nc("ngIf",e.touched||t.checkIssues),u.Eb(5),u.nc("ngModel",t.trash.desc),u.Eb(2),u.nc("ngIf",i.touched||t.checkIssues),u.Eb(6),u.nc("ngModel",t.trash.amount),u.Eb(3),u.nc("storageAmountUnit",t.storageAmmountUnit),u.Eb(3),u.nc("ngIf",n.touched||t.checkIssues),u.Eb(5),u.nc("ngModel",t.trash.state),u.Eb(2),u.nc("ngForOf",t.states),u.Eb(1),u.nc("ngIf",s.touched||t.checkIssues),u.Eb(1),u.nc("ngIf","production"===t.operation),u.Eb(1),u.nc("ngIf","dump"===t.operation),u.Eb(1),u.nc("ngIf","treatment"===t.operation),u.Eb(4),u.nc("checked","unsafe"===t.trashType)("disabled","unsafe"===t.trashType),u.Eb(3),u.nc("ngIf",a.checked||"unsafe"===t.trashType),u.Eb(1),u.nc("ngIf",a.checked||"unsafe"===t.trashType),u.Eb(1),u.nc("ngIf","unsafe"===t.trashType)}},directives:[h.A,h.D,h.z,p.n,h.T,c.b,g.w,g.l,g.m,g.b,g.s,g.k,g.n,g.p,z,h.tb,p.m,h.Nb,h.t,h.ib,h.M,h.L],styles:["[_nghost-%COMP%]   ng2-st-tbody-custom[_ngcontent-%COMP%]   a.ng2-smart-action.ng2-smart-action-custom-custom[_ngcontent-%COMP%]:hover{color:#1e90ff}.error-message[_ngcontent-%COMP%]{color:red}"]}),e})();const pe=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Kb({type:e,selectors:[["pages-trash"]],decls:1,vars:0,template:function(e,t){1&e&&u.Rb(0,"router-outlet")},directives:[o.h],encapsulation:2}),e})(),children:[{path:"specialwaste/:operation",component:x},{path:":trashType/:operation",component:he}]}];let ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Ob({type:e}),e.\u0275inj=u.Nb({imports:[[o.g.forChild(pe)],o.g]}),e})(),me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Ob({type:e}),e.\u0275inj=u.Nb({providers:[r.a,T.a,n.a,s.a],imports:[[a.a,ge,h.E,h.U,h.ub,h.H,c.c,h.w,g.e,h.N,h.Ob]]}),e})()},BMkl:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("AytR"),s=i("fXoL"),a=i("tk/3");let o=(()=>{class e extends class{}{constructor(e){super(),this.http=e,this.apiUrl=n.a.apiUrl}createSpecialWaste(e,t){return this.http.post(this.apiUrl+"/api/specialwaste",{specialWaste:e,companyID:t})}deleteSpecialWaste(e,t="_id"){return this.http.delete(this.apiUrl+"/api/specialwaste/one/"+`${t}/${e}`)}getSpecialWaste(e,t="_id"){return this.http.get(this.apiUrl+"/api/specialwaste/one/"+`${t}/${e}`)}getSpecialWastes(e,t){return this.http.get(this.apiUrl+"/api/specialwaste/many/"+`${t}/${e}`)}updateSpecialWaste(e,t,i,n,s="_id"){return this.http.patch(this.apiUrl+"/api/specialwaste/one/"+`${s}/${n}`,{specialWaste:e,specialWasteType:t,amount:i})}getCompaniesSpecialWastes(e,t="all"){return this.http.get(this.apiUrl+"/api/company/specialwastes/"+`${e}/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(s.ac(a.b))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac}),e})()},dgmN:function(e,t,i){"use strict";i.r(t),i.d(t,"PagesModule",function(){return ot});var n=i("3Pt+"),s=i("aceb"),a=i("RS3s"),o=i("bS1W"),c=i("wH5/"),r=i("fo3O"),l=i("H5EB"),d=i("vTDv"),b=i("zQsl"),u=i("bJfm"),h=i("fXoL");let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Ob({type:e}),e.\u0275inj=h.Nb({providers:[],imports:[[n.e,d.a,s.E,s.Sb,s.w,s.n,s.S,s.w,u.a,s.ub,s.zb,s.k,a.c,s.Ib,b.c,b.a]]}),e})();var g=i("5IJp"),m=i("tyNb"),f=i("ud2R"),v=i("BHmg"),W=i("KeQW"),V=i("ofXK");function w(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div"),h.Wb(1,"button",6),h.dc("click",function(){return h.xc(e),h.hc().updatePositionMethod(-1)}),h.Rb(2,"i",7),h.Vb(),h.Wb(3,"button",6),h.dc("click",function(){return h.xc(e),h.hc().updatePositionMethod(1)}),h.Rb(4,"i",8),h.Vb(),h.Vb()}}let M=(()=>{class e{constructor(){this.updatePosition=new h.o,this.showSettings=!1}ngOnInit(){}updatePositionMethod(e){this.updatePosition.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-group-header"]],inputs:{title:"title",status:"status"},outputs:{updatePosition:"updatePosition"},decls:9,vars:4,consts:[[3,"status"],[1,"row"],[1,"col-6","d-flex","justify-content-start"],[1,"col-6","d-flex","flex-fill","justify-content-end"],["nbButton","","size","small",3,"status","click"],[4,"ngIf"],["nbButton","",3,"click"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"]],template:function(e,t){1&e&&(h.Wb(0,"nb-card",0),h.Wb(1,"nb-card-header"),h.Wb(2,"div",1),h.Wb(3,"div",2),h.Fc(4),h.Vb(),h.Wb(5,"div",3),h.Wb(6,"button",4),h.dc("click",function(){return t.showSettings=!t.showSettings}),h.Fc(7,"Izmeni redosled"),h.Vb(),h.Dc(8,w,5,0,"div",5),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e&&(h.nc("status",t.status),h.Eb(4),h.Gc(t.title),h.Eb(2),h.nc("status",t.status),h.Eb(2),h.nc("ngIf",t.showSettings))},directives:[s.A,s.D,s.t,V.n],styles:[""]}),e})();var S=i("TOXQ");const y={view:[],legend:!0,legendTitle:"",showLabels:!0,animations:!0,xAxis:!0,yAxis:!0,showYAxisLabel:!0,showXAxisLabel:!0,xAxisLabel:"Dani",yAxisLabel:"KG",timeline:!0,schemaType:"linear"};function x(e,t){if(1&e&&(h.Wb(0,"div",10),h.Rb(1,"ngx-charts-bar-vertical-stacked",11,12),h.Vb()),2&e){const e=h.hc();h.Eb(1),h.nc("legend",e.options.legend)("showXAxisLabel",e.options.showXAxisLabel)("scheme",e.colorScheme)("showYAxisLabel",e.options.showYAxisLabel)("xAxis",e.options.xAxis)("yAxis",e.options.yAxis)("xAxisLabel",e.options.xAxisLabel)("yAxisLabel",e.options.yAxisLabel)("results",e.data)("view",e.options.view)}}function T(e,t){if(1&e&&(h.Wb(0,"nb-option",13),h.Fc(1),h.Vb()),2&e){const e=t.$implicit;h.nc("value",e),h.Eb(1),h.Hc(" ",e.trash.name," ")}}let F=(()=>{class e{constructor(e){this.transactionService=e,this.trashList=[],this.daysInMonth=30,this.data=[],this.colorScheme={domain:["#FF0000","#0000FF"]};const t=new Date;this.options=Object.assign({},y),this.updateSize(this.size),this.daysInMonth=new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}ngOnChanges(e){e.size&&this.updateSize(this.size),e.type&&this.transactionService.getMostUsedTrash(this.type).subscribe(e=>{this.trashList=e,0!==e.length&&(this.selectedTrash=this.trashList[0],this.updateGraph(this.selectedTrash))})}chooseTransaction(e){this.selectedTrash=e,this.updateGraph(e)}updateGraph(e){this.transactionService.getTransactions(e.trash._id,"trash").subscribe(e=>{this.trash=e,this.options.legendTitle=this.trash[0].trash.name;let t="Obradjen";"production"===this.type&&(t="Transportovan");const i={name:"Proizveden",value:0},n={name:t,value:0};this.data=[];for(let s=0;s<this.daysInMonth;s++)this.data[s]={name:s+1+"",series:[]};for(let s=0;s<this.trash.length;s++){let e="-";e="0"!==this.trash[s].date.toString().substring(8,10).charAt(0)?this.trash[s].date.toString().substring(8,10):this.trash[s].date.toString().substring(9,10),this.trash[s].trashAmount>0?(i.value+=this.trash[s].trashAmount,this.data[e].series.push({name:"Proizveden",value:this.trash[s].trashAmount})):(n.value+=Math.abs(this.trash[s].trashAmount),this.data[e].series.push({name:"Transportovan",value:this.trash[s].trashAmount}))}})}updateSize(e){"tiny"===e||"small"===e?this.options.view=[]:"medium"===e?this.options.view=[500,300]:"large"===e?this.options.view=[700,300]:"giant"===e&&(this.options.view=[1100,500])}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(S.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-trash-stats"]],inputs:{type:"type",size:"size"},features:[h.Cb],decls:14,vars:6,consts:[["class","row flex-fill",4,"ngIf"],[1,"row","mt-2"],[1,"col-4"],["fullWidth","",3,"size","selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2"],["disabled","","fullWidth","","selected","Dani",3,"size"],["value","Dani"],["value","Meseci"],["value","Godine"],[1,"row","flex-fill"],[3,"legend","showXAxisLabel","scheme","showYAxisLabel","xAxis","yAxis","xAxisLabel","yAxisLabel","results","view"],["bar",""],[3,"value"]],template:function(e,t){1&e&&(h.Fc(0),h.Dc(1,x,3,10,"div",0),h.Wb(2,"div",1),h.Wb(3,"div",2),h.Wb(4,"nb-select",3),h.dc("selectedChange",function(e){return t.chooseTransaction(e)}),h.Dc(5,T,2,2,"nb-option",4),h.Vb(),h.Vb(),h.Wb(6,"div",5),h.Wb(7,"nb-select",6),h.Wb(8,"nb-option",7),h.Fc(9,"Dani"),h.Vb(),h.Wb(10,"nb-option",8),h.Fc(11,"Meseci"),h.Vb(),h.Wb(12,"nb-option",9),h.Fc(13,"Godine"),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e&&(h.Hc("",t.options.legendTitle,"\n"),h.Eb(1),h.nc("ngIf",t.type),h.Eb(3),h.nc("size",t.size)("selected",t.trashList[0]),h.Eb(1),h.nc("ngForOf",t.trashList),h.Eb(2),h.nc("size",t.size))},directives:[V.n,s.tb,V.m,s.ib,b.b],styles:[""]}),e})();var C=i("Lx1j"),O=i("xsDJ"),E=i("+HCH");const P=["addTrashTemplate"],k=["processTrashTemplate"];function z(e,t){1&e&&(h.Wb(0,"div",1),h.Fc(1,"Dodaj otpad"),h.Vb())}function D(e,t){1&e&&(h.Wb(0,"div",1),h.Fc(1,"Obradi otpad"),h.Vb())}function I(e,t){1&e&&(h.Wb(0,"div",1),h.Fc(1,"Odolo\u017ei otpad"),h.Vb())}function L(e,t){1&e&&(h.Wb(0,"div",1),h.Fc(1,"Skladi\u0161ti otpad"),h.Vb())}function A(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div",11),h.Wb(1,"i",12),h.dc("click",function(){h.xc(e);const t=h.hc().$implicit;return h.hc().openAddTrashWindow(t.trash,t.storage)}),h.Vb(),h.Vb()}}function j(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div",11),h.Wb(1,"i",13),h.dc("click",function(){h.xc(e);const t=h.hc().$implicit;return h.hc().openProcessTrashWindow(t.trash,t.storage)}),h.Vb(),h.Vb()}}function _(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div",11),h.Wb(1,"i",14),h.dc("click",function(){h.xc(e);const t=h.hc().$implicit;return h.hc().openProcessTrashWindow(t.trash,t.storage)}),h.Vb(),h.Vb()}}function N(e,t){if(1&e&&(h.Wb(0,"div",7),h.Wb(1,"div",8),h.Fc(2),h.Vb(),h.Wb(3,"div",9),h.Fc(4),h.Vb(),h.Wb(5,"div",1),h.Fc(6),h.Vb(),h.Dc(7,A,2,0,"div",10),h.Dc(8,j,2,0,"div",10),h.Dc(9,_,2,0,"div",10),h.Vb()),2&e){const e=t.$implicit,i=h.hc();h.Eb(2),h.Gc(e.trash.indexNumber),h.Eb(2),h.Gc(e.trash.name),h.Eb(2),h.Gc(e.trash.amount),h.Eb(1),h.nc("ngIf","production"===i.type||"cache"===i.type),h.Eb(1),h.nc("ngIf","treatment"===i.type),h.Eb(1),h.nc("ngIf","disposal"===i.type)}}function U(e,t){if(1&e){const e=h.Xb();h.Wb(0,"add-trash-popup",15),h.dc("callAddTrash",function(t){return h.xc(e),h.hc().addTrashMethod(t)}),h.Vb()}if(2&e){const e=h.hc();h.nc("type","production")("selectedTrash",e.selectedTrash)}}function q(e,t){if(1&e){const e=h.Xb();h.Wb(0,"process-trash-popup",16),h.dc("callProcessTrash",function(t){return h.xc(e),h.hc().processTrashMethod(t)}),h.Vb()}if(2&e){const e=h.hc();h.nc("selectedTrash",e.selectedTrash)}}let R=(()=>{class e{constructor(e,t,i,n){this.transactionService=e,this.windowService=t,this.trashService=i,this.toastrService=n,this.transactions=[]}ngOnInit(){this.updateTransactions()}updateTransactions(){this.transactionService.getMostUsedTrash(this.type).subscribe(e=>{this.transactions=e})}openAddTrashWindow(e,t){this.selectedTrash=e,this.selectedStorageID=t,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj proizvedenu kolicinu: "+this.selectedTrash.name})}addTrashMethod({trashAmmount:e}){this.selectedTrash.amount+=e,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageID,this.selectedTrash._id).subscribe(e=>{this.updateTransactions()}),this.showToast("Uspeh","Uspe\u0161no ste dodali "+e+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),e=NaN}openProcessTrashWindow(e,t){this.selectedTrash=e,this.selectedStorageID=t,this.windowRef=this.windowService.open(this.processTrashTemplate,{title:"Obradi odre\u0111enu koli\u010dinu: "+this.selectedTrash.name})}processTrashMethod({selectedTransaction:e,trashAmmount:t,trashCreated:i}){this.selectedTrash.amount-=t,this.trashService.updateTrash(this.selectedTrash,this.selectedStorageID,this.selectedTrash._id,"_id",i?e.companyName?e.companyName:e:"",i?e.wmdNo?e.wmdNo:e:"").subscribe(e=>{this.updateTransactions()}),"-"!==e&&(e.finished=!0,this.transactionService.updateTransaction(e,e._id).subscribe(e=>{})),this.showToast("Uspeh","Uspe\u0161no ste obradili "+t+" (kg) "+this.selectedTrash.name+" na skladi\u0161te.","success"),this.windowRef.close(),t=NaN}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(S.a),h.Qb(s.Ub),h.Qb(C.a),h.Qb(s.Mb))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-most-used-trash"]],viewQuery:function(e,t){if(1&e&&(h.Lc(P,1,h.P),h.Lc(k,1,h.P)),2&e){let e;h.uc(e=h.ec())&&(t.addTrashTemplate=e.first),h.uc(e=h.ec())&&(t.processTrashTemplate=e.first)}},inputs:{type:"type"},decls:17,vars:5,consts:[[1,"row"],[1,"col-3"],["class","col-3",4,"ngIf"],[2,"height","2px","border-width","0","color","gray","background-color","gray"],["class","row mb-1",4,"ngFor","ngForOf"],["addTrashTemplate",""],["processTrashTemplate",""],[1,"row","mb-1"],[1,"col-2"],[1,"col-4","text-limit"],["class","col-3 text-center",4,"ngIf"],[1,"col-3","text-center"],[1,"fa","fa-plus","add-button",3,"click"],[1,"fa","fa-trash-restore","add-button",3,"click"],[1,"fa","fa-trash","add-button",3,"click"],[3,"type","selectedTrash","callAddTrash"],[3,"selectedTrash","callProcessTrash"]],template:function(e,t){1&e&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Fc(2,"Indeksni broj"),h.Vb(),h.Wb(3,"div",1),h.Fc(4,"Naziv"),h.Vb(),h.Wb(5,"div",1),h.Fc(6,"Koli\u010dina (KG)"),h.Vb(),h.Dc(7,z,2,0,"div",2),h.Dc(8,D,2,0,"div",2),h.Dc(9,I,2,0,"div",2),h.Dc(10,L,2,0,"div",2),h.Vb(),h.Rb(11,"hr",3),h.Dc(12,N,10,6,"div",4),h.Dc(13,U,1,2,"ng-template",null,5,h.Ec),h.Dc(15,q,1,1,"ng-template",null,6,h.Ec)),2&e&&(h.Eb(7),h.nc("ngIf","production"===t.type),h.Eb(1),h.nc("ngIf","treatment"===t.type),h.Eb(1),h.nc("ngIf","disposal"===t.type),h.Eb(1),h.nc("ngIf","cache"===t.type),h.Eb(2),h.nc("ngForOf",t.transactions))},directives:[V.n,V.m,O.a,E.a],styles:[".add-button[_ngcontent-%COMP%]:hover{color:#2d8ac7;cursor:pointer}.add-button[_ngcontent-%COMP%]{font-size:1.5rem}.text-limit[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}"]}),e})();const Q={hideSubHeader:!0,actions:{columnTitle:"Lista otpada",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"add",title:'<i class="fa fa-search"></i>'}]},columns:{name:{title:"Naziv",editable:!1},code:{title:"\u0160ifra dozvole"},dateExpiration:{title:"Dozvola va\u017ei do",valuePrepareFunction:(e,t)=>t.dateExpiration.substring(0,10)}}};var G=i("kBrA"),$=i("McNs"),X=i("ibGe"),K=i("7IaX");function B(e,t){1&e&&(h.Wb(0,"p",37),h.Fc(1," Naziv dozvole je obavezna! "),h.Vb())}function H(e,t){if(1&e&&(h.Wb(0,"p",37),h.Fc(1),h.Vb()),2&e){const e=h.hc(2);h.Eb(1),h.Hc(" Naziv dozvole mora biti du\u017ei od ",e.getConfigValue("forms.validation.permitName.minLength")," slova! ")}}function Y(e,t){if(1&e&&(h.Ub(0),h.Dc(1,B,2,0,"p",36),h.Dc(2,H,2,1,"p",36),h.Tb()),2&e){h.hc();const e=h.vc(12);h.Eb(1),h.nc("ngIf",null==e.errors?null:e.errors.required),h.Eb(1),h.nc("ngIf",(null==e.errors?null:e.errors.maxLength)||(null==e.errors?null:e.errors.minLength))}}function J(e,t){1&e&&(h.Wb(0,"p",37),h.Fc(1," \u0160ifra dozvole je obavezna! "),h.Vb())}function Z(e,t){if(1&e&&(h.Ub(0),h.Dc(1,J,2,0,"p",36),h.Tb()),2&e){h.hc();const e=h.vc(19);h.Eb(1),h.nc("ngIf",null==e.errors?null:e.errors.required)}}function ee(e,t){1&e&&(h.Wb(0,"p",37),h.Fc(1," Datum nastanka dozvole je obavezan! "),h.Vb())}function te(e,t){1&e&&(h.Wb(0,"p",37),h.Fc(1," Datum nastanka dozvole ne mo\u017ee biti posle datum izdavanja! "),h.Vb())}function ie(e,t){if(1&e&&(h.Ub(0),h.Dc(1,ee,2,0,"p",36),h.Dc(2,te,2,0,"p",36),h.Tb()),2&e){const e=h.hc(),t=h.vc(26);h.Eb(1),h.nc("ngIf",null==t.errors?null:t.errors.required),h.Eb(1),h.nc("ngIf",!e.dateValid(e.permit))}}function ne(e,t){1&e&&(h.Wb(0,"p",37),h.Fc(1," Datum isteka dozvole je obavezan! "),h.Vb())}function se(e,t){if(1&e&&(h.Ub(0),h.Dc(1,ne,2,0,"p",36),h.Tb()),2&e){h.hc();const e=h.vc(34);h.Eb(1),h.nc("ngIf",null==e.errors?null:e.errors.required)}}function ae(e,t){if(1&e){const e=h.Xb();h.Wb(0,"button",38),h.dc("click",function(){h.xc(e);const i=t.$implicit;return h.hc().addTrashToList({data:i})}),h.Fc(1),h.Vb()}if(2&e){const e=t.$implicit;h.nc("nbPopover",e.name),h.Eb(1),h.Hc(" ",e.indexNumber," ")}}const oe=function(){return{standalone:!0}};let ce=(()=>{class e{constructor(e,t={},i,n){this.permitService=e,this.options=t,this.roleService=i,this.catalogService=n,this.updatePermits=new h.o,this.openTrashList=new h.o,this.permit={code:"",dateCreation:new Date,dateExpiration:new Date,name:"",trashList:[],type:""},this.catalog=new a.a,this.settings=K.a}ngOnInit(){this.catalogService.getCatalogs().subscribe(e=>{this.catalog.load(e)})}getConfigValue(e){return Object($.n)(this.options,e,null)}addPermit(){this.permit.type=this.type,this.permitService.createPermit(this.permit,this.roleService.getCompanyID()).subscribe(e=>{}),this.updatePermits.emit("update")}dateValid(e){return e.dateCreation<=e.dateExpiration}chooseTrash(){this.openTrashList.emit(this.permit)}addTrashToList({data:e}){this.permit.trashList.some(t=>t._id===e._id)?this.removeTrashFromList(e):this.permit.trashList.push(e)}removeTrashFromList(e){const t=this.permit.trashList.filter(t=>t._id===e._id)[0];if(t){const e=this.permit.trashList.indexOf(t,0);e>-1&&this.permit.trashList.splice(e,1)}}onSearch(e){""===e&&this.catalog.setFilter([]),this.catalog.setFilter([{field:"indexNumber",search:e,filter:function(e,t){return e.replace(/\s+/g,"").includes(t.replace(/\s+/g,""))}},{field:"name",search:e}],!1)}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(o.a),h.Qb($.a),h.Qb(f.a),h.Qb(X.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["add-permit-popup"]],inputs:{type:"type"},outputs:{updatePermits:"updatePermits",openTrashList:"openTrashList"},decls:60,vars:35,consts:[["showToggleButton","",1,"container-fluid"],["revealCard",""],[1,"no-border"],["permitForm","ngForm"],[1,"row"],[1,"col-12","mb-2"],["for","input-permitName",1,"label"],["placeholder","Dozvola","autofocus","","fullWidth","","id","input-permitName","name","permitName","nbInput","","placeholder","Naziv",3,"ngModel","ngModelOptions","required","maxlength","minLength","status","ngModelChange"],["permitName","ngModel"],[4,"ngIf"],[1,"row","mb-2"],[1,"col-12"],["for","input-permitCode",1,"label"],["fullWidth","","id","input-permitCode","name","permitCode","nbInput","","placeholder","\u0160ifra",3,"ngModel","ngModelOptions","required","status","ngModelChange"],["permitCode","ngModel"],[1,"col-6"],["for","input-dateCreation",1,"label"],["fullWidth","","id","input-dateCreation","name","dateCreation","nbInput","",3,"ngModel","nbDatepicker","ngModelOptions","required","status","ngModelChange"],["dateCreation","ngModel"],["dateCreationPicker",""],["for","input-dateExpiration",1,"label"],["fullWidth","","id","input-dateExpiration","name","dateExpiration","nbInput","",3,"ngModel","nbDatepicker","ngModelOptions","required","status","ngModelChange"],["dateExpiration","ngModel"],["dateExpirationPicker",""],[1,"row","mt-2"],["nbButton","","status","basic","type","button",3,"click"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning","class","p-2 m-1","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",3,"nbPopover","click",4,"ngFor","ngForOf"],[1,"col-11"],[1,"ml-0"],[1,"col-1"],[1,"fa","fa-arrow-alt-circle-down","fa-2x","arrow-down",3,"click"],[1,"col-12","mt-1"],["nbInput","","fullWidth","","type","text","placeholder","Pretrazi",3,"input"],["search",""],[3,"source","settings","custom"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"],["nbButton","","status","warning","nbPopoverTrigger","hint","nbPopoverPlacement","bottom",1,"p-2","m-1",3,"nbPopover","click"]],template:function(e,t){if(1&e){const e=h.Xb();h.Wb(0,"nb-reveal-card",0,1),h.Wb(2,"nb-card-front"),h.Wb(3,"nb-card",2),h.Wb(4,"nb-card-body"),h.Wb(5,"form",null,3),h.Wb(7,"div",4),h.Wb(8,"div",5),h.Wb(9,"label",6),h.Fc(10,"Naziv Dozvole:"),h.Vb(),h.Wb(11,"input",7,8),h.dc("ngModelChange",function(e){return t.permit.name=e}),h.Vb(),h.Dc(13,Y,3,2,"ng-container",9),h.Vb(),h.Vb(),h.Wb(14,"div",10),h.Wb(15,"div",11),h.Wb(16,"label",12),h.Fc(17,"\u0160ifra Dozvole:"),h.Vb(),h.Wb(18,"input",13,14),h.dc("ngModelChange",function(e){return t.permit.code=e}),h.Vb(),h.Dc(20,Z,2,1,"ng-container",9),h.Vb(),h.Vb(),h.Wb(21,"div",10),h.Wb(22,"div",15),h.Wb(23,"label",16),h.Fc(24,"Datum izdavanja dozvole:"),h.Vb(),h.Wb(25,"input",17,18),h.dc("ngModelChange",function(e){return t.permit.dateCreation=e}),h.Vb(),h.Rb(27,"nb-datepicker",null,19),h.Dc(29,ie,3,2,"ng-container",9),h.Vb(),h.Wb(30,"div",15),h.Wb(31,"label",20),h.Fc(32,"Datum isteka dozvole:"),h.Vb(),h.Wb(33,"input",21,22),h.dc("ngModelChange",function(e){return t.permit.dateExpiration=e}),h.Vb(),h.Rb(35,"nb-datepicker",null,23),h.Dc(37,se,2,1,"ng-container",9),h.Vb(),h.Vb(),h.Wb(38,"div",24),h.Wb(39,"div",15),h.Wb(40,"button",25),h.dc("click",function(){return h.xc(e),h.vc(1).revealed=!0}),h.Fc(41,"Odaberi otpade "),h.Vb(),h.Vb(),h.Wb(42,"div",15),h.Wb(43,"button",26),h.dc("click",function(){return t.addPermit()}),h.Fc(44,"Dodaj dozvolu"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(45,"nb-card-back"),h.Wb(46,"nb-card",2),h.Wb(47,"nb-card-body"),h.Wb(48,"div",10),h.Wb(49,"div",11),h.Dc(50,ae,2,2,"button",27),h.Vb(),h.Wb(51,"div",28),h.Wb(52,"label",29),h.Fc(53,"Pretrazi po indeksnom broju:"),h.Vb(),h.Vb(),h.Wb(54,"div",30),h.Wb(55,"i",31),h.dc("click",function(){return h.xc(e),h.vc(1).revealed=!1}),h.Vb(),h.Vb(),h.Wb(56,"div",32),h.Wb(57,"input",33,34),h.dc("input",function(){h.xc(e);const i=h.vc(58);return i.value.length>=1&&t.onSearch(i.value)}),h.Vb(),h.Wb(59,"ng2-smart-table",35),h.dc("custom",function(e){return t.addTrashToList(e)}),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb()}if(2&e){const e=h.vc(12),i=h.vc(19),n=h.vc(26),s=h.vc(28),a=h.vc(34),o=h.vc(36);h.Eb(11),h.nc("ngModel",t.permit.name)("ngModelOptions",h.qc(31,oe))("required",t.getConfigValue("forms.validation.permitName.required"))("maxlength",t.getConfigValue("forms.validation.permitName.maxLength"))("minLength",t.getConfigValue("forms.validation.permitName.minLength"))("status",e.dirty?e.invalid?"danger":"success":"basic"),h.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),h.Eb(2),h.nc("ngIf",e.invalid&&e.touched),h.Eb(5),h.nc("ngModel",t.permit.code)("ngModelOptions",h.qc(32,oe))("required",t.getConfigValue("forms.validation.permitCode.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),h.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),h.Eb(2),h.nc("ngIf",i.invalid&&i.touched),h.Eb(5),h.nc("ngModel",t.permit.dateCreation)("nbDatepicker",s)("ngModelOptions",h.qc(33,oe))("required",t.getConfigValue("forms.validation.date.required"))("status",t.dateValid(t.permit)?"success":"danger"),h.Fb("aria-invalid",!(!n.invalid||!n.touched)||null),h.Eb(4),h.nc("ngIf",!t.dateValid(t.permit)),h.Eb(4),h.nc("ngModel",t.permit.dateExpiration)("nbDatepicker",o)("ngModelOptions",h.qc(34,oe))("required",t.getConfigValue("forms.validation.date.required"))("status",t.dateValid(t.permit)?"success":"danger"),h.Fb("aria-invalid",!(!a.invalid||!a.touched)||null),h.Eb(4),h.nc("ngIf",a.invalid&&a.touched),h.Eb(13),h.nc("ngForOf",t.permit.trashList),h.Eb(9),h.nc("source",t.catalog)("settings",t.settings)}},directives:[s.rb,s.C,s.A,s.z,n.w,n.l,n.m,s.T,n.b,n.k,n.n,n.s,n.f,V.n,s.M,s.L,s.t,s.y,V.m,a.b,s.kb],styles:["nb-card.no-border[_ngcontent-%COMP%]{border:none}.fa-arrow-alt-circle-down[_ngcontent-%COMP%]{size:1.5rem}.fa-arrow-alt-circle-down[_ngcontent-%COMP%]:hover{color:#1e90ff;cursor:pointer}"]}),e})();const re=["viewTrash"],le=["addPermit"];function de(e,t){if(1&e){const e=h.Xb();h.Wb(0,"view-permits-trash-popup",8),h.dc("callUpdatePermitsTrash",function(t){return h.xc(e),h.hc().updatePermitsTrashMethod(t)}),h.Vb()}if(2&e){const e=h.hc();h.nc("selectedPermit",e.selectedPermit)}}function be(e,t){if(1&e){const e=h.Xb();h.Wb(0,"add-permit-popup",9),h.dc("updatePermits",function(){return h.xc(e),h.hc().updatePermits()}),h.Vb()}2&e&&h.nc("type","transport")}let ue=(()=>{class e{constructor(e,t,i,n){this.permitService=e,this.windowService=t,this.toastrService=i,this.roleService=n,this.settings=Q,this.transportPermits=[]}ngOnInit(){this.updatePermits()}updatePermits(){this.permitService.getCompaniesPermits(this.roleService.getCompanyID(),this.type).subscribe(e=>{this.transportPermits=e}),void 0!==this.windowRef&&this.windowRef.close()}openPermitsTrashWindow({data:e}){this.selectedPermit=e,this.windowRef=this.windowService.open(this.viewTrash,{title:"Lista otpada"})}updatePermitsTrashMethod(e){this.selectedPermit.trashList=e,this.permitService.updatePermit(this.selectedPermit,this.selectedPermit._id).subscribe(e=>{}),this.showToast("Uspeh","Uspe\u0161no ste izmenili informacije!","success"),this.windowRef.close()}openAddPermitWindow(){this.windowRef=this.windowService.open(this.addPermit,{title:"Dodaj dozvolu za transport"})}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(o.a),h.Qb(s.Ub),h.Qb(s.Mb),h.Qb(f.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-transport-permits"]],viewQuery:function(e,t){if(1&e&&(h.Lc(re,1,h.P),h.Lc(le,1,h.P)),2&e){let e;h.uc(e=h.ec())&&(t.viewTrash=e.first),h.uc(e=h.ec())&&(t.addPermit=e.first)}},inputs:{type:"type"},decls:11,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"settings","source","custom"],[1,"row","mt-3","d-flex","justify-content-end","mr-5","pr-1","align-items-end"],[1,"col-3"],["nbButton","","type","button",3,"click"],["viewTrash",""],["addPermit",""],[3,"selectedPermit","callUpdatePermitsTrash"],[3,"type","updatePermits"]],template:function(e,t){1&e&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"ng2-smart-table",2),h.dc("custom",function(e){return t.openPermitsTrashWindow(e)}),h.Vb(),h.Vb(),h.Vb(),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"button",5),h.dc("click",function(){return t.openAddPermitWindow()}),h.Fc(6,"Dodaj dozvolu"),h.Vb(),h.Vb(),h.Vb(),h.Dc(7,de,1,1,"ng-template",null,6,h.Ec),h.Dc(9,be,1,1,"ng-template",null,7,h.Ec)),2&e&&(h.Eb(2),h.nc("settings",t.settings)("source",t.transportPermits))},directives:[a.b,s.t,G.a,ce],styles:[""]}),e})();const he={hideSubHeader:!0,actions:{position:"right",add:!1,edit:!1,delete:!1},columns:{type:{title:"Vrsta vozila",type:"html",valuePrepareFunction:(e,t)=>{const i=t.type;let n=i;return"kamion"===i&&(n='<i class="fa fa-2x fa-truck"></i>'),"kombi"===i&&(n='<i class="fa fa-2x fa-shuttle-van"></i>'),"automobil"===i&&(n='<i class="fa fa-2x fa-car-side"></i>'),n}},licensePlate:{title:"Registarski broj"},licensePlateExpiration:{title:"Registracija va\u017ei do"}}};function pe(e,t){1&e&&(h.Wb(0,"p",17),h.Fc(1," Registarski broj tablica je obavezan! "),h.Vb())}function ge(e,t){1&e&&(h.Wb(0,"p",17),h.Fc(1," Registarski broj tablica mora biti validan (npr. BG-234-AA)! "),h.Vb())}function me(e,t){if(1&e&&(h.Ub(0),h.Dc(1,pe,2,0,"p",16),h.Dc(2,ge,2,0,"p",16),h.Tb()),2&e){h.hc();const e=h.vc(7);h.Eb(1),h.nc("ngIf",null==e.errors?null:e.errors.required),h.Eb(1),h.nc("ngIf",(null==e.errors?null:e.errors.pattern)||(null==e.errors?null:e.errors.minLength))}}function fe(e,t){1&e&&(h.Wb(0,"p",17),h.Fc(1," Vrsta vozila je obavezna! "),h.Vb())}function ve(e,t){if(1&e&&(h.Ub(0),h.Dc(1,fe,2,0,"p",16),h.Tb()),2&e){h.hc();const e=h.vc(13);h.Eb(1),h.nc("ngIf",!e.value)}}const We=function(){return{standalone:!0}};let Ve=(()=>{class e{constructor(e,t={},i){this.vehicleService=e,this.options=t,this.roleService=i,this.updateVehicles=new h.o,this.vehicle={licensePlate:"",type:""}}ngOnInit(){}getConfigValue(e){return Object($.n)(this.options,e,null)}addVehicle(){this.vehicleService.createVehicle(this.vehicle,this.roleService.getCompanyID()).subscribe(e=>{}),this.updateVehicles.emit("update")}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(l.a),h.Qb($.a),h.Qb(f.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["add-vehicle-popup"]],outputs:{updateVehicles:"updateVehicles"},decls:25,vars:17,consts:[[1,"row","pt-4"],["transportForm","ngForm"],[1,"col-12","mb-2"],["for","input-licensePlate",1,"label"],["fullWidth","","id","input-licensePlate","name","licensePlate","nbInput","","oninput","this.value = this.value.toUpperCase()","placeholder","NS-234-DS",3,"ngModel","maxlength","minLength","ngModelOptions","pattern","required","status","ngModelChange"],["licensePlate","ngModel"],[4,"ngIf"],["for","input-vehicleType",1,"label"],["fullWidth","","id","input-vehicleType","name","vehicleType","placeholder","Odaberi",3,"ngModel","ngModelOptions","required","status","ngModelChange"],["vehicleType","ngModel"],["value","kamion"],["value","kombi"],["value","automobil"],[1,"row","d-flex","justify-content-end","mr-5"],[1,"col-4"],["status","success","nbButton","",3,"click"],["class","error-message mt-1 mb-0",4,"ngIf"],[1,"error-message","mt-1","mb-0"]],template:function(e,t){if(1&e&&(h.Wb(0,"div",0),h.Wb(1,"form",null,1),h.Wb(3,"div",2),h.Wb(4,"label",3),h.Fc(5,"Registarski broj tablice:"),h.Vb(),h.Wb(6,"input",4,5),h.dc("ngModelChange",function(e){return t.vehicle.licensePlate=e}),h.Vb(),h.Dc(8,me,3,2,"ng-container",6),h.Vb(),h.Wb(9,"div",2),h.Wb(10,"label",7),h.Fc(11,"Vrsta vozila:"),h.Vb(),h.Wb(12,"nb-select",8,9),h.dc("ngModelChange",function(e){return t.vehicle.type=e}),h.Wb(14,"nb-option",10),h.Fc(15,"Kamion"),h.Vb(),h.Wb(16,"nb-option",11),h.Fc(17,"Kombi"),h.Vb(),h.Wb(18,"nb-option",12),h.Fc(19,"Automobil"),h.Vb(),h.Vb(),h.Dc(20,ve,2,1,"ng-container",6),h.Vb(),h.Vb(),h.Vb(),h.Wb(21,"div",13),h.Wb(22,"div",14),h.Wb(23,"button",15),h.dc("click",function(){return t.addVehicle()}),h.Fc(24,"Dodaj vozilo"),h.Vb(),h.Vb(),h.Vb()),2&e){const e=h.vc(7),i=h.vc(13);h.Eb(6),h.nc("ngModel",t.vehicle.licensePlate)("maxlength",t.getConfigValue("forms.validation.licensePlate.maxLength"))("minLength",t.getConfigValue("forms.validation.licensePlate.minLength"))("ngModelOptions",h.qc(15,We))("pattern",t.getConfigValue("forms.validation.licensePlate.pattern"))("required",t.getConfigValue("forms.validation.licensePlate.required"))("status",e.dirty?e.invalid?"danger":"success":"basic"),h.Fb("aria-invalid",!(!e.invalid||!e.touched)||null),h.Eb(2),h.nc("ngIf",e.invalid&&e.touched),h.Eb(4),h.nc("ngModel",t.vehicle.type)("ngModelOptions",h.qc(16,We))("required",t.getConfigValue("forms.validation.vehicleType.required"))("status",i.dirty?i.invalid?"danger":"success":"basic"),h.Fb("aria-invalid",!(!i.invalid||!i.touched)||null),h.Eb(8),h.nc("ngIf",i.invalid&&i.touched)}},directives:[n.w,n.l,n.m,s.T,n.b,n.k,n.n,n.f,n.q,n.s,V.n,s.tb,s.ib,s.t],styles:[""]}),e})();const we=["addVehicleTemplate"];function Me(e,t){if(1&e){const e=h.Xb();h.Wb(0,"add-vehicle-popup",7),h.dc("updateVehicles",function(){return h.xc(e),h.hc().updateVehicles()}),h.Vb()}}let Se=(()=>{class e{constructor(e,t,i){this.vehicleService=e,this.roleService=t,this.windowService=i,this.settings=he,this.vehicles=new a.a}ngOnInit(){this.updateVehicles()}updateVehicles(){this.vehicleService.getCompaniesVehicles(this.roleService.getCompanyID()).subscribe(e=>{this.vehicles.load(e)}),void 0!==this.windowRef&&this.windowRef.close()}openAddVehicleWindow(){this.windowRef=this.windowService.open(this.addVehicleTemplate,{title:"Dodajte vozilo"})}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(l.a),h.Qb(f.a),h.Qb(s.Ub))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-vehicles"]],viewQuery:function(e,t){if(1&e&&h.Lc(we,1,h.P),2&e){let e;h.uc(e=h.ec())&&(t.addVehicleTemplate=e.first)}},decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"settings","source"],[1,"row","my-3","d-flex","justify-content-end","mr-4","pr-1","align-items-end"],[1,"col-3"],["nbButton","","type","button",3,"click"],["addVehicleTemplate",""],[3,"updateVehicles"]],template:function(e,t){1&e&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Rb(2,"ng2-smart-table",2),h.Vb(),h.Vb(),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"button",5),h.dc("click",function(){return t.openAddVehicleWindow()}),h.Fc(6,"Dodaj vozilo"),h.Vb(),h.Vb(),h.Vb(),h.Dc(7,Me,1,0,"ng-template",null,6,h.Ec)),2&e&&(h.Eb(2),h.nc("settings",t.settings)("source",t.vehicles))},directives:[a.b,s.t,Ve],styles:[".vehicleIcon[_ngcontent-%COMP%]{font-size:2rem}"]}),e})();var ye=i("7Oz7");const xe={hideSubHeader:!0,pager:{perPage:5},actions:{columnTitle:"Zavr\u0161i tretman",position:"right",add:!1,edit:!1,delete:!1,custom:[{name:"leftover",title:'<i class="fa fa-exclamation-triangle"></i>'}]},columns:{user:{title:"Podnosioc operacije",valuePrepareFunction:(e,t)=>t.user.firstName+" "+t.user.lastName},date:{title:"Datum tretmana",valuePrepareFunction:(e,t)=>t.date.substring(0,10)},indexNumber:{title:"Indeksni broj",valuePrepareFunction:(e,t)=>t.trash.indexNumber},name:{title:"Naziv otpada",valuePrepareFunction:(e,t)=>{let i=t.trash.name;return t.trash.name.length>10&&(i=t.trash.name.substring(0,10)+"..."),i}},amount:{title:"Kolicina (KG)",valuePrepareFunction:(e,t)=>t.trash.amount}}};var Te=i("J0/g");const Fe=["leftoverTrashTemplate"];function Ce(e,t){if(1&e){const e=h.Xb();h.Wb(0,"leftover-trash-popup",2),h.dc("callLeftoverTrash",function(t){return h.xc(e),h.hc().leftoverTrashMethod(t)}),h.Vb()}if(2&e){const e=h.hc();h.nc("selectedTransaction",e.selectedTransaction)("storageProduction",e.storage)}}let Oe=(()=>{class e{constructor(e,t,i,n,s,a){this.windowService=e,this.storageService=t,this.trashService=i,this.transactionsService=n,this.toastrService=s,this.roleService=a,this.settings=xe,this.transactions=[]}ngOnInit(){this.updateTransactions(),this.storageService.getCompaniesStorage(this.roleService.getCompanyID(),"production").subscribe(e=>{this.storage=e})}updateTransactions(){this.transactionsService.getUnfinishedTransactions(this.type,this.roleService.getCompanyID()).subscribe(e=>{this.transactions=e})}openLeftoverTrashWindow({data:e}){this.selectedTransaction=e,this.selectedTrash=e.otpad,this.windowRef=this.windowService.open(this.leftoverTrashTemplate,{title:"Zavr\u0161i proizvodnju preostalog otpada"})}leftoverTrashMethod({selectedTransaction:e,leftoverTrashCreated:t,selectedStorage:i}){t.forEach(e=>{this.trashService.updateTrash(e,i._id,e.indexNumber,"indexNumber",void 0,void 0,!0).subscribe(e=>{this.updateTransactions()})}),e.companyName=null,e.wmdNo=null,e.finished=!0,this.transactionsService.updateTransaction(e,e._id).subscribe(e=>{}),this.showToast("Uspeh","Uspesno ste dodali otpade!","success"),this.windowRef.close()}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(s.Ub),h.Qb(ye.a),h.Qb(C.a),h.Qb(S.a),h.Qb(s.Mb),h.Qb(f.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-unfinished-operations"]],viewQuery:function(e,t){if(1&e&&h.Lc(Fe,1,h.P),2&e){let e;h.uc(e=h.ec())&&(t.leftoverTrashTemplate=e.first)}},inputs:{type:"type"},decls:3,vars:2,consts:[[3,"settings","source","custom"],["leftoverTrashTemplate",""],[3,"selectedTransaction","storageProduction","callLeftoverTrash"]],template:function(e,t){1&e&&(h.Wb(0,"ng2-smart-table",0),h.dc("custom",function(e){return t.openLeftoverTrashWindow(e)}),h.Vb(),h.Dc(1,Ce,1,2,"ng-template",null,1,h.Ec)),2&e&&h.nc("settings",t.settings)("source",t.transactions)},directives:[a.b,Te.a],styles:[""]}),e})();var Ee=i("BMkl");let Pe=(()=>{class e{constructor(e){this.specialWasteService=e,this.exitEmitter=new h.o,this.specialWasteAmount=0}ngOnInit(){}addSpecialWaste(){"export"===this.type&&(this.specialWasteAmount*=-1),this.specialWasteService.updateSpecialWaste(this.selectedSpecialWaste,this.type,this.specialWasteAmount,this.selectedSpecialWaste._id).subscribe(e=>{this.exitEmitter.emit("")})}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(Ee.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["add-special-waste-popup"]],inputs:{type:"type",selectedSpecialWaste:"selectedSpecialWaste"},outputs:{exitEmitter:"exitEmitter"},decls:16,vars:3,consts:[[2,"max-width","50vw"],[3,"ngSubmit"],["addForm","ngForm"],[1,"row"],["for","input-Kolicina",1,"label","col-12"],[1,"col-10","pr-0"],["fullWidth","","id","input-Kolicina","min","1","name","koli\u010dina","nbInput","","onkeypress","return /[0-9.]/i.test(event.key)","placeholder","0","type","number",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],[1,"pl-0","col-2"],["nbButton","","disabled",""],[1,"row","mt-2"],[1,"col-12"],["fullWidth","","type","submit",1,"btn","btn-primary","w-100",3,"disabled"]],template:function(e,t){if(1&e&&(h.Wb(0,"div",0),h.Wb(1,"form",1,2),h.dc("ngSubmit",function(){return t.addSpecialWaste()}),h.Wb(3,"div",3),h.Wb(4,"label",4),h.Fc(5,"Koli\u010dina koju dodajete: "),h.Vb(),h.Wb(6,"div",5),h.Wb(7,"input",6,7),h.dc("ngModelChange",function(e){return t.specialWasteAmount=e}),h.Vb(),h.Vb(),h.Wb(9,"div",8),h.Wb(10,"button",9),h.Fc(11),h.Vb(),h.Vb(),h.Vb(),h.Wb(12,"div",10),h.Wb(13,"div",11),h.Wb(14,"button",12),h.Fc(15," Dodaj "),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e){const e=h.vc(2),i=h.vc(8);h.Eb(7),h.nc("ngModel",t.specialWasteAmount),h.Eb(4),h.Gc(t.selectedSpecialWaste.unitOfMeasure),h.Eb(3),h.nc("disabled",i.value<1||void 0===i.value&&e.valid)}},directives:[n.w,n.l,n.m,s.T,n.p,n.b,n.k,n.n,s.t],styles:[""]}),e})();const ke=["addSpecialWaste"];function ze(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div",1),h.Wb(1,"div",2),h.Fc(2),h.Vb(),h.Wb(3,"div",2),h.Fc(4),h.Vb(),h.Wb(5,"div",8),h.Wb(6,"i",9),h.dc("click",function(){h.xc(e);const i=t.$implicit;return h.hc().openAddSpecialWasteWindow(i,"production")}),h.Vb(),h.Vb(),h.Vb()}if(2&e){const e=t.$implicit;h.Eb(2),h.Gc(e.name),h.Eb(2),h.Gc(e.desc)}}function De(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div",1),h.Wb(1,"div",2),h.Fc(2),h.Vb(),h.Wb(3,"div",2),h.Fc(4),h.Vb(),h.Wb(5,"div",8),h.Wb(6,"i",9),h.dc("click",function(){h.xc(e);const i=t.$implicit;return h.hc().openAddSpecialWasteWindow(i,"import")}),h.Vb(),h.Vb(),h.Vb()}if(2&e){const e=t.$implicit;h.Eb(2),h.Gc(e.name),h.Eb(2),h.Gc(e.desc)}}function Ie(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div",1),h.Wb(1,"div",2),h.Fc(2),h.Vb(),h.Wb(3,"div",2),h.Fc(4),h.Vb(),h.Wb(5,"div",8),h.Wb(6,"i",9),h.dc("click",function(){h.xc(e);const i=t.$implicit;return h.hc().openAddSpecialWasteWindow(i,"export")}),h.Vb(),h.Vb(),h.Vb()}if(2&e){const e=t.$implicit;h.Eb(2),h.Gc(e.name),h.Eb(2),h.Gc(e.desc)}}function Le(e,t){if(1&e){const e=h.Xb();h.Wb(0,"add-special-waste-popup",10),h.dc("exitEmitter",function(){return h.xc(e),h.hc().closeSpecialWasteWindow()}),h.Vb()}if(2&e){const e=h.hc();h.nc("selectedSpecialWaste",e.selectedSpecialWaste)("type",e.selectedType)}}let Ae=(()=>{class e{constructor(e,t,i,n){this.toastrService=e,this.speicalWasteService=t,this.roleService=i,this.windowService=n,this.specialWastes=[]}ngOnInit(){this.roleService.getOperations(void 0,!1,!0).subscribe(e=>{this.operations=e.specialWasteOperations}),this.updateSpecialWastes()}updateSpecialWastes(){this.specialWastes=[],this.speicalWasteService.getCompaniesSpecialWastes(this.roleService.getCompanyID()).subscribe(e=>{this.specialWastes=e,this.productionWastes=this.specialWastes.filter(e=>e.operationTypes.includes("Proizvodnja")),this.importWastes=this.specialWastes.filter(e=>e.operationTypes.includes("Uvoz")),this.exportWastes=this.specialWastes.filter(e=>e.operationTypes.includes("Izvoz"))})}openAddSpecialWasteWindow(e,t){this.selectedSpecialWaste=e,this.selectedType=t,this.windowRef=this.windowService.open(this.addTrashTemplate,{title:"Dodaj kolicinu: "+this.selectedSpecialWaste.name})}closeSpecialWasteWindow(){this.windowRef.close(),this.showToast("Uspeh","Uspe\u0161no ste dodali "+this.selectedSpecialWaste.name,"success")}showToast(e,t,i){this.toastrService.show(t,e,{status:i})}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(s.Mb),h.Qb(Ee.a),h.Qb(f.a),h.Qb(s.Ub))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-most-used-special-waste"]],viewQuery:function(e,t){if(1&e&&h.Lc(ke,1,h.P),2&e){let e;h.uc(e=h.ec())&&(t.addTrashTemplate=e.first)}},decls:33,vars:6,consts:[["tabTitle","Proizvodnja",3,"disabled"],[1,"row"],[1,"col-4"],[2,"height","2px","border-width","0","color","gray","background-color","gray"],["class","row",4,"ngFor","ngForOf"],["tabTitle","Uvoz",3,"disabled"],["tabTitle","Izvoz",3,"disabled"],["addSpecialWaste",""],[1,"col-4","text-center"],[1,"fa","fa-plus","add-button",3,"click"],[3,"selectedSpecialWaste","type","exitEmitter"]],template:function(e,t){1&e&&(h.Wb(0,"nb-tabset"),h.Wb(1,"nb-tab",0),h.Wb(2,"div",1),h.Wb(3,"div",2),h.Fc(4,"Naziv"),h.Vb(),h.Wb(5,"div",2),h.Fc(6,"Opis"),h.Vb(),h.Wb(7,"div",2),h.Fc(8,"Dodaj proizvod"),h.Vb(),h.Vb(),h.Rb(9,"hr",3),h.Dc(10,ze,7,2,"div",4),h.Vb(),h.Wb(11,"nb-tab",5),h.Wb(12,"div",1),h.Wb(13,"div",2),h.Fc(14,"Naziv"),h.Vb(),h.Wb(15,"div",2),h.Fc(16,"Opis"),h.Vb(),h.Wb(17,"div",2),h.Fc(18,"Uvezi proizvod"),h.Vb(),h.Vb(),h.Rb(19,"hr",3),h.Dc(20,De,7,2,"div",4),h.Vb(),h.Wb(21,"nb-tab",6),h.Wb(22,"div",1),h.Wb(23,"div",2),h.Fc(24,"Naziv"),h.Vb(),h.Wb(25,"div",2),h.Fc(26,"Opis"),h.Vb(),h.Wb(27,"div",2),h.Fc(28,"Izvezi proizvod"),h.Vb(),h.Vb(),h.Rb(29,"hr",3),h.Dc(30,Ie,7,2,"div",4),h.Vb(),h.Vb(),h.Dc(31,Le,1,2,"ng-template",null,7,h.Ec)),2&e&&(h.Eb(1),h.nc("disabled",!t.operations.production),h.Eb(9),h.nc("ngForOf",t.productionWastes),h.Eb(1),h.nc("disabled",!t.operations.import),h.Eb(9),h.nc("ngForOf",t.importWastes),h.Eb(1),h.nc("disabled",!t.operations.export),h.Eb(9),h.nc("ngForOf",t.exportWastes))},directives:[s.Hb,s.Gb,V.m,Pe],styles:[".add-button[_ngcontent-%COMP%]:hover{color:#2d8ac7;cursor:pointer}.add-button[_ngcontent-%COMP%]{font-size:1.5rem}"]}),e})();const je={view:[],legend:!0,legendTitle:"",showLabels:!0,animations:!0,xAxis:!0,yAxis:!0,showYAxisLabel:!0,showXAxisLabel:!0,xAxisLabel:"Dani",yAxisLabel:"KG",timeline:!0,schemaType:"linear"};function _e(e,t){if(1&e&&(h.Wb(0,"nb-option",11),h.Fc(1),h.Vb()),2&e){const e=t.$implicit;h.nc("value",e),h.Eb(1),h.Hc(" ",e.specialWaste.name," ")}}let Ne=(()=>{class e{constructor(e){this.transactionService=e,this.options=je,this.specialWasteList=[],this.specialWaste=[],this.daysInMonth=30,this.colorScheme={domain:["#FF0000","#0000FF","#00FF00"]};const t=new Date;this.options=Object.assign({},je),this.updateSize(this.size),this.daysInMonth=new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}ngOnChanges(e){e.size&&this.updateSize(this.size),this.transactionService.getMostUsedSpecialWaste().subscribe(e=>{this.specialWasteList=e,0!==e.length&&(this.selectedSpecialWaste=this.specialWasteList[0],this.updateGraph(this.selectedSpecialWaste))})}chooseTransaction(e){this.updateGraph(e)}updateGraph(e){this.transactionService.getTransactions(e.specialWaste._id,"specialWaste").subscribe(e=>{this.specialWaste=e,this.options.legendTitle=this.specialWaste[0].specialWaste.desc;const t={name:"Proizveden",value:0},i={name:"Uvezeno",value:0},n={name:"Izvezeno",value:0};this.data=[];for(let s=0;s<this.daysInMonth;s++)this.data[s]={name:s+1+"",series:[]};for(let s=0;s<this.specialWaste.length;s++){let e="-";e="0"!==this.specialWaste[s].date.toString().substring(8,10).charAt(0)?this.specialWaste[s].date.toString().substring(8,10):this.specialWaste[s].date.toString().substring(9,10),"production"===this.specialWaste[s].specialWasteType?(t.value+=this.specialWaste[s].trashAmount,this.data[e].series.push({name:"Proziveden",value:this.specialWaste[s].trashAmount})):"import"===this.specialWaste[s].specialWasteType?(i.value+=this.specialWaste[s].trashAmount,this.data[e].series.push({name:"Uvezeno",value:this.specialWaste[s].trashAmount})):"export"===this.specialWaste[s].specialWasteType&&(n.value+=this.specialWaste[s].trashAmount,this.data[e].series.push({name:"Izvezeno",value:this.specialWaste[s].trashAmount}))}})}updateSize(e){"tiny"===e&&(this.options.view=[]),"small"===e&&(this.options.view=[]),"medium"===e&&(this.options.view=[500,300]),"large"===e&&(this.options.view=[700,300]),"giant"===e&&(this.options.view=[1100,500])}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(S.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget-special-waste-stats"]],inputs:{size:"size"},features:[h.Cb],decls:15,vars:15,consts:[[1,"row","flex-fill"],[3,"view","legend","showXAxisLabel","scheme","showYAxisLabel","xAxis","yAxis","xAxisLabel","yAxisLabel","results"],[1,"row","mt-2"],[1,"col-4"],["fullWidth","",3,"size","selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2"],["disabled","","fullWidth","","selected","Dani",3,"size"],["value","Dani"],["value","Meseci"],["value","Godine"],[3,"value"]],template:function(e,t){1&e&&(h.Fc(0),h.Wb(1,"div",0),h.Rb(2,"ngx-charts-bar-vertical-stacked",1),h.Vb(),h.Wb(3,"div",2),h.Wb(4,"div",3),h.Wb(5,"nb-select",4),h.dc("selectedChange",function(e){return t.chooseTransaction(e)}),h.Dc(6,_e,2,2,"nb-option",5),h.Vb(),h.Vb(),h.Wb(7,"div",6),h.Wb(8,"nb-select",7),h.Wb(9,"nb-option",8),h.Fc(10,"Dani"),h.Vb(),h.Wb(11,"nb-option",9),h.Fc(12,"Meseci"),h.Vb(),h.Wb(13,"nb-option",10),h.Fc(14,"Godine"),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e&&(h.Hc("",t.options.legendTitle,"\n"),h.Eb(2),h.nc("view",t.options.view)("legend",t.options.legend)("showXAxisLabel",t.options.showXAxisLabel)("scheme",t.colorScheme)("showYAxisLabel",t.options.showYAxisLabel)("xAxis",t.options.xAxis)("yAxis",t.options.yAxis)("xAxisLabel",t.options.xAxisLabel)("yAxisLabel",t.options.yAxisLabel)("results",t.data),h.Eb(3),h.nc("size",t.size)("selected",t.specialWasteList[0]),h.Eb(1),h.nc("ngForOf",t.specialWasteList),h.Eb(2),h.nc("size",t.size))},directives:[b.b,s.tb,V.m,s.ib],styles:[".add-button[_ngcontent-%COMP%]:hover{color:#2d8ac7;cursor:pointer}.add-button[_ngcontent-%COMP%]{font-size:1.5rem}"]}),e})();const Ue=["trash_stats"];function qe(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div",8),h.Fc(1," Redosled: "),h.Wb(2,"button",5),h.dc("click",function(){return h.xc(e),h.hc().updatePositionMethod(-1)}),h.Rb(3,"i",9),h.Vb(),h.Wb(4,"button",5),h.dc("click",function(){return h.xc(e),h.hc().updatePositionMethod(1)}),h.Rb(5,"i",10),h.Vb(),h.Fc(6," Veli\u010dina: "),h.Wb(7,"nb-select",11),h.dc("selectedChange",function(){return h.xc(e),h.hc().updateSizeMethod()})("ngModelChange",function(t){return h.xc(e),h.hc().size=t}),h.Wb(8,"nb-option",12),h.Fc(9,"XS"),h.Vb(),h.Wb(10,"nb-option",13),h.Fc(11,"S"),h.Vb(),h.Wb(12,"nb-option",14),h.Fc(13,"M"),h.Vb(),h.Wb(14,"nb-option",15),h.Fc(15,"L"),h.Vb(),h.Wb(16,"nb-option",16),h.Fc(17,"XL"),h.Vb(),h.Vb(),h.Vb()}if(2&e){const e=h.hc();h.Eb(7),h.nc("ngModel",e.size)("selected",e.size)}}function Re(e,t){if(1&e&&(h.Wb(0,"div"),h.Rb(1,"widget-most-used-trash",17),h.Vb()),2&e){const e=h.hc();h.Eb(1),h.nc("type",e.type)}}function Qe(e,t){if(1&e&&(h.Wb(0,"div",18),h.Rb(1,"widget-trash-stats",19),h.Vb()),2&e){const e=h.hc();h.Eb(1),h.nc("size",e.size)("type",e.type)}}function Ge(e,t){1&e&&(h.Wb(0,"div"),h.Rb(1,"widget-transport-permits",17),h.Vb()),2&e&&(h.Eb(1),h.nc("type","transport"))}function $e(e,t){1&e&&(h.Wb(0,"div"),h.Rb(1,"widget-transport-permits",17),h.Vb()),2&e&&(h.Eb(1),h.nc("type","collector"))}function Xe(e,t){1&e&&(h.Wb(0,"div"),h.Rb(1,"widget-vehicles"),h.Vb())}function Ke(e,t){if(1&e&&(h.Wb(0,"div"),h.Rb(1,"widget-unfinished-operations",17),h.Vb()),2&e){const e=h.hc();h.Eb(1),h.nc("type",e.type)}}function Be(e,t){1&e&&(h.Wb(0,"div"),h.Rb(1,"widget-most-used-special-waste"),h.Vb())}function He(e,t){if(1&e&&(h.Wb(0,"div",18),h.Rb(1,"widget-special-waste-stats",0),h.Vb()),2&e){const e=h.hc();h.Eb(1),h.nc("size",e.size)}}let Ye=(()=>{class e{constructor(e){this.roleService=e,this.updateSize=new h.o,this.updatePosition=new h.o,this.showSettings=!1,this.size="medium"}ngOnInit(){this.roleService.getOperations().subscribe(e=>{this.operations=e});let e="";"production"===this.type?e="proizveden":"treatment"===this.type?e="obra\u0111en":"disposal"===this.type?e="odlo\u017een":"cache"===this.type&&(e="skladi\u0161\u0107en"),this.widgetList={most_used_trash:{title:`Naj\u010de\u0161\u0107i ${e} otpad`},trash_stats:{title:"Statistika otpada"},transport_vehicles:{title:"Prevozna sredstva"},transport_permits:{title:"Dozvole za transport"},collector_permits:{title:"Dozvole za sakupljanje"},unfinished_operations:{title:"Nedovr\u0161ene operacije"},most_used_special_waste:{title:"Naj\u010de\u0161\u0107e kori\u0161\u0107eni posebni tokovi otpada"},special_waste_stats:{title:"Statistika posebnih tokova otpada"}}}getWidgetTitle(){return this.widgetList[this.name].title}updateSizeMethod(){this.updateSize.emit(this.size)}updatePositionMethod(e){this.updatePosition.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(f.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["widget"]],viewQuery:function(e,t){if(1&e&&h.Lc(Ue,1),2&e){let e;h.uc(e=h.ec())&&(t.trash_stats=e.first)}},inputs:{type:"type",name:"name",size:"size"},outputs:{updateSize:"updateSize",updatePosition:"updatePosition"},decls:18,vars:13,consts:[[3,"size"],[1,"row"],[1,"d-flex","justify-content-start"],[1,"d-flex","flex-fill","justify-content-end"],["class","mr-2",4,"ngIf"],["size","small","nbButton","",3,"click"],[4,"ngIf"],["class","h-100",4,"ngIf"],[1,"mr-2"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"],["size","small",3,"ngModel","selected","selectedChange","ngModelChange"],["value","tiny"],["value","small"],["value","medium"],["value","large"],["value","giant"],[3,"type"],[1,"h-100"],[3,"size","type"]],template:function(e,t){1&e&&(h.Wb(0,"nb-card",0),h.Wb(1,"nb-card-header"),h.Wb(2,"div",1),h.Wb(3,"div",2),h.Fc(4),h.Vb(),h.Wb(5,"div",3),h.Dc(6,qe,18,2,"div",4),h.Wb(7,"button",5),h.dc("click",function(){return t.showSettings=!t.showSettings}),h.Rb(8,"i"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(9,"nb-card-body"),h.Dc(10,Re,2,1,"div",6),h.Dc(11,Qe,2,2,"div",7),h.Dc(12,Ge,2,1,"div",6),h.Dc(13,$e,2,1,"div",6),h.Dc(14,Xe,2,0,"div",6),h.Dc(15,Ke,2,1,"div",6),h.Dc(16,Be,2,0,"div",6),h.Dc(17,He,2,1,"div",7),h.Vb(),h.Vb()),2&e&&(h.nc("size",t.size),h.Eb(4),h.Gc(t.getWidgetTitle()),h.Eb(2),h.nc("ngIf",t.showSettings),h.Eb(2),h.Gb(t.showSettings?"fa fa-times":"fa fa-cog"),h.Eb(2),h.nc("ngIf","most_used_trash"===t.name),h.Eb(1),h.nc("ngIf","trash_stats"===t.name),h.Eb(1),h.nc("ngIf","transport_permits"===t.name),h.Eb(1),h.nc("ngIf","collector_permits"===t.name),h.Eb(1),h.nc("ngIf","transport_vehicles"===t.name),h.Eb(1),h.nc("ngIf","unfinished_operations"===t.name),h.Eb(1),h.nc("ngIf","most_used_special_waste"===t.name),h.Eb(1),h.nc("ngIf","special_waste_stats"===t.name))},directives:[s.A,s.D,V.n,s.t,s.z,s.tb,n.k,n.n,s.ib,R,F,ue,Se,Oe,Ae,Ne],styles:[".right[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:right}"]}),e})();function Je(e,t){if(1&e){const e=h.Xb();h.Wb(0,"div"),h.Wb(1,"widget",7),h.dc("updateSize",function(i){h.xc(e);const n=t.$implicit;return h.hc(2).updateSizeMethod(i,n)})("updatePosition",function(i){h.xc(e);const n=t.$implicit,s=h.hc().$implicit;return h.hc().updateWidgetPositionMethod(i,n,s.widgetList)}),h.Vb(),h.Vb()}if(2&e){const e=t.$implicit,i=h.hc().$implicit,n=h.hc();h.Gb(n.WIDGET_SIZES[e.widgetSize]),h.Eb(1),h.nc("size",e.widgetSize)("name",e.widgetTitle)("type",i.groupType)}}function Ze(e,t){if(1&e){const e=h.Xb();h.Wb(0,"nb-accordion-item",2),h.Wb(1,"nb-accordion-item-header"),h.Wb(2,"div",3),h.Wb(3,"widget-group-header",4),h.dc("updatePosition",function(i){h.xc(e);const n=t.$implicit;return h.hc().updateGroupPositionMethod(i,n)}),h.Vb(),h.Vb(),h.Vb(),h.Wb(4,"nb-accordion-item-body"),h.Wb(5,"div",5),h.Dc(6,Je,2,5,"div",6),h.Vb(),h.Vb(),h.Vb()}if(2&e){const e=t.$implicit;h.Eb(3),h.nc("title",e.groupTitle)("status",e.groupColor),h.Eb(3),h.nc("ngForOf",e.widgetList)}}let et=(()=>{class e{constructor(e,t){this.roleService=e,this.widgetService=t,this.widgetSettings={group:[],username:""},this.WIDGET_SIZES=W.h}ngOnInit(){this.roleService.getOperations().subscribe(e=>{this.operations=e}),this.widgetService.getWidgetSettings(this.roleService.getUsername(),this.operations).subscribe(e=>{this.widgetSettings=e,null===this.widgetSettings&&this.widgetService.initDefaultWidgetSettings(this.operations,this.roleService.getUsername()).subscribe(e=>{this.widgetSettings=e})})}updateSizeMethod(e,t){t.widgetSize=e}updateGroupPositionMethod(e,t){const i=t.groupPosition,n=i+e;n<0||n>this.widgetSettings.group.length-1||(t.groupPosition=n,this.widgetSettings.group[n].groupPosition=i,[this.widgetSettings.group[i],this.widgetSettings.group[n]]=[this.widgetSettings.group[n],this.widgetSettings.group[i]])}updateWidgetPositionMethod(e,t,i){const n=t.widgetPosition,s=n+e;s<0||s>i.length-1||(t.widgetPosition=s,i[s].widgetPosition=n,[i[n],i[s]]=[i[s],i[n]])}ngOnDestroy(){this.widgetService.updateWidgetSettings(this.widgetSettings,this.widgetSettings.username,"username").subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(f.a),h.Qb(v.a))},e.\u0275cmp=h.Kb({type:e,selectors:[["ngx-dashboard"]],decls:2,vars:1,consts:[["multi",""],["collapsed","false",4,"ngFor","ngForOf"],["collapsed","false"],[1,"flex-fill",2,"height","4.4rem"],[3,"title","status","updatePosition"],[1,"row"],[3,"class",4,"ngFor","ngForOf"],[3,"size","name","type","updateSize","updatePosition"]],template:function(e,t){1&e&&(h.Wb(0,"nb-accordion",0),h.Dc(1,Ze,7,3,"nb-accordion-item",1),h.Vb()),2&e&&(h.Eb(1),h.nc("ngForOf",t.widgetSettings.group))},directives:[s.g,V.m,s.i,s.j,M,s.h,Ye],styles:[".nb-theme-default   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-default   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-dark   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-dark   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-cosmic   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-cosmic   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}.nb-theme-corporate   [_nghost-%COMP%]   .solar-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border:none;padding-bottom:0}@media (max-width:767.98px){.nb-theme-corporate   [_nghost-%COMP%]   ngx-traffic[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   nb-accordion[_ngcontent-%COMP%]{box-shadow:none;background-color:transparent}[_nghost-%COMP%]   nb-accordion-item[_ngcontent-%COMP%]{margin:0;padding:0;background-color:transparent}[_nghost-%COMP%]   nb-accordion-item-header[_ngcontent-%COMP%]{color:transparent;padding-bottom:0;margin-bottom:0}[_nghost-%COMP%]   nb-accordion-item-body[_ngcontent-%COMP%]{padding-top:0;background-color:transparent}"]}),e})(),tt=(()=>{class e{constructor(e){this.menuService=e}goToHome(){this.menuService.navigateHome()}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(s.gb))},e.\u0275cmp=h.Kb({type:e,selectors:[["ngx-not-found"]],decls:11,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"flex-centered","col-xl-4","col-lg-6","col-md-8","col-sm-12"],[1,"title"],[1,"sub-title"],["nbButton","","fullWidth","","type","button",1,"home-button",3,"click"]],template:function(e,t){1&e&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"nb-card"),h.Wb(3,"nb-card-body"),h.Wb(4,"div",2),h.Wb(5,"h2",3),h.Fc(6,"404 Ne postoji"),h.Vb(),h.Wb(7,"small",4),h.Fc(8,"Stranica koju ste tra\u017eili ne postoji"),h.Vb(),h.Wb(9,"button",5),h.dc("click",function(){return t.goToHome()}),h.Fc(10," Vrati me na po\u010detnu "),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb())},directives:[s.A,s.z,s.t],styles:[".flex-centered[_ngcontent-%COMP%]{margin:auto}nb-card-body[_ngcontent-%COMP%]{display:flex}.sub-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.sub-title[_ngcontent-%COMP%]{display:block;margin-bottom:3rem}.home-button[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e})();var it=i("mgFL");const nt=[{path:"",component:(()=>{class e{constructor(e,t){this.roleService=e,this.authService=t,this.menu=[],this.authService.getToken().subscribe(e=>{this.subscriber=this.roleService.getOperationsMenu().subscribe(e=>{this.menu=e})})}ngOnInit(){}ngOnDestroy(){this.menu=[]}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(f.a),h.Qb($.g))},e.\u0275cmp=h.Kb({type:e,selectors:[["pages"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(h.Wb(0,"ngx-one-column-layout"),h.Rb(1,"nb-menu",0),h.Rb(2,"router-outlet"),h.Vb()),2&e&&(h.Eb(1),h.nc("items",t.menu))},directives:[it.a,s.eb,m.h],styles:[".nb-theme-default   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@-webkit-keyframes fade{0%{opacity:0}to{opacity:1}}.nb-theme-corporate   [_nghost-%COMP%]     router-outlet+*, .nb-theme-cosmic   [_nghost-%COMP%]     router-outlet+*, .nb-theme-dark   [_nghost-%COMP%]     router-outlet+*{display:block;-webkit-animation:fade 1s;animation:fade 1s}@keyframes fade{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]     ng2-st-tbody-custom a.ng2-smart-action.ng2-smart-action-custom-custom:hover{color:#1e90ff;cursor:pointer}"]}),e})(),children:[{path:"dashboard",component:et},{path:"profile",loadChildren:()=>i.e(11).then(i.bind(null,"723k")).then(e=>e.ProfileModule)},{path:"storage",loadChildren:()=>Promise.resolve().then(i.bind(null,"RPbl")).then(e=>e.StorageModule)},{path:"trash",loadChildren:()=>Promise.resolve().then(i.bind(null,"5IJp")).then(e=>e.TrashModule)},{path:"",redirectTo:"/auth/redirect",pathMatch:"full"},{path:"**",component:tt}]}];let st=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Ob({type:e}),e.\u0275inj=h.Nb({imports:[[m.g.forChild(nt)],m.g]}),e})();var at=i("RPbl");let ot=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Ob({type:e}),e.\u0275inj=h.Nb({providers:[r.a,s.Mb,c.a,o.a,l.a],imports:[[st,d.a,s.fb,s.w,p,g.TrashModule,at.StorageModule,s.E,s.Ib,s.S,n.e,s.P,s.U,s.nb,s.lb,a.c]]}),e})()}}]);